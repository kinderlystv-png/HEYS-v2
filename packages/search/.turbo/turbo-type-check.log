
> @heys/search@14.0.0 type-check /Users/poplavskijanton/HEYS-v2/packages/search
> tsc --noEmit

[96msrc/index.ts[0m:[93m112[0m:[93m44[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m112[0m     for (let i = 0; i <= str1.length; i++) matrix[0][i] = i;
[7m   [0m [91m                                           ~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m113[0m:[93m44[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m113[0m     for (let j = 0; j <= str2.length; j++) matrix[j][0] = j;
[7m   [0m [91m                                           ~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m118[0m:[93m9[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m118[0m         matrix[j][i] = Math.min(
[7m   [0m [91m        ~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m119[0m:[93m11[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m119[0m           matrix[j][i - 1] + 1, // deletion
[7m   [0m [91m          ~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m120[0m:[93m11[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m120[0m           matrix[j - 1][i] + 1, // insertion
[7m   [0m [91m          ~~~~~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m121[0m:[93m11[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m121[0m           matrix[j - 1][i - 1] + indicator, // substitution
[7m   [0m [91m          ~~~~~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m126[0m:[93m12[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

[7m126[0m     return matrix[str2.length][str1.length];
[7m   [0m [91m           ~~~~~~~~~~~~~~~~~~~[0m

[96msrc/index.ts[0m:[93m204[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType 'SearchResult<unknown>' is not assignable to type 'SearchResult<TItem>'.
  Type 'unknown' is not assignable to type 'TItem'.
    'TItem' could be instantiated with an arbitrary type which could be unrelated to 'unknown'.

[7m204[0m         return cached;
[7m   [0m [91m        ~~~~~~[0m

[96msrc/index.ts[0m:[93m336[0m:[93m5[0m - [91merror[0m[90m TS2322: [0mType 'SearchResult<T>' is not assignable to type 'SearchResult<TItem>'.
  Type 'T' is not assignable to type 'TItem'.
    'TItem' could be instantiated with an arbitrary type which could be unrelated to 'T'.

[7m336[0m     return cached.result;
[7m   [0m [91m    ~~~~~~[0m

  [96msrc/index.ts[0m:[93m31[0m:[93m32[0m
    [7m31[0m export class SmartSearchEngine<T = any> {
    [7m  [0m [96m                               ~~~~~~~[0m
    This type parameter might need an `extends TItem` constraint.

[96msrc/index.ts[0m:[93m341[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType 'SearchResult<TItem>' is not assignable to type 'SearchResult<T>'.
  Type 'TItem' is not assignable to type 'T'.
    'T' could be instantiated with an arbitrary type which could be unrelated to 'TItem'.

[7m341[0m       result,
[7m   [0m [91m      ~~~~~~[0m

  [96msrc/index.ts[0m:[93m339[0m:[93m23[0m
    [7m339[0m   private cacheResult<TItem>(query: string, result: SearchResult<TItem>): void {
    [7m   [0m [96m                      ~~~~~[0m
    This type parameter might need an `extends T` constraint.
  [96msrc/index.ts[0m:[93m33[0m:[93m37[0m
    [7m33[0m   private cache = new Map<string, { result: SearchResult<T>; timestamp: number }>();
    [7m  [0m [96m                                    ~~~~~~[0m
    The expected type comes from property 'result' which is declared here on type '{ result: SearchResult<T>; timestamp: number; }'

[96msrc/modern.ts[0m:[93m32[0m:[93m13[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m32[0m   matches?: Fuse.FuseResultMatch[];
[7m  [0m [91m            ~~~~[0m

[96msrc/modern.ts[0m:[93m64[0m:[93m31[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m64[0m   private defaultFuseOptions: Fuse.IFuseOptions<SearchItem> = {
[7m  [0m [91m                              ~~~~[0m

[96msrc/modern.ts[0m:[93m79[0m:[93m33[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m79[0m   constructor(options?: Partial<Fuse.IFuseOptions<SearchItem>>) {
[7m  [0m [91m                                ~~~~[0m

[96msrc/modern.ts[0m:[93m143[0m:[93m29[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m143[0m     customOptions?: Partial<Fuse.IFuseOptions<T>>,
[7m   [0m [91m                            ~~~~[0m

[96msrc/modern.ts[0m:[93m159[0m:[93m44[0m - [91merror[0m[90m TS2345: [0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.

[7m159[0m         const typeIndex = this.indices.get(types[0]);
[7m   [0m [91m                                           ~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m173[0m:[93m9[0m - [91merror[0m[90m TS2375: [0mType '{ q: string; limit: number; offset: number; sortBy: "relevance" | "date" | "title"; sortOrder: "asc" | "desc"; type?: "food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | ... 4 more ... | "content")[] | undefined; category?: string | undefined; tags?: string[] | undefined; }' is not assignable to type 'SearchQuery' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'type' are incompatible.
    Type '"food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | "workout" | "recipe" | "exercise" | "user" | "content")[] | undefined' is not assignable to type '"food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | "workout" | "recipe" | "exercise" | "user" | "content")[]'.
      Type 'undefined' is not assignable to type '"food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | "workout" | "recipe" | "exercise" | "user" | "content")[]'.

[7m173[0m         query: validatedQuery,
[7m   [0m [91m        ~~~~~[0m

  [96msrc/modern.ts[0m:[93m39[0m:[93m3[0m
    [7m39[0m   query: SearchQuery;
    [7m  [0m [96m  ~~~~~[0m
    The expected type comes from property 'query' which is declared here on type 'SearchResponse<T>'

[96msrc/modern.ts[0m:[93m228[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType '{ item: T; score: number; matches: readonly FuseResultMatch[] | undefined; highlighted: Partial<T>; }[]' is not assignable to type 'SearchResult<T>[]'.
  Type '{ item: T; score: number; matches: readonly FuseResultMatch[] | undefined; highlighted: Partial<T>; }' is not assignable to type 'SearchResult<T>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
    Types of property 'matches' are incompatible.
      Type 'readonly FuseResultMatch[] | undefined' is not assignable to type 'Fuse.FuseResultMatch[]'.
        Type 'undefined' is not assignable to type 'Fuse.FuseResultMatch[]'.

[7m228[0m     const results: SearchResult<T>[] = paginatedResults.map((fuseResult) => ({
[7m   [0m [91m          ~~~~~~~[0m

[96msrc/modern.ts[0m:[93m232[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type 'readonly FuseResultMatch[] | undefined' is not assignable to parameter of type 'Fuse.FuseResultMatch[] | undefined'.
  The type 'readonly FuseResultMatch[]' is 'readonly' and cannot be assigned to the mutable type 'Fuse.FuseResultMatch[]'.

[7m232[0m       highlighted: this.highlightMatches(fuseResult.item, fuseResult.matches) as Partial<T>,
[7m   [0m [91m                                                          ~~~~~~~~~~~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m241[0m:[93m7[0m - [91merror[0m[90m TS2375: [0mType '{ q: string; limit: number; offset: number; sortBy: "relevance" | "date" | "title"; sortOrder: "asc" | "desc"; type?: "food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | ... 4 more ... | "content")[] | undefined; category?: string | undefined; tags?: string[] | undefined; }' is not assignable to type 'SearchQuery' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'type' are incompatible.
    Type '"food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | "workout" | "recipe" | "exercise" | "user" | "content")[] | undefined' is not assignable to type '"food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | "workout" | "recipe" | "exercise" | "user" | "content")[]'.
      Type 'undefined' is not assignable to type '"food" | "workout" | "recipe" | "exercise" | "user" | "content" | ("food" | "workout" | "recipe" | "exercise" | "user" | "content")[]'.

[7m241[0m       query: validatedQuery,
[7m   [0m [91m      ~~~~~[0m

  [96msrc/modern.ts[0m:[93m39[0m:[93m3[0m
    [7m39[0m   query: SearchQuery;
    [7m  [0m [96m  ~~~~~[0m
    The expected type comes from property 'query' which is declared here on type 'SearchResponse<T>'

[96msrc/modern.ts[0m:[93m297[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'size' does not exist on type 'FuseIndex<SearchItem>'.

[7m297[0m         stats[type] = index.getIndex().size;
[7m   [0m [91m                                       ~~~~[0m

[96msrc/modern.ts[0m:[93m312[0m:[93m14[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m312[0m     results: Fuse.FuseResult<SearchItem>[],
[7m   [0m [91m             ~~~~[0m

[96msrc/modern.ts[0m:[93m315[0m:[93m6[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m315[0m   ): Fuse.FuseResult<SearchItem>[] {
[7m   [0m [91m     ~~~~[0m

[96msrc/modern.ts[0m:[93m333[0m:[93m15[0m - [91merror[0m[90m TS2702: [0m'Fuse' only refers to a type, but is being used as a namespace here.

[7m333[0m     matches?: Fuse.FuseResultMatch[],
[7m   [0m [91m              ~~~~[0m

[96msrc/modern.ts[0m:[93m371[0m:[93m7[0m - [91merror[0m[90m TS18048: [0m'facets.type' is possibly 'undefined'.

[7m371[0m       facets.type.set(item.type, (facets.type.get(item.type) || 0) + 1);
[7m   [0m [91m      ~~~~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m371[0m:[93m35[0m - [91merror[0m[90m TS18048: [0m'facets.type' is possibly 'undefined'.

[7m371[0m       facets.type.set(item.type, (facets.type.get(item.type) || 0) + 1);
[7m   [0m [91m                                  ~~~~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m375[0m:[93m9[0m - [91merror[0m[90m TS18048: [0m'facets.category' is possibly 'undefined'.

[7m375[0m         facets.category.set(item.category, (facets.category.get(item.category) || 0) + 1);
[7m   [0m [91m        ~~~~~~~~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m375[0m:[93m45[0m - [91merror[0m[90m TS18048: [0m'facets.category' is possibly 'undefined'.

[7m375[0m         facets.category.set(item.category, (facets.category.get(item.category) || 0) + 1);
[7m   [0m [91m                                            ~~~~~~~~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m381[0m:[93m11[0m - [91merror[0m[90m TS18048: [0m'facets.tags' is possibly 'undefined'.

[7m381[0m           facets.tags.set(tag, (facets.tags.get(tag) || 0) + 1);
[7m   [0m [91m          ~~~~~~~~~~~[0m

[96msrc/modern.ts[0m:[93m381[0m:[93m33[0m - [91merror[0m[90m TS18048: [0m'facets.tags' is possibly 'undefined'.

[7m381[0m           facets.tags.set(tag, (facets.tags.get(tag) || 0) + 1);
[7m   [0m [91m                                ~~~~~~~~~~~[0m


Found 29 errors in 2 files.

Errors  Files
    10  src/index.ts[90m:112[0m
    19  src/modern.ts[90m:32[0m
[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 2.[39m
