{"version":3,"sources":["../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/lib/err-helpers.js","../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/lib/err-proto.js","../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/lib/err.js","../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/lib/err-with-cause.js","../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/lib/req.js","../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/lib/res.js","../../../node_modules/.pnpm/pino-std-serializers@7.0.0/node_modules/pino-std-serializers/index.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/caller.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/validator.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/rx.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/parse.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/redactor.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/modifiers.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/restorer.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/lib/state.js","../../../node_modules/.pnpm/fast-redact@3.5.0/node_modules/fast-redact/index.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/symbols.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/redaction.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/time.js","../../../node_modules/.pnpm/quick-format-unescaped@4.0.4/node_modules/quick-format-unescaped/index.js","../../../node_modules/.pnpm/atomic-sleep@1.0.0/node_modules/atomic-sleep/index.js","../../../node_modules/.pnpm/sonic-boom@4.2.0/node_modules/sonic-boom/index.js","../../../node_modules/.pnpm/on-exit-leak-free@2.1.2/node_modules/on-exit-leak-free/index.js","../../../node_modules/.pnpm/thread-stream@3.1.0/node_modules/thread-stream/package.json","../../../node_modules/.pnpm/thread-stream@3.1.0/node_modules/thread-stream/lib/wait.js","../../../node_modules/.pnpm/thread-stream@3.1.0/node_modules/thread-stream/lib/indexes.js","../../../node_modules/.pnpm/thread-stream@3.1.0/node_modules/thread-stream/index.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/transport.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/tools.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/constants.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/levels.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/meta.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/proto.js","../../../node_modules/.pnpm/safe-stable-stringify@2.5.0/node_modules/safe-stable-stringify/index.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/lib/multistream.js","../../../node_modules/.pnpm/pino@9.9.4/node_modules/pino/pino.js","../../logger/src/index.ts","../../../levels.config.js","../../logger/src/config.ts","../../logger/src/transports.ts","../src/index.ts"],"names":["require_err_helpers","__commonJSMin","exports","module","isErrorLike","err","getErrorCause","cause","causeResult","_stackWithCauses","seen","stack","stackWithCauses","_messageWithCauses","skip","message","skipIfVErrorStyleCause","messageWithCauses","require_err_proto","rawSymbol","pinoErrProto","val","require_err","errSerializer","pinoErrorSymbols","toString","_err","key","require_err_with_cause","errWithCauseSerializer","require_req","mapHttpRequest","reqSerializer","pinoReqProto","req","connection","_req","path","require_res","mapHttpResponse","resSerializer","pinoResProto","res","_res","require_pino_std_serializers","reqSerializers","resSerializers","customSerializer","require_caller","noOpPrepareStackTrace","_","originalPrepare","entries","fileNames","entry","require_validator","validator","opts","ERR_PATHS_MUST_BE_STRINGS","ERR_INVALID_PATH","s","paths","expr","require_rx","require_parse","rx","parse","wildcards","wcLen","secret","o","strPath","ix","p","leadingBracket","star","before","beforeStr","after","nested","require_redactor","redactor","serialize","strict","isCensorFct","censorFctTakesPath","state","redact","strictImpl","redactTmpl","dynamicRedactTmpl","resultTmpl","escPath","arrPath","delim","hops","match","index","input","existence","circularDetection","censorArgs","hasWildcards","require_modifiers","groupRedact","groupRestore","nestedRedact","nestedRestore","keys","values","target","length","k","censor","get","keysLength","pathLength","pathWithKey","i","instructions","value","current","store","ns","specialSet","has","obj","prop","afterPath","afterPathLen","lastPathIndex","originalKey","n","nv","ov","oov","wc","kIsWc","wcov","consecutive","level","depth","redactPathCurrent","tree","wcKeys","j","wck","node","iterateNthLevel","rv","restoreInstr","l","parent","child","require_restorer","restorer","resetters","resetTmpl","restoreTmpl","circle","reset","clear","require_state","compileRestore","builder","require_fast_redact","validate","noop","DEFAULT_CENSOR","fastRedact","remove","require_symbols","setLevelSym","getLevelSym","levelValSym","levelCompSym","useLevelLabelsSym","useOnlyCustomLevelsSym","mixinSym","lsCacheSym","chindingsSym","asJsonSym","writeSym","redactFmtSym","timeSym","timeSliceIndexSym","streamSym","stringifySym","stringifySafeSym","stringifiersSym","endSym","formatOptsSym","messageKeySym","errorKeySym","nestedKeySym","nestedKeyStrSym","mixinMergeStrategySym","msgPrefixSym","wildcardFirstSym","serializersSym","formattersSym","hooksSym","needsMetadataGsym","require_redaction","CENSOR","redaction","handle","shape","str","first","next","nextPath","result","topCensor","args","wrappedCensor","require_time","nullTime","epochTime","unixTime","isoTime","require_quick_format_unescaped","tryStringify","format","f","ss","offset","len","objects","argLen","a","lastPos","flen","type","require_atomic_sleep","sleep","ms","nil","require_sonic_boom","fs","EventEmitter","inherits","assert","BUSY_WRITE_TIMEOUT","kEmptyBuffer","MAX_WRITE","kContentModeBuffer","kContentModeUtf8","major","minor","kCopyBuffer","openFile","file","sonic","fileOpened","fd","reopening","flags","mode","SonicBoom","dest","minLength","maxLength","maxWrite","periodicFlush","sync","append","mkdir","retryEAGAIN","fsync","contentMode","fsWriteSync","fsWrite","writeBuffer","flushBuffer","flushBufferSync","actualWriteBuffer","write","flush","flushSync","actualWrite","releasedBufObj","releaseWritingBuf","actualClose","emitDrain","name","writingBuf","mergeBuf","bufs","data","lens","callFlushCallbackOnDrain","cb","onDrain","onError","error","buf","release","written","closeWrapped","done","require_on_exit_leak_free","refs","functions","onExit","onBeforeExit","registry","ensureRegistry","install","event","uninstall","callRefs","ref","fn","_register","register","registerBeforeExit","unregister","_obj","require_package","require_wait","wait","expected","timeout","max","prior","check","backoff","waitDiff","require_indexes","require_thread_stream","version","Worker","join","pathToFileURL","WRITE_INDEX","READ_INDEX","buffer","kImpl","MAX_STRING","FakeWeakRef","FakeFinalizationRegistry","FinalizationRegistry","WeakRef","worker","createWorker","stream","filename","workerData","toExecute","onWorkerMessage","onWorkerExit","drain","nextFlush","writeIndex","leftover","end","toWrite","toWriteBytes","destroy","msg","code","ThreadStream","transferList","writeSync","readIndex","spins","require_transport","createRequire","getCallers","isAbsolute","sep","setupOnExit","autoEnd","buildStream","workerOpts","onReady","transport","fullOptions","pipeline","targets","levels","dedupe","caller","options","callers","bundlerOverrides","fixTarget","t","origin","filePath","context","require_tools","isMainThread","genLog","hook","LOG","formatParams","asString","last","found","point","asJson","num","time","stringify","stringifySafe","stringifiers","chindings","serializers","formatters","messageKey","errorKey","wildcardStringifier","propStr","stringifier","strKey","msgStr","asChindings","instance","bindings","formatter","hasBeenTampered","buildSafeSonicBoom","filterBrokenPipe","eventName","createArgsNormalizer","defaultOptions","customLevels","enabled","onChild","stringifySafeFn","buildFormatters","log","normalizeDestFileDescriptor","destination","require_constants","DEFAULT_LEVELS","SORTING_ORDER","require_levels","levelMethods","logFatal","nums","initialLsCache","genLsCache","labels","cache","label","isStandardLevel","useOnlyCustomLevels","setLevel","preLevelVal","levelVal","useOnlyCustomLevelsVal","levelComparison","getLevel","isLevelEnabled","logLevel","logLevelVal","compareLevel","direction","genLevelComparison","mappings","customNums","assertDefaultLevelFound","defaultLevel","assertNoLevelCollisions","assertLevelComparison","require_meta","require_proto","parsedChindingsSym","constructor","prototype","setBindings","lvl","resetChildingsFormatter","parentSymbols","ks","bk","bindingsSymbols","bi","bks","formatOpts","childLevel","chindingsJson","bindingsFromJson","newBindings","defaultMixinMergeStrategy","mergeObject","mixinObject","mixin","mixinMergeStrategy","streamWriteHook","require_safe_stable_stringify","hasOwnProperty","configure","strEscapeSequencesRegExp","strEscape","sort","array","comparator","currentValue","position","typedArrayPrototypeGetSymbolToStringTag","isTypedArrayWithEntries","stringifyTypedArray","separator","maximumBreadth","whitespace","getCircularValueOption","circularValue","getDeterministicOption","getBooleanOption","getPositiveIntegerOption","getItemCount","number","getUniqueReplacerSet","replacerArray","replacerSet","getStrictOption","fail","bigint","deterministic","maximumDepth","stringifyFnReplacer","replacer","spacer","indentation","originalIndentation","maximumValuesToStringify","tmp","removedKeys","keyLength","maximumPropertiesToStringify","stringifyArrayReplacer","stringifyIndent","stringifySimple","hasLength","space","require_multistream","metadata","DEFAULT_INFO_LEVEL","multistream","streamsArray","streamLevels","add","emit","clone","streams","recordedLevel","initLoopVar","checkLoopVar","adjustLoopVar","lastTime","lastMsg","lastObj","lastLogger","isStream","stream_","dest_","compareByLevel","id","b","require_pino","os","stdSerializers","proto","symbols","pid","hostname","defaultErrorSerializer","normalize","pino","crlf","timestamp","nestedKey","base","hooks","depthLimit","edgeLimit","msgPrefix","allFormatters","stringifyFn","coreChindings","timeSliceIndex","levelCompFunc","import_pino","LOG_LEVELS","LEVEL_ALIASES","LEVEL_COLORS","LEVEL_VALUES","LEVEL_METHODS","ENVIRONMENT_CONFIGS","LEVEL_FORMATTERS","meta","_meta","LEVEL_PREDICATES","ROTATION_CONFIG","DEFAULT_CONFIG","currentLevel","levelValue","normalized","defaultConfig","validateConfig","config","mergedConfig","LogLevel","resolveStreamLevel","createTransports","streamLevel","ensureLogDirectory","fileLevel","networkLevel","logPath","createFormatters","object","createSerializers","createAdvancedLogger","validatedConfig","logger","trackEvent"],"mappings":"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","sourcesContent":["'use strict'\n\n// **************************************************************\n// * Code initially copied/adapted from \"pony-cause\" npm module *\n// * Please upstream improvements there                         *\n// **************************************************************\n\nconst isErrorLike = (err) => {\n  return err && typeof err.message === 'string'\n}\n\n/**\n * @param {Error|{ cause?: unknown|(()=>err)}} err\n * @returns {Error|Object|undefined}\n */\nconst getErrorCause = (err) => {\n  if (!err) return\n\n  /** @type {unknown} */\n  // @ts-ignore\n  const cause = err.cause\n\n  // VError / NError style causes\n  if (typeof cause === 'function') {\n    // @ts-ignore\n    const causeResult = err.cause()\n\n    return isErrorLike(causeResult)\n      ? causeResult\n      : undefined\n  } else {\n    return isErrorLike(cause)\n      ? cause\n      : undefined\n  }\n}\n\n/**\n * Internal method that keeps a track of which error we have already added, to avoid circular recursion\n *\n * @private\n * @param {Error} err\n * @param {Set<Error>} seen\n * @returns {string}\n */\nconst _stackWithCauses = (err, seen) => {\n  if (!isErrorLike(err)) return ''\n\n  const stack = err.stack || ''\n\n  // Ensure we don't go circular or crazily deep\n  if (seen.has(err)) {\n    return stack + '\\ncauses have become circular...'\n  }\n\n  const cause = getErrorCause(err)\n\n  if (cause) {\n    seen.add(err)\n    return (stack + '\\ncaused by: ' + _stackWithCauses(cause, seen))\n  } else {\n    return stack\n  }\n}\n\n/**\n * @param {Error} err\n * @returns {string}\n */\nconst stackWithCauses = (err) => _stackWithCauses(err, new Set())\n\n/**\n * Internal method that keeps a track of which error we have already added, to avoid circular recursion\n *\n * @private\n * @param {Error} err\n * @param {Set<Error>} seen\n * @param {boolean} [skip]\n * @returns {string}\n */\nconst _messageWithCauses = (err, seen, skip) => {\n  if (!isErrorLike(err)) return ''\n\n  const message = skip ? '' : (err.message || '')\n\n  // Ensure we don't go circular or crazily deep\n  if (seen.has(err)) {\n    return message + ': ...'\n  }\n\n  const cause = getErrorCause(err)\n\n  if (cause) {\n    seen.add(err)\n\n    // @ts-ignore\n    const skipIfVErrorStyleCause = typeof err.cause === 'function'\n\n    return (message +\n      (skipIfVErrorStyleCause ? '' : ': ') +\n      _messageWithCauses(cause, seen, skipIfVErrorStyleCause))\n  } else {\n    return message\n  }\n}\n\n/**\n * @param {Error} err\n * @returns {string}\n */\nconst messageWithCauses = (err) => _messageWithCauses(err, new Set())\n\nmodule.exports = {\n  isErrorLike,\n  getErrorCause,\n  stackWithCauses,\n  messageWithCauses\n}\n","'use strict'\n\nconst seen = Symbol('circular-ref-tag')\nconst rawSymbol = Symbol('pino-raw-err-ref')\n\nconst pinoErrProto = Object.create({}, {\n  type: {\n    enumerable: true,\n    writable: true,\n    value: undefined\n  },\n  message: {\n    enumerable: true,\n    writable: true,\n    value: undefined\n  },\n  stack: {\n    enumerable: true,\n    writable: true,\n    value: undefined\n  },\n  aggregateErrors: {\n    enumerable: true,\n    writable: true,\n    value: undefined\n  },\n  raw: {\n    enumerable: false,\n    get: function () {\n      return this[rawSymbol]\n    },\n    set: function (val) {\n      this[rawSymbol] = val\n    }\n  }\n})\nObject.defineProperty(pinoErrProto, rawSymbol, {\n  writable: true,\n  value: {}\n})\n\nmodule.exports = {\n  pinoErrProto,\n  pinoErrorSymbols: {\n    seen,\n    rawSymbol\n  }\n}\n","'use strict'\n\nmodule.exports = errSerializer\n\nconst { messageWithCauses, stackWithCauses, isErrorLike } = require('./err-helpers')\nconst { pinoErrProto, pinoErrorSymbols } = require('./err-proto')\nconst { seen } = pinoErrorSymbols\n\nconst { toString } = Object.prototype\n\nfunction errSerializer (err) {\n  if (!isErrorLike(err)) {\n    return err\n  }\n\n  err[seen] = undefined // tag to prevent re-looking at this\n  const _err = Object.create(pinoErrProto)\n  _err.type = toString.call(err.constructor) === '[object Function]'\n    ? err.constructor.name\n    : err.name\n  _err.message = messageWithCauses(err)\n  _err.stack = stackWithCauses(err)\n\n  if (Array.isArray(err.errors)) {\n    _err.aggregateErrors = err.errors.map(err => errSerializer(err))\n  }\n\n  for (const key in err) {\n    if (_err[key] === undefined) {\n      const val = err[key]\n      if (isErrorLike(val)) {\n        // We append cause messages and stacks to _err, therefore skipping causes here\n        if (key !== 'cause' && !Object.prototype.hasOwnProperty.call(val, seen)) {\n          _err[key] = errSerializer(val)\n        }\n      } else {\n        _err[key] = val\n      }\n    }\n  }\n\n  delete err[seen] // clean up tag in case err is serialized again later\n  _err.raw = err\n  return _err\n}\n","'use strict'\n\nmodule.exports = errWithCauseSerializer\n\nconst { isErrorLike } = require('./err-helpers')\nconst { pinoErrProto, pinoErrorSymbols } = require('./err-proto')\nconst { seen } = pinoErrorSymbols\n\nconst { toString } = Object.prototype\n\nfunction errWithCauseSerializer (err) {\n  if (!isErrorLike(err)) {\n    return err\n  }\n\n  err[seen] = undefined // tag to prevent re-looking at this\n  const _err = Object.create(pinoErrProto)\n  _err.type = toString.call(err.constructor) === '[object Function]'\n    ? err.constructor.name\n    : err.name\n  _err.message = err.message\n  _err.stack = err.stack\n\n  if (Array.isArray(err.errors)) {\n    _err.aggregateErrors = err.errors.map(err => errWithCauseSerializer(err))\n  }\n\n  if (isErrorLike(err.cause) && !Object.prototype.hasOwnProperty.call(err.cause, seen)) {\n    _err.cause = errWithCauseSerializer(err.cause)\n  }\n\n  for (const key in err) {\n    if (_err[key] === undefined) {\n      const val = err[key]\n      if (isErrorLike(val)) {\n        if (!Object.prototype.hasOwnProperty.call(val, seen)) {\n          _err[key] = errWithCauseSerializer(val)\n        }\n      } else {\n        _err[key] = val\n      }\n    }\n  }\n\n  delete err[seen] // clean up tag in case err is serialized again later\n  _err.raw = err\n  return _err\n}\n","'use strict'\n\nmodule.exports = {\n  mapHttpRequest,\n  reqSerializer\n}\n\nconst rawSymbol = Symbol('pino-raw-req-ref')\nconst pinoReqProto = Object.create({}, {\n  id: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  method: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  url: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  query: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  params: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  headers: {\n    enumerable: true,\n    writable: true,\n    value: {}\n  },\n  remoteAddress: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  remotePort: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  raw: {\n    enumerable: false,\n    get: function () {\n      return this[rawSymbol]\n    },\n    set: function (val) {\n      this[rawSymbol] = val\n    }\n  }\n})\nObject.defineProperty(pinoReqProto, rawSymbol, {\n  writable: true,\n  value: {}\n})\n\nfunction reqSerializer (req) {\n  // req.info is for hapi compat.\n  const connection = req.info || req.socket\n  const _req = Object.create(pinoReqProto)\n  _req.id = (typeof req.id === 'function' ? req.id() : (req.id || (req.info ? req.info.id : undefined)))\n  _req.method = req.method\n  // req.originalUrl is for expressjs compat.\n  if (req.originalUrl) {\n    _req.url = req.originalUrl\n  } else {\n    const path = req.path\n    // path for safe hapi compat.\n    _req.url = typeof path === 'string' ? path : (req.url ? req.url.path || req.url : undefined)\n  }\n\n  if (req.query) {\n    _req.query = req.query\n  }\n\n  if (req.params) {\n    _req.params = req.params\n  }\n\n  _req.headers = req.headers\n  _req.remoteAddress = connection && connection.remoteAddress\n  _req.remotePort = connection && connection.remotePort\n  // req.raw is  for hapi compat/equivalence\n  _req.raw = req.raw || req\n  return _req\n}\n\nfunction mapHttpRequest (req) {\n  return {\n    req: reqSerializer(req)\n  }\n}\n","'use strict'\n\nmodule.exports = {\n  mapHttpResponse,\n  resSerializer\n}\n\nconst rawSymbol = Symbol('pino-raw-res-ref')\nconst pinoResProto = Object.create({}, {\n  statusCode: {\n    enumerable: true,\n    writable: true,\n    value: 0\n  },\n  headers: {\n    enumerable: true,\n    writable: true,\n    value: ''\n  },\n  raw: {\n    enumerable: false,\n    get: function () {\n      return this[rawSymbol]\n    },\n    set: function (val) {\n      this[rawSymbol] = val\n    }\n  }\n})\nObject.defineProperty(pinoResProto, rawSymbol, {\n  writable: true,\n  value: {}\n})\n\nfunction resSerializer (res) {\n  const _res = Object.create(pinoResProto)\n  _res.statusCode = res.headersSent ? res.statusCode : null\n  _res.headers = res.getHeaders ? res.getHeaders() : res._headers\n  _res.raw = res\n  return _res\n}\n\nfunction mapHttpResponse (res) {\n  return {\n    res: resSerializer(res)\n  }\n}\n","'use strict'\n\nconst errSerializer = require('./lib/err')\nconst errWithCauseSerializer = require('./lib/err-with-cause')\nconst reqSerializers = require('./lib/req')\nconst resSerializers = require('./lib/res')\n\nmodule.exports = {\n  err: errSerializer,\n  errWithCause: errWithCauseSerializer,\n  mapHttpRequest: reqSerializers.mapHttpRequest,\n  mapHttpResponse: resSerializers.mapHttpResponse,\n  req: reqSerializers.reqSerializer,\n  res: resSerializers.resSerializer,\n\n  wrapErrorSerializer: function wrapErrorSerializer (customSerializer) {\n    if (customSerializer === errSerializer) return customSerializer\n    return function wrapErrSerializer (err) {\n      return customSerializer(errSerializer(err))\n    }\n  },\n\n  wrapRequestSerializer: function wrapRequestSerializer (customSerializer) {\n    if (customSerializer === reqSerializers.reqSerializer) return customSerializer\n    return function wrappedReqSerializer (req) {\n      return customSerializer(reqSerializers.reqSerializer(req))\n    }\n  },\n\n  wrapResponseSerializer: function wrapResponseSerializer (customSerializer) {\n    if (customSerializer === resSerializers.resSerializer) return customSerializer\n    return function wrappedResSerializer (res) {\n      return customSerializer(resSerializers.resSerializer(res))\n    }\n  }\n}\n","'use strict'\n\nfunction noOpPrepareStackTrace (_, stack) {\n  return stack\n}\n\nmodule.exports = function getCallers () {\n  const originalPrepare = Error.prepareStackTrace\n  Error.prepareStackTrace = noOpPrepareStackTrace\n  const stack = new Error().stack\n  Error.prepareStackTrace = originalPrepare\n\n  if (!Array.isArray(stack)) {\n    return undefined\n  }\n\n  const entries = stack.slice(2)\n\n  const fileNames = []\n\n  for (const entry of entries) {\n    if (!entry) {\n      continue\n    }\n\n    fileNames.push(entry.getFileName())\n  }\n\n  return fileNames\n}\n","'use strict'\n\nmodule.exports = validator\n\nfunction validator (opts = {}) {\n  const {\n    ERR_PATHS_MUST_BE_STRINGS = () => 'fast-redact - Paths must be (non-empty) strings',\n    ERR_INVALID_PATH = (s) => `fast-redact  Invalid path (${s})`\n  } = opts\n\n  return function validate ({ paths }) {\n    paths.forEach((s) => {\n      if (typeof s !== 'string') {\n        throw Error(ERR_PATHS_MUST_BE_STRINGS())\n      }\n      try {\n        if (//.test(s)) throw Error()\n        const expr = (s[0] === '[' ? '' : '.') + s.replace(/^\\*/, '').replace(/\\.\\*/g, '.').replace(/\\[\\*\\]/g, '[]')\n        if (/\\n|\\r|;/.test(expr)) throw Error()\n        if (/\\/\\*/.test(expr)) throw Error()\n        /* eslint-disable-next-line */\n        Function(`\n            'use strict'\n            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });\n            const  = null;\n            o${expr}\n            if ([o${expr}].length !== 1) throw Error()`)()\n      } catch (e) {\n        throw Error(ERR_INVALID_PATH(s))\n      }\n    })\n  }\n}\n","'use strict'\n\nmodule.exports = /[^.[\\]]+|\\[((?:.)*?)\\]/g\n\n/*\nRegular expression explanation:\n\nAlt 1: /[^.[\\]]+/ - Match one or more characters that are *not* a dot (.)\n                    opening square bracket ([) or closing square bracket (])\n\nAlt 2: /\\[((?:.)*?)\\]/ - If the char IS dot or square bracket, then create a capture\n                         group (which will be capture group $1) that matches anything\n                         within square brackets. Expansion is lazy so it will\n                         stop matching as soon as the first closing bracket is met `]`\n                         (rather than continuing to match until the final closing bracket).\n*/\n","'use strict'\n\nconst rx = require('./rx')\n\nmodule.exports = parse\n\nfunction parse ({ paths }) {\n  const wildcards = []\n  var wcLen = 0\n  const secret = paths.reduce(function (o, strPath, ix) {\n    var path = strPath.match(rx).map((p) => p.replace(/'|\"|`/g, ''))\n    const leadingBracket = strPath[0] === '['\n    path = path.map((p) => {\n      if (p[0] === '[') return p.substr(1, p.length - 2)\n      else return p\n    })\n    const star = path.indexOf('*')\n    if (star > -1) {\n      const before = path.slice(0, star)\n      const beforeStr = before.join('.')\n      const after = path.slice(star + 1, path.length)\n      const nested = after.length > 0\n      wcLen++\n      wildcards.push({\n        before,\n        beforeStr,\n        after,\n        nested\n      })\n    } else {\n      o[strPath] = {\n        path: path,\n        val: undefined,\n        precensored: false,\n        circle: '',\n        escPath: JSON.stringify(strPath),\n        leadingBracket: leadingBracket\n      }\n    }\n    return o\n  }, {})\n\n  return { wildcards, wcLen, secret }\n}\n","'use strict'\n\nconst rx = require('./rx')\n\nmodule.exports = redactor\n\nfunction redactor ({ secret, serialize, wcLen, strict, isCensorFct, censorFctTakesPath }, state) {\n  /* eslint-disable-next-line */\n  const redact = Function('o', `\n    if (typeof o !== 'object' || o == null) {\n      ${strictImpl(strict, serialize)}\n    }\n    const { censor, secret } = this\n    const originalSecret = {}\n    const secretKeys = Object.keys(secret)\n    for (var i = 0; i < secretKeys.length; i++) {\n      originalSecret[secretKeys[i]] = secret[secretKeys[i]]\n    }\n\n    ${redactTmpl(secret, isCensorFct, censorFctTakesPath)}\n    this.compileRestore()\n    ${dynamicRedactTmpl(wcLen > 0, isCensorFct, censorFctTakesPath)}\n    this.secret = originalSecret\n    ${resultTmpl(serialize)}\n  `).bind(state)\n\n  redact.state = state\n\n  if (serialize === false) {\n    redact.restore = (o) => state.restore(o)\n  }\n\n  return redact\n}\n\nfunction redactTmpl (secret, isCensorFct, censorFctTakesPath) {\n  return Object.keys(secret).map((path) => {\n    const { escPath, leadingBracket, path: arrPath } = secret[path]\n    const skip = leadingBracket ? 1 : 0\n    const delim = leadingBracket ? '' : '.'\n    const hops = []\n    var match\n    while ((match = rx.exec(path)) !== null) {\n      const [ , ix ] = match\n      const { index, input } = match\n      if (index > skip) hops.push(input.substring(0, index - (ix ? 0 : 1)))\n    }\n    var existence = hops.map((p) => `o${delim}${p}`).join(' && ')\n    if (existence.length === 0) existence += `o${delim}${path} != null`\n    else existence += ` && o${delim}${path} != null`\n\n    const circularDetection = `\n      switch (true) {\n        ${hops.reverse().map((p) => `\n          case o${delim}${p} === censor:\n            secret[${escPath}].circle = ${JSON.stringify(p)}\n            break\n        `).join('\\n')}\n      }\n    `\n\n    const censorArgs = censorFctTakesPath\n      ? `val, ${JSON.stringify(arrPath)}`\n      : `val`\n\n    return `\n      if (${existence}) {\n        const val = o${delim}${path}\n        if (val === censor) {\n          secret[${escPath}].precensored = true\n        } else {\n          secret[${escPath}].val = val\n          o${delim}${path} = ${isCensorFct ? `censor(${censorArgs})` : 'censor'}\n          ${circularDetection}\n        }\n      }\n    `\n  }).join('\\n')\n}\n\nfunction dynamicRedactTmpl (hasWildcards, isCensorFct, censorFctTakesPath) {\n  return hasWildcards === true ? `\n    {\n      const { wildcards, wcLen, groupRedact, nestedRedact } = this\n      for (var i = 0; i < wcLen; i++) {\n        const { before, beforeStr, after, nested } = wildcards[i]\n        if (nested === true) {\n          secret[beforeStr] = secret[beforeStr] || []\n          nestedRedact(secret[beforeStr], o, before, after, censor, ${isCensorFct}, ${censorFctTakesPath})\n        } else secret[beforeStr] = groupRedact(o, before, censor, ${isCensorFct}, ${censorFctTakesPath})\n      }\n    }\n  ` : ''\n}\n\nfunction resultTmpl (serialize) {\n  return serialize === false ? `return o` : `\n    var s = this.serialize(o)\n    this.restore(o)\n    return s\n  `\n}\n\nfunction strictImpl (strict, serialize) {\n  return strict === true\n    ? `throw Error('fast-redact: primitives cannot be redacted')`\n    : serialize === false ? `return o` : `return this.serialize(o)`\n}\n","'use strict'\n\nmodule.exports = {\n  groupRedact,\n  groupRestore,\n  nestedRedact,\n  nestedRestore\n}\n\nfunction groupRestore ({ keys, values, target }) {\n  if (target == null || typeof target === 'string') return\n  const length = keys.length\n  for (var i = 0; i < length; i++) {\n    const k = keys[i]\n    target[k] = values[i]\n  }\n}\n\nfunction groupRedact (o, path, censor, isCensorFct, censorFctTakesPath) {\n  const target = get(o, path)\n  if (target == null || typeof target === 'string') return { keys: null, values: null, target, flat: true }\n  const keys = Object.keys(target)\n  const keysLength = keys.length\n  const pathLength = path.length\n  const pathWithKey = censorFctTakesPath ? [...path] : undefined\n  const values = new Array(keysLength)\n\n  for (var i = 0; i < keysLength; i++) {\n    const key = keys[i]\n    values[i] = target[key]\n\n    if (censorFctTakesPath) {\n      pathWithKey[pathLength] = key\n      target[key] = censor(target[key], pathWithKey)\n    } else if (isCensorFct) {\n      target[key] = censor(target[key])\n    } else {\n      target[key] = censor\n    }\n  }\n  return { keys, values, target, flat: true }\n}\n\n/**\n * @param {RestoreInstruction[]} instructions a set of instructions for restoring values to objects\n */\nfunction nestedRestore (instructions) {\n  for (let i = 0; i < instructions.length; i++) {\n    const { target, path, value } = instructions[i]\n    let current = target\n    for (let i = path.length - 1; i > 0; i--) {\n      current = current[path[i]]\n    }\n    current[path[0]] = value\n  }\n}\n\nfunction nestedRedact (store, o, path, ns, censor, isCensorFct, censorFctTakesPath) {\n  const target = get(o, path)\n  if (target == null) return\n  const keys = Object.keys(target)\n  const keysLength = keys.length\n  for (var i = 0; i < keysLength; i++) {\n    const key = keys[i]\n    specialSet(store, target, key, path, ns, censor, isCensorFct, censorFctTakesPath)\n  }\n  return store\n}\n\nfunction has (obj, prop) {\n  return obj !== undefined && obj !== null\n    ? ('hasOwn' in Object ? Object.hasOwn(obj, prop) : Object.prototype.hasOwnProperty.call(obj, prop))\n    : false\n}\n\nfunction specialSet (store, o, k, path, afterPath, censor, isCensorFct, censorFctTakesPath) {\n  const afterPathLen = afterPath.length\n  const lastPathIndex = afterPathLen - 1\n  const originalKey = k\n  var i = -1\n  var n\n  var nv\n  var ov\n  var oov = null\n  var wc = null\n  var kIsWc\n  var wcov\n  var consecutive = false\n  var level = 0\n  // need to track depth of the `redactPath` tree\n  var depth = 0\n  var redactPathCurrent = tree()\n  ov = n = o[k]\n  if (typeof n !== 'object') return\n  while (n != null && ++i < afterPathLen) {\n    depth += 1\n    k = afterPath[i]\n    oov = ov\n    if (k !== '*' && !wc && !(typeof n === 'object' && k in n)) {\n      break\n    }\n    if (k === '*') {\n      if (wc === '*') {\n        consecutive = true\n      }\n      wc = k\n      if (i !== lastPathIndex) {\n        continue\n      }\n    }\n    if (wc) {\n      const wcKeys = Object.keys(n)\n      for (var j = 0; j < wcKeys.length; j++) {\n        const wck = wcKeys[j]\n        wcov = n[wck]\n        kIsWc = k === '*'\n        if (consecutive) {\n          redactPathCurrent = node(redactPathCurrent, wck, depth)\n          level = i\n          ov = iterateNthLevel(wcov, level - 1, k, path, afterPath, censor, isCensorFct, censorFctTakesPath, originalKey, n, nv, ov, kIsWc, wck, i, lastPathIndex, redactPathCurrent, store, o[originalKey], depth + 1)\n        } else {\n          if (kIsWc || (typeof wcov === 'object' && wcov !== null && k in wcov)) {\n            if (kIsWc) {\n              ov = wcov\n            } else {\n              ov = wcov[k]\n            }\n            nv = (i !== lastPathIndex)\n              ? ov\n              : (isCensorFct\n                ? (censorFctTakesPath ? censor(ov, [...path, originalKey, ...afterPath]) : censor(ov))\n                : censor)\n            if (kIsWc) {\n              const rv = restoreInstr(node(redactPathCurrent, wck, depth), ov, o[originalKey])\n              store.push(rv)\n              n[wck] = nv\n            } else {\n              if (wcov[k] === nv) {\n                // pass\n              } else if ((nv === undefined && censor !== undefined) || (has(wcov, k) && nv === ov)) {\n                redactPathCurrent = node(redactPathCurrent, wck, depth)\n              } else {\n                redactPathCurrent = node(redactPathCurrent, wck, depth)\n                const rv = restoreInstr(node(redactPathCurrent, k, depth + 1), ov, o[originalKey])\n                store.push(rv)\n                wcov[k] = nv\n              }\n            }\n          }\n        }\n      }\n      wc = null\n    } else {\n      ov = n[k]\n      redactPathCurrent = node(redactPathCurrent, k, depth)\n      nv = (i !== lastPathIndex)\n        ? ov\n        : (isCensorFct\n          ? (censorFctTakesPath ? censor(ov, [...path, originalKey, ...afterPath]) : censor(ov))\n          : censor)\n      if ((has(n, k) && nv === ov) || (nv === undefined && censor !== undefined)) {\n        // pass\n      } else {\n        const rv = restoreInstr(redactPathCurrent, ov, o[originalKey])\n        store.push(rv)\n        n[k] = nv\n      }\n      n = n[k]\n    }\n    if (typeof n !== 'object') break\n    // prevent circular structure, see https://github.com/pinojs/pino/issues/1513\n    if (ov === oov || typeof ov === 'undefined') {\n      // pass\n    }\n  }\n}\n\nfunction get (o, p) {\n  var i = -1\n  var l = p.length\n  var n = o\n  while (n != null && ++i < l) {\n    n = n[p[i]]\n  }\n  return n\n}\n\nfunction iterateNthLevel (wcov, level, k, path, afterPath, censor, isCensorFct, censorFctTakesPath, originalKey, n, nv, ov, kIsWc, wck, i, lastPathIndex, redactPathCurrent, store, parent, depth) {\n  if (level === 0) {\n    if (kIsWc || (typeof wcov === 'object' && wcov !== null && k in wcov)) {\n      if (kIsWc) {\n        ov = wcov\n      } else {\n        ov = wcov[k]\n      }\n      nv = (i !== lastPathIndex)\n        ? ov\n        : (isCensorFct\n          ? (censorFctTakesPath ? censor(ov, [...path, originalKey, ...afterPath]) : censor(ov))\n          : censor)\n      if (kIsWc) {\n        const rv = restoreInstr(redactPathCurrent, ov, parent)\n        store.push(rv)\n        n[wck] = nv\n      } else {\n        if (wcov[k] === nv) {\n          // pass\n        } else if ((nv === undefined && censor !== undefined) || (has(wcov, k) && nv === ov)) {\n          // pass\n        } else {\n          const rv = restoreInstr(node(redactPathCurrent, k, depth + 1), ov, parent)\n          store.push(rv)\n          wcov[k] = nv\n        }\n      }\n    }\n  }\n  for (const key in wcov) {\n    if (typeof wcov[key] === 'object') {\n      redactPathCurrent = node(redactPathCurrent, key, depth)\n      iterateNthLevel(wcov[key], level - 1, k, path, afterPath, censor, isCensorFct, censorFctTakesPath, originalKey, n, nv, ov, kIsWc, wck, i, lastPathIndex, redactPathCurrent, store, parent, depth + 1)\n    }\n  }\n}\n\n/**\n * @typedef {object} TreeNode\n * @prop {TreeNode} [parent] reference to the parent of this node in the tree, or `null` if there is no parent\n * @prop {string} key the key that this node represents (key here being part of the path being redacted\n * @prop {TreeNode[]} children the child nodes of this node\n * @prop {number} depth the depth of this node in the tree\n */\n\n/**\n * instantiate a new, empty tree\n * @returns {TreeNode}\n */\nfunction tree () {\n  return { parent: null, key: null, children: [], depth: 0 }\n}\n\n/**\n * creates a new node in the tree, attaching it as a child of the provided parent node\n * if the specified depth matches the parent depth, adds the new node as a _sibling_ of the parent instead\n  * @param {TreeNode} parent the parent node to add a new node to (if the parent depth matches the provided `depth` value, will instead add as a sibling of this\n  * @param {string} key the key that the new node represents (key here being part of the path being redacted)\n  * @param {number} depth the depth of the new node in the tree - used to determing whether to add the new node as a child or sibling of the provided `parent` node\n  * @returns {TreeNode} a reference to the newly created node in the tree\n */\nfunction node (parent, key, depth) {\n  if (parent.depth === depth) {\n    return node(parent.parent, key, depth)\n  }\n\n  var child = {\n    parent,\n    key,\n    depth,\n    children: []\n  }\n\n  parent.children.push(child)\n\n  return child\n}\n\n/**\n * @typedef {object} RestoreInstruction\n * @prop {string[]} path a reverse-order path that can be used to find the correct insertion point to restore a `value` for the given `parent` object\n * @prop {*} value the value to restore\n * @prop {object} target the object to restore the `value` in\n */\n\n/**\n * create a restore instruction for the given redactPath node\n * generates a path in reverse order by walking up the redactPath tree\n * @param {TreeNode} node a tree node that should be at the bottom of the redact path (i.e. have no children) - this will be used to walk up the redact path tree to construct the path needed to restore\n * @param {*} value the value to restore\n * @param {object} target a reference to the parent object to apply the restore instruction to\n * @returns {RestoreInstruction} an instruction used to restore a nested value for a specific object\n */\nfunction restoreInstr (node, value, target) {\n  let current = node\n  const path = []\n  do {\n    path.push(current.key)\n    current = current.parent\n  } while (current.parent != null)\n\n  return { path, value, target }\n}\n","'use strict'\n\nconst { groupRestore, nestedRestore } = require('./modifiers')\n\nmodule.exports = restorer\n\nfunction restorer () {\n  return function compileRestore () {\n    if (this.restore) {\n      this.restore.state.secret = this.secret\n      return\n    }\n    const { secret, wcLen } = this\n    const paths = Object.keys(secret)\n    const resetters = resetTmpl(secret, paths)\n    const hasWildcards = wcLen > 0\n    const state = hasWildcards ? { secret, groupRestore, nestedRestore } : { secret }\n    /* eslint-disable-next-line */\n    this.restore = Function(\n      'o',\n      restoreTmpl(resetters, paths, hasWildcards)\n    ).bind(state)\n    this.restore.state = state\n  }\n}\n\n/**\n * Mutates the original object to be censored by restoring its original values\n * prior to censoring.\n *\n * @param {object} secret Compiled object describing which target fields should\n * be censored and the field states.\n * @param {string[]} paths The list of paths to censor as provided at\n * initialization time.\n *\n * @returns {string} String of JavaScript to be used by `Function()`. The\n * string compiles to the function that does the work in the description.\n */\nfunction resetTmpl (secret, paths) {\n  return paths.map((path) => {\n    const { circle, escPath, leadingBracket } = secret[path]\n    const delim = leadingBracket ? '' : '.'\n    const reset = circle\n      ? `o.${circle} = secret[${escPath}].val`\n      : `o${delim}${path} = secret[${escPath}].val`\n    const clear = `secret[${escPath}].val = undefined`\n    return `\n      if (secret[${escPath}].val !== undefined) {\n        try { ${reset} } catch (e) {}\n        ${clear}\n      }\n    `\n  }).join('')\n}\n\n/**\n * Creates the body of the restore function\n *\n * Restoration of the redacted object happens\n * backwards, in reverse order of redactions,\n * so that repeated redactions on the same object\n * property can be eventually rolled back to the\n * original value.\n *\n * This way dynamic redactions are restored first,\n * starting from the last one working backwards and\n * followed by the static ones.\n *\n * @returns {string} the body of the restore function\n */\nfunction restoreTmpl (resetters, paths, hasWildcards) {\n  const dynamicReset = hasWildcards === true ? `\n    const keys = Object.keys(secret)\n    const len = keys.length\n    for (var i = len - 1; i >= ${paths.length}; i--) {\n      const k = keys[i]\n      const o = secret[k]\n      if (o) {\n        if (o.flat === true) this.groupRestore(o)\n        else this.nestedRestore(o)\n        secret[k] = null\n      }\n    }\n  ` : ''\n\n  return `\n    const secret = this.secret\n    ${dynamicReset}\n    ${resetters}\n    return o\n  `\n}\n","'use strict'\n\nmodule.exports = state\n\nfunction state (o) {\n  const {\n    secret,\n    censor,\n    compileRestore,\n    serialize,\n    groupRedact,\n    nestedRedact,\n    wildcards,\n    wcLen\n  } = o\n  const builder = [{ secret, censor, compileRestore }]\n  if (serialize !== false) builder.push({ serialize })\n  if (wcLen > 0) builder.push({ groupRedact, nestedRedact, wildcards, wcLen })\n  return Object.assign(...builder)\n}\n","'use strict'\n\nconst validator = require('./lib/validator')\nconst parse = require('./lib/parse')\nconst redactor = require('./lib/redactor')\nconst restorer = require('./lib/restorer')\nconst { groupRedact, nestedRedact } = require('./lib/modifiers')\nconst state = require('./lib/state')\nconst rx = require('./lib/rx')\nconst validate = validator()\nconst noop = (o) => o\nnoop.restore = noop\n\nconst DEFAULT_CENSOR = '[REDACTED]'\nfastRedact.rx = rx\nfastRedact.validator = validator\n\nmodule.exports = fastRedact\n\nfunction fastRedact (opts = {}) {\n  const paths = Array.from(new Set(opts.paths || []))\n  const serialize = 'serialize' in opts ? (\n    opts.serialize === false ? opts.serialize\n      : (typeof opts.serialize === 'function' ? opts.serialize : JSON.stringify)\n  ) : JSON.stringify\n  const remove = opts.remove\n  if (remove === true && serialize !== JSON.stringify) {\n    throw Error('fast-redact  remove option may only be set when serializer is JSON.stringify')\n  }\n  const censor = remove === true\n    ? undefined\n    : 'censor' in opts ? opts.censor : DEFAULT_CENSOR\n\n  const isCensorFct = typeof censor === 'function'\n  const censorFctTakesPath = isCensorFct && censor.length > 1\n\n  if (paths.length === 0) return serialize || noop\n\n  validate({ paths, serialize, censor })\n\n  const { wildcards, wcLen, secret } = parse({ paths, censor })\n\n  const compileRestore = restorer()\n  const strict = 'strict' in opts ? opts.strict : true\n\n  return redactor({ secret, wcLen, serialize, strict, isCensorFct, censorFctTakesPath }, state({\n    secret,\n    censor,\n    compileRestore,\n    serialize,\n    groupRedact,\n    nestedRedact,\n    wildcards,\n    wcLen\n  }))\n}\n","'use strict'\n\nconst setLevelSym = Symbol('pino.setLevel')\nconst getLevelSym = Symbol('pino.getLevel')\nconst levelValSym = Symbol('pino.levelVal')\nconst levelCompSym = Symbol('pino.levelComp')\nconst useLevelLabelsSym = Symbol('pino.useLevelLabels')\nconst useOnlyCustomLevelsSym = Symbol('pino.useOnlyCustomLevels')\nconst mixinSym = Symbol('pino.mixin')\n\nconst lsCacheSym = Symbol('pino.lsCache')\nconst chindingsSym = Symbol('pino.chindings')\n\nconst asJsonSym = Symbol('pino.asJson')\nconst writeSym = Symbol('pino.write')\nconst redactFmtSym = Symbol('pino.redactFmt')\n\nconst timeSym = Symbol('pino.time')\nconst timeSliceIndexSym = Symbol('pino.timeSliceIndex')\nconst streamSym = Symbol('pino.stream')\nconst stringifySym = Symbol('pino.stringify')\nconst stringifySafeSym = Symbol('pino.stringifySafe')\nconst stringifiersSym = Symbol('pino.stringifiers')\nconst endSym = Symbol('pino.end')\nconst formatOptsSym = Symbol('pino.formatOpts')\nconst messageKeySym = Symbol('pino.messageKey')\nconst errorKeySym = Symbol('pino.errorKey')\nconst nestedKeySym = Symbol('pino.nestedKey')\nconst nestedKeyStrSym = Symbol('pino.nestedKeyStr')\nconst mixinMergeStrategySym = Symbol('pino.mixinMergeStrategy')\nconst msgPrefixSym = Symbol('pino.msgPrefix')\n\nconst wildcardFirstSym = Symbol('pino.wildcardFirst')\n\n// public symbols, no need to use the same pino\n// version for these\nconst serializersSym = Symbol.for('pino.serializers')\nconst formattersSym = Symbol.for('pino.formatters')\nconst hooksSym = Symbol.for('pino.hooks')\nconst needsMetadataGsym = Symbol.for('pino.metadata')\n\nmodule.exports = {\n  setLevelSym,\n  getLevelSym,\n  levelValSym,\n  levelCompSym,\n  useLevelLabelsSym,\n  mixinSym,\n  lsCacheSym,\n  chindingsSym,\n  asJsonSym,\n  writeSym,\n  serializersSym,\n  redactFmtSym,\n  timeSym,\n  timeSliceIndexSym,\n  streamSym,\n  stringifySym,\n  stringifySafeSym,\n  stringifiersSym,\n  endSym,\n  formatOptsSym,\n  messageKeySym,\n  errorKeySym,\n  nestedKeySym,\n  wildcardFirstSym,\n  needsMetadataGsym,\n  useOnlyCustomLevelsSym,\n  formattersSym,\n  hooksSym,\n  nestedKeyStrSym,\n  mixinMergeStrategySym,\n  msgPrefixSym\n}\n","'use strict'\n\nconst fastRedact = require('fast-redact')\nconst { redactFmtSym, wildcardFirstSym } = require('./symbols')\nconst { rx, validator } = fastRedact\n\nconst validate = validator({\n  ERR_PATHS_MUST_BE_STRINGS: () => 'pino  redacted paths must be strings',\n  ERR_INVALID_PATH: (s) => `pino  redact paths array contains an invalid path (${s})`\n})\n\nconst CENSOR = '[Redacted]'\nconst strict = false // TODO should this be configurable?\n\nfunction redaction (opts, serialize) {\n  const { paths, censor } = handle(opts)\n\n  const shape = paths.reduce((o, str) => {\n    rx.lastIndex = 0\n    const first = rx.exec(str)\n    const next = rx.exec(str)\n\n    // ns is the top-level path segment, brackets + quoting removed.\n    let ns = first[1] !== undefined\n      ? first[1].replace(/^(?:\"|'|`)(.*)(?:\"|'|`)$/, '$1')\n      : first[0]\n\n    if (ns === '*') {\n      ns = wildcardFirstSym\n    }\n\n    // top level key:\n    if (next === null) {\n      o[ns] = null\n      return o\n    }\n\n    // path with at least two segments:\n    // if ns is already redacted at the top level, ignore lower level redactions\n    if (o[ns] === null) {\n      return o\n    }\n\n    const { index } = next\n    const nextPath = `${str.substr(index, str.length - 1)}`\n\n    o[ns] = o[ns] || []\n\n    // shape is a mix of paths beginning with literal values and wildcard\n    // paths [ \"a.b.c\", \"*.b.z\" ] should reduce to a shape of\n    // { \"a\": [ \"b.c\", \"b.z\" ], *: [ \"b.z\" ] }\n    // note: \"b.z\" is in both \"a\" and * arrays because \"a\" matches the wildcard.\n    // (* entry has wildcardFirstSym as key)\n    if (ns !== wildcardFirstSym && o[ns].length === 0) {\n      // first time ns's get all '*' redactions so far\n      o[ns].push(...(o[wildcardFirstSym] || []))\n    }\n\n    if (ns === wildcardFirstSym) {\n      // new * path gets added to all previously registered literal ns's.\n      Object.keys(o).forEach(function (k) {\n        if (o[k]) {\n          o[k].push(nextPath)\n        }\n      })\n    }\n\n    o[ns].push(nextPath)\n    return o\n  }, {})\n\n  // the redactor assigned to the format symbol key\n  // provides top level redaction for instances where\n  // an object is interpolated into the msg string\n  const result = {\n    [redactFmtSym]: fastRedact({ paths, censor, serialize, strict })\n  }\n\n  const topCensor = (...args) => {\n    return typeof censor === 'function' ? serialize(censor(...args)) : serialize(censor)\n  }\n\n  return [...Object.keys(shape), ...Object.getOwnPropertySymbols(shape)].reduce((o, k) => {\n    // top level key:\n    if (shape[k] === null) {\n      o[k] = (value) => topCensor(value, [k])\n    } else {\n      const wrappedCensor = typeof censor === 'function'\n        ? (value, path) => {\n            return censor(value, [k, ...path])\n          }\n        : censor\n      o[k] = fastRedact({\n        paths: shape[k],\n        censor: wrappedCensor,\n        serialize,\n        strict\n      })\n    }\n    return o\n  }, result)\n}\n\nfunction handle (opts) {\n  if (Array.isArray(opts)) {\n    opts = { paths: opts, censor: CENSOR }\n    validate(opts)\n    return opts\n  }\n  let { paths, censor = CENSOR, remove } = opts\n  if (Array.isArray(paths) === false) { throw Error('pino  redact must contain an array of strings') }\n  if (remove === true) censor = undefined\n  validate({ paths, censor })\n\n  return { paths, censor }\n}\n\nmodule.exports = redaction\n","'use strict'\n\nconst nullTime = () => ''\n\nconst epochTime = () => `,\"time\":${Date.now()}`\n\nconst unixTime = () => `,\"time\":${Math.round(Date.now() / 1000.0)}`\n\nconst isoTime = () => `,\"time\":\"${new Date(Date.now()).toISOString()}\"` // using Date.now() for testability\n\nmodule.exports = { nullTime, epochTime, unixTime, isoTime }\n","'use strict'\nfunction tryStringify (o) {\n  try { return JSON.stringify(o) } catch(e) { return '\"[Circular]\"' }\n}\n\nmodule.exports = format\n\nfunction format(f, args, opts) {\n  var ss = (opts && opts.stringify) || tryStringify\n  var offset = 1\n  if (typeof f === 'object' && f !== null) {\n    var len = args.length + offset\n    if (len === 1) return f\n    var objects = new Array(len)\n    objects[0] = ss(f)\n    for (var index = 1; index < len; index++) {\n      objects[index] = ss(args[index])\n    }\n    return objects.join(' ')\n  }\n  if (typeof f !== 'string') {\n    return f\n  }\n  var argLen = args.length\n  if (argLen === 0) return f\n  var str = ''\n  var a = 1 - offset\n  var lastPos = -1\n  var flen = (f && f.length) || 0\n  for (var i = 0; i < flen;) {\n    if (f.charCodeAt(i) === 37 && i + 1 < flen) {\n      lastPos = lastPos > -1 ? lastPos : 0\n      switch (f.charCodeAt(i + 1)) {\n        case 100: // 'd'\n        case 102: // 'f'\n          if (a >= argLen)\n            break\n          if (args[a] == null)  break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += Number(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 105: // 'i'\n          if (a >= argLen)\n            break\n          if (args[a] == null)  break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += Math.floor(Number(args[a]))\n          lastPos = i + 2\n          i++\n          break\n        case 79: // 'O'\n        case 111: // 'o'\n        case 106: // 'j'\n          if (a >= argLen)\n            break\n          if (args[a] === undefined) break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          var type = typeof args[a]\n          if (type === 'string') {\n            str += '\\'' + args[a] + '\\''\n            lastPos = i + 2\n            i++\n            break\n          }\n          if (type === 'function') {\n            str += args[a].name || '<anonymous>'\n            lastPos = i + 2\n            i++\n            break\n          }\n          str += ss(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 115: // 's'\n          if (a >= argLen)\n            break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += String(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 37: // '%'\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += '%'\n          lastPos = i + 2\n          i++\n          a--\n          break\n      }\n      ++a\n    }\n    ++i\n  }\n  if (lastPos === -1)\n    return f\n  else if (lastPos < flen) {\n    str += f.slice(lastPos)\n  }\n\n  return str\n}\n","'use strict'\n\n/* global SharedArrayBuffer, Atomics */\n\nif (typeof SharedArrayBuffer !== 'undefined' && typeof Atomics !== 'undefined') {\n  const nil = new Int32Array(new SharedArrayBuffer(4))\n\n  function sleep (ms) {\n    // also filters out NaN, non-number types, including empty strings, but allows bigints\n    const valid = ms > 0 && ms < Infinity \n    if (valid === false) {\n      if (typeof ms !== 'number' && typeof ms !== 'bigint') {\n        throw TypeError('sleep: ms must be a number')\n      }\n      throw RangeError('sleep: ms must be a number that is greater than 0 but less than Infinity')\n    }\n\n    Atomics.wait(nil, 0, 0, Number(ms))\n  }\n  module.exports = sleep\n} else {\n\n  function sleep (ms) {\n    // also filters out NaN, non-number types, including empty strings, but allows bigints\n    const valid = ms > 0 && ms < Infinity \n    if (valid === false) {\n      if (typeof ms !== 'number' && typeof ms !== 'bigint') {\n        throw TypeError('sleep: ms must be a number')\n      }\n      throw RangeError('sleep: ms must be a number that is greater than 0 but less than Infinity')\n    }\n    const target = Date.now() + Number(ms)\n    while (target > Date.now()){}\n  }\n\n  module.exports = sleep\n\n}\n","'use strict'\n\nconst fs = require('fs')\nconst EventEmitter = require('events')\nconst inherits = require('util').inherits\nconst path = require('path')\nconst sleep = require('atomic-sleep')\nconst assert = require('assert')\n\nconst BUSY_WRITE_TIMEOUT = 100\nconst kEmptyBuffer = Buffer.allocUnsafe(0)\n\n// 16 KB. Don't write more than docker buffer size.\n// https://github.com/moby/moby/blob/513ec73831269947d38a644c278ce3cac36783b2/daemon/logger/copier.go#L13\nconst MAX_WRITE = 16 * 1024\n\nconst kContentModeBuffer = 'buffer'\nconst kContentModeUtf8 = 'utf8'\n\nconst [major, minor] = (process.versions.node || '0.0').split('.').map(Number)\nconst kCopyBuffer = major >= 22 && minor >= 7\n\nfunction openFile (file, sonic) {\n  sonic._opening = true\n  sonic._writing = true\n  sonic._asyncDrainScheduled = false\n\n  // NOTE: 'error' and 'ready' events emitted below only relevant when sonic.sync===false\n  // for sync mode, there is no way to add a listener that will receive these\n\n  function fileOpened (err, fd) {\n    if (err) {\n      sonic._reopening = false\n      sonic._writing = false\n      sonic._opening = false\n\n      if (sonic.sync) {\n        process.nextTick(() => {\n          if (sonic.listenerCount('error') > 0) {\n            sonic.emit('error', err)\n          }\n        })\n      } else {\n        sonic.emit('error', err)\n      }\n      return\n    }\n\n    const reopening = sonic._reopening\n\n    sonic.fd = fd\n    sonic.file = file\n    sonic._reopening = false\n    sonic._opening = false\n    sonic._writing = false\n\n    if (sonic.sync) {\n      process.nextTick(() => sonic.emit('ready'))\n    } else {\n      sonic.emit('ready')\n    }\n\n    if (sonic.destroyed) {\n      return\n    }\n\n    // start\n    if ((!sonic._writing && sonic._len > sonic.minLength) || sonic._flushPending) {\n      sonic._actualWrite()\n    } else if (reopening) {\n      process.nextTick(() => sonic.emit('drain'))\n    }\n  }\n\n  const flags = sonic.append ? 'a' : 'w'\n  const mode = sonic.mode\n\n  if (sonic.sync) {\n    try {\n      if (sonic.mkdir) fs.mkdirSync(path.dirname(file), { recursive: true })\n      const fd = fs.openSync(file, flags, mode)\n      fileOpened(null, fd)\n    } catch (err) {\n      fileOpened(err)\n      throw err\n    }\n  } else if (sonic.mkdir) {\n    fs.mkdir(path.dirname(file), { recursive: true }, (err) => {\n      if (err) return fileOpened(err)\n      fs.open(file, flags, mode, fileOpened)\n    })\n  } else {\n    fs.open(file, flags, mode, fileOpened)\n  }\n}\n\nfunction SonicBoom (opts) {\n  if (!(this instanceof SonicBoom)) {\n    return new SonicBoom(opts)\n  }\n\n  let { fd, dest, minLength, maxLength, maxWrite, periodicFlush, sync, append = true, mkdir, retryEAGAIN, fsync, contentMode, mode } = opts || {}\n\n  fd = fd || dest\n\n  this._len = 0\n  this.fd = -1\n  this._bufs = []\n  this._lens = []\n  this._writing = false\n  this._ending = false\n  this._reopening = false\n  this._asyncDrainScheduled = false\n  this._flushPending = false\n  this._hwm = Math.max(minLength || 0, 16387)\n  this.file = null\n  this.destroyed = false\n  this.minLength = minLength || 0\n  this.maxLength = maxLength || 0\n  this.maxWrite = maxWrite || MAX_WRITE\n  this._periodicFlush = periodicFlush || 0\n  this._periodicFlushTimer = undefined\n  this.sync = sync || false\n  this.writable = true\n  this._fsync = fsync || false\n  this.append = append || false\n  this.mode = mode\n  this.retryEAGAIN = retryEAGAIN || (() => true)\n  this.mkdir = mkdir || false\n\n  let fsWriteSync\n  let fsWrite\n  if (contentMode === kContentModeBuffer) {\n    this._writingBuf = kEmptyBuffer\n    this.write = writeBuffer\n    this.flush = flushBuffer\n    this.flushSync = flushBufferSync\n    this._actualWrite = actualWriteBuffer\n    fsWriteSync = () => fs.writeSync(this.fd, this._writingBuf)\n    fsWrite = () => fs.write(this.fd, this._writingBuf, this.release)\n  } else if (contentMode === undefined || contentMode === kContentModeUtf8) {\n    this._writingBuf = ''\n    this.write = write\n    this.flush = flush\n    this.flushSync = flushSync\n    this._actualWrite = actualWrite\n    fsWriteSync = () => fs.writeSync(this.fd, this._writingBuf, 'utf8')\n    fsWrite = () => fs.write(this.fd, this._writingBuf, 'utf8', this.release)\n  } else {\n    throw new Error(`SonicBoom supports \"${kContentModeUtf8}\" and \"${kContentModeBuffer}\", but passed ${contentMode}`)\n  }\n\n  if (typeof fd === 'number') {\n    this.fd = fd\n    process.nextTick(() => this.emit('ready'))\n  } else if (typeof fd === 'string') {\n    openFile(fd, this)\n  } else {\n    throw new Error('SonicBoom supports only file descriptors and files')\n  }\n  if (this.minLength >= this.maxWrite) {\n    throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`)\n  }\n\n  this.release = (err, n) => {\n    if (err) {\n      if ((err.code === 'EAGAIN' || err.code === 'EBUSY') && this.retryEAGAIN(err, this._writingBuf.length, this._len - this._writingBuf.length)) {\n        if (this.sync) {\n          // This error code should not happen in sync mode, because it is\n          // not using the underlining operating system asynchronous functions.\n          // However it happens, and so we handle it.\n          // Ref: https://github.com/pinojs/pino/issues/783\n          try {\n            sleep(BUSY_WRITE_TIMEOUT)\n            this.release(undefined, 0)\n          } catch (err) {\n            this.release(err)\n          }\n        } else {\n          // Let's give the destination some time to process the chunk.\n          setTimeout(fsWrite, BUSY_WRITE_TIMEOUT)\n        }\n      } else {\n        this._writing = false\n\n        this.emit('error', err)\n      }\n      return\n    }\n\n    this.emit('write', n)\n    const releasedBufObj = releaseWritingBuf(this._writingBuf, this._len, n)\n    this._len = releasedBufObj.len\n    this._writingBuf = releasedBufObj.writingBuf\n\n    if (this._writingBuf.length) {\n      if (!this.sync) {\n        fsWrite()\n        return\n      }\n\n      try {\n        do {\n          const n = fsWriteSync()\n          const releasedBufObj = releaseWritingBuf(this._writingBuf, this._len, n)\n          this._len = releasedBufObj.len\n          this._writingBuf = releasedBufObj.writingBuf\n        } while (this._writingBuf.length)\n      } catch (err) {\n        this.release(err)\n        return\n      }\n    }\n\n    if (this._fsync) {\n      fs.fsyncSync(this.fd)\n    }\n\n    const len = this._len\n    if (this._reopening) {\n      this._writing = false\n      this._reopening = false\n      this.reopen()\n    } else if (len > this.minLength) {\n      this._actualWrite()\n    } else if (this._ending) {\n      if (len > 0) {\n        this._actualWrite()\n      } else {\n        this._writing = false\n        actualClose(this)\n      }\n    } else {\n      this._writing = false\n      if (this.sync) {\n        if (!this._asyncDrainScheduled) {\n          this._asyncDrainScheduled = true\n          process.nextTick(emitDrain, this)\n        }\n      } else {\n        this.emit('drain')\n      }\n    }\n  }\n\n  this.on('newListener', function (name) {\n    if (name === 'drain') {\n      this._asyncDrainScheduled = false\n    }\n  })\n\n  if (this._periodicFlush !== 0) {\n    this._periodicFlushTimer = setInterval(() => this.flush(null), this._periodicFlush)\n    this._periodicFlushTimer.unref()\n  }\n}\n\n/**\n * Release the writingBuf after fs.write n bytes data\n * @param {string | Buffer} writingBuf - currently writing buffer, usually be instance._writingBuf.\n * @param {number} len - currently buffer length, usually be instance._len.\n * @param {number} n - number of bytes fs already written\n * @returns {{writingBuf: string | Buffer, len: number}} released writingBuf and length\n */\nfunction releaseWritingBuf (writingBuf, len, n) {\n  // if Buffer.byteLength is equal to n, that means writingBuf contains no multi-byte character\n  if (typeof writingBuf === 'string' && Buffer.byteLength(writingBuf) !== n) {\n    // Since the fs.write callback parameter `n` means how many bytes the passed of string\n    // We calculate the original string length for avoiding the multi-byte character issue\n    n = Buffer.from(writingBuf).subarray(0, n).toString().length\n  }\n  len = Math.max(len - n, 0)\n  writingBuf = writingBuf.slice(n)\n  return { writingBuf, len }\n}\n\nfunction emitDrain (sonic) {\n  const hasListeners = sonic.listenerCount('drain') > 0\n  if (!hasListeners) return\n  sonic._asyncDrainScheduled = false\n  sonic.emit('drain')\n}\n\ninherits(SonicBoom, EventEmitter)\n\nfunction mergeBuf (bufs, len) {\n  if (bufs.length === 0) {\n    return kEmptyBuffer\n  }\n\n  if (bufs.length === 1) {\n    return bufs[0]\n  }\n\n  return Buffer.concat(bufs, len)\n}\n\nfunction write (data) {\n  if (this.destroyed) {\n    throw new Error('SonicBoom destroyed')\n  }\n\n  const len = this._len + data.length\n  const bufs = this._bufs\n\n  if (this.maxLength && len > this.maxLength) {\n    this.emit('drop', data)\n    return this._len < this._hwm\n  }\n\n  if (\n    bufs.length === 0 ||\n    bufs[bufs.length - 1].length + data.length > this.maxWrite\n  ) {\n    bufs.push('' + data)\n  } else {\n    bufs[bufs.length - 1] += data\n  }\n\n  this._len = len\n\n  if (!this._writing && this._len >= this.minLength) {\n    this._actualWrite()\n  }\n\n  return this._len < this._hwm\n}\n\nfunction writeBuffer (data) {\n  if (this.destroyed) {\n    throw new Error('SonicBoom destroyed')\n  }\n\n  const len = this._len + data.length\n  const bufs = this._bufs\n  const lens = this._lens\n\n  if (this.maxLength && len > this.maxLength) {\n    this.emit('drop', data)\n    return this._len < this._hwm\n  }\n\n  if (\n    bufs.length === 0 ||\n    lens[lens.length - 1] + data.length > this.maxWrite\n  ) {\n    bufs.push([data])\n    lens.push(data.length)\n  } else {\n    bufs[bufs.length - 1].push(data)\n    lens[lens.length - 1] += data.length\n  }\n\n  this._len = len\n\n  if (!this._writing && this._len >= this.minLength) {\n    this._actualWrite()\n  }\n\n  return this._len < this._hwm\n}\n\nfunction callFlushCallbackOnDrain (cb) {\n  this._flushPending = true\n  const onDrain = () => {\n    // only if _fsync is false to avoid double fsync\n    if (!this._fsync) {\n      try {\n        fs.fsync(this.fd, (err) => {\n          this._flushPending = false\n          cb(err)\n        })\n      } catch (err) {\n        cb(err)\n      }\n    } else {\n      this._flushPending = false\n      cb()\n    }\n    this.off('error', onError)\n  }\n  const onError = (err) => {\n    this._flushPending = false\n    cb(err)\n    this.off('drain', onDrain)\n  }\n\n  this.once('drain', onDrain)\n  this.once('error', onError)\n}\n\nfunction flush (cb) {\n  if (cb != null && typeof cb !== 'function') {\n    throw new Error('flush cb must be a function')\n  }\n\n  if (this.destroyed) {\n    const error = new Error('SonicBoom destroyed')\n    if (cb) {\n      cb(error)\n      return\n    }\n\n    throw error\n  }\n\n  if (this.minLength <= 0) {\n    cb?.()\n    return\n  }\n\n  if (cb) {\n    callFlushCallbackOnDrain.call(this, cb)\n  }\n\n  if (this._writing) {\n    return\n  }\n\n  if (this._bufs.length === 0) {\n    this._bufs.push('')\n  }\n\n  this._actualWrite()\n}\n\nfunction flushBuffer (cb) {\n  if (cb != null && typeof cb !== 'function') {\n    throw new Error('flush cb must be a function')\n  }\n\n  if (this.destroyed) {\n    const error = new Error('SonicBoom destroyed')\n    if (cb) {\n      cb(error)\n      return\n    }\n\n    throw error\n  }\n\n  if (this.minLength <= 0) {\n    cb?.()\n    return\n  }\n\n  if (cb) {\n    callFlushCallbackOnDrain.call(this, cb)\n  }\n\n  if (this._writing) {\n    return\n  }\n\n  if (this._bufs.length === 0) {\n    this._bufs.push([])\n    this._lens.push(0)\n  }\n\n  this._actualWrite()\n}\n\nSonicBoom.prototype.reopen = function (file) {\n  if (this.destroyed) {\n    throw new Error('SonicBoom destroyed')\n  }\n\n  if (this._opening) {\n    this.once('ready', () => {\n      this.reopen(file)\n    })\n    return\n  }\n\n  if (this._ending) {\n    return\n  }\n\n  if (!this.file) {\n    throw new Error('Unable to reopen a file descriptor, you must pass a file to SonicBoom')\n  }\n\n  if (file) {\n    this.file = file\n  }\n  this._reopening = true\n\n  if (this._writing) {\n    return\n  }\n\n  const fd = this.fd\n  this.once('ready', () => {\n    if (fd !== this.fd) {\n      fs.close(fd, (err) => {\n        if (err) {\n          return this.emit('error', err)\n        }\n      })\n    }\n  })\n\n  openFile(this.file, this)\n}\n\nSonicBoom.prototype.end = function () {\n  if (this.destroyed) {\n    throw new Error('SonicBoom destroyed')\n  }\n\n  if (this._opening) {\n    this.once('ready', () => {\n      this.end()\n    })\n    return\n  }\n\n  if (this._ending) {\n    return\n  }\n\n  this._ending = true\n\n  if (this._writing) {\n    return\n  }\n\n  if (this._len > 0 && this.fd >= 0) {\n    this._actualWrite()\n  } else {\n    actualClose(this)\n  }\n}\n\nfunction flushSync () {\n  if (this.destroyed) {\n    throw new Error('SonicBoom destroyed')\n  }\n\n  if (this.fd < 0) {\n    throw new Error('sonic boom is not ready yet')\n  }\n\n  if (!this._writing && this._writingBuf.length > 0) {\n    this._bufs.unshift(this._writingBuf)\n    this._writingBuf = ''\n  }\n\n  let buf = ''\n  while (this._bufs.length || buf) {\n    if (buf.length <= 0) {\n      buf = this._bufs[0]\n    }\n    try {\n      const n = fs.writeSync(this.fd, buf, 'utf8')\n      const releasedBufObj = releaseWritingBuf(buf, this._len, n)\n      buf = releasedBufObj.writingBuf\n      this._len = releasedBufObj.len\n      if (buf.length <= 0) {\n        this._bufs.shift()\n      }\n    } catch (err) {\n      const shouldRetry = err.code === 'EAGAIN' || err.code === 'EBUSY'\n      if (shouldRetry && !this.retryEAGAIN(err, buf.length, this._len - buf.length)) {\n        throw err\n      }\n\n      sleep(BUSY_WRITE_TIMEOUT)\n    }\n  }\n\n  try {\n    fs.fsyncSync(this.fd)\n  } catch {\n    // Skip the error. The fd might not support fsync.\n  }\n}\n\nfunction flushBufferSync () {\n  if (this.destroyed) {\n    throw new Error('SonicBoom destroyed')\n  }\n\n  if (this.fd < 0) {\n    throw new Error('sonic boom is not ready yet')\n  }\n\n  if (!this._writing && this._writingBuf.length > 0) {\n    this._bufs.unshift([this._writingBuf])\n    this._writingBuf = kEmptyBuffer\n  }\n\n  let buf = kEmptyBuffer\n  while (this._bufs.length || buf.length) {\n    if (buf.length <= 0) {\n      buf = mergeBuf(this._bufs[0], this._lens[0])\n    }\n    try {\n      const n = fs.writeSync(this.fd, buf)\n      buf = buf.subarray(n)\n      this._len = Math.max(this._len - n, 0)\n      if (buf.length <= 0) {\n        this._bufs.shift()\n        this._lens.shift()\n      }\n    } catch (err) {\n      const shouldRetry = err.code === 'EAGAIN' || err.code === 'EBUSY'\n      if (shouldRetry && !this.retryEAGAIN(err, buf.length, this._len - buf.length)) {\n        throw err\n      }\n\n      sleep(BUSY_WRITE_TIMEOUT)\n    }\n  }\n}\n\nSonicBoom.prototype.destroy = function () {\n  if (this.destroyed) {\n    return\n  }\n  actualClose(this)\n}\n\nfunction actualWrite () {\n  const release = this.release\n  this._writing = true\n  this._writingBuf = this._writingBuf || this._bufs.shift() || ''\n\n  if (this.sync) {\n    try {\n      const written = fs.writeSync(this.fd, this._writingBuf, 'utf8')\n      release(null, written)\n    } catch (err) {\n      release(err)\n    }\n  } else {\n    fs.write(this.fd, this._writingBuf, 'utf8', release)\n  }\n}\n\nfunction actualWriteBuffer () {\n  const release = this.release\n  this._writing = true\n  this._writingBuf = this._writingBuf.length ? this._writingBuf : mergeBuf(this._bufs.shift(), this._lens.shift())\n\n  if (this.sync) {\n    try {\n      const written = fs.writeSync(this.fd, this._writingBuf)\n      release(null, written)\n    } catch (err) {\n      release(err)\n    }\n  } else {\n    // fs.write will need to copy string to buffer anyway so\n    // we do it here to avoid the overhead of calculating the buffer size\n    // in releaseWritingBuf.\n    if (kCopyBuffer) {\n      this._writingBuf = Buffer.from(this._writingBuf)\n    }\n    fs.write(this.fd, this._writingBuf, release)\n  }\n}\n\nfunction actualClose (sonic) {\n  if (sonic.fd === -1) {\n    sonic.once('ready', actualClose.bind(null, sonic))\n    return\n  }\n\n  if (sonic._periodicFlushTimer !== undefined) {\n    clearInterval(sonic._periodicFlushTimer)\n  }\n\n  sonic.destroyed = true\n  sonic._bufs = []\n  sonic._lens = []\n\n  assert(typeof sonic.fd === 'number', `sonic.fd must be a number, got ${typeof sonic.fd}`)\n  try {\n    fs.fsync(sonic.fd, closeWrapped)\n  } catch {\n  }\n\n  function closeWrapped () {\n    // We skip errors in fsync\n\n    if (sonic.fd !== 1 && sonic.fd !== 2) {\n      fs.close(sonic.fd, done)\n    } else {\n      done()\n    }\n  }\n\n  function done (err) {\n    if (err) {\n      sonic.emit('error', err)\n      return\n    }\n\n    if (sonic._ending && !sonic._writing) {\n      sonic.emit('finish')\n    }\n    sonic.emit('close')\n  }\n}\n\n/**\n * These export configurations enable JS and TS developers\n * to consumer SonicBoom in whatever way best suits their needs.\n * Some examples of supported import syntax includes:\n * - `const SonicBoom = require('SonicBoom')`\n * - `const { SonicBoom } = require('SonicBoom')`\n * - `import * as SonicBoom from 'SonicBoom'`\n * - `import { SonicBoom } from 'SonicBoom'`\n * - `import SonicBoom from 'SonicBoom'`\n */\nSonicBoom.SonicBoom = SonicBoom\nSonicBoom.default = SonicBoom\nmodule.exports = SonicBoom\n","'use strict'\n\nconst refs = {\n  exit: [],\n  beforeExit: []\n}\nconst functions = {\n  exit: onExit,\n  beforeExit: onBeforeExit\n}\n\nlet registry\n\nfunction ensureRegistry () {\n  if (registry === undefined) {\n    registry = new FinalizationRegistry(clear)\n  }\n}\n\nfunction install (event) {\n  if (refs[event].length > 0) {\n    return\n  }\n\n  process.on(event, functions[event])\n}\n\nfunction uninstall (event) {\n  if (refs[event].length > 0) {\n    return\n  }\n  process.removeListener(event, functions[event])\n  if (refs.exit.length === 0 && refs.beforeExit.length === 0) {\n    registry = undefined\n  }\n}\n\nfunction onExit () {\n  callRefs('exit')\n}\n\nfunction onBeforeExit () {\n  callRefs('beforeExit')\n}\n\nfunction callRefs (event) {\n  for (const ref of refs[event]) {\n    const obj = ref.deref()\n    const fn = ref.fn\n\n    // This should always happen, however GC is\n    // undeterministic so it might not happen.\n    /* istanbul ignore else */\n    if (obj !== undefined) {\n      fn(obj, event)\n    }\n  }\n  refs[event] = []\n}\n\nfunction clear (ref) {\n  for (const event of ['exit', 'beforeExit']) {\n    const index = refs[event].indexOf(ref)\n    refs[event].splice(index, index + 1)\n    uninstall(event)\n  }\n}\n\nfunction _register (event, obj, fn) {\n  if (obj === undefined) {\n    throw new Error('the object can\\'t be undefined')\n  }\n  install(event)\n  const ref = new WeakRef(obj)\n  ref.fn = fn\n\n  ensureRegistry()\n  registry.register(obj, ref)\n  refs[event].push(ref)\n}\n\nfunction register (obj, fn) {\n  _register('exit', obj, fn)\n}\n\nfunction registerBeforeExit (obj, fn) {\n  _register('beforeExit', obj, fn)\n}\n\nfunction unregister (obj) {\n  if (registry === undefined) {\n    return\n  }\n  registry.unregister(obj)\n  for (const event of ['exit', 'beforeExit']) {\n    refs[event] = refs[event].filter((ref) => {\n      const _obj = ref.deref()\n      return _obj && _obj !== obj\n    })\n    uninstall(event)\n  }\n}\n\nmodule.exports = {\n  register,\n  registerBeforeExit,\n  unregister\n}\n","{\n  \"name\": \"thread-stream\",\n  \"version\": \"3.1.0\",\n  \"description\": \"A streaming way to send data to a Node.js Worker Thread\",\n  \"main\": \"index.js\",\n  \"types\": \"index.d.ts\",\n  \"dependencies\": {\n    \"real-require\": \"^0.2.0\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20.1.0\",\n    \"@types/tap\": \"^15.0.0\",\n    \"@yao-pkg/pkg\": \"^5.11.5\",\n    \"desm\": \"^1.3.0\",\n    \"fastbench\": \"^1.0.1\",\n    \"husky\": \"^9.0.6\",\n    \"pino-elasticsearch\": \"^8.0.0\",\n    \"sonic-boom\": \"^4.0.1\",\n    \"standard\": \"^17.0.0\",\n    \"tap\": \"^16.2.0\",\n    \"ts-node\": \"^10.8.0\",\n    \"typescript\": \"^5.3.2\",\n    \"why-is-node-running\": \"^2.2.2\"\n  },\n  \"scripts\": {\n    \"build\": \"tsc --noEmit\",\n    \"test\": \"standard && npm run build && npm run transpile && tap \\\"test/**/*.test.*js\\\" && tap --ts test/*.test.*ts\",\n    \"test:ci\": \"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts\",\n    \"test:ci:js\": \"tap --no-check-coverage --timeout=120 --coverage-report=lcovonly \\\"test/**/*.test.*js\\\"\",\n    \"test:ci:ts\": \"tap --ts --no-check-coverage --coverage-report=lcovonly \\\"test/**/*.test.*ts\\\"\",\n    \"test:yarn\": \"npm run transpile && tap \\\"test/**/*.test.js\\\" --no-check-coverage\",\n    \"transpile\": \"sh ./test/ts/transpile.sh\",\n    \"prepare\": \"husky install\"\n  },\n  \"standard\": {\n    \"ignore\": [\n      \"test/ts/**/*\",\n      \"test/syntax-error.mjs\"\n    ]\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/mcollina/thread-stream.git\"\n  },\n  \"keywords\": [\n    \"worker\",\n    \"thread\",\n    \"threads\",\n    \"stream\"\n  ],\n  \"author\": \"Matteo Collina <hello@matteocollina.com>\",\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/mcollina/thread-stream/issues\"\n  },\n  \"homepage\": \"https://github.com/mcollina/thread-stream#readme\"\n}\n","'use strict'\n\nconst MAX_TIMEOUT = 1000\n\nfunction wait (state, index, expected, timeout, done) {\n  const max = Date.now() + timeout\n  let current = Atomics.load(state, index)\n  if (current === expected) {\n    done(null, 'ok')\n    return\n  }\n  let prior = current\n  const check = (backoff) => {\n    if (Date.now() > max) {\n      done(null, 'timed-out')\n    } else {\n      setTimeout(() => {\n        prior = current\n        current = Atomics.load(state, index)\n        if (current === prior) {\n          check(backoff >= MAX_TIMEOUT ? MAX_TIMEOUT : backoff * 2)\n        } else {\n          if (current === expected) done(null, 'ok')\n          else done(null, 'not-equal')\n        }\n      }, backoff)\n    }\n  }\n  check(1)\n}\n\n// let waitDiffCount = 0\nfunction waitDiff (state, index, expected, timeout, done) {\n  // const id = waitDiffCount++\n  // process._rawDebug(`>>> waitDiff ${id}`)\n  const max = Date.now() + timeout\n  let current = Atomics.load(state, index)\n  if (current !== expected) {\n    done(null, 'ok')\n    return\n  }\n  const check = (backoff) => {\n    // process._rawDebug(`${id} ${index} current ${current} expected ${expected}`)\n    // process._rawDebug('' + backoff)\n    if (Date.now() > max) {\n      done(null, 'timed-out')\n    } else {\n      setTimeout(() => {\n        current = Atomics.load(state, index)\n        if (current !== expected) {\n          done(null, 'ok')\n        } else {\n          check(backoff >= MAX_TIMEOUT ? MAX_TIMEOUT : backoff * 2)\n        }\n      }, backoff)\n    }\n  }\n  check(1)\n}\n\nmodule.exports = { wait, waitDiff }\n","'use strict'\n\nconst WRITE_INDEX = 4\nconst READ_INDEX = 8\n\nmodule.exports = {\n  WRITE_INDEX,\n  READ_INDEX\n}\n","'use strict'\n\nconst { version } = require('./package.json')\nconst { EventEmitter } = require('events')\nconst { Worker } = require('worker_threads')\nconst { join } = require('path')\nconst { pathToFileURL } = require('url')\nconst { wait } = require('./lib/wait')\nconst {\n  WRITE_INDEX,\n  READ_INDEX\n} = require('./lib/indexes')\nconst buffer = require('buffer')\nconst assert = require('assert')\n\nconst kImpl = Symbol('kImpl')\n\n// V8 limit for string size\nconst MAX_STRING = buffer.constants.MAX_STRING_LENGTH\n\nclass FakeWeakRef {\n  constructor (value) {\n    this._value = value\n  }\n\n  deref () {\n    return this._value\n  }\n}\n\nclass FakeFinalizationRegistry {\n  register () {}\n\n  unregister () {}\n}\n\n// Currently using FinalizationRegistry with code coverage breaks the world\n// Ref: https://github.com/nodejs/node/issues/49344\nconst FinalizationRegistry = process.env.NODE_V8_COVERAGE ? FakeFinalizationRegistry : global.FinalizationRegistry || FakeFinalizationRegistry\nconst WeakRef = process.env.NODE_V8_COVERAGE ? FakeWeakRef : global.WeakRef || FakeWeakRef\n\nconst registry = new FinalizationRegistry((worker) => {\n  if (worker.exited) {\n    return\n  }\n  worker.terminate()\n})\n\nfunction createWorker (stream, opts) {\n  const { filename, workerData } = opts\n\n  const bundlerOverrides = '__bundlerPathsOverrides' in globalThis ? globalThis.__bundlerPathsOverrides : {}\n  const toExecute = bundlerOverrides['thread-stream-worker'] || join(__dirname, 'lib', 'worker.js')\n\n  const worker = new Worker(toExecute, {\n    ...opts.workerOpts,\n    trackUnmanagedFds: false,\n    workerData: {\n      filename: filename.indexOf('file://') === 0\n        ? filename\n        : pathToFileURL(filename).href,\n      dataBuf: stream[kImpl].dataBuf,\n      stateBuf: stream[kImpl].stateBuf,\n      workerData: {\n        $context: {\n          threadStreamVersion: version\n        },\n        ...workerData\n      }\n    }\n  })\n\n  // We keep a strong reference for now,\n  // we need to start writing first\n  worker.stream = new FakeWeakRef(stream)\n\n  worker.on('message', onWorkerMessage)\n  worker.on('exit', onWorkerExit)\n  registry.register(stream, worker)\n\n  return worker\n}\n\nfunction drain (stream) {\n  assert(!stream[kImpl].sync)\n  if (stream[kImpl].needDrain) {\n    stream[kImpl].needDrain = false\n    stream.emit('drain')\n  }\n}\n\nfunction nextFlush (stream) {\n  const writeIndex = Atomics.load(stream[kImpl].state, WRITE_INDEX)\n  let leftover = stream[kImpl].data.length - writeIndex\n\n  if (leftover > 0) {\n    if (stream[kImpl].buf.length === 0) {\n      stream[kImpl].flushing = false\n\n      if (stream[kImpl].ending) {\n        end(stream)\n      } else if (stream[kImpl].needDrain) {\n        process.nextTick(drain, stream)\n      }\n\n      return\n    }\n\n    let toWrite = stream[kImpl].buf.slice(0, leftover)\n    let toWriteBytes = Buffer.byteLength(toWrite)\n    if (toWriteBytes <= leftover) {\n      stream[kImpl].buf = stream[kImpl].buf.slice(leftover)\n      // process._rawDebug('writing ' + toWrite.length)\n      write(stream, toWrite, nextFlush.bind(null, stream))\n    } else {\n      // multi-byte utf-8\n      stream.flush(() => {\n        // err is already handled in flush()\n        if (stream.destroyed) {\n          return\n        }\n\n        Atomics.store(stream[kImpl].state, READ_INDEX, 0)\n        Atomics.store(stream[kImpl].state, WRITE_INDEX, 0)\n\n        // Find a toWrite length that fits the buffer\n        // it must exists as the buffer is at least 4 bytes length\n        // and the max utf-8 length for a char is 4 bytes.\n        while (toWriteBytes > stream[kImpl].data.length) {\n          leftover = leftover / 2\n          toWrite = stream[kImpl].buf.slice(0, leftover)\n          toWriteBytes = Buffer.byteLength(toWrite)\n        }\n        stream[kImpl].buf = stream[kImpl].buf.slice(leftover)\n        write(stream, toWrite, nextFlush.bind(null, stream))\n      })\n    }\n  } else if (leftover === 0) {\n    if (writeIndex === 0 && stream[kImpl].buf.length === 0) {\n      // we had a flushSync in the meanwhile\n      return\n    }\n    stream.flush(() => {\n      Atomics.store(stream[kImpl].state, READ_INDEX, 0)\n      Atomics.store(stream[kImpl].state, WRITE_INDEX, 0)\n      nextFlush(stream)\n    })\n  } else {\n    // This should never happen\n    destroy(stream, new Error('overwritten'))\n  }\n}\n\nfunction onWorkerMessage (msg) {\n  const stream = this.stream.deref()\n  if (stream === undefined) {\n    this.exited = true\n    // Terminate the worker.\n    this.terminate()\n    return\n  }\n\n  switch (msg.code) {\n    case 'READY':\n      // Replace the FakeWeakRef with a\n      // proper one.\n      this.stream = new WeakRef(stream)\n\n      stream.flush(() => {\n        stream[kImpl].ready = true\n        stream.emit('ready')\n      })\n      break\n    case 'ERROR':\n      destroy(stream, msg.err)\n      break\n    case 'EVENT':\n      if (Array.isArray(msg.args)) {\n        stream.emit(msg.name, ...msg.args)\n      } else {\n        stream.emit(msg.name, msg.args)\n      }\n      break\n    case 'WARNING':\n      process.emitWarning(msg.err)\n      break\n    default:\n      destroy(stream, new Error('this should not happen: ' + msg.code))\n  }\n}\n\nfunction onWorkerExit (code) {\n  const stream = this.stream.deref()\n  if (stream === undefined) {\n    // Nothing to do, the worker already exit\n    return\n  }\n  registry.unregister(stream)\n  stream.worker.exited = true\n  stream.worker.off('exit', onWorkerExit)\n  destroy(stream, code !== 0 ? new Error('the worker thread exited') : null)\n}\n\nclass ThreadStream extends EventEmitter {\n  constructor (opts = {}) {\n    super()\n\n    if (opts.bufferSize < 4) {\n      throw new Error('bufferSize must at least fit a 4-byte utf-8 char')\n    }\n\n    this[kImpl] = {}\n    this[kImpl].stateBuf = new SharedArrayBuffer(128)\n    this[kImpl].state = new Int32Array(this[kImpl].stateBuf)\n    this[kImpl].dataBuf = new SharedArrayBuffer(opts.bufferSize || 4 * 1024 * 1024)\n    this[kImpl].data = Buffer.from(this[kImpl].dataBuf)\n    this[kImpl].sync = opts.sync || false\n    this[kImpl].ending = false\n    this[kImpl].ended = false\n    this[kImpl].needDrain = false\n    this[kImpl].destroyed = false\n    this[kImpl].flushing = false\n    this[kImpl].ready = false\n    this[kImpl].finished = false\n    this[kImpl].errored = null\n    this[kImpl].closed = false\n    this[kImpl].buf = ''\n\n    // TODO (fix): Make private?\n    this.worker = createWorker(this, opts) // TODO (fix): make private\n    this.on('message', (message, transferList) => {\n      this.worker.postMessage(message, transferList)\n    })\n  }\n\n  write (data) {\n    if (this[kImpl].destroyed) {\n      error(this, new Error('the worker has exited'))\n      return false\n    }\n\n    if (this[kImpl].ending) {\n      error(this, new Error('the worker is ending'))\n      return false\n    }\n\n    if (this[kImpl].flushing && this[kImpl].buf.length + data.length >= MAX_STRING) {\n      try {\n        writeSync(this)\n        this[kImpl].flushing = true\n      } catch (err) {\n        destroy(this, err)\n        return false\n      }\n    }\n\n    this[kImpl].buf += data\n\n    if (this[kImpl].sync) {\n      try {\n        writeSync(this)\n        return true\n      } catch (err) {\n        destroy(this, err)\n        return false\n      }\n    }\n\n    if (!this[kImpl].flushing) {\n      this[kImpl].flushing = true\n      setImmediate(nextFlush, this)\n    }\n\n    this[kImpl].needDrain = this[kImpl].data.length - this[kImpl].buf.length - Atomics.load(this[kImpl].state, WRITE_INDEX) <= 0\n    return !this[kImpl].needDrain\n  }\n\n  end () {\n    if (this[kImpl].destroyed) {\n      return\n    }\n\n    this[kImpl].ending = true\n    end(this)\n  }\n\n  flush (cb) {\n    if (this[kImpl].destroyed) {\n      if (typeof cb === 'function') {\n        process.nextTick(cb, new Error('the worker has exited'))\n      }\n      return\n    }\n\n    // TODO write all .buf\n    const writeIndex = Atomics.load(this[kImpl].state, WRITE_INDEX)\n    // process._rawDebug(`(flush) readIndex (${Atomics.load(this.state, READ_INDEX)}) writeIndex (${Atomics.load(this.state, WRITE_INDEX)})`)\n    wait(this[kImpl].state, READ_INDEX, writeIndex, Infinity, (err, res) => {\n      if (err) {\n        destroy(this, err)\n        process.nextTick(cb, err)\n        return\n      }\n      if (res === 'not-equal') {\n        // TODO handle deadlock\n        this.flush(cb)\n        return\n      }\n      process.nextTick(cb)\n    })\n  }\n\n  flushSync () {\n    if (this[kImpl].destroyed) {\n      return\n    }\n\n    writeSync(this)\n    flushSync(this)\n  }\n\n  unref () {\n    this.worker.unref()\n  }\n\n  ref () {\n    this.worker.ref()\n  }\n\n  get ready () {\n    return this[kImpl].ready\n  }\n\n  get destroyed () {\n    return this[kImpl].destroyed\n  }\n\n  get closed () {\n    return this[kImpl].closed\n  }\n\n  get writable () {\n    return !this[kImpl].destroyed && !this[kImpl].ending\n  }\n\n  get writableEnded () {\n    return this[kImpl].ending\n  }\n\n  get writableFinished () {\n    return this[kImpl].finished\n  }\n\n  get writableNeedDrain () {\n    return this[kImpl].needDrain\n  }\n\n  get writableObjectMode () {\n    return false\n  }\n\n  get writableErrored () {\n    return this[kImpl].errored\n  }\n}\n\nfunction error (stream, err) {\n  setImmediate(() => {\n    stream.emit('error', err)\n  })\n}\n\nfunction destroy (stream, err) {\n  if (stream[kImpl].destroyed) {\n    return\n  }\n  stream[kImpl].destroyed = true\n\n  if (err) {\n    stream[kImpl].errored = err\n    error(stream, err)\n  }\n\n  if (!stream.worker.exited) {\n    stream.worker.terminate()\n      .catch(() => {})\n      .then(() => {\n        stream[kImpl].closed = true\n        stream.emit('close')\n      })\n  } else {\n    setImmediate(() => {\n      stream[kImpl].closed = true\n      stream.emit('close')\n    })\n  }\n}\n\nfunction write (stream, data, cb) {\n  // data is smaller than the shared buffer length\n  const current = Atomics.load(stream[kImpl].state, WRITE_INDEX)\n  const length = Buffer.byteLength(data)\n  stream[kImpl].data.write(data, current)\n  Atomics.store(stream[kImpl].state, WRITE_INDEX, current + length)\n  Atomics.notify(stream[kImpl].state, WRITE_INDEX)\n  cb()\n  return true\n}\n\nfunction end (stream) {\n  if (stream[kImpl].ended || !stream[kImpl].ending || stream[kImpl].flushing) {\n    return\n  }\n  stream[kImpl].ended = true\n\n  try {\n    stream.flushSync()\n\n    let readIndex = Atomics.load(stream[kImpl].state, READ_INDEX)\n\n    // process._rawDebug('writing index')\n    Atomics.store(stream[kImpl].state, WRITE_INDEX, -1)\n    // process._rawDebug(`(end) readIndex (${Atomics.load(stream.state, READ_INDEX)}) writeIndex (${Atomics.load(stream.state, WRITE_INDEX)})`)\n    Atomics.notify(stream[kImpl].state, WRITE_INDEX)\n\n    // Wait for the process to complete\n    let spins = 0\n    while (readIndex !== -1) {\n      // process._rawDebug(`read = ${read}`)\n      Atomics.wait(stream[kImpl].state, READ_INDEX, readIndex, 1000)\n      readIndex = Atomics.load(stream[kImpl].state, READ_INDEX)\n\n      if (readIndex === -2) {\n        destroy(stream, new Error('end() failed'))\n        return\n      }\n\n      if (++spins === 10) {\n        destroy(stream, new Error('end() took too long (10s)'))\n        return\n      }\n    }\n\n    process.nextTick(() => {\n      stream[kImpl].finished = true\n      stream.emit('finish')\n    })\n  } catch (err) {\n    destroy(stream, err)\n  }\n  // process._rawDebug('end finished...')\n}\n\nfunction writeSync (stream) {\n  const cb = () => {\n    if (stream[kImpl].ending) {\n      end(stream)\n    } else if (stream[kImpl].needDrain) {\n      process.nextTick(drain, stream)\n    }\n  }\n  stream[kImpl].flushing = false\n\n  while (stream[kImpl].buf.length !== 0) {\n    const writeIndex = Atomics.load(stream[kImpl].state, WRITE_INDEX)\n    let leftover = stream[kImpl].data.length - writeIndex\n    if (leftover === 0) {\n      flushSync(stream)\n      Atomics.store(stream[kImpl].state, READ_INDEX, 0)\n      Atomics.store(stream[kImpl].state, WRITE_INDEX, 0)\n      continue\n    } else if (leftover < 0) {\n      // stream should never happen\n      throw new Error('overwritten')\n    }\n\n    let toWrite = stream[kImpl].buf.slice(0, leftover)\n    let toWriteBytes = Buffer.byteLength(toWrite)\n    if (toWriteBytes <= leftover) {\n      stream[kImpl].buf = stream[kImpl].buf.slice(leftover)\n      // process._rawDebug('writing ' + toWrite.length)\n      write(stream, toWrite, cb)\n    } else {\n      // multi-byte utf-8\n      flushSync(stream)\n      Atomics.store(stream[kImpl].state, READ_INDEX, 0)\n      Atomics.store(stream[kImpl].state, WRITE_INDEX, 0)\n\n      // Find a toWrite length that fits the buffer\n      // it must exists as the buffer is at least 4 bytes length\n      // and the max utf-8 length for a char is 4 bytes.\n      while (toWriteBytes > stream[kImpl].buf.length) {\n        leftover = leftover / 2\n        toWrite = stream[kImpl].buf.slice(0, leftover)\n        toWriteBytes = Buffer.byteLength(toWrite)\n      }\n      stream[kImpl].buf = stream[kImpl].buf.slice(leftover)\n      write(stream, toWrite, cb)\n    }\n  }\n}\n\nfunction flushSync (stream) {\n  if (stream[kImpl].flushing) {\n    throw new Error('unable to flush while flushing')\n  }\n\n  // process._rawDebug('flushSync started')\n\n  const writeIndex = Atomics.load(stream[kImpl].state, WRITE_INDEX)\n\n  let spins = 0\n\n  // TODO handle deadlock\n  while (true) {\n    const readIndex = Atomics.load(stream[kImpl].state, READ_INDEX)\n\n    if (readIndex === -2) {\n      throw Error('_flushSync failed')\n    }\n\n    // process._rawDebug(`(flushSync) readIndex (${readIndex}) writeIndex (${writeIndex})`)\n    if (readIndex !== writeIndex) {\n      // TODO stream timeouts for some reason.\n      Atomics.wait(stream[kImpl].state, READ_INDEX, readIndex, 1000)\n    } else {\n      break\n    }\n\n    if (++spins === 10) {\n      throw new Error('_flushSync took too long (10s)')\n    }\n  }\n  // process._rawDebug('flushSync finished')\n}\n\nmodule.exports = ThreadStream\n","'use strict'\n\nconst { createRequire } = require('module')\nconst getCallers = require('./caller')\nconst { join, isAbsolute, sep } = require('node:path')\nconst sleep = require('atomic-sleep')\nconst onExit = require('on-exit-leak-free')\nconst ThreadStream = require('thread-stream')\n\nfunction setupOnExit (stream) {\n  // This is leak free, it does not leave event handlers\n  onExit.register(stream, autoEnd)\n  onExit.registerBeforeExit(stream, flush)\n\n  stream.on('close', function () {\n    onExit.unregister(stream)\n  })\n}\n\nfunction buildStream (filename, workerData, workerOpts, sync) {\n  const stream = new ThreadStream({\n    filename,\n    workerData,\n    workerOpts,\n    sync\n  })\n\n  stream.on('ready', onReady)\n  stream.on('close', function () {\n    process.removeListener('exit', onExit)\n  })\n\n  process.on('exit', onExit)\n\n  function onReady () {\n    process.removeListener('exit', onExit)\n    stream.unref()\n\n    if (workerOpts.autoEnd !== false) {\n      setupOnExit(stream)\n    }\n  }\n\n  function onExit () {\n    /* istanbul ignore next */\n    if (stream.closed) {\n      return\n    }\n    stream.flushSync()\n    // Apparently there is a very sporadic race condition\n    // that in certain OS would prevent the messages to be flushed\n    // because the thread might not have been created still.\n    // Unfortunately we need to sleep(100) in this case.\n    sleep(100)\n    stream.end()\n  }\n\n  return stream\n}\n\nfunction autoEnd (stream) {\n  stream.ref()\n  stream.flushSync()\n  stream.end()\n  stream.once('close', function () {\n    stream.unref()\n  })\n}\n\nfunction flush (stream) {\n  stream.flushSync()\n}\n\nfunction transport (fullOptions) {\n  const { pipeline, targets, levels, dedupe, worker = {}, caller = getCallers(), sync = false } = fullOptions\n\n  const options = {\n    ...fullOptions.options\n  }\n\n  // Backwards compatibility\n  const callers = typeof caller === 'string' ? [caller] : caller\n\n  // This will be eventually modified by bundlers\n  const bundlerOverrides = '__bundlerPathsOverrides' in globalThis ? globalThis.__bundlerPathsOverrides : {}\n\n  let target = fullOptions.target\n\n  if (target && targets) {\n    throw new Error('only one of target or targets can be specified')\n  }\n\n  if (targets) {\n    target = bundlerOverrides['pino-worker'] || join(__dirname, 'worker.js')\n    options.targets = targets.filter(dest => dest.target).map((dest) => {\n      return {\n        ...dest,\n        target: fixTarget(dest.target)\n      }\n    })\n    options.pipelines = targets.filter(dest => dest.pipeline).map((dest) => {\n      return dest.pipeline.map((t) => {\n        return {\n          ...t,\n          level: dest.level, // duplicate the pipeline `level` property defined in the upper level\n          target: fixTarget(t.target)\n        }\n      })\n    })\n  } else if (pipeline) {\n    target = bundlerOverrides['pino-worker'] || join(__dirname, 'worker.js')\n    options.pipelines = [pipeline.map((dest) => {\n      return {\n        ...dest,\n        target: fixTarget(dest.target)\n      }\n    })]\n  }\n\n  if (levels) {\n    options.levels = levels\n  }\n\n  if (dedupe) {\n    options.dedupe = dedupe\n  }\n\n  options.pinoWillSendConfig = true\n\n  return buildStream(fixTarget(target), options, worker, sync)\n\n  function fixTarget (origin) {\n    origin = bundlerOverrides[origin] || origin\n\n    if (isAbsolute(origin) || origin.indexOf('file://') === 0) {\n      return origin\n    }\n\n    if (origin === 'pino/file') {\n      return join(__dirname, '..', 'file.js')\n    }\n\n    let fixTarget\n\n    for (const filePath of callers) {\n      try {\n        const context = filePath === 'node:repl'\n          ? process.cwd() + sep\n          : filePath\n\n        fixTarget = createRequire(context).resolve(origin)\n        break\n      } catch (err) {\n        // Silent catch\n        continue\n      }\n    }\n\n    if (!fixTarget) {\n      throw new Error(`unable to determine transport target for \"${origin}\"`)\n    }\n\n    return fixTarget\n  }\n}\n\nmodule.exports = transport\n","'use strict'\n\n/* eslint no-prototype-builtins: 0 */\n\nconst format = require('quick-format-unescaped')\nconst { mapHttpRequest, mapHttpResponse } = require('pino-std-serializers')\nconst SonicBoom = require('sonic-boom')\nconst onExit = require('on-exit-leak-free')\nconst {\n  lsCacheSym,\n  chindingsSym,\n  writeSym,\n  serializersSym,\n  formatOptsSym,\n  endSym,\n  stringifiersSym,\n  stringifySym,\n  stringifySafeSym,\n  wildcardFirstSym,\n  nestedKeySym,\n  formattersSym,\n  messageKeySym,\n  errorKeySym,\n  nestedKeyStrSym,\n  msgPrefixSym\n} = require('./symbols')\nconst { isMainThread } = require('worker_threads')\nconst transport = require('./transport')\n\nfunction noop () {\n}\n\nfunction genLog (level, hook) {\n  if (!hook) return LOG\n\n  return function hookWrappedLog (...args) {\n    hook.call(this, args, LOG, level)\n  }\n\n  function LOG (o, ...n) {\n    if (typeof o === 'object') {\n      let msg = o\n      if (o !== null) {\n        if (o.method && o.headers && o.socket) {\n          o = mapHttpRequest(o)\n        } else if (typeof o.setHeader === 'function') {\n          o = mapHttpResponse(o)\n        }\n      }\n      let formatParams\n      if (msg === null && n.length === 0) {\n        formatParams = [null]\n      } else {\n        msg = n.shift()\n        formatParams = n\n      }\n      // We do not use a coercive check for `msg` as it is\n      // measurably slower than the explicit checks.\n      if (typeof this[msgPrefixSym] === 'string' && msg !== undefined && msg !== null) {\n        msg = this[msgPrefixSym] + msg\n      }\n      this[writeSym](o, format(msg, formatParams, this[formatOptsSym]), level)\n    } else {\n      let msg = o === undefined ? n.shift() : o\n\n      // We do not use a coercive check for `msg` as it is\n      // measurably slower than the explicit checks.\n      if (typeof this[msgPrefixSym] === 'string' && msg !== undefined && msg !== null) {\n        msg = this[msgPrefixSym] + msg\n      }\n      this[writeSym](null, format(msg, n, this[formatOptsSym]), level)\n    }\n  }\n}\n\n// magically escape strings for json\n// relying on their charCodeAt\n// everything below 32 needs JSON.stringify()\n// 34 and 92 happens all the time, so we\n// have a fast case for them\nfunction asString (str) {\n  let result = ''\n  let last = 0\n  let found = false\n  let point = 255\n  const l = str.length\n  if (l > 100) {\n    return JSON.stringify(str)\n  }\n  for (var i = 0; i < l && point >= 32; i++) {\n    point = str.charCodeAt(i)\n    if (point === 34 || point === 92) {\n      result += str.slice(last, i) + '\\\\'\n      last = i\n      found = true\n    }\n  }\n  if (!found) {\n    result = str\n  } else {\n    result += str.slice(last)\n  }\n  return point < 32 ? JSON.stringify(str) : '\"' + result + '\"'\n}\n\nfunction asJson (obj, msg, num, time) {\n  const stringify = this[stringifySym]\n  const stringifySafe = this[stringifySafeSym]\n  const stringifiers = this[stringifiersSym]\n  const end = this[endSym]\n  const chindings = this[chindingsSym]\n  const serializers = this[serializersSym]\n  const formatters = this[formattersSym]\n  const messageKey = this[messageKeySym]\n  const errorKey = this[errorKeySym]\n  let data = this[lsCacheSym][num] + time\n\n  // we need the child bindings added to the output first so instance logged\n  // objects can take precedence when JSON.parse-ing the resulting log line\n  data = data + chindings\n\n  let value\n  if (formatters.log) {\n    obj = formatters.log(obj)\n  }\n  const wildcardStringifier = stringifiers[wildcardFirstSym]\n  let propStr = ''\n  for (const key in obj) {\n    value = obj[key]\n    if (Object.prototype.hasOwnProperty.call(obj, key) && value !== undefined) {\n      if (serializers[key]) {\n        value = serializers[key](value)\n      } else if (key === errorKey && serializers.err) {\n        value = serializers.err(value)\n      }\n\n      const stringifier = stringifiers[key] || wildcardStringifier\n\n      switch (typeof value) {\n        case 'undefined':\n        case 'function':\n          continue\n        case 'number':\n          /* eslint no-fallthrough: \"off\" */\n          if (Number.isFinite(value) === false) {\n            value = null\n          }\n        // this case explicitly falls through to the next one\n        case 'boolean':\n          if (stringifier) value = stringifier(value)\n          break\n        case 'string':\n          value = (stringifier || asString)(value)\n          break\n        default:\n          value = (stringifier || stringify)(value, stringifySafe)\n      }\n      if (value === undefined) continue\n      const strKey = asString(key)\n      propStr += ',' + strKey + ':' + value\n    }\n  }\n\n  let msgStr = ''\n  if (msg !== undefined) {\n    value = serializers[messageKey] ? serializers[messageKey](msg) : msg\n    const stringifier = stringifiers[messageKey] || wildcardStringifier\n\n    switch (typeof value) {\n      case 'function':\n        break\n      case 'number':\n        /* eslint no-fallthrough: \"off\" */\n        if (Number.isFinite(value) === false) {\n          value = null\n        }\n      // this case explicitly falls through to the next one\n      case 'boolean':\n        if (stringifier) value = stringifier(value)\n        msgStr = ',\"' + messageKey + '\":' + value\n        break\n      case 'string':\n        value = (stringifier || asString)(value)\n        msgStr = ',\"' + messageKey + '\":' + value\n        break\n      default:\n        value = (stringifier || stringify)(value, stringifySafe)\n        msgStr = ',\"' + messageKey + '\":' + value\n    }\n  }\n\n  if (this[nestedKeySym] && propStr) {\n    // place all the obj properties under the specified key\n    // the nested key is already formatted from the constructor\n    return data + this[nestedKeyStrSym] + propStr.slice(1) + '}' + msgStr + end\n  } else {\n    return data + propStr + msgStr + end\n  }\n}\n\nfunction asChindings (instance, bindings) {\n  let value\n  let data = instance[chindingsSym]\n  const stringify = instance[stringifySym]\n  const stringifySafe = instance[stringifySafeSym]\n  const stringifiers = instance[stringifiersSym]\n  const wildcardStringifier = stringifiers[wildcardFirstSym]\n  const serializers = instance[serializersSym]\n  const formatter = instance[formattersSym].bindings\n  bindings = formatter(bindings)\n\n  for (const key in bindings) {\n    value = bindings[key]\n    const valid = key !== 'level' &&\n      key !== 'serializers' &&\n      key !== 'formatters' &&\n      key !== 'customLevels' &&\n      bindings.hasOwnProperty(key) &&\n      value !== undefined\n    if (valid === true) {\n      value = serializers[key] ? serializers[key](value) : value\n      value = (stringifiers[key] || wildcardStringifier || stringify)(value, stringifySafe)\n      if (value === undefined) continue\n      data += ',\"' + key + '\":' + value\n    }\n  }\n  return data\n}\n\nfunction hasBeenTampered (stream) {\n  return stream.write !== stream.constructor.prototype.write\n}\n\nfunction buildSafeSonicBoom (opts) {\n  const stream = new SonicBoom(opts)\n  stream.on('error', filterBrokenPipe)\n  // If we are sync: false, we must flush on exit\n  if (!opts.sync && isMainThread) {\n    onExit.register(stream, autoEnd)\n\n    stream.on('close', function () {\n      onExit.unregister(stream)\n    })\n  }\n  return stream\n\n  function filterBrokenPipe (err) {\n    // Impossible to replicate across all operating systems\n    /* istanbul ignore next */\n    if (err.code === 'EPIPE') {\n      // If we get EPIPE, we should stop logging here\n      // however we have no control to the consumer of\n      // SonicBoom, so we just overwrite the write method\n      stream.write = noop\n      stream.end = noop\n      stream.flushSync = noop\n      stream.destroy = noop\n      return\n    }\n    stream.removeListener('error', filterBrokenPipe)\n    stream.emit('error', err)\n  }\n}\n\nfunction autoEnd (stream, eventName) {\n  // This check is needed only on some platforms\n  /* istanbul ignore next */\n  if (stream.destroyed) {\n    return\n  }\n\n  if (eventName === 'beforeExit') {\n    // We still have an event loop, let's use it\n    stream.flush()\n    stream.on('drain', function () {\n      stream.end()\n    })\n  } else {\n    // For some reason istanbul is not detecting this, but it's there\n    /* istanbul ignore next */\n    // We do not have an event loop, so flush synchronously\n    stream.flushSync()\n  }\n}\n\nfunction createArgsNormalizer (defaultOptions) {\n  return function normalizeArgs (instance, caller, opts = {}, stream) {\n    // support stream as a string\n    if (typeof opts === 'string') {\n      stream = buildSafeSonicBoom({ dest: opts })\n      opts = {}\n    } else if (typeof stream === 'string') {\n      if (opts && opts.transport) {\n        throw Error('only one of option.transport or stream can be specified')\n      }\n      stream = buildSafeSonicBoom({ dest: stream })\n    } else if (opts instanceof SonicBoom || opts.writable || opts._writableState) {\n      stream = opts\n      opts = {}\n    } else if (opts.transport) {\n      if (opts.transport instanceof SonicBoom || opts.transport.writable || opts.transport._writableState) {\n        throw Error('option.transport do not allow stream, please pass to option directly. e.g. pino(transport)')\n      }\n      if (opts.transport.targets && opts.transport.targets.length && opts.formatters && typeof opts.formatters.level === 'function') {\n        throw Error('option.transport.targets do not allow custom level formatters')\n      }\n\n      let customLevels\n      if (opts.customLevels) {\n        customLevels = opts.useOnlyCustomLevels ? opts.customLevels : Object.assign({}, opts.levels, opts.customLevels)\n      }\n      stream = transport({ caller, ...opts.transport, levels: customLevels })\n    }\n    opts = Object.assign({}, defaultOptions, opts)\n    opts.serializers = Object.assign({}, defaultOptions.serializers, opts.serializers)\n    opts.formatters = Object.assign({}, defaultOptions.formatters, opts.formatters)\n\n    if (opts.prettyPrint) {\n      throw new Error('prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)')\n    }\n\n    const { enabled, onChild } = opts\n    if (enabled === false) opts.level = 'silent'\n    if (!onChild) opts.onChild = noop\n    if (!stream) {\n      if (!hasBeenTampered(process.stdout)) {\n        // If process.stdout.fd is undefined, it means that we are running\n        // in a worker thread. Let's assume we are logging to file descriptor 1.\n        stream = buildSafeSonicBoom({ fd: process.stdout.fd || 1 })\n      } else {\n        stream = process.stdout\n      }\n    }\n    return { opts, stream }\n  }\n}\n\nfunction stringify (obj, stringifySafeFn) {\n  try {\n    return JSON.stringify(obj)\n  } catch (_) {\n    try {\n      const stringify = stringifySafeFn || this[stringifySafeSym]\n      return stringify(obj)\n    } catch (_) {\n      return '\"[unable to serialize, circular reference is too complex to analyze]\"'\n    }\n  }\n}\n\nfunction buildFormatters (level, bindings, log) {\n  return {\n    level,\n    bindings,\n    log\n  }\n}\n\n/**\n * Convert a string integer file descriptor to a proper native integer\n * file descriptor.\n *\n * @param {string} destination The file descriptor string to attempt to convert.\n *\n * @returns {Number}\n */\nfunction normalizeDestFileDescriptor (destination) {\n  const fd = Number(destination)\n  if (typeof destination === 'string' && Number.isFinite(fd)) {\n    return fd\n  }\n  // destination could be undefined if we are in a worker\n  if (destination === undefined) {\n    // This is stdout in UNIX systems\n    return 1\n  }\n  return destination\n}\n\nmodule.exports = {\n  noop,\n  buildSafeSonicBoom,\n  asChindings,\n  asJson,\n  genLog,\n  createArgsNormalizer,\n  stringify,\n  buildFormatters,\n  normalizeDestFileDescriptor\n}\n","/**\n * Represents default log level values\n *\n * @enum {number}\n */\nconst DEFAULT_LEVELS = {\n  trace: 10,\n  debug: 20,\n  info: 30,\n  warn: 40,\n  error: 50,\n  fatal: 60\n}\n\n/**\n * Represents sort order direction: `ascending` or `descending`\n *\n * @enum {string}\n */\nconst SORTING_ORDER = {\n  ASC: 'ASC',\n  DESC: 'DESC'\n}\n\nmodule.exports = {\n  DEFAULT_LEVELS,\n  SORTING_ORDER\n}\n","'use strict'\n/* eslint no-prototype-builtins: 0 */\nconst {\n  lsCacheSym,\n  levelValSym,\n  useOnlyCustomLevelsSym,\n  streamSym,\n  formattersSym,\n  hooksSym,\n  levelCompSym\n} = require('./symbols')\nconst { noop, genLog } = require('./tools')\nconst { DEFAULT_LEVELS, SORTING_ORDER } = require('./constants')\n\nconst levelMethods = {\n  fatal: (hook) => {\n    const logFatal = genLog(DEFAULT_LEVELS.fatal, hook)\n    return function (...args) {\n      const stream = this[streamSym]\n      logFatal.call(this, ...args)\n      if (typeof stream.flushSync === 'function') {\n        try {\n          stream.flushSync()\n        } catch (e) {\n          // https://github.com/pinojs/pino/pull/740#discussion_r346788313\n        }\n      }\n    }\n  },\n  error: (hook) => genLog(DEFAULT_LEVELS.error, hook),\n  warn: (hook) => genLog(DEFAULT_LEVELS.warn, hook),\n  info: (hook) => genLog(DEFAULT_LEVELS.info, hook),\n  debug: (hook) => genLog(DEFAULT_LEVELS.debug, hook),\n  trace: (hook) => genLog(DEFAULT_LEVELS.trace, hook)\n}\n\nconst nums = Object.keys(DEFAULT_LEVELS).reduce((o, k) => {\n  o[DEFAULT_LEVELS[k]] = k\n  return o\n}, {})\n\nconst initialLsCache = Object.keys(nums).reduce((o, k) => {\n  o[k] = '{\"level\":' + Number(k)\n  return o\n}, {})\n\nfunction genLsCache (instance) {\n  const formatter = instance[formattersSym].level\n  const { labels } = instance.levels\n  const cache = {}\n  for (const label in labels) {\n    const level = formatter(labels[label], Number(label))\n    cache[label] = JSON.stringify(level).slice(0, -1)\n  }\n  instance[lsCacheSym] = cache\n  return instance\n}\n\nfunction isStandardLevel (level, useOnlyCustomLevels) {\n  if (useOnlyCustomLevels) {\n    return false\n  }\n\n  switch (level) {\n    case 'fatal':\n    case 'error':\n    case 'warn':\n    case 'info':\n    case 'debug':\n    case 'trace':\n      return true\n    default:\n      return false\n  }\n}\n\nfunction setLevel (level) {\n  const { labels, values } = this.levels\n  if (typeof level === 'number') {\n    if (labels[level] === undefined) throw Error('unknown level value' + level)\n    level = labels[level]\n  }\n  if (values[level] === undefined) throw Error('unknown level ' + level)\n  const preLevelVal = this[levelValSym]\n  const levelVal = this[levelValSym] = values[level]\n  const useOnlyCustomLevelsVal = this[useOnlyCustomLevelsSym]\n  const levelComparison = this[levelCompSym]\n  const hook = this[hooksSym].logMethod\n\n  for (const key in values) {\n    if (levelComparison(values[key], levelVal) === false) {\n      this[key] = noop\n      continue\n    }\n    this[key] = isStandardLevel(key, useOnlyCustomLevelsVal) ? levelMethods[key](hook) : genLog(values[key], hook)\n  }\n\n  this.emit(\n    'level-change',\n    level,\n    levelVal,\n    labels[preLevelVal],\n    preLevelVal,\n    this\n  )\n}\n\nfunction getLevel (level) {\n  const { levels, levelVal } = this\n  // protection against potential loss of Pino scope from serializers (edge case with circular refs - https://github.com/pinojs/pino/issues/833)\n  return (levels && levels.labels) ? levels.labels[levelVal] : ''\n}\n\nfunction isLevelEnabled (logLevel) {\n  const { values } = this.levels\n  const logLevelVal = values[logLevel]\n  return logLevelVal !== undefined && this[levelCompSym](logLevelVal, this[levelValSym])\n}\n\n/**\n * Determine if the given `current` level is enabled by comparing it\n * against the current threshold (`expected`).\n *\n * @param {SORTING_ORDER} direction comparison direction \"ASC\" or \"DESC\"\n * @param {number} current current log level number representation\n * @param {number} expected threshold value to compare with\n * @returns {boolean}\n */\nfunction compareLevel (direction, current, expected) {\n  if (direction === SORTING_ORDER.DESC) {\n    return current <= expected\n  }\n\n  return current >= expected\n}\n\n/**\n * Create a level comparison function based on `levelComparison`\n * it could a default function which compares levels either in \"ascending\" or \"descending\" order or custom comparison function\n *\n * @param {SORTING_ORDER | Function} levelComparison sort levels order direction or custom comparison function\n * @returns Function\n */\nfunction genLevelComparison (levelComparison) {\n  if (typeof levelComparison === 'string') {\n    return compareLevel.bind(null, levelComparison)\n  }\n\n  return levelComparison\n}\n\nfunction mappings (customLevels = null, useOnlyCustomLevels = false) {\n  const customNums = customLevels\n    /* eslint-disable */\n    ? Object.keys(customLevels).reduce((o, k) => {\n        o[customLevels[k]] = k\n        return o\n      }, {})\n    : null\n    /* eslint-enable */\n\n  const labels = Object.assign(\n    Object.create(Object.prototype, { Infinity: { value: 'silent' } }),\n    useOnlyCustomLevels ? null : nums,\n    customNums\n  )\n  const values = Object.assign(\n    Object.create(Object.prototype, { silent: { value: Infinity } }),\n    useOnlyCustomLevels ? null : DEFAULT_LEVELS,\n    customLevels\n  )\n  return { labels, values }\n}\n\nfunction assertDefaultLevelFound (defaultLevel, customLevels, useOnlyCustomLevels) {\n  if (typeof defaultLevel === 'number') {\n    const values = [].concat(\n      Object.keys(customLevels || {}).map(key => customLevels[key]),\n      useOnlyCustomLevels ? [] : Object.keys(nums).map(level => +level),\n      Infinity\n    )\n    if (!values.includes(defaultLevel)) {\n      throw Error(`default level:${defaultLevel} must be included in custom levels`)\n    }\n    return\n  }\n\n  const labels = Object.assign(\n    Object.create(Object.prototype, { silent: { value: Infinity } }),\n    useOnlyCustomLevels ? null : DEFAULT_LEVELS,\n    customLevels\n  )\n  if (!(defaultLevel in labels)) {\n    throw Error(`default level:${defaultLevel} must be included in custom levels`)\n  }\n}\n\nfunction assertNoLevelCollisions (levels, customLevels) {\n  const { labels, values } = levels\n  for (const k in customLevels) {\n    if (k in values) {\n      throw Error('levels cannot be overridden')\n    }\n    if (customLevels[k] in labels) {\n      throw Error('pre-existing level values cannot be used for new levels')\n    }\n  }\n}\n\n/**\n * Validates whether `levelComparison` is correct\n *\n * @throws Error\n * @param {SORTING_ORDER | Function} levelComparison - value to validate\n * @returns\n */\nfunction assertLevelComparison (levelComparison) {\n  if (typeof levelComparison === 'function') {\n    return\n  }\n\n  if (typeof levelComparison === 'string' && Object.values(SORTING_ORDER).includes(levelComparison)) {\n    return\n  }\n\n  throw new Error('Levels comparison should be one of \"ASC\", \"DESC\" or \"function\" type')\n}\n\nmodule.exports = {\n  initialLsCache,\n  genLsCache,\n  levelMethods,\n  getLevel,\n  setLevel,\n  isLevelEnabled,\n  mappings,\n  assertNoLevelCollisions,\n  assertDefaultLevelFound,\n  genLevelComparison,\n  assertLevelComparison\n}\n","'use strict'\n\nmodule.exports = { version: '9.9.4' }\n","'use strict'\n\n/* eslint no-prototype-builtins: 0 */\n\nconst { EventEmitter } = require('node:events')\nconst {\n  lsCacheSym,\n  levelValSym,\n  setLevelSym,\n  getLevelSym,\n  chindingsSym,\n  parsedChindingsSym,\n  mixinSym,\n  asJsonSym,\n  writeSym,\n  mixinMergeStrategySym,\n  timeSym,\n  timeSliceIndexSym,\n  streamSym,\n  serializersSym,\n  formattersSym,\n  errorKeySym,\n  messageKeySym,\n  useOnlyCustomLevelsSym,\n  needsMetadataGsym,\n  redactFmtSym,\n  stringifySym,\n  formatOptsSym,\n  stringifiersSym,\n  msgPrefixSym,\n  hooksSym\n} = require('./symbols')\nconst {\n  getLevel,\n  setLevel,\n  isLevelEnabled,\n  mappings,\n  initialLsCache,\n  genLsCache,\n  assertNoLevelCollisions\n} = require('./levels')\nconst {\n  asChindings,\n  asJson,\n  buildFormatters,\n  stringify\n} = require('./tools')\nconst {\n  version\n} = require('./meta')\nconst redaction = require('./redaction')\n\n// note: use of class is satirical\n// https://github.com/pinojs/pino/pull/433#pullrequestreview-127703127\nconst constructor = class Pino {}\nconst prototype = {\n  constructor,\n  child,\n  bindings,\n  setBindings,\n  flush,\n  isLevelEnabled,\n  version,\n  get level () { return this[getLevelSym]() },\n  set level (lvl) { this[setLevelSym](lvl) },\n  get levelVal () { return this[levelValSym] },\n  set levelVal (n) { throw Error('levelVal is read-only') },\n  get msgPrefix () { return this[msgPrefixSym] },\n  [lsCacheSym]: initialLsCache,\n  [writeSym]: write,\n  [asJsonSym]: asJson,\n  [getLevelSym]: getLevel,\n  [setLevelSym]: setLevel\n}\n\nObject.setPrototypeOf(prototype, EventEmitter.prototype)\n\n// exporting and consuming the prototype object using factory pattern fixes scoping issues with getters when serializing\nmodule.exports = function () {\n  return Object.create(prototype)\n}\n\nconst resetChildingsFormatter = bindings => bindings\nfunction child (bindings, options) {\n  if (!bindings) {\n    throw Error('missing bindings for child Pino')\n  }\n  options = options || {} // default options to empty object\n  const serializers = this[serializersSym]\n  const formatters = this[formattersSym]\n  const instance = Object.create(this)\n\n  if (options.hasOwnProperty('serializers') === true) {\n    instance[serializersSym] = Object.create(null)\n\n    for (const k in serializers) {\n      instance[serializersSym][k] = serializers[k]\n    }\n    const parentSymbols = Object.getOwnPropertySymbols(serializers)\n    /* eslint no-var: off */\n    for (var i = 0; i < parentSymbols.length; i++) {\n      const ks = parentSymbols[i]\n      instance[serializersSym][ks] = serializers[ks]\n    }\n\n    for (const bk in options.serializers) {\n      instance[serializersSym][bk] = options.serializers[bk]\n    }\n    const bindingsSymbols = Object.getOwnPropertySymbols(options.serializers)\n    for (var bi = 0; bi < bindingsSymbols.length; bi++) {\n      const bks = bindingsSymbols[bi]\n      instance[serializersSym][bks] = options.serializers[bks]\n    }\n  } else instance[serializersSym] = serializers\n  if (options.hasOwnProperty('formatters')) {\n    const { level, bindings: chindings, log } = options.formatters\n    instance[formattersSym] = buildFormatters(\n      level || formatters.level,\n      chindings || resetChildingsFormatter,\n      log || formatters.log\n    )\n  } else {\n    instance[formattersSym] = buildFormatters(\n      formatters.level,\n      resetChildingsFormatter,\n      formatters.log\n    )\n  }\n  if (options.hasOwnProperty('customLevels') === true) {\n    assertNoLevelCollisions(this.levels, options.customLevels)\n    instance.levels = mappings(options.customLevels, instance[useOnlyCustomLevelsSym])\n    genLsCache(instance)\n  }\n\n  // redact must place before asChindings and only replace if exist\n  if ((typeof options.redact === 'object' && options.redact !== null) || Array.isArray(options.redact)) {\n    instance.redact = options.redact // replace redact directly\n    const stringifiers = redaction(instance.redact, stringify)\n    const formatOpts = { stringify: stringifiers[redactFmtSym] }\n    instance[stringifySym] = stringify\n    instance[stringifiersSym] = stringifiers\n    instance[formatOptsSym] = formatOpts\n  }\n\n  if (typeof options.msgPrefix === 'string') {\n    instance[msgPrefixSym] = (this[msgPrefixSym] || '') + options.msgPrefix\n  }\n\n  instance[chindingsSym] = asChindings(instance, bindings)\n  if ((options.level !== undefined && options.level !== this.level) || options.hasOwnProperty('customLevels')) {\n    const childLevel = options.level || this.level\n    instance[setLevelSym](childLevel)\n  }\n  this.onChild(instance)\n  return instance\n}\n\nfunction bindings () {\n  const chindings = this[chindingsSym]\n  const chindingsJson = `{${chindings.substr(1)}}` // at least contains ,\"pid\":7068,\"hostname\":\"myMac\"\n  const bindingsFromJson = JSON.parse(chindingsJson)\n  delete bindingsFromJson.pid\n  delete bindingsFromJson.hostname\n  return bindingsFromJson\n}\n\nfunction setBindings (newBindings) {\n  const chindings = asChindings(this, newBindings)\n  this[chindingsSym] = chindings\n  delete this[parsedChindingsSym]\n}\n\n/**\n * Default strategy for creating `mergeObject` from arguments and the result from `mixin()`.\n * Fields from `mergeObject` have higher priority in this strategy.\n *\n * @param {Object} mergeObject The object a user has supplied to the logging function.\n * @param {Object} mixinObject The result of the `mixin` method.\n * @return {Object}\n */\nfunction defaultMixinMergeStrategy (mergeObject, mixinObject) {\n  return Object.assign(mixinObject, mergeObject)\n}\n\nfunction write (_obj, msg, num) {\n  const t = this[timeSym]()\n  const mixin = this[mixinSym]\n  const errorKey = this[errorKeySym]\n  const messageKey = this[messageKeySym]\n  const mixinMergeStrategy = this[mixinMergeStrategySym] || defaultMixinMergeStrategy\n  let obj\n  const streamWriteHook = this[hooksSym].streamWrite\n\n  if (_obj === undefined || _obj === null) {\n    obj = {}\n  } else if (_obj instanceof Error) {\n    obj = { [errorKey]: _obj }\n    if (msg === undefined) {\n      msg = _obj.message\n    }\n  } else {\n    obj = _obj\n    if (msg === undefined && _obj[messageKey] === undefined && _obj[errorKey]) {\n      msg = _obj[errorKey].message\n    }\n  }\n\n  if (mixin) {\n    obj = mixinMergeStrategy(obj, mixin(obj, num, this))\n  }\n\n  const s = this[asJsonSym](obj, msg, num, t)\n\n  const stream = this[streamSym]\n  if (stream[needsMetadataGsym] === true) {\n    stream.lastLevel = num\n    stream.lastObj = obj\n    stream.lastMsg = msg\n    stream.lastTime = t.slice(this[timeSliceIndexSym])\n    stream.lastLogger = this // for child loggers\n  }\n  stream.write(streamWriteHook ? streamWriteHook(s) : s)\n}\n\nfunction noop () {}\n\nfunction flush (cb) {\n  if (cb != null && typeof cb !== 'function') {\n    throw Error('callback must be a function')\n  }\n\n  const stream = this[streamSym]\n\n  if (typeof stream.flush === 'function') {\n    stream.flush(cb || noop)\n  } else if (cb) cb()\n}\n","'use strict'\n\nconst { hasOwnProperty } = Object.prototype\n\nconst stringify = configure()\n\n// @ts-expect-error\nstringify.configure = configure\n// @ts-expect-error\nstringify.stringify = stringify\n\n// @ts-expect-error\nstringify.default = stringify\n\n// @ts-expect-error used for named export\nexports.stringify = stringify\n// @ts-expect-error used for named export\nexports.configure = configure\n\nmodule.exports = stringify\n\n// eslint-disable-next-line no-control-regex\nconst strEscapeSequencesRegExp = /[\\u0000-\\u001f\\u0022\\u005c\\ud800-\\udfff]/\n\n// Escape C0 control characters, double quotes, the backslash and every code\n// unit with a numeric value in the inclusive range 0xD800 to 0xDFFF.\nfunction strEscape (str) {\n  // Some magic numbers that worked out fine while benchmarking with v8 8.0\n  if (str.length < 5000 && !strEscapeSequencesRegExp.test(str)) {\n    return `\"${str}\"`\n  }\n  return JSON.stringify(str)\n}\n\nfunction sort (array, comparator) {\n  // Insertion sort is very efficient for small input sizes, but it has a bad\n  // worst case complexity. Thus, use native array sort for bigger values.\n  if (array.length > 2e2 || comparator) {\n    return array.sort(comparator)\n  }\n  for (let i = 1; i < array.length; i++) {\n    const currentValue = array[i]\n    let position = i\n    while (position !== 0 && array[position - 1] > currentValue) {\n      array[position] = array[position - 1]\n      position--\n    }\n    array[position] = currentValue\n  }\n  return array\n}\n\nconst typedArrayPrototypeGetSymbolToStringTag =\n  Object.getOwnPropertyDescriptor(\n    Object.getPrototypeOf(\n      Object.getPrototypeOf(\n        new Int8Array()\n      )\n    ),\n    Symbol.toStringTag\n  ).get\n\nfunction isTypedArrayWithEntries (value) {\n  return typedArrayPrototypeGetSymbolToStringTag.call(value) !== undefined && value.length !== 0\n}\n\nfunction stringifyTypedArray (array, separator, maximumBreadth) {\n  if (array.length < maximumBreadth) {\n    maximumBreadth = array.length\n  }\n  const whitespace = separator === ',' ? '' : ' '\n  let res = `\"0\":${whitespace}${array[0]}`\n  for (let i = 1; i < maximumBreadth; i++) {\n    res += `${separator}\"${i}\":${whitespace}${array[i]}`\n  }\n  return res\n}\n\nfunction getCircularValueOption (options) {\n  if (hasOwnProperty.call(options, 'circularValue')) {\n    const circularValue = options.circularValue\n    if (typeof circularValue === 'string') {\n      return `\"${circularValue}\"`\n    }\n    if (circularValue == null) {\n      return circularValue\n    }\n    if (circularValue === Error || circularValue === TypeError) {\n      return {\n        toString () {\n          throw new TypeError('Converting circular structure to JSON')\n        }\n      }\n    }\n    throw new TypeError('The \"circularValue\" argument must be of type string or the value null or undefined')\n  }\n  return '\"[Circular]\"'\n}\n\nfunction getDeterministicOption (options) {\n  let value\n  if (hasOwnProperty.call(options, 'deterministic')) {\n    value = options.deterministic\n    if (typeof value !== 'boolean' && typeof value !== 'function') {\n      throw new TypeError('The \"deterministic\" argument must be of type boolean or comparator function')\n    }\n  }\n  return value === undefined ? true : value\n}\n\nfunction getBooleanOption (options, key) {\n  let value\n  if (hasOwnProperty.call(options, key)) {\n    value = options[key]\n    if (typeof value !== 'boolean') {\n      throw new TypeError(`The \"${key}\" argument must be of type boolean`)\n    }\n  }\n  return value === undefined ? true : value\n}\n\nfunction getPositiveIntegerOption (options, key) {\n  let value\n  if (hasOwnProperty.call(options, key)) {\n    value = options[key]\n    if (typeof value !== 'number') {\n      throw new TypeError(`The \"${key}\" argument must be of type number`)\n    }\n    if (!Number.isInteger(value)) {\n      throw new TypeError(`The \"${key}\" argument must be an integer`)\n    }\n    if (value < 1) {\n      throw new RangeError(`The \"${key}\" argument must be >= 1`)\n    }\n  }\n  return value === undefined ? Infinity : value\n}\n\nfunction getItemCount (number) {\n  if (number === 1) {\n    return '1 item'\n  }\n  return `${number} items`\n}\n\nfunction getUniqueReplacerSet (replacerArray) {\n  const replacerSet = new Set()\n  for (const value of replacerArray) {\n    if (typeof value === 'string' || typeof value === 'number') {\n      replacerSet.add(String(value))\n    }\n  }\n  return replacerSet\n}\n\nfunction getStrictOption (options) {\n  if (hasOwnProperty.call(options, 'strict')) {\n    const value = options.strict\n    if (typeof value !== 'boolean') {\n      throw new TypeError('The \"strict\" argument must be of type boolean')\n    }\n    if (value) {\n      return (value) => {\n        let message = `Object can not safely be stringified. Received type ${typeof value}`\n        if (typeof value !== 'function') message += ` (${value.toString()})`\n        throw new Error(message)\n      }\n    }\n  }\n}\n\nfunction configure (options) {\n  options = { ...options }\n  const fail = getStrictOption(options)\n  if (fail) {\n    if (options.bigint === undefined) {\n      options.bigint = false\n    }\n    if (!('circularValue' in options)) {\n      options.circularValue = Error\n    }\n  }\n  const circularValue = getCircularValueOption(options)\n  const bigint = getBooleanOption(options, 'bigint')\n  const deterministic = getDeterministicOption(options)\n  const comparator = typeof deterministic === 'function' ? deterministic : undefined\n  const maximumDepth = getPositiveIntegerOption(options, 'maximumDepth')\n  const maximumBreadth = getPositiveIntegerOption(options, 'maximumBreadth')\n\n  function stringifyFnReplacer (key, parent, stack, replacer, spacer, indentation) {\n    let value = parent[key]\n\n    if (typeof value === 'object' && value !== null && typeof value.toJSON === 'function') {\n      value = value.toJSON(key)\n    }\n    value = replacer.call(parent, key, value)\n\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        let res = ''\n        let join = ','\n        const originalIndentation = indentation\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          if (spacer !== '') {\n            indentation += spacer\n            res += `\\n${indentation}`\n            join = `,\\n${indentation}`\n          }\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyFnReplacer(String(i), value, stack, replacer, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyFnReplacer(String(i), value, stack, replacer, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          if (spacer !== '') {\n            res += `\\n${originalIndentation}`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        let whitespace = ''\n        let separator = ''\n        if (spacer !== '') {\n          indentation += spacer\n          join = `,\\n${indentation}`\n          whitespace = ' '\n        }\n        const maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (deterministic && !isTypedArrayWithEntries(value)) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifyFnReplacer(key, value, stack, replacer, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${whitespace}${tmp}`\n            separator = join\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\":${whitespace}\"${getItemCount(removedKeys)} not stringified\"`\n          separator = join\n        }\n        if (spacer !== '' && separator.length > 1) {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifyArrayReplacer (key, value, stack, replacer, spacer, indentation) {\n    if (typeof value === 'object' && value !== null && typeof value.toJSON === 'function') {\n      value = value.toJSON(key)\n    }\n\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        const originalIndentation = indentation\n        let res = ''\n        let join = ','\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          if (spacer !== '') {\n            indentation += spacer\n            res += `\\n${indentation}`\n            join = `,\\n${indentation}`\n          }\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyArrayReplacer(String(i), value[i], stack, replacer, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyArrayReplacer(String(i), value[i], stack, replacer, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          if (spacer !== '') {\n            res += `\\n${originalIndentation}`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n        stack.push(value)\n        let whitespace = ''\n        if (spacer !== '') {\n          indentation += spacer\n          join = `,\\n${indentation}`\n          whitespace = ' '\n        }\n        let separator = ''\n        for (const key of replacer) {\n          const tmp = stringifyArrayReplacer(key, value[key], stack, replacer, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${whitespace}${tmp}`\n            separator = join\n          }\n        }\n        if (spacer !== '' && separator.length > 1) {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifyIndent (key, value, stack, spacer, indentation) {\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (typeof value.toJSON === 'function') {\n          value = value.toJSON(key)\n          // Prevent calling `toJSON` again.\n          if (typeof value !== 'object') {\n            return stringifyIndent(key, value, stack, spacer, indentation)\n          }\n          if (value === null) {\n            return 'null'\n          }\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n        const originalIndentation = indentation\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          indentation += spacer\n          let res = `\\n${indentation}`\n          const join = `,\\n${indentation}`\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyIndent(String(i), value[i], stack, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyIndent(String(i), value[i], stack, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          res += `\\n${originalIndentation}`\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        indentation += spacer\n        const join = `,\\n${indentation}`\n        let res = ''\n        let separator = ''\n        let maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (isTypedArrayWithEntries(value)) {\n          res += stringifyTypedArray(value, join, maximumBreadth)\n          keys = keys.slice(value.length)\n          maximumPropertiesToStringify -= value.length\n          separator = join\n        }\n        if (deterministic) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifyIndent(key, value[key], stack, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}: ${tmp}`\n            separator = join\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\": \"${getItemCount(removedKeys)} not stringified\"`\n          separator = join\n        }\n        if (separator !== '') {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifySimple (key, value, stack) {\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (typeof value.toJSON === 'function') {\n          value = value.toJSON(key)\n          // Prevent calling `toJSON` again\n          if (typeof value !== 'object') {\n            return stringifySimple(key, value, stack)\n          }\n          if (value === null) {\n            return 'null'\n          }\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        let res = ''\n\n        const hasLength = value.length !== undefined\n        if (hasLength && Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifySimple(String(i), value[i], stack)\n            res += tmp !== undefined ? tmp : 'null'\n            res += ','\n          }\n          const tmp = stringifySimple(String(i), value[i], stack)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `,\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        let separator = ''\n        let maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (hasLength && isTypedArrayWithEntries(value)) {\n          res += stringifyTypedArray(value, ',', maximumBreadth)\n          keys = keys.slice(value.length)\n          maximumPropertiesToStringify -= value.length\n          separator = ','\n        }\n        if (deterministic) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifySimple(key, value[key], stack)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${tmp}`\n            separator = ','\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\":\"${getItemCount(removedKeys)} not stringified\"`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringify (value, replacer, space) {\n    if (arguments.length > 1) {\n      let spacer = ''\n      if (typeof space === 'number') {\n        spacer = ' '.repeat(Math.min(space, 10))\n      } else if (typeof space === 'string') {\n        spacer = space.slice(0, 10)\n      }\n      if (replacer != null) {\n        if (typeof replacer === 'function') {\n          return stringifyFnReplacer('', { '': value }, [], replacer, spacer, '')\n        }\n        if (Array.isArray(replacer)) {\n          return stringifyArrayReplacer('', value, [], getUniqueReplacerSet(replacer), spacer, '')\n        }\n      }\n      if (spacer.length !== 0) {\n        return stringifyIndent('', value, [], spacer, '')\n      }\n    }\n    return stringifySimple('', value, [])\n  }\n\n  return stringify\n}\n","'use strict'\n\nconst metadata = Symbol.for('pino.metadata')\nconst { DEFAULT_LEVELS } = require('./constants')\n\nconst DEFAULT_INFO_LEVEL = DEFAULT_LEVELS.info\n\nfunction multistream (streamsArray, opts) {\n  streamsArray = streamsArray || []\n  opts = opts || { dedupe: false }\n\n  const streamLevels = Object.create(DEFAULT_LEVELS)\n  streamLevels.silent = Infinity\n  if (opts.levels && typeof opts.levels === 'object') {\n    Object.keys(opts.levels).forEach(i => {\n      streamLevels[i] = opts.levels[i]\n    })\n  }\n\n  const res = {\n    write,\n    add,\n    remove,\n    emit,\n    flushSync,\n    end,\n    minLevel: 0,\n    lastId: 0,\n    streams: [],\n    clone,\n    [metadata]: true,\n    streamLevels\n  }\n\n  if (Array.isArray(streamsArray)) {\n    streamsArray.forEach(add, res)\n  } else {\n    add.call(res, streamsArray)\n  }\n\n  // clean this object up\n  // or it will stay allocated forever\n  // as it is closed on the following closures\n  streamsArray = null\n\n  return res\n\n  // we can exit early because the streams are ordered by level\n  function write (data) {\n    let dest\n    const level = this.lastLevel\n    const { streams } = this\n    // for handling situation when several streams has the same level\n    let recordedLevel = 0\n    let stream\n\n    // if dedupe set to true we send logs to the stream with the highest level\n    // therefore, we have to change sorting order\n    for (let i = initLoopVar(streams.length, opts.dedupe); checkLoopVar(i, streams.length, opts.dedupe); i = adjustLoopVar(i, opts.dedupe)) {\n      dest = streams[i]\n      if (dest.level <= level) {\n        if (recordedLevel !== 0 && recordedLevel !== dest.level) {\n          break\n        }\n        stream = dest.stream\n        if (stream[metadata]) {\n          const { lastTime, lastMsg, lastObj, lastLogger } = this\n          stream.lastLevel = level\n          stream.lastTime = lastTime\n          stream.lastMsg = lastMsg\n          stream.lastObj = lastObj\n          stream.lastLogger = lastLogger\n        }\n        stream.write(data)\n        if (opts.dedupe) {\n          recordedLevel = dest.level\n        }\n      } else if (!opts.dedupe) {\n        break\n      }\n    }\n  }\n\n  function emit (...args) {\n    for (const { stream } of this.streams) {\n      if (typeof stream.emit === 'function') {\n        stream.emit(...args)\n      }\n    }\n  }\n\n  function flushSync () {\n    for (const { stream } of this.streams) {\n      if (typeof stream.flushSync === 'function') {\n        stream.flushSync()\n      }\n    }\n  }\n\n  function add (dest) {\n    if (!dest) {\n      return res\n    }\n\n    // Check that dest implements either StreamEntry or DestinationStream\n    const isStream = typeof dest.write === 'function' || dest.stream\n    const stream_ = dest.write ? dest : dest.stream\n    // This is necessary to provide a meaningful error message, otherwise it throws somewhere inside write()\n    if (!isStream) {\n      throw Error('stream object needs to implement either StreamEntry or DestinationStream interface')\n    }\n\n    const { streams, streamLevels } = this\n\n    let level\n    if (typeof dest.levelVal === 'number') {\n      level = dest.levelVal\n    } else if (typeof dest.level === 'string') {\n      level = streamLevels[dest.level]\n    } else if (typeof dest.level === 'number') {\n      level = dest.level\n    } else {\n      level = DEFAULT_INFO_LEVEL\n    }\n\n    const dest_ = {\n      stream: stream_,\n      level,\n      levelVal: undefined,\n      id: ++res.lastId\n    }\n\n    streams.unshift(dest_)\n    streams.sort(compareByLevel)\n\n    this.minLevel = streams[0].level\n\n    return res\n  }\n\n  function remove (id) {\n    const { streams } = this\n    const index = streams.findIndex(s => s.id === id)\n\n    if (index >= 0) {\n      streams.splice(index, 1)\n      streams.sort(compareByLevel)\n      this.minLevel = streams.length > 0 ? streams[0].level : -1\n    }\n\n    return res\n  }\n\n  function end () {\n    for (const { stream } of this.streams) {\n      if (typeof stream.flushSync === 'function') {\n        stream.flushSync()\n      }\n      stream.end()\n    }\n  }\n\n  function clone (level) {\n    const streams = new Array(this.streams.length)\n\n    for (let i = 0; i < streams.length; i++) {\n      streams[i] = {\n        level,\n        stream: this.streams[i].stream\n      }\n    }\n\n    return {\n      write,\n      add,\n      remove,\n      minLevel: level,\n      streams,\n      clone,\n      emit,\n      flushSync,\n      [metadata]: true\n    }\n  }\n}\n\nfunction compareByLevel (a, b) {\n  return a.level - b.level\n}\n\nfunction initLoopVar (length, dedupe) {\n  return dedupe ? length - 1 : 0\n}\n\nfunction adjustLoopVar (i, dedupe) {\n  return dedupe ? i - 1 : i + 1\n}\n\nfunction checkLoopVar (i, length, dedupe) {\n  return dedupe ? i >= 0 : i < length\n}\n\nmodule.exports = multistream\n","'use strict'\n\nconst os = require('node:os')\nconst stdSerializers = require('pino-std-serializers')\nconst caller = require('./lib/caller')\nconst redaction = require('./lib/redaction')\nconst time = require('./lib/time')\nconst proto = require('./lib/proto')\nconst symbols = require('./lib/symbols')\nconst { configure } = require('safe-stable-stringify')\nconst { assertDefaultLevelFound, mappings, genLsCache, genLevelComparison, assertLevelComparison } = require('./lib/levels')\nconst { DEFAULT_LEVELS, SORTING_ORDER } = require('./lib/constants')\nconst {\n  createArgsNormalizer,\n  asChindings,\n  buildSafeSonicBoom,\n  buildFormatters,\n  stringify,\n  normalizeDestFileDescriptor,\n  noop\n} = require('./lib/tools')\nconst { version } = require('./lib/meta')\nconst {\n  chindingsSym,\n  redactFmtSym,\n  serializersSym,\n  timeSym,\n  timeSliceIndexSym,\n  streamSym,\n  stringifySym,\n  stringifySafeSym,\n  stringifiersSym,\n  setLevelSym,\n  endSym,\n  formatOptsSym,\n  messageKeySym,\n  errorKeySym,\n  nestedKeySym,\n  mixinSym,\n  levelCompSym,\n  useOnlyCustomLevelsSym,\n  formattersSym,\n  hooksSym,\n  nestedKeyStrSym,\n  mixinMergeStrategySym,\n  msgPrefixSym\n} = symbols\nconst { epochTime, nullTime } = time\nconst { pid } = process\nconst hostname = os.hostname()\nconst defaultErrorSerializer = stdSerializers.err\nconst defaultOptions = {\n  level: 'info',\n  levelComparison: SORTING_ORDER.ASC,\n  levels: DEFAULT_LEVELS,\n  messageKey: 'msg',\n  errorKey: 'err',\n  nestedKey: null,\n  enabled: true,\n  base: { pid, hostname },\n  serializers: Object.assign(Object.create(null), {\n    err: defaultErrorSerializer\n  }),\n  formatters: Object.assign(Object.create(null), {\n    bindings (bindings) {\n      return bindings\n    },\n    level (label, number) {\n      return { level: number }\n    }\n  }),\n  hooks: {\n    logMethod: undefined,\n    streamWrite: undefined\n  },\n  timestamp: epochTime,\n  name: undefined,\n  redact: null,\n  customLevels: null,\n  useOnlyCustomLevels: false,\n  depthLimit: 5,\n  edgeLimit: 100\n}\n\nconst normalize = createArgsNormalizer(defaultOptions)\n\nconst serializers = Object.assign(Object.create(null), stdSerializers)\n\nfunction pino (...args) {\n  const instance = {}\n  const { opts, stream } = normalize(instance, caller(), ...args)\n\n  if (opts.level && typeof opts.level === 'string' && DEFAULT_LEVELS[opts.level.toLowerCase()] !== undefined) opts.level = opts.level.toLowerCase()\n\n  const {\n    redact,\n    crlf,\n    serializers,\n    timestamp,\n    messageKey,\n    errorKey,\n    nestedKey,\n    base,\n    name,\n    level,\n    customLevels,\n    levelComparison,\n    mixin,\n    mixinMergeStrategy,\n    useOnlyCustomLevels,\n    formatters,\n    hooks,\n    depthLimit,\n    edgeLimit,\n    onChild,\n    msgPrefix\n  } = opts\n\n  const stringifySafe = configure({\n    maximumDepth: depthLimit,\n    maximumBreadth: edgeLimit\n  })\n\n  const allFormatters = buildFormatters(\n    formatters.level,\n    formatters.bindings,\n    formatters.log\n  )\n\n  const stringifyFn = stringify.bind({\n    [stringifySafeSym]: stringifySafe\n  })\n  const stringifiers = redact ? redaction(redact, stringifyFn) : {}\n  const formatOpts = redact\n    ? { stringify: stringifiers[redactFmtSym] }\n    : { stringify: stringifyFn }\n  const end = '}' + (crlf ? '\\r\\n' : '\\n')\n  const coreChindings = asChindings.bind(null, {\n    [chindingsSym]: '',\n    [serializersSym]: serializers,\n    [stringifiersSym]: stringifiers,\n    [stringifySym]: stringify,\n    [stringifySafeSym]: stringifySafe,\n    [formattersSym]: allFormatters\n  })\n\n  let chindings = ''\n  if (base !== null) {\n    if (name === undefined) {\n      chindings = coreChindings(base)\n    } else {\n      chindings = coreChindings(Object.assign({}, base, { name }))\n    }\n  }\n\n  const time = (timestamp instanceof Function)\n    ? timestamp\n    : (timestamp ? epochTime : nullTime)\n  const timeSliceIndex = time().indexOf(':') + 1\n\n  if (useOnlyCustomLevels && !customLevels) throw Error('customLevels is required if useOnlyCustomLevels is set true')\n  if (mixin && typeof mixin !== 'function') throw Error(`Unknown mixin type \"${typeof mixin}\" - expected \"function\"`)\n  if (msgPrefix && typeof msgPrefix !== 'string') throw Error(`Unknown msgPrefix type \"${typeof msgPrefix}\" - expected \"string\"`)\n\n  assertDefaultLevelFound(level, customLevels, useOnlyCustomLevels)\n  const levels = mappings(customLevels, useOnlyCustomLevels)\n\n  if (typeof stream.emit === 'function') {\n    stream.emit('message', { code: 'PINO_CONFIG', config: { levels, messageKey, errorKey } })\n  }\n\n  assertLevelComparison(levelComparison)\n  const levelCompFunc = genLevelComparison(levelComparison)\n\n  Object.assign(instance, {\n    levels,\n    [levelCompSym]: levelCompFunc,\n    [useOnlyCustomLevelsSym]: useOnlyCustomLevels,\n    [streamSym]: stream,\n    [timeSym]: time,\n    [timeSliceIndexSym]: timeSliceIndex,\n    [stringifySym]: stringify,\n    [stringifySafeSym]: stringifySafe,\n    [stringifiersSym]: stringifiers,\n    [endSym]: end,\n    [formatOptsSym]: formatOpts,\n    [messageKeySym]: messageKey,\n    [errorKeySym]: errorKey,\n    [nestedKeySym]: nestedKey,\n    // protect against injection\n    [nestedKeyStrSym]: nestedKey ? `,${JSON.stringify(nestedKey)}:{` : '',\n    [serializersSym]: serializers,\n    [mixinSym]: mixin,\n    [mixinMergeStrategySym]: mixinMergeStrategy,\n    [chindingsSym]: chindings,\n    [formattersSym]: allFormatters,\n    [hooksSym]: hooks,\n    silent: noop,\n    onChild,\n    [msgPrefixSym]: msgPrefix\n  })\n\n  Object.setPrototypeOf(instance, proto())\n\n  genLsCache(instance)\n\n  instance[setLevelSym](level)\n\n  return instance\n}\n\nmodule.exports = pino\n\nmodule.exports.destination = (dest = process.stdout.fd) => {\n  if (typeof dest === 'object') {\n    dest.dest = normalizeDestFileDescriptor(dest.dest || process.stdout.fd)\n    return buildSafeSonicBoom(dest)\n  } else {\n    return buildSafeSonicBoom({ dest: normalizeDestFileDescriptor(dest), minLength: 0 })\n  }\n}\n\nmodule.exports.transport = require('./lib/transport')\nmodule.exports.multistream = require('./lib/multistream')\n\nmodule.exports.levels = mappings()\nmodule.exports.stdSerializers = serializers\nmodule.exports.stdTimeFunctions = Object.assign({}, time)\nmodule.exports.symbols = symbols\nmodule.exports.version = version\n\n// Enables default and name export with TypeScript and Babel\nmodule.exports.default = pino\nmodule.exports.pino = pino\n","import pino from 'pino';\n\nimport { LEVEL_METHODS, LEVEL_VALUES } from '../../../levels.config.js';\n\nimport { defaultConfig, validateConfig, type AdvancedLoggerConfig } from './config.js';\nimport { createFormatters, createSerializers, createTransports } from './transports.js';\n\n/**\n *    HEYS  ()\n */\nexport enum LogLevel {\n  TRACE = 'trace',\n  DEBUG = 'debug',\n  INFO = 'info',\n  HTTP = 'http',\n  WARN = 'warn',\n  ERROR = 'error',\n  FATAL = 'fatal',\n  SILENT = 'silent',\n}\n\n/**\n *      \n */\nexport const HEYS_LOG_LEVELS = LEVEL_VALUES;\nexport const HEYS_LEVEL_METHODS = LEVEL_METHODS;\n\n/**\n *    \n */\nexport interface RequestContext {\n  requestId?: string;\n  userId?: string;\n  clientId?: string;\n  userAgent?: string;\n  ip?: string;\n  method?: string;\n  url?: string;\n}\n\n/**\n *   (legacy   )\n */\nexport interface LoggerConfig {\n  level?: LogLevel;\n  service?: string;\n  environment?: string;\n  enableConsole?: boolean;\n  enableFile?: boolean;\n  logDir?: string;\n}\n\n//   \nexport { defaultConfig, validateConfig };\nexport type { AdvancedLoggerConfig };\n\n/**\n *     HEYS  (legacy )\n */\nexport function createLogger(config: LoggerConfig = {}) {\n  const {\n    level = LogLevel.INFO,\n    service = 'heys-app',\n    environment = process.env.NODE_ENV || 'development',\n  } = config;\n\n  const isProduction = environment === 'production';\n\n  //    - JSON \n  const productionConfig = {\n    level,\n    base: {\n      service,\n      environment,\n      pid: process.pid,\n      hostname: process.env.HOSTNAME || 'unknown',\n    },\n    timestamp: pino.stdTimeFunctions.isoTime,\n    formatters: {\n      level: (label: string) => {\n        return { level: label };\n      },\n    },\n  };\n\n  //    -  \n  const developmentConfig = {\n    level,\n    base: {\n      service,\n      environment,\n    },\n    transport: {\n      target: 'pino-pretty',\n      options: {\n        colorize: true,\n        ignore: 'pid,hostname',\n        translateTime: 'SYS:yyyy-mm-dd HH:MM:ss.l',\n        messageFormat: '[{service}] {msg}',\n      },\n    },\n  };\n\n  return pino(isProduction ? productionConfig : developmentConfig);\n}\n\n/**\n *       \n */\nexport function createAdvancedLogger(config: Partial<AdvancedLoggerConfig> = {}): pino.Logger {\n  const validatedConfig = validateConfig(config);\n  const streams = createTransports(validatedConfig);\n  const formatters = createFormatters(validatedConfig);\n  const serializers = createSerializers();\n\n  const options: pino.LoggerOptions = {\n    level: validatedConfig.level,\n    base: {\n      service: validatedConfig.service,\n      environment: validatedConfig.environment,\n      version: process.env.npm_package_version || '1.0.0',\n    },\n    timestamp: pino.stdTimeFunctions.isoTime,\n    formatters,\n    serializers,\n    redact: {\n      paths: validatedConfig.redact,\n      censor: '[REDACTED]',\n    },\n  };\n\n  //    ,  multistream\n  if (streams.length > 1) {\n    return pino(options, pino.multistream(streams));\n  }\n\n  //    ,   \n  if (streams.length === 1 && streams[0]) {\n    return pino(options, streams[0].stream);\n  }\n\n  // Fallback   \n  return pino(options);\n}\n\n/**\n *      HEYS   \n */\nexport const logger = createAdvancedLogger({\n  service: 'heys-system',\n  level: (process.env.LOG_LEVEL as LogLevel) || LogLevel.INFO,\n});\n\n/**\n *     \n */\nexport function createContextLogger(context: RequestContext, service?: string) {\n  const baseLogger = service ? createLogger({ service }) : logger;\n  return baseLogger.child(context);\n}\n\n/**\n * Middleware    HTTP \n */\nexport function createHttpLogger(service?: string) {\n  const httpLogger = service ? createLogger({ service }) : logger;\n\n  return (\n    req: {\n      headers: Record<string, string>;\n      method: string;\n      url: string;\n      ip?: string;\n      connection?: { remoteAddress?: string };\n      logger?: pino.Logger;\n    },\n    res: {\n      statusCode: number;\n      get: (header: string) => string | number;\n      on: (event: string, callback: () => void) => void;\n    },\n    next: () => void,\n  ) => {\n    const start = Date.now();\n    const requestId =\n      req.headers['x-request-id'] || `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n    const context: RequestContext = {\n      requestId,\n      method: req.method,\n      url: req.url,\n    };\n\n    const userAgent = req.headers['user-agent'];\n    if (userAgent) {\n      context.userAgent = userAgent;\n    }\n\n    const ip = req.ip ?? req.connection?.remoteAddress;\n    if (ip) {\n      context.ip = ip;\n    }\n\n    req.logger = httpLogger.child(context);\n\n    req.logger.info('Request started');\n\n    res.on('finish', () => {\n      const duration = Date.now() - start;\n      req.logger?.info(\n        {\n          statusCode: res.statusCode,\n          duration,\n          responseSize: res.get('content-length') || 0,\n        },\n        'Request completed',\n      );\n    });\n\n    next();\n  };\n}\n\n/**\n *     \n */\nexport const log = {\n  trace: (msg: string, obj?: Record<string, unknown>) => logger.trace(obj, msg),\n  debug: (msg: string, obj?: Record<string, unknown>) => logger.debug(obj, msg),\n  info: (msg: string, obj?: Record<string, unknown>) => logger.info(obj, msg),\n  warn: (msg: string, obj?: Record<string, unknown>) => logger.warn(obj, msg),\n  error: (msg: string, obj?: Record<string, unknown>) => logger.error(obj, msg),\n  fatal: (msg: string, obj?: Record<string, unknown>) => logger.fatal(obj, msg),\n};\n\n/**\n *       \n */\nexport function logError(error: Error, context?: Record<string, unknown>) {\n  logger.error(\n    {\n      error: {\n        name: error.name,\n        message: error.message,\n        stack: error.stack,\n      },\n      ...context,\n    },\n    'Error occurred',\n  );\n}\n\nexport default logger;\n","/**\n * HEYS Platform - Log Levels Configuration\n *     \n *    SHINOMONTAGKA\n */\n\n//    (RFC 5424 + )\nexport const LOG_LEVELS = {\n  //  \n  fatal: {\n    value: 60,\n    name: 'fatal',\n    color: 'magenta',\n    symbol: '',\n    description: ' ,    ',\n  },\n  error: {\n    value: 50,\n    name: 'error',\n    color: 'red',\n    symbol: '',\n    description: ',   ',\n  },\n\n  // \n  warn: {\n    value: 40,\n    name: 'warn',\n    color: 'yellow',\n    symbol: '',\n    description: '   ',\n  },\n\n  // \n  info: {\n    value: 30,\n    name: 'info',\n    color: 'green',\n    symbol: '',\n    description: '    ',\n  },\n  http: {\n    value: 29,\n    name: 'http',\n    color: 'cyan',\n    symbol: '',\n    description: 'HTTP   ',\n  },\n\n  // \n  debug: {\n    value: 20,\n    name: 'debug',\n    color: 'blue',\n    symbol: '',\n    description: '   ',\n  },\n  trace: {\n    value: 10,\n    name: 'trace',\n    color: 'gray',\n    symbol: '',\n    description: '  ',\n  },\n\n  // \n  silent: {\n    value: Infinity,\n    name: 'silent',\n    color: 'white',\n    symbol: '',\n    description: '  ',\n  },\n};\n\n//   \nexport const LEVEL_ALIASES = {\n  err: 'error',\n  warning: 'warn',\n  information: 'info',\n  verbose: 'debug',\n  silly: 'trace',\n  off: 'silent',\n};\n\n//    \nexport const LEVEL_COLORS = Object.fromEntries(\n  Object.entries(LOG_LEVELS).map(([key, level]) => [key, level.color]),\n);\n\n//     Pino/Winston\nexport const LEVEL_VALUES = Object.fromEntries(\n  Object.entries(LOG_LEVELS).map(([key, level]) => [key, level.value]),\n);\n\n//    \nexport const LEVEL_METHODS = Object.keys(LOG_LEVELS);\n\n//    \nexport const ENVIRONMENT_CONFIGS = {\n  development: {\n    defaultLevel: 'debug',\n    console: {\n      enabled: true,\n      level: 'debug',\n      colorize: true,\n      timestamp: true,\n      prettyPrint: true,\n    },\n    file: {\n      enabled: true,\n      level: 'info',\n      rotation: false,\n    },\n    performance: {\n      logSlowOperations: true,\n      threshold: 100, // ms\n    },\n  },\n\n  test: {\n    defaultLevel: 'error',\n    console: {\n      enabled: false,\n      level: 'silent',\n    },\n    file: {\n      enabled: true,\n      level: 'error',\n      path: './logs/test',\n    },\n    performance: {\n      logSlowOperations: false,\n    },\n  },\n\n  staging: {\n    defaultLevel: 'info',\n    console: {\n      enabled: true,\n      level: 'warn',\n      colorize: false,\n      format: 'json',\n    },\n    file: {\n      enabled: true,\n      level: 'info',\n      rotation: true,\n      maxSize: '50m',\n      maxFiles: '7d',\n    },\n    performance: {\n      logSlowOperations: true,\n      threshold: 500,\n    },\n  },\n\n  production: {\n    defaultLevel: 'warn',\n    console: {\n      enabled: true,\n      level: 'error',\n      colorize: false,\n      format: 'json',\n    },\n    file: {\n      enabled: true,\n      level: 'info',\n      rotation: true,\n      maxSize: '100m',\n      maxFiles: '30d',\n      compress: true,\n    },\n    performance: {\n      logSlowOperations: true,\n      threshold: 1000,\n    },\n    security: {\n      sanitizeHeaders: true,\n      maskPasswords: true,\n      auditLevel: 'warn',\n    },\n  },\n};\n\n//    \nexport const LEVEL_FORMATTERS = {\n  fatal: (message, meta) => ` FATAL: ${message} ${JSON.stringify(meta)}`,\n  error: (message, meta) => ` ERROR: ${message} ${meta ? JSON.stringify(meta) : ''}`,\n  warn: (message, meta) => `  WARN: ${message} ${meta ? JSON.stringify(meta) : ''}`,\n  info: (message, _meta) => `  INFO: ${message}`,\n  http: (message, _meta) => ` HTTP: ${message}`,\n  debug: (message, meta) => ` DEBUG: ${message} ${meta ? JSON.stringify(meta) : ''}`,\n  trace: (message, meta) => ` TRACE: ${message} ${meta ? JSON.stringify(meta) : ''}`,\n};\n\n//   \nexport const LEVEL_PREDICATES = {\n  isError: (level) => ['fatal', 'error'].includes(level),\n  isWarning: (level) => level === 'warn',\n  isInfo: (level) => ['info', 'http'].includes(level),\n  isDebug: (level) => ['debug', 'trace'].includes(level),\n  isCritical: (level) => ['fatal', 'error', 'warn'].includes(level),\n  isProduction: (level) => ['fatal', 'error', 'warn', 'info'].includes(level),\n};\n\n//     \nexport const ROTATION_CONFIG = {\n  fatal: { maxSize: '10m', maxFiles: '90d', compress: true },\n  error: { maxSize: '50m', maxFiles: '30d', compress: true },\n  warn: { maxSize: '100m', maxFiles: '14d', compress: true },\n  info: { maxSize: '200m', maxFiles: '7d', compress: false },\n  http: { maxSize: '500m', maxFiles: '3d', compress: false },\n  debug: { maxSize: '100m', maxFiles: '1d', compress: false },\n  trace: { maxSize: '50m', maxFiles: '6h', compress: false },\n};\n\n//  \nexport const DEFAULT_CONFIG = {\n  level: 'info',\n  levels: LEVEL_VALUES,\n  colors: LEVEL_COLORS,\n  environment: process.env.NODE_ENV || 'development',\n\n  //     \n  getEnvironmentConfig() {\n    return ENVIRONMENT_CONFIGS[this.environment] || ENVIRONMENT_CONFIGS.development;\n  },\n\n  // ,   \n  isLevelEnabled(level, currentLevel = this.level) {\n    const levelValue = LOG_LEVELS[level]?.value || 0;\n    const currentValue = LOG_LEVELS[currentLevel]?.value || 30;\n    return levelValue >= currentValue;\n  },\n\n  //    \n  getFormatter(level) {\n    return LEVEL_FORMATTERS[level] || LEVEL_FORMATTERS.info;\n  },\n\n  //   \n  normalizeLevel(level) {\n    const normalized = level.toLowerCase();\n    return LEVEL_ALIASES[normalized] || normalized;\n  },\n};\n\n// CommonJS \nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = {\n    LOG_LEVELS,\n    LEVEL_ALIASES,\n    LEVEL_COLORS,\n    LEVEL_VALUES,\n    LEVEL_METHODS,\n    ENVIRONMENT_CONFIGS,\n    LEVEL_FORMATTERS,\n    LEVEL_PREDICATES,\n    ROTATION_CONFIG,\n    DEFAULT_CONFIG,\n    default: DEFAULT_CONFIG,\n  };\n}\n","import { LogLevel } from './index.js';\n\n/**\n *    \n */\nexport interface TransportConfig {\n  console: {\n    enabled: boolean;\n    pretty: boolean;\n    colorize: boolean;\n  };\n  file: {\n    enabled: boolean;\n    path: string;\n    maxSize: string;\n    maxFiles: number;\n    compress: boolean;\n  };\n  network: {\n    enabled: boolean;\n    // optional properties may appear explicitly with undefined, so include it per exactOptionalPropertyTypes\n    url?: string | undefined;\n    apiKey?: string | undefined;\n  };\n}\n\n/**\n *    \n */\nexport interface AdvancedLoggerConfig {\n  level: LogLevel;\n  service: string;\n  environment: string;\n  transports: TransportConfig;\n  redact: string[];\n  sampling?: {\n    enabled: boolean;\n    rate: number;\n  };\n  performance?: {\n    enabled: boolean;\n    threshold: number;\n  };\n}\n\n/**\n *   \n */\nexport const defaultConfig: AdvancedLoggerConfig = {\n  level: (process.env.LOG_LEVEL as LogLevel) || LogLevel.INFO,\n  service: process.env.SERVICE_NAME || 'heys-app',\n  environment: process.env.NODE_ENV || 'development',\n  transports: {\n    console: {\n      enabled: process.env.LOG_CONSOLE !== 'false',\n      pretty: process.env.NODE_ENV !== 'production',\n      colorize: process.env.NODE_ENV !== 'production',\n    },\n    file: {\n      enabled: process.env.LOG_FILE === 'true' || process.env.NODE_ENV === 'production',\n      path: process.env.LOG_PATH || './logs',\n      maxSize: process.env.LOG_MAX_SIZE || '10MB',\n      maxFiles: parseInt(process.env.LOG_MAX_FILES || '5'),\n      compress: process.env.LOG_COMPRESS === 'true',\n    },\n    network: {\n      enabled: process.env.LOG_NETWORK === 'true',\n      // Avoid assigning explicit undefined to satisfy exactOptionalPropertyTypes\n      url: process.env.LOG_NETWORK_URL ? process.env.LOG_NETWORK_URL : undefined,\n      apiKey: process.env.LOG_API_KEY ? process.env.LOG_API_KEY : undefined,\n    },\n  },\n  redact: [\n    'password',\n    'token',\n    'secret',\n    'authorization',\n    'cookie',\n    'session',\n    'apiKey',\n    'accessToken',\n    'refreshToken',\n  ],\n  sampling: {\n    enabled: process.env.LOG_SAMPLING === 'true',\n    rate: parseFloat(process.env.LOG_SAMPLING_RATE || '0.1'),\n  },\n  performance: {\n    enabled: process.env.LOG_PERFORMANCE === 'true',\n    threshold: parseInt(process.env.LOG_PERFORMANCE_THRESHOLD || '1000'),\n  },\n};\n\n/**\n *  \n */\nexport function validateConfig(config: Partial<AdvancedLoggerConfig>): AdvancedLoggerConfig {\n  const mergedConfig = { ...defaultConfig, ...config };\n\n  //   \n  if (!Object.values(LogLevel).includes(mergedConfig.level)) {\n    mergedConfig.level = LogLevel.INFO;\n  }\n\n  //   \n  if (mergedConfig.transports.file.enabled && !mergedConfig.transports.file.path) {\n    mergedConfig.transports.file.path = './logs';\n  }\n\n  //   \n  if (mergedConfig.transports.network.enabled && !mergedConfig.transports.network.url) {\n    mergedConfig.transports.network.enabled = false;\n  }\n\n  return mergedConfig;\n}\n","import fs from 'node:fs';\nimport path from 'node:path';\n\nimport pino from 'pino';\n\nimport { AdvancedLoggerConfig } from './config.js';\n\nconst resolveStreamLevel = (level: AdvancedLoggerConfig['level']): pino.Level | null => {\n  if (level === 'silent') {\n    return null;\n  }\n\n  if (level === 'http') {\n    return 'info';\n  }\n\n  return level as pino.Level;\n};\n\n/**\n *       \n */\nexport function createTransports(config: AdvancedLoggerConfig): pino.StreamEntry[] {\n  const streams: pino.StreamEntry[] = [];\n\n  //  \n  if (config.transports.console.enabled) {\n    const streamLevel = resolveStreamLevel(config.level);\n\n    if (streamLevel !== null) {\n      if (config.transports.console.pretty) {\n        streams.push({\n          level: streamLevel,\n          stream: pino.transport({\n            target: 'pino-pretty',\n            options: {\n              colorize: config.transports.console.colorize,\n              ignore: 'pid,hostname',\n              translateTime: 'SYS:yyyy-mm-dd HH:MM:ss.l',\n              messageFormat: `[${config.service}] {msg}`,\n              sync: false,\n            },\n          }),\n        });\n      } else {\n        streams.push({\n          level: streamLevel,\n          stream: process.stdout,\n        });\n      }\n    }\n  }\n\n  //  \n  if (config.transports.file.enabled) {\n    ensureLogDirectory(config.transports.file.path);\n\n    //   \n    const fileLevel = resolveStreamLevel(config.level);\n    if (fileLevel !== null) {\n      streams.push({\n        level: fileLevel,\n        stream: pino.destination({\n          dest: path.join(config.transports.file.path, `${config.service}.log`),\n          sync: false,\n          mkdir: true,\n        }),\n      });\n    }\n\n    //    \n    streams.push({\n      level: 'error',\n      stream: pino.destination({\n        dest: path.join(config.transports.file.path, `${config.service}.error.log`),\n        sync: false,\n        mkdir: true,\n      }),\n    });\n  }\n\n  //   ( centralized logging)\n  if (config.transports.network.enabled && config.transports.network.url) {\n    const networkLevel = resolveStreamLevel(config.level);\n\n    if (networkLevel !== null) {\n      streams.push({\n        level: networkLevel,\n        stream: pino.transport({\n          target: '@axiomhq/pino', //    \n          options: {\n            url: config.transports.network.url,\n            apiKey: config.transports.network.apiKey,\n            dataset: config.service,\n          },\n        }),\n      });\n    }\n  }\n\n  return streams;\n}\n\n/**\n *    \n */\nexport function createRotatingFileTransport(config: AdvancedLoggerConfig) {\n  if (!config.transports.file.enabled) {\n    return null;\n  }\n\n  ensureLogDirectory(config.transports.file.path);\n\n  return pino.transport({\n    target: 'pino-roll',\n    options: {\n      file: path.join(config.transports.file.path, `${config.service}.log`),\n      frequency: 'daily',\n      size: config.transports.file.maxSize,\n      mkdir: true,\n    },\n  });\n}\n\n/**\n *     \n */\nfunction ensureLogDirectory(logPath: string): void {\n  try {\n    if (!fs.existsSync(logPath)) {\n      fs.mkdirSync(logPath, { recursive: true });\n    }\n  } catch (error) {\n    //     ,  \n    //  console.error - \n  }\n}\n\n/**\n *      \n */\nexport function createFormatters(config: AdvancedLoggerConfig) {\n  return {\n    level: (label: string) => ({ level: label }),\n    bindings: (bindings: Record<string, unknown>) => ({\n      service: config.service,\n      environment: config.environment,\n      version: process.env.npm_package_version || '1.0.0',\n      ...bindings,\n    }),\n    log: (object: Record<string, unknown>) => {\n      //  timestamp  UTC\n      return {\n        ...object,\n        '@timestamp': new Date().toISOString(),\n        '@version': '1',\n      };\n    },\n  };\n}\n\n/**\n *   serializers  \n */\nexport function createSerializers(): Record<string, pino.SerializerFn> {\n  return {\n    ...pino.stdSerializers,\n    //   serializers    \n  };\n}\n","import { log } from '@heys/logger';\n\n// Analytics placeholder\nexport const trackEvent = (event: string, data?: Record<string, unknown>) => {\n  if (process.env.NODE_ENV !== 'production') {\n    log.debug('Analytics track event', { event, data });\n  }\n};\n"]}