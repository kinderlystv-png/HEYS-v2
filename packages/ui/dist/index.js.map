{"version":3,"sources":["../src/components/Button/Button.tsx","../src/security/index.tsx"],"names":["Fragment","jsx","jsxs","Button","variant","size","loading","children","className","disabled","props","baseClasses","variantClasses","sizeClasses","classes","defaultValidator","SecurityError","ValidationSchemas","React","useCallback","useMemo","SecureInput","value","onChange","type","placeholder","required","maxLength","sanitize","validateOnChange","testId","handleChange","event","newValue","inputType","validation","SecureContent","content","allowHtml","sanitizedContent","SecureForm","onSubmit","validationSchema","handleSubmit","formData","data","key","SecureUserProfile","user","onUpdate","editable","isEditing","setIsEditing","setFormData","handleSave","email","prev","username","bio","SecureSearch","onSearch","debounceMs","query","setQuery","results","setResults","isLoading","setIsLoading","timeoutId","searchResults","error","result","index"],"mappings":"AAyCQ,mBAAAA,EAEI,OAAAC,EADF,QAAAC,MADF,oBAhCD,IAAMC,EAAgC,CAAC,CAC5C,QAAAC,EAAU,UACV,KAAAC,EAAO,KACP,QAAAC,EAAU,GACV,SAAAC,EACA,UAAAC,EAAY,GACZ,SAAAC,EACA,GAAGC,CACL,IAAM,CACJ,IAAMC,EACJ,wLAEIC,EAAiB,CACrB,QAAS,+DACT,UAAW,+DACX,QAAS,6EACT,MAAO,sDACT,EAEMC,EAAc,CAClB,GAAI,sBACJ,GAAI,sBACJ,GAAI,mBACN,EAEMC,EAAU,CAACH,EAAaC,EAAeR,CAAO,EAAGS,EAAYR,CAAI,EAAGG,CAAS,EAChF,OAAO,OAAO,EACd,KAAK,GAAG,EAEX,OACEP,EAAC,UAAO,UAAWa,EAAS,SAAUL,GAAYH,EAAU,GAAGI,EAC5D,SAAAJ,EACCJ,EAAAF,EAAA,CACE,UAAAE,EAAC,OAAI,UAAU,kCAAkC,KAAK,OAAO,QAAQ,YACnE,UAAAD,EAAC,UACC,GAAG,KACH,GAAG,KACH,EAAE,KACF,OAAO,eACP,YAAY,IACZ,UAAU,aACZ,EACAA,EAAC,QACC,KAAK,eACL,EAAE,kHACF,UAAU,aACZ,GACF,EAAM,cAER,EAEAM,EAEJ,CAEJ,ECvDA,OAAS,oBAAAQ,EAAkB,iBAAAC,EAAe,qBAAAC,MAAyB,eACnE,OAAOC,GAAS,eAAAC,EAAa,WAAAC,MAAe,QA2DxC,cAAAnB,EA6JE,QAAAC,MA7JF,oBAzCG,IAAMmB,EAA0C,CAAC,CACtD,MAAAC,EACA,SAAAC,EACA,KAAAC,EAAO,OACP,YAAAC,EACA,SAAAC,EAAW,GACX,UAAAC,EACA,SAAAC,EAAW,GACX,iBAAAC,EAAmB,GACnB,UAAArB,EACA,cAAesB,CACjB,IAAM,CACJ,IAAMC,EAAeZ,EAClBa,GAA+C,CAC9C,IAAIC,EAAWD,EAAM,OAAO,MAE5B,GAAIH,EAAkB,CAEpB,IAAIK,EAAiE,OACjEV,IAAS,QAASU,EAAY,QACzBV,IAAS,aAAYU,EAAY,YAE1C,IAAMC,EAAapB,EAAiB,cAAckB,EAAUC,EAAW,CACrE,SAAAR,EACA,SAAAE,CACF,CAAC,EAED,GAAI,CAACO,EAAW,SAAWT,EAEzB,OAGFO,EAAYE,EAAW,WAAwBF,CACjD,CAEAV,EAASU,CAAQ,CACnB,EACA,CAACV,EAAUC,EAAME,EAAUC,EAAWC,EAAUC,CAAgB,CAClE,EAEA,OACE5B,EAAC,SACC,KAAMuB,EACN,MAAOF,EACP,SAAUS,EACV,YAAaN,EACb,UAAWE,EACX,SAAUD,EACV,UAAWlB,EACX,cAAasB,EACf,CAEJ,EAaaM,EAA8C,CAAC,CAC1D,QAAAC,EACA,UAAAC,EAAY,GACZ,UAAAX,EACA,UAAAnB,EACA,cAAesB,CACjB,IAAM,CACJ,IAAMS,EAAmBnB,EAAQ,IACZL,EAAiB,cAAcsB,EAAS,OAAQ,CACjE,SAAU,EACZ,CAAC,EAEkB,WAAwBA,EAC1C,CAACA,EAASV,CAAS,CAAC,EAEvB,OAAIW,EAEArC,EAAC,OACC,UAAWO,EACX,cAAasB,EACb,wBAAyB,CAAE,OAAQS,CAAiB,EACtD,EAKFtC,EAAC,OAAI,UAAWO,EAAW,cAAasB,EACrC,SAAAS,EACH,CAEJ,EAaaC,EAAwC,CAAC,CACpD,SAAAC,EACA,SAAAlC,EACA,iBAAAmC,EACA,UAAAlC,EACA,cAAesB,CACjB,IAAM,CACJ,IAAMa,EAAexB,EACnB,MAAOa,GAA4C,CACjDA,EAAM,eAAe,EAErB,IAAMY,EAAW,IAAI,SAASZ,EAAM,aAAa,EAC3Ca,EAA4B,CAAC,EAGnC,OAAW,CAACC,EAAKxB,CAAK,IAAKsB,EAAS,QAAQ,EAC1CC,EAAKC,CAAG,EAAIxB,EAId,GAAIoB,EAAkB,CACpB,IAAMP,EAAa,MAAMpB,EAAiB,eAAe8B,EAAMH,EAAkB,CAC/E,SAAU,GACV,WAAY,EACd,CAAC,EAED,GAAI,CAACP,EAAW,QACd,MAAM,IAAInB,EAAc,yBAA0BmB,EAAW,MAAM,EAIrE,OAAO,OAAOU,EAAMV,EAAW,WAAa,CAAC,CAAC,CAChD,CAEA,MAAMM,EAASI,CAAI,CACrB,EACA,CAACJ,EAAUC,CAAgB,CAC7B,EAEA,OACEzC,EAAC,QAAK,SAAU0C,EAAc,UAAWnC,EAAW,cAAasB,EAC9D,SAAAvB,EACH,CAEJ,EAkBawC,EAAsD,CAAC,CAClE,KAAAC,EACA,SAAAC,EACA,SAAAC,EAAW,GACX,UAAA1C,CACF,IAAM,CACJ,GAAM,CAAC2C,EAAWC,CAAY,EAAIlC,EAAM,SAAS,EAAK,EAChD,CAAC0B,EAAUS,CAAW,EAAInC,EAAM,SAAS8B,CAAI,EAE7CM,EAAanC,EAAY,SAAY,CACzC,GAAI,CAAC8B,EAAU,OAGf,IAAMd,EAAa,MAAMpB,EAAiB,eAAe6B,EAAU3B,EAAkB,KAAM,CACzF,SAAU,GACV,WAAY,EACd,CAAC,EAED,GAAI,CAACkB,EAAW,QACd,MAAM,IAAInB,EAAc,iCAAkCmB,EAAW,MAAM,EAG7E,MAAMc,EAASd,EAAW,WAAaS,CAAQ,EAC/CQ,EAAa,EAAK,CACpB,EAAG,CAACR,EAAUK,CAAQ,CAAC,EAEvB,MAAI,CAACC,GAAY,CAACC,EAEdjD,EAAC,OAAI,UAAWM,EAAW,cAAY,eACrC,UAAAP,EAAC,OAAI,cAAY,aACf,SAAAA,EAACmC,EAAA,CAAc,QAASY,EAAK,MAAO,EACtC,EACA/C,EAAC,OAAI,cAAY,gBACf,SAAAA,EAACmC,EAAA,CAAc,QAASY,EAAK,SAAU,EACzC,EACCA,EAAK,KACJ/C,EAAC,OAAI,cAAY,WACf,SAAAA,EAACmC,EAAA,CAAc,QAASY,EAAK,IAAK,UAAW,IAAK,EACpD,EAEDE,GACCjD,EAAC,UAAO,QAAS,IAAMmD,EAAa,EAAI,EAAG,cAAY,sBAAsB,wBAE7E,GAEJ,EAKFnD,EAAC,OAAI,UAAWO,EAAW,cAAY,oBACrC,SAAAN,EAACsC,EAAA,CACC,SAAUc,EACV,iBAAkBrC,EAAkB,KACpC,cAAY,eAEZ,UAAAhB,EAACoB,EAAA,CACC,MAAOuB,EAAS,MAChB,SAAWW,GAAUF,EAAaG,IAAU,CAAE,GAAGA,EAAM,MAAAD,CAAM,EAAE,EAC/D,KAAK,QACL,YAAY,QACZ,SAAQ,GACR,cAAY,cACd,EACAtD,EAACoB,EAAA,CACC,MAAOuB,EAAS,SAChB,SAAWa,GAAaJ,EAAaG,IAAU,CAAE,GAAGA,EAAM,SAAAC,CAAS,EAAE,EACrE,KAAK,OACL,YAAY,WACZ,SAAQ,GACR,UAAW,GACX,cAAY,iBACd,EACAxD,EAACoB,EAAA,CACC,MAAOuB,EAAS,KAAO,GACvB,SAAWc,GAAQL,EAAaG,IAAU,CAAE,GAAGA,EAAM,IAAAE,CAAI,EAAE,EAC3D,KAAK,OACL,YAAY,MACZ,UAAW,IACX,cAAY,YACd,EACAzD,EAAC,UAAO,KAAK,SAAS,cAAY,cAAc,gBAEhD,EACAA,EAAC,UAAO,KAAK,SAAS,QAAS,IAAMmD,EAAa,EAAK,EAAG,cAAY,gBAAgB,kBAEtF,GACF,EACF,CAEJ,EAaaO,EAA4C,CAAC,CACxD,SAAAC,EACA,YAAAnC,EAAc,YACd,WAAAoC,EAAa,IACb,UAAAlC,EAAY,IACZ,UAAAnB,CACF,IAAM,CACJ,GAAM,CAACsD,EAAOC,CAAQ,EAAI7C,EAAM,SAAS,EAAE,EACrC,CAAC8C,EAASC,CAAU,EAAI/C,EAAM,SAAgB,CAAC,CAAC,EAChD,CAACgD,EAAWC,CAAY,EAAIjD,EAAM,SAAS,EAAK,EAGtD,OAAAA,EAAM,UAAU,IAAM,CACpB,GAAI,CAAC4C,EAAM,KAAK,EAAG,CACjBG,EAAW,CAAC,CAAC,EACb,MACF,CAEA,IAAMG,EAAY,WAAW,SAAY,CACvCD,EAAa,EAAI,EACjB,GAAI,CAEF,IAAMhC,EAAapB,EAAiB,cAAc+C,EAAO,OAAQ,CAC/D,SAAU,GACV,SAAU,EACZ,CAAC,EAED,GAAI3B,EAAW,QAAS,CACtB,IAAMkC,EAAgB,MAAMT,EAAUzB,EAAW,WAAwB2B,CAAK,EAC9EG,EAAWI,CAAa,CAC1B,CACF,OAASC,EAAO,CACd,QAAQ,MAAM,gBAAiBA,CAAK,EACpCL,EAAW,CAAC,CAAC,CACf,QAAE,CACAE,EAAa,EAAK,CACpB,CACF,EAAGN,CAAU,EAEb,MAAO,IAAM,aAAaO,CAAS,CACrC,EAAG,CAACN,EAAOF,EAAUC,EAAYlC,CAAS,CAAC,EAGzCzB,EAAC,OAAI,UAAWM,EAAW,cAAY,gBACrC,UAAAP,EAACoB,EAAA,CACC,MAAOyC,EACP,SAAUC,EACV,KAAK,OACL,YAAatC,EACb,UAAWE,EACX,cAAY,eACd,EACCuC,GAAajE,EAAC,OAAI,cAAY,iBAAiB,sBAAU,EAC1DA,EAAC,OAAI,cAAY,iBACd,SAAA+D,EAAQ,IAAI,CAACO,EAAQC,IACpBvE,EAAC,OAA6B,cAAa,iBAAiBuE,CAAK,GAC/D,SAAAvE,EAACmC,EAAA,CAAc,QAASmC,EAAO,OAASA,EAAO,MAAQ,OAAOA,CAAM,EAAG,GAD/DA,EAAO,IAAMC,CAEvB,CACD,EACH,GACF,CAEJ","sourcesContent":["import React from 'react';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  loading?: boolean;\n  children: React.ReactNode;\n}\n\nexport const Button: React.FC<ButtonProps> = ({\n  variant = 'primary',\n  size = 'md',\n  loading = false,\n  children,\n  className = '',\n  disabled,\n  ...props\n}) => {\n  const baseClasses =\n    'inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none';\n\n  const variantClasses = {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',\n    secondary: 'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500',\n    outline: 'border border-gray-300 bg-transparent hover:bg-gray-50 focus:ring-gray-500',\n    ghost: 'bg-transparent hover:bg-gray-100 focus:ring-gray-500',\n  };\n\n  const sizeClasses = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-6 py-3 text-lg',\n  };\n\n  const classes = [baseClasses, variantClasses[variant], sizeClasses[size], className]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <button className={classes} disabled={disabled || loading} {...props}>\n      {loading ? (\n        <>\n          <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle\n              cx=\"12\"\n              cy=\"12\"\n              r=\"10\"\n              stroke=\"currentColor\"\n              strokeWidth=\"4\"\n              className=\"opacity-25\"\n            />\n            <path\n              fill=\"currentColor\"\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              className=\"opacity-75\"\n            />\n          </svg>\n          Loading...\n        </>\n      ) : (\n        children\n      )}\n    </button>\n  );\n};\n","/**\n * HEYS UI Security Integration\n * Security-enhanced UI components with validation and sanitization\n *\n * @author HEYS Team\n * @version 1.4.0\n * @created 2025-01-31\n */\n\nimport { defaultValidator, SecurityError, ValidationSchemas } from '@heys/shared';\nimport React, { useCallback, useMemo } from 'react';\n\n/**\n * Security-enhanced form input component\n */\nexport interface SecureInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  type?: 'text' | 'email' | 'url' | 'password';\n  placeholder?: string;\n  required?: boolean;\n  maxLength?: number;\n  sanitize?: boolean;\n  validateOnChange?: boolean;\n  className?: string;\n  'data-testid'?: string;\n}\n\nexport const SecureInput: React.FC<SecureInputProps> = ({\n  value,\n  onChange,\n  type = 'text',\n  placeholder,\n  required = false,\n  maxLength,\n  sanitize = true,\n  validateOnChange = true,\n  className,\n  'data-testid': testId,\n}) => {\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let newValue = event.target.value;\n\n      if (validateOnChange) {\n        // Validate input based on type\n        let inputType: 'text' | 'email' | 'password' | 'html' | 'filename' = 'text';\n        if (type === 'email') inputType = 'email';\n        else if (type === 'password') inputType = 'password';\n\n        const validation = defaultValidator.validateInput(newValue, inputType, {\n          required,\n          sanitize,\n        });\n\n        if (!validation.isValid && required) {\n          // Don't update if validation fails for required fields\n          return;\n        }\n\n        newValue = (validation.sanitized as string) || newValue;\n      }\n\n      onChange(newValue);\n    },\n    [onChange, type, required, maxLength, sanitize, validateOnChange],\n  );\n\n  return (\n    <input\n      type={type}\n      value={value}\n      onChange={handleChange}\n      placeholder={placeholder}\n      maxLength={maxLength}\n      required={required}\n      className={className}\n      data-testid={testId}\n    />\n  );\n};\n\n/**\n * Security-enhanced content display component\n */\nexport interface SecureContentProps {\n  content: string;\n  allowHtml?: boolean;\n  maxLength?: number;\n  className?: string;\n  'data-testid'?: string;\n}\n\nexport const SecureContent: React.FC<SecureContentProps> = ({\n  content,\n  allowHtml = false,\n  maxLength,\n  className,\n  'data-testid': testId,\n}) => {\n  const sanitizedContent = useMemo(() => {\n    const validation = defaultValidator.validateInput(content, 'html', {\n      sanitize: true,\n    });\n\n    return (validation.sanitized as string) || content;\n  }, [content, maxLength]);\n\n  if (allowHtml) {\n    return (\n      <div\n        className={className}\n        data-testid={testId}\n        dangerouslySetInnerHTML={{ __html: sanitizedContent }}\n      />\n    );\n  }\n\n  return (\n    <div className={className} data-testid={testId}>\n      {sanitizedContent}\n    </div>\n  );\n};\n\n/**\n * Security-enhanced form component\n */\nexport interface SecureFormProps {\n  onSubmit: (data: Record<string, any>) => Promise<void>;\n  children: React.ReactNode;\n  validationSchema?: any;\n  className?: string;\n  'data-testid'?: string;\n}\n\nexport const SecureForm: React.FC<SecureFormProps> = ({\n  onSubmit,\n  children,\n  validationSchema,\n  className,\n  'data-testid': testId,\n}) => {\n  const handleSubmit = useCallback(\n    async (event: React.FormEvent<HTMLFormElement>) => {\n      event.preventDefault();\n\n      const formData = new FormData(event.currentTarget);\n      const data: Record<string, any> = {};\n\n      // Extract form data\n      for (const [key, value] of formData.entries()) {\n        data[key] = value;\n      }\n\n      // Validate if schema provided\n      if (validationSchema) {\n        const validation = await defaultValidator.validateSchema(data, validationSchema, {\n          sanitize: true,\n          strictMode: true,\n        });\n\n        if (!validation.isValid) {\n          throw new SecurityError('Form validation failed', validation.errors);\n        }\n\n        // Use sanitized data\n        Object.assign(data, validation.sanitized || {});\n      }\n\n      await onSubmit(data);\n    },\n    [onSubmit, validationSchema],\n  );\n\n  return (\n    <form onSubmit={handleSubmit} className={className} data-testid={testId}>\n      {children}\n    </form>\n  );\n};\n\n/**\n * Security-enhanced user profile component\n */\nexport interface SecureUserProfileProps {\n  user: {\n    id: string;\n    email: string;\n    username: string;\n    avatar?: string;\n    bio?: string;\n  };\n  onUpdate?: (user: any) => Promise<void>;\n  editable?: boolean;\n  className?: string;\n}\n\nexport const SecureUserProfile: React.FC<SecureUserProfileProps> = ({\n  user,\n  onUpdate,\n  editable = false,\n  className,\n}) => {\n  const [isEditing, setIsEditing] = React.useState(false);\n  const [formData, setFormData] = React.useState(user);\n\n  const handleSave = useCallback(async () => {\n    if (!onUpdate) return;\n\n    // Validate user data\n    const validation = await defaultValidator.validateSchema(formData, ValidationSchemas.user, {\n      sanitize: true,\n      strictMode: true,\n    });\n\n    if (!validation.isValid) {\n      throw new SecurityError('User profile validation failed', validation.errors);\n    }\n\n    await onUpdate(validation.sanitized || formData);\n    setIsEditing(false);\n  }, [formData, onUpdate]);\n\n  if (!editable || !isEditing) {\n    return (\n      <div className={className} data-testid=\"user-profile\">\n        <div data-testid=\"user-email\">\n          <SecureContent content={user.email} />\n        </div>\n        <div data-testid=\"user-username\">\n          <SecureContent content={user.username} />\n        </div>\n        {user.bio && (\n          <div data-testid=\"user-bio\">\n            <SecureContent content={user.bio} maxLength={500} />\n          </div>\n        )}\n        {editable && (\n          <button onClick={() => setIsEditing(true)} data-testid=\"edit-profile-button\">\n            Edit Profile\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={className} data-testid=\"user-profile-edit\">\n      <SecureForm\n        onSubmit={handleSave}\n        validationSchema={ValidationSchemas.user}\n        data-testid=\"profile-form\"\n      >\n        <SecureInput\n          value={formData.email}\n          onChange={(email) => setFormData((prev) => ({ ...prev, email }))}\n          type=\"email\"\n          placeholder=\"Email\"\n          required\n          data-testid=\"email-input\"\n        />\n        <SecureInput\n          value={formData.username}\n          onChange={(username) => setFormData((prev) => ({ ...prev, username }))}\n          type=\"text\"\n          placeholder=\"Username\"\n          required\n          maxLength={50}\n          data-testid=\"username-input\"\n        />\n        <SecureInput\n          value={formData.bio || ''}\n          onChange={(bio) => setFormData((prev) => ({ ...prev, bio }))}\n          type=\"text\"\n          placeholder=\"Bio\"\n          maxLength={500}\n          data-testid=\"bio-input\"\n        />\n        <button type=\"submit\" data-testid=\"save-button\">\n          Save\n        </button>\n        <button type=\"button\" onClick={() => setIsEditing(false)} data-testid=\"cancel-button\">\n          Cancel\n        </button>\n      </SecureForm>\n    </div>\n  );\n};\n\n/**\n * Security-enhanced search component\n */\nexport interface SecureSearchProps {\n  onSearch: (query: string) => Promise<any[]>;\n  placeholder?: string;\n  debounceMs?: number;\n  maxLength?: number;\n  className?: string;\n}\n\nexport const SecureSearch: React.FC<SecureSearchProps> = ({\n  onSearch,\n  placeholder = 'Search...',\n  debounceMs = 300,\n  maxLength = 100,\n  className,\n}) => {\n  const [query, setQuery] = React.useState('');\n  const [results, setResults] = React.useState<any[]>([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  // Debounced search\n  React.useEffect(() => {\n    if (!query.trim()) {\n      setResults([]);\n      return;\n    }\n\n    const timeoutId = setTimeout(async () => {\n      setIsLoading(true);\n      try {\n        // Validate and sanitize search query\n        const validation = defaultValidator.validateInput(query, 'text', {\n          sanitize: true,\n          required: true,\n        });\n\n        if (validation.isValid) {\n          const searchResults = await onSearch((validation.sanitized as string) || query);\n          setResults(searchResults);\n        }\n      } catch (error) {\n        console.error('Search error:', error);\n        setResults([]);\n      } finally {\n        setIsLoading(false);\n      }\n    }, debounceMs);\n\n    return () => clearTimeout(timeoutId);\n  }, [query, onSearch, debounceMs, maxLength]);\n\n  return (\n    <div className={className} data-testid=\"secure-search\">\n      <SecureInput\n        value={query}\n        onChange={setQuery}\n        type=\"text\"\n        placeholder={placeholder}\n        maxLength={maxLength}\n        data-testid=\"search-input\"\n      />\n      {isLoading && <div data-testid=\"search-loading\">Loading...</div>}\n      <div data-testid=\"search-results\">\n        {results.map((result, index) => (\n          <div key={result.id || index} data-testid={`search-result-${index}`}>\n            <SecureContent content={result.title || result.name || String(result)} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n"]}