# –ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞ (Insulin Wave) ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **–í–µ—Ä—Å–∏—è –º–æ–¥—É–ª—è**: 4.2.5 | **–î–∞—Ç–∞**: 2026-03-10  
> **–û–±–Ω–æ–≤–ª—è–π —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –≤ `heys_iw_*.js`**

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞](#1-—á—Ç–æ-—Ç–∞–∫–æ–µ-–∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è-–≤–æ–ª–Ω–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è](#2-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–º–æ–¥—É–ª—è)
3. [–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞](#3-–≥–ª–∞–≤–Ω–∞—è-—Ñ–æ—Ä–º—É–ª–∞)
4. [–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –≤–æ–ª–Ω—ã](#4-–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è-–±–∞–∑–∞-–≤–æ–ª–Ω—ã)
5. [GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ](#5-gl-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. [–ë–ª–æ–∫ 1: –†–∞—Å—á—ë—Ç –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏—ë–º–∞ (calculateMealNutrients)](#6-–±–ª–æ–∫-1-—Ä–∞—Å—á—ë—Ç-–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤-–ø—Ä–∏—ë–º–∞)
7. [–ë–ª–æ–∫ 2: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ—Ç –µ–¥—ã (calculateMultiplier)](#7-–±–ª–æ–∫-2-–º–Ω–æ–∂–∏—Ç–µ–ª—å-–æ—Ç-–µ–¥—ã)
8. [–ë–ª–æ–∫ 3: –ë–æ–Ω—É—Å—ã –¥–Ω—è](#8-–±–ª–æ–∫-3-–±–æ–Ω—É—Å—ã-–¥–Ω—è)
9. [–ë–ª–æ–∫ 4: Activity Context](#9-–±–ª–æ–∫-4-activity-context)
10. [–ë–ª–æ–∫ 5: NDTE (—ç—Ñ—Ñ–µ–∫—Ç –≤—á–µ—Ä–∞—à–Ω–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)](#10-–±–ª–æ–∫-5-ndte)
11. [–ë–ª–æ–∫ 6: IR Score ‚Äî –∏–Ω—Å—É–ª–∏–Ω–æ—Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å](#11-–±–ª–æ–∫-6-ir-score)
12. [–ë–ª–æ–∫ 7: –û—Ç–¥–µ–ª—å–Ω—ã–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã](#12-–±–ª–æ–∫-7-–æ—Ç–¥–µ–ª—å–Ω—ã–µ-–º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã)
13. [–§–∞–∑—ã –≤–æ–ª–Ω—ã](#13-—Ñ–∞–∑—ã-–≤–æ–ª–Ω—ã)
14. [Meal Stacking ‚Äî 2nd Meal Effect](#14-meal-stacking)
15. [–ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å (Insulin Index)](#15-–∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π-–∏–Ω–¥–µ–∫—Å)
16. [–õ–∏–ø–æ–ª–∏–∑ –∏ NDTE Badge UI](#16-–ª–∏–ø–æ–ª–∏–∑)
17. [–ò—Å—Ç–æ—Ä–∏—è –≤–æ–ª–Ω –∏ –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π](#17-–∏—Å—Ç–æ—Ä–∏—è-–≤–æ–ª–Ω-–∏-–ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è)
18. [Gaussian-–∫—Ä–∏–≤–∞—è –≤–æ–ª–Ω—ã (v4.0.0)](#18-gaussian-–∫—Ä–∏–≤–∞—è)
19. [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö 38 —Ñ–∞–∫—Ç–æ—Ä–æ–≤](#19-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫-–≤—Å–µ—Ö-—Ñ–∞–∫—Ç–æ—Ä–æ–≤)
20. [API: –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#20-api)
21. [–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–æ–≤](#21-–ø—Ä–∏–º–µ—Ä—ã-—Ä–∞—Å—á—ë—Ç–æ–≤)
22. [–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∏ –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](#22-—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è-–º–æ–¥–µ–ª—å-–∏-–∏—Å—Ç–æ—Ä–∏—è-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞

**–ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞** ‚Äî –ø–µ—Ä–∏–æ–¥, –∫–æ–≥–¥–∞ —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ –∫—Ä–æ–≤–∏ –ø–æ–≤—ã—à–µ–Ω –ø–æ—Å–ª–µ
–ø—Ä–∏—ë–º–∞ –ø–∏—â–∏. –í —ç—Ç–æ –≤—Ä–µ–º—è:

- –û—Ä–≥–∞–Ω–∏–∑–º **–Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç** —ç–Ω–µ—Ä–≥–∏—é (–∂–∏—Ä –Ω–µ —Å–∂–∏–≥–∞–µ—Ç—Å—è)
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Å–∏–Ω—Ç–µ–∑ –≥–ª–∏–∫–æ–≥–µ–Ω–∞
- –ü–æ–¥–∞–≤–ª–µ–Ω **–ª–∏–ø–æ–ª–∏–∑** (–∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏–µ)

**–õ–∏–ø–æ–ª–∏–∑** (–∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏–µ) –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **–ø–æ—Å–ª–µ** –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤–æ–ª–Ω—ã.

### –ü–æ—á–µ–º—É –±–∞–∑–æ–≤–æ 3 —á–∞—Å–∞?

–ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `defaultWaveHours = 3.0` –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞:

| –ò—Å—Ç–æ—á–Ω–∏–∫                | –£—Å–ª–æ–≤–∏—è                   | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å                |
| ----------------------- | ------------------------- | --------------------------- |
| Wolever & Jenkins, 1994 | Mixed meal, 50–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤ | 2-3—á –¥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –±–∞–∑–æ–≤–æ–º—É |
| Brand-Miller, 2003      | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ì–ò-—Ç–µ—Å—Ç       | 2-3—á                        |
| Van Cauter, 1997        | –¶–∏—Ä–∫–∞–¥–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è    | 2.5-4—á                      |
| ADA                     | –ü–æ—Å—Ç–ø—Ä–∞–Ω–¥–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç     | 2—á –ø–∏–∫ (–Ω–µ –∫–æ–Ω–µ—Ü –≤–æ–ª–Ω—ã!)    |
| Mayer, 1995             | < 10–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤           | 1-2—á                        |

> ‚ö†Ô∏è 3 —á–∞—Å–∞ ‚Äî —Ä–∞–∑—É–º–Ω–∞—è **–º–µ–¥–∏–∞–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** –¥–ª—è —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏—ë–º–∞ —Å—Ä–µ–¥–Ω–µ–π GL —É
> –∑–¥–æ—Ä–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞. –í—Å–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

–ö–æ–¥ —Ä–∞–∑–±–∏—Ç –Ω–∞ **14 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** + –≥–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
(–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):

```
heys_iw_shim.js           ‚Üí –°–æ–∑–¥–∞—ë—Ç HEYS.InsulinWave.__internals
heys_iw_config_loader.js  ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ JSON
heys_iw_constants.js      ‚Üí 3212 —Å—Ç—Ä–æ–∫ ‚Äî –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã + helper-—Ñ—É–Ω–∫—Ü–∏–∏
heys_iw_utils.js          ‚Üí –£—Ç–∏–ª–∏—Ç—ã (timeToMinutes, formatDuration, etc.)
heys_iw_version_info.js   ‚Üí –í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–¥—É–ª—è (v4.2.5)
heys_iw_v30.js            ‚Üí v3.0: Continuous GL, Personal Baseline, Meal Stacking, Phases, II
heys_iw_calc.js           ‚Üí –†–∞—Å—á—ë—Ç –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤, multiple-factor weight
heys_iw_v41.js            ‚Üí v4.1: MetabolicFlexibility, SatietyModel, AdaptiveDeficit
heys_iw_patterns.js       ‚Üí –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–∏—Ç–∞–Ω–∏—è (–∞–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏—ë–º–æ–≤)
heys_iw_lipolysis.js      ‚Üí –ó–∞–ø–∏—Å–∏ —Ä–µ–∫–æ—Ä–¥–æ–≤ –ª–∏–ø–æ–ª–∏–∑–∞
heys_iw_graph.js          ‚Üí SVG-–≥—Ä–∞—Ñ–∏–∫ –≤–æ–ª–Ω—ã
heys_iw_ndte.js           ‚Üí NDTE Badge UI
heys_iw_ui.js             ‚Üí React UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
heys_iw_orchestrator.js   ‚Üí –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
heys_insulin_wave_v1.js   ‚Üí –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
```

**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `HEYS.InsulinWave.calculate(params)` ‚Äî —ç—Ç–æ
`calculateInsulinWaveData()` –≤ `heys_insulin_wave_v1.js`.

### –°—Ö–µ–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
heys_insulin_wave_v1.js
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.__internals  (–∏–∑ heys_iw_constants.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.utils        (–∏–∑ heys_iw_utils.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.Calc         (–∏–∑ heys_iw_calc.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.V30          (–∏–∑ heys_iw_v30.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.V41          (–∏–∑ heys_iw_v41.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.Lipolysis    (–∏–∑ heys_iw_lipolysis.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.Graph        (–∏–∑ heys_iw_graph.js)
  ‚îú‚îÄ‚îÄ HEYS.InsulinWave.NDTE         (–∏–∑ heys_iw_ndte.js)
  ‚îî‚îÄ‚îÄ HEYS.InsulinWave.UI           (–∏–∑ heys_iw_ui.js)
```

---

## 3. –ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞

–ò—Ç–æ–≥–æ–≤–∞—è –¥–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞ **3 —à–∞–≥–∞**:

### –®–∞–≥ 1: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞

```
effectiveBaseWaveHours = calculatePersonalBaselineWave(profile).baseHours
// –ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω ‚Üí 3.0
```

–ó–∞—Ç–µ–º ‚Äî GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ GL < 10, üÜï v4.2.3):

```javascript
// –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ micro/very-low –∑–æ–Ω–µ, –º—è–≥–∫–æ–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ
baseScaleFactor = max(0.85, 0.85 + (GL / 10) * 0.15);
effectiveBaseWaveHours = effectiveBaseWaveHours * baseScaleFactor;
```

### –®–∞–≥ 2: –§–∏–Ω–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å

```
finalMultiplier = foodMultiplier
               √ó activityMultiplier
               √ó ndteMultiplier
               √ó scaledCircadian
               √ó spicyMultiplier
               √ó insulinIndexWaveMult
               √ó simpleRatioMultiplier
               √ó irScoreMultiplier
               √ó liquidDairyCompensation   // üÜï v4.2.3: –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –¥–≤–æ–π–Ω–æ–≥–æ —à—Ç—Ä–∞—Ñ–∞ liquid+dairy (√ó1.08 –∏–ª–∏ √ó1.0)
```

–ì–¥–µ:

```
foodMultiplier = calculateMultiplier(gi, protein, fiber, carbs, fat, gl, ...) + otherBonuses

otherBonuses = metabolicBonuses + personalBonuses + mealStackingBonus
             + resistantStarchBonus + coldExposureBonus + supplementsBonusValue
             + autophagyBonus + temperatureBonus + largePortionBonus.bonus

metabolicBonuses = (fastingBonus + alcoholBonus + caffeineBonus + stressBonus + sleepBonus) * dayFactorsScale
personalBonuses  = (sleepQualityBonus + hydrationBonus + transFatBonus + cycleBonusValue) * dayFactorsScale

activityMultiplier = max(0.1, 1.0 + activityBonuses)
// activityBonuses ‚Äî –∏–∑ ActivityContext (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–ª–∏ —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
```

### –®–∞–≥ 3: –î–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã

```
adjustedWaveHours = effectiveBaseWaveHours √ó finalMultiplier
```

**–§–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ª–∏–º–∏—Ç**: `finalMultiplier` –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ **1.50** (–≤–æ–ª–Ω–∞ –Ω–µ
–º–æ–∂–µ—Ç –±—ã—Ç—å > 1.5 √ó –±–∞–∑–∞).  
_–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: Brand-Miller 2003 ‚Äî –¥–∞–∂–µ –ø—Ä–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–∞—Ö —Ä–µ–∞–ª—å–Ω–∞—è –≤–æ–ª–Ω–∞
—Ä–µ–¥–∫–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 4-4.5 —á–∞—Å–∞._

---

## 4. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –≤–æ–ª–Ω—ã

**–§–∞–π–ª**: `heys_iw_v30.js` ‚Üí `calculatePersonalBaselineWave(profile)`

–í–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö 3 —á–∞—Å–æ–≤ ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞, —É—á–∏—Ç—ã–≤–∞—é—â–∞—è –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ
—Ñ–∞–∫—Ç–æ—Ä—ã:

```javascript
baseHours = 3.0 * (1 + ageFactor + bmiFactor + genderFactor);
// –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è: min=1.5—á, max=4.5—á
```

| –§–∞–∫—Ç–æ—Ä           | –£—Å–ª–æ–≤–∏–µ             | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç             | –ò—Å—Ç–æ—á–Ω–∏–∫          |
| ---------------- | ------------------- | ----------------------- | ----------------- |
| –í–æ–∑—Ä–∞—Å—Ç          | –ö–∞–∂–¥—ã–π –≥–æ–¥ > 30 –ª–µ—Ç | +0.4% / –≥–æ–¥             | DeFronzo 1979     |
| BMI              | –ö–∞–∂–¥–∞—è –µ–¥–∏–Ω–∏—Ü–∞ > 25 | +1.5% / –µ–¥.             | Kahn & Flier 2000 |
| BMI (–Ω–∏–∂–µ –Ω–æ—Ä–º—ã) | –ö–∞–∂–¥–∞—è –µ–¥–∏–Ω–∏—Ü–∞ < 25 | -0.75% / –µ–¥. (max -10%) | Kahn & Flier 2000 |
| –ñ–µ–Ω—Å–∫–∏–π –ø–æ–ª      | ‚Äî                   | -5%                     | Nuutila 1995      |
| –ú—É–∂—Å–∫–æ–π –ø–æ–ª      | ‚Äî                   | +3%                     | Nuutila 1995      |

**–ü—Ä–∏–º–µ—Ä**: –ú—É–∂—á–∏–Ω–∞, 45 –ª–µ—Ç, BMI=27

```
ageFactor  = (45-30) √ó 0.004 = 0.06  (+6%)
bmiFactor  = (27-25) √ó 0.015 = 0.03  (+3%)
genderFactor = 0.03 (+3%)
baseHours  = 3.0 √ó (1 + 0.06 + 0.03 + 0.03) = 3.36—á
```

> ‚ö†Ô∏è –í–æ–∑—Ä–∞—Å—Ç, BMI –∏ –ø–æ–ª **—É–∂–µ —É—á—Ç–µ–Ω—ã** –≤ `effectiveBaseWaveHours`, –ø–æ—ç—Ç–æ–º—É **–ù–ï
> –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ** –≤ `personalBonuses` ‚Äî –∏–Ω–∞—á–µ –¥–≤–æ–π–Ω–æ–π —Å—á—ë—Ç!

---

## 5. GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø**: –ü—Ä–∏ –Ω–∏–∑–∫–æ–π –≥–ª–∏–∫–µ–º–∏—á–µ—Å–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ (GL < 20) –∏–Ω—Å—É–ª–∏–Ω–∞ –º–∞–ª–æ,
–ø–æ—ç—Ç–æ–º—É –¥–Ω–µ–≤–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã (—Å—Ç—Ä–µ—Å—Å, –Ω–µ–¥–æ—Å—ã–ø, —Ü–∏—Ä–∫–∞–¥–Ω—ã–µ —Ä–∏—Ç–º—ã) –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
**—á–∞—Å—Ç–∏—á–Ω–æ**.

### –°–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–Ω–µ–≤–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤

```javascript
// GL < 20 ‚Üí –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ
dayFactorsScale = max(0.3, 0.3 + (GL / 20) * 0.7);
// GL = 0  ‚Üí 0.30 (30% –æ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤)
// GL = 10 ‚Üí 0.65 (65%)
// GL = 20 ‚Üí 1.00 (100%)
```

### –°–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–∏—Ä–∫–∞–¥–Ω–æ–≥–æ —Ä–∏—Ç–º–∞ (–±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ)

```javascript
circadianScale = max(0.2, 0.2 + (GL / 20) * 0.8);
// GL = 0  ‚Üí 0.20
// GL = 7  ‚Üí 0.48
// GL = 10 ‚Üí 0.60
// GL = 20 ‚Üí 1.00
```

### –°–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –±–∞–∑—ã

```javascript
// üÜï v4.2.3: –æ—Å–ª–∞–±–ª–µ–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ micro/very-low zone (GL < 10)
// –£–±—Ä–∞–Ω–æ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –¥–≤–æ–π–Ω–æ–µ —Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: GL —É–∂–µ —Å–∏–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç —á–µ—Ä–µ–∑ glMultiplier
baseScaleFactor = max(0.85, 0.85 + (GL / 10) * 0.15);
// GL = 0   ‚Üí 0.85 (–º—è–≥–∫–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –±–∞–∑—ã)
// GL = 5   ‚Üí 0.925
// GL ‚â• 10  ‚Üí —Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
```

**–ó–∞—á–µ–º**: –ü—Ä–∏ –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–π GL (< 10) –±–∞–∑–∞ –º—è–≥–∫–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è. –ü–æ—Ä–æ–≥ —Å–Ω–∏–∂–µ–Ω —Å
20‚Üí10 –≤ v4.2.3 —á—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥–≤–æ–π–Ω–æ–µ GL-penalization (GL —É–∂–µ —É—á—Ç—ë–Ω –≤
`glMultiplier` –≤–Ω—É—Ç—Ä–∏ `calculateMultiplier()`).

---

## 6. –ë–ª–æ–∫ 1: –†–∞—Å—á—ë—Ç –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏—ë–º–∞

**–§–∞–π–ª**: `heys_iw_calc.js` ‚Üí
`calculateMealNutrients(meal, pIndex, getProductFromItem)`

–ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º –ø—Ä–∏—ë–º–∞ –∏ —Å—É–º–º–∏—Ä—É–µ—Ç:

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã

**–°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –ì–ò –ø–æ —É–≥–ª–µ–≤–æ–¥–∞–º** (v3.0.1 ‚Äî –Ω–µ –ø–æ –≥—Ä–∞–º–º–∞–º!):

```javascript
avgGI = Œ£(gi_i √ó carbs_i) / Œ£(carbs_i)
// –ü—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ —É–≥–ª–µ–≤–æ–¥–æ–≤ (–º—è—Å–æ, —Å—ã—Ä) –ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ —Å—Ä–µ–¥–Ω–∏–π –ì–ò
// –ù–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –ì–ò –ø—Ä–∏–º–µ–Ω–∏–º —Ç–æ–ª—å–∫–æ –∫ —É–≥–ª–µ–≤–æ–¥–∞–º (Brand-Miller 2003)
```

**–ì–ª–∏–∫–µ–º–∏—á–µ—Å–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Å Insulin Index** (v3.2.2):

```javascript
// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞:
itemGL = (gi * carbsFromItem) / 100;
iiFactor = INSULIN_INDEX_FACTORS[insulinogenicType].glBoost; // √ó1.5 –¥–ª—è –º–æ–ª–æ–∫–∞
boostedGL = min(itemGL * iiFactor, itemGL * 2.0); // maxGLBoost = 2.0
insulinIndexAdjustedGL += boostedGL;

glycemicLoad = Math.round(insulinIndexAdjustedGL * 10) / 10;
```

> üìù GL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑** –≤ `calculateMealNutrients()` —Å —É—á—ë—Ç–æ–º
> Insulin Index. –í `calculateMultiplier()` insulinogenicBonus = **0** –≤–æ
> –∏–∑–±–µ–∂–∞–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ —Å—á—ë—Ç–∞.

**–î—Ä—É–≥–∏–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã** (—Å —Ç—Ä–æ–π–Ω—ã–º fallback: prod ‚Üí item snapshot ‚Üí default):

- `totalProtein`, `totalFiber`, `totalCarbs`, `totalFat`, `totalTrans`,
  `totalSimple`
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è `insulinogenicType` (liquidDairy/softDairy/hardDairy/pureProtein)
- `liquidRatio = liquidGrams / totalGrams`, `hasLiquid = ratio > 0.5`
- `simpleRatio = totalSimple / totalCarbs` (–¥–æ–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤)

---

## 7. –ë–ª–æ–∫ 2: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ—Ç –µ–¥—ã

**–§–∞–π–ª**: `heys_iw_calc.js` ‚Üí
`calculateMultiplier(gi, protein, fiber, carbs, fat, gl, ...)`

```
baseMult = giMult + proteinBonus + fiberBonus + fatBonus
total    = baseMult √ó carbsMult √ó liquidMult √ó foodFormMult
```

### GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤ (glScaleFactor)

**–¢—Ä–µ—Ç—å–µ GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤–Ω—É—Ç—Ä–∏ `calculateMultiplier()`. –ü—Ä–∏ –Ω–∏–∑–∫–æ–π GL
–±–æ–Ω—É—Å—ã –æ—Ç –±–µ–ª–∫–∞, –∫–ª–µ—Ç—á–∞—Ç–∫–∏ –∏ –∂–∏—Ä–æ–≤ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ (–±–µ–∑ —É–≥–ª–µ–≤–æ–¥–æ–≤ –≤–æ–ª–Ω–∞ –Ω–µ
–º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ª–≥–æ–π).

```javascript
glScaleFactor = max(0.25, 0.25 + (GL / 20) * 0.75);
// GL = 0  ‚Üí 0.25 (25% –æ—Ç –Ω—É—Ç—Ä–∏–µ–Ω—Ç–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤)
// GL = 10 ‚Üí 0.625 (62.5%)
// GL ‚â• 20 ‚Üí 1.00 (100%)
```

**–í–∞–∂–Ω–æ**: —ç—Ç–æ –ù–ï `dayFactorsScale` –∏ –Ω–µ `circadianScale`. `glScaleFactor`
–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç **—Ç–æ–ª—å–∫–æ** `proteinBonus`, `fiberBonus` –∏ `fatBonus` –≤–Ω—É—Ç—Ä–∏
`calculateMultiplier()`. –î–Ω–µ–≤–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã (—Å—Ç—Ä–µ—Å—Å, —Å–æ–Ω) —Å–∫–∞–ª–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
—á–µ—Ä–µ–∑ `dayFactorsScale` –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ.

### GI –º–Ω–æ–∂–∏—Ç–µ–ª—å

```javascript
// –ó–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ GL >= 20:
giMult = GI_CATEGORIES[category].multiplier;
// low(0-35)=0.85, medium(36-55)=1.0, high(56-70)=1.1, veryHigh(71+)=1.2

// –ü—Ä–∏ GL < 20 ‚Äî –ø–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ:
if (GL >= 7) giWeight = (GL - 7) / 13;
giMult = 1.0 + (rawGiMult - 1.0) * giWeight;

// –ü—Ä–∏ GL < 7: giMult = 1.0 (GI –Ω–µ –≤–ª–∏—è–µ—Ç ‚Äî Mayer 1995)
```

### GL –º–Ω–æ–∂–∏—Ç–µ–ª—å ‚Äî –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∫—Ä–∏–≤–∞—è (v3.0.0)

–í–º–µ—Å—Ç–æ —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π ‚Äî –ø–ª–∞–≤–Ω–∞—è —Å—Ç–µ–ø–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:

```javascript
// GL_CONTINUOUS: minMult=0.15, maxMult=1.30, maxGL=40, exponent=0.6
normalized = GL / 40
carbsMult = 0.15 + (1.30 - 0.15) √ó normalized^0.6
```

| GL  | carbsMult | –í–æ–ª–Ω–∞ –ø—Ä–∏ –±–∞–∑–µ 3—á |
| --- | --------- | ----------------- |
| 0   | 0.15      | 27 –º–∏–Ω            |
| 5   | ~0.35     | 63 –º–∏–Ω            |
| 7   | ~0.43     | 77 –º–∏–Ω            |
| 10  | ~0.52     | 94 –º–∏–Ω            |
| 15  | ~0.68     | ~2—á               |
| 20  | ~0.82     | ~2.5—á             |
| 30  | ~1.05     | ~3.1—á             |
| 40+ | 1.30      | ~3.9—á             |

### –ë–µ–ª–æ–∫ (v4.0.0 ‚Äî –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É)

```javascript
// –ë–∞–∑–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤):
// 50–≥+ = base +7%, 35–≥ = base +5%, 20–≥ = base +3%

// –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –ø–æ —Ç–∏–ø—É –±–µ–ª–∫–∞:
whey   √ó 2.0   // –°—ã–≤–æ—Ä–æ—Ç–æ—á–Ω—ã–π: +14%/+10%/+6% (van Loon 2000, Pal 2010)
animal √ó 1.8   // –ñ–∏–≤–æ—Ç–Ω—ã–π: +12.6%/+9%/+5.4% (Layman 2003, Nilsson 2004)
mixed  √ó 1.5   // –°–º–µ—à–∞–Ω–Ω—ã–π: +10.5%/+7.5%/+4.5%
plant  √ó 1.3   // –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π: +9.1%/+6.5%/+3.9% (Mariotti 2017)

// –í—Å–µ –±–æ–Ω—É—Å—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –ø–æ glScaleFactor
```

### –ö–ª–µ—Ç—á–∞—Ç–∫–∞, –∂–∏—Ä—ã, –∂–∏–¥–∫–æ—Å—Ç—å, —Ñ–æ—Ä–º–∞ –ø–∏—â–∏

| –§–∞–∫—Ç–æ—Ä              | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                    | –ó–Ω–∞—á–µ–Ω–∏–µ |
| ------------------- | ---------------------------- | -------- |
| Fiber 5–≥            | `FIBER_BONUS.medium`         | ‚àí0.08    |
| Fiber 10–≥           | `FIBER_BONUS.high`           | ‚àí0.15    |
| Fiber 15–≥+          | `FIBER_BONUS.veryHigh`       | ‚àí0.20    |
| Fat 8–≥              | `FAT_BONUS.low`              | +0.05    |
| Fat 15–≥             | `FAT_BONUS.medium`           | +0.10    |
| Fat 25–≥+            | `FAT_BONUS.high`             | +0.15    |
| –ñ–∏–¥–∫–∞—è –ø–∏—â–∞         | `LIQUID_FOOD.waveMultiplier` | √ó0.75    |
| –§–æ—Ä–º–∞: –∂–∏–¥–∫–æ–µ       | `FOOD_FORM_BONUS.liquid`     | √ó1.30    |
| –§–æ—Ä–º–∞: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ | `FOOD_FORM_BONUS.processed`  | √ó1.15    |
| –§–æ—Ä–º–∞: —Ü–µ–ª—å–Ω–æ–µ      | `FOOD_FORM_BONUS.whole`      | √ó0.85    |
| –§–æ—Ä–º–∞: —Å–º–µ—à–∞–Ω–Ω–æ–µ    | `FOOD_FORM_BONUS.mixed`      | √ó1.00    |

---

## 8. –ë–ª–æ–∫ 3: –ë–æ–Ω—É—Å—ã –¥–Ω—è

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥–Ω–µ–≤–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤ **—Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è** (–Ω–µ –ø–µ—Ä–µ–º–Ω–æ–∂–∞—é—Ç—Å—è) –∏ –∑–∞—Ç–µ–º
–º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –ø–æ `dayFactorsScale`.

### –¶–∏—Ä–∫–∞–¥–Ω—ã–π —Ä–∏—Ç–º (smooth sinusoid v3.8.0)

```javascript
// scaledCircadian = 1.0 + (circadian.multiplier - 1.0) * circadianScale
// –§–æ—Ä–º—É–ª–∞: center(1.025) - amplitude(0.175) * cos(2œÄ * (hour - 8) / 24)
// –ù–∞–¥–∏—Ä (–º–∞–∫—Å–∏–º—É–º √ó1.20) –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ peakHour + 12 = 20:00 (–ù–ï –Ω–∞ –ø–æ–ª–Ω–æ—á—å!)
//
// circadian.multiplier –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ (GL ‚â• 20):
// 08:00 ‚Üí 0.850  (–ø–∏–∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Ç—Ä–æ–º)
// 12:00 ‚Üí 0.938  (~0.94)
// 18:00 ‚Üí 1.177  (~1.18)
// 20:00 ‚Üí 1.200  (–Ω–∞–¥–∏—Ä ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
// 22:00 ‚Üí 1.177  (~1.18, —É–∂–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è)
// 00:00 ‚Üí 1.113  (~1.11, –ù–ï 1.20!)
// 04:00 ‚Üí 0.938  (~0.94, –≤–æ–∑–≤—Ä–∞—Ç –∫ –Ω–æ—Ä–º–µ)
// Van Cauter 1997
```

> ‚ö†Ô∏è –ï—Å–ª–∏ `activityContext.nightPenaltyOverride = true` ‚Äî –Ω–æ—á–Ω–æ–π —à—Ç—Ä–∞—Ñ
> –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤–µ—á–µ—Ä–æ–º ‚Üí —à—Ç—Ä–∞—Ñ —É–±–∏—Ä–∞–µ—Ç—Å—è).

### –ì–æ–ª–æ–¥–∞–Ω–∏–µ (fastingHours = –≤—Ä–µ–º—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏—ë–º–∞)

| –ì–æ–ª–æ–¥–∞–Ω–∏–µ | –ë–æ–Ω—É—Å | –ò—Å—Ç–æ—á–Ω–∏–∫    |
| --------- | ----- | ----------- |
| 8—á        | ‚àí0.05 | Sutton 2018 |
| 12—á       | ‚àí0.10 | Sutton 2018 |
| 16—á+      | ‚àí0.15 | Sutton 2018 |

### –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã

| –§–∞–∫—Ç–æ—Ä             | –£—Å–ª–æ–≤–∏–µ         | –ë–æ–Ω—É—Å –∫ –º–Ω–æ–∂–∏—Ç–µ–ª—é      |
| ------------------ | --------------- | ---------------------- |
| –°—Ç—Ä–µ—Å—Å             | 5-6 –±–∞–ª–ª–æ–≤      | +0.08                  |
| –°—Ç—Ä–µ—Å—Å             | 7-10 –±–∞–ª–ª–æ–≤     | +0.15                  |
| –°–æ–Ω                | 5-6—á            | +0.08                  |
| –°–æ–Ω                | 4-5—á            | +0.15                  |
| –°–æ–Ω                | < 4—á            | +0.20                  |
| –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞       | 1-4/10          | +0.08                  |
| –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞       | 5-6/10          | +0.04                  |
| –ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è         | < 30% –Ω–æ—Ä–º—ã     | +0.08                  |
| –ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è         | 30-50% –Ω–æ—Ä–º—ã    | +0.05                  |
| –ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è         | 50-70% –Ω–æ—Ä–º—ã    | +0.03                  |
| –ê–ª–∫–æ–≥–æ–ª—å (—Å–ª–∞–±—ã–π)  | ‚Äî               | +0.10                  |
| –ê–ª–∫–æ–≥–æ–ª—å (—Å—Ä–µ–¥–Ω–∏–π) | ‚Äî               | +0.18                  |
| –ê–ª–∫–æ–≥–æ–ª—å (–∫—Ä–µ–ø–∫–∏–π) | ‚Äî               | +0.25                  |
| –ö–æ—Ñ–µ–∏–Ω             | ‚Äî               | +0.06                  |
| –¢—Ä–∞–Ω—Å-–∂–∏—Ä—ã 0.5–≥    | ‚Äî               | +0.04                  |
| –¢—Ä–∞–Ω—Å-–∂–∏—Ä—ã 1–≥      | ‚Äî               | +0.08                  |
| –¢—Ä–∞–Ω—Å-–∂–∏—Ä—ã 2–≥+     | ‚Äî               | +0.15                  |
| –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª | –õ—é—Ç–µ–∏–Ω–æ–≤–∞—è —Ñ–∞–∑–∞ | √ó1.12 (multiplicative) |
| –û—Å—Ç—Ä–∞—è –ø–∏—â–∞        | hasSpicy        | √ó0.96 (multiplicative) |

### –ü—Ä–æ—á–∏–µ –±–æ–Ω—É—Å—ã (–Ω–µ —Å–∫–∞–ª–∏—Ä—É—é—Ç—Å—è –ø–æ dayFactorsScale)

| –§–∞–∫—Ç–æ—Ä                          | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                       | –ó–Ω–∞—á–µ–Ω–∏–µ     |
| ------------------------------- | ------------------------------- | ------------ |
| –•–æ–ª–æ–¥–Ω—ã–π –¥—É—à                    | `COLD_EXPOSURE_BONUS.shower`    | ‚àí0.05        |
| –•–æ–ª–æ–¥–Ω–∞—è –≤–∞–Ω–Ω–∞                  | `COLD_EXPOSURE_BONUS.bath`      | ‚àí0.10        |
| –ú–æ—Ä–∂–µ–≤–∞–Ω–∏–µ                      | `COLD_EXPOSURE_BONUS.plunge`    | ‚àí0.12        |
| –£–∫—Å—É—Å                           | `SUPPLEMENTS_BONUS.vinegar`     | ‚àí0.12        |
| –ö–æ—Ä–∏—Ü–∞                          | `SUPPLEMENTS_BONUS.cinnamon`    | ‚àí0.10        |
| –ë–µ—Ä–±–µ—Ä–∏–Ω                        | `SUPPLEMENTS_BONUS.berberine`   | ‚àí0.15        |
| –ê—É—Ç–æ—Ñ–∞–≥–∏—è (–≥–æ–ª–æ–¥–∞–Ω–∏–µ –î–û –ø—Ä–∏—ë–º–∞) | 12-16—á                          | ‚àí0.05..‚àí0.10 |
| Resistant starch (–æ—Ö–ª. –∫—Ä–∞—Ö–º–∞–ª) | `RESISTANT_STARCH_BONUS.cooled` | ‚àí0.15        |
| –ì–æ—Ä—è—á–∞—è –µ–¥–∞                     | `FOOD_TEMPERATURE_BONUS.hot`    | +0.08        |
| –•–æ–ª–æ–¥–Ω–∞—è –µ–¥–∞                    | `FOOD_TEMPERATURE_BONUS.cold`   | ‚àí0.05        |
| –ë–æ–ª—å—à–∞—è –ø–æ—Ä—Ü–∏—è 600 –∫–∫–∞–ª         | `LARGE_PORTION_BONUS`           | +0.05        |
| –ë–æ–ª—å—à–∞—è –ø–æ—Ä—Ü–∏—è 800 –∫–∫–∞–ª         | ‚Äî                               | +0.10        |
| –ë–æ–ª—å—à–∞—è –ø–æ—Ä—Ü–∏—è 1000 –∫–∫–∞–ª        | ‚Äî                               | +0.18        |
| –ë–æ–ª—å—à–∞—è –ø–æ—Ä—Ü–∏—è 1200+ –∫–∫–∞–ª       | ‚Äî                               | +0.25        |

---

## 9. –ë–ª–æ–∫ 4: Activity Context

**–§–∞–π–ª**: `heys_iw_constants.js` ‚Üí `calculateActivityContext()`

–ó–∞–º–µ–Ω—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ `workoutBonus`, `postprandialBonus`, `neatBonus` ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç
–∏—Ö –≤ –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π.

### 10 –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–Ω—Ç–µ–∫—Å—Ç         | –£—Å–ª–æ–≤–∏–µ                    | –ë–æ–Ω—É—Å –∫ –≤–æ–ª–Ω–µ    | harmMultiplier |
| --------- | ---------------- | -------------------------- | ---------------- | -------------- |
| 100       | **PERI-WORKOUT** | –ï–¥–∞ –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏    | –¥–æ -60%          | 0.5            |
| 80        | **POST-WORKOUT** | 0-30 –º–∏–Ω –ø–æ—Å–ª–µ             | -40%             | ‚Äî              |
| 80        | **POST-WORKOUT** | 30-60 –º–∏–Ω –ø–æ—Å–ª–µ            | -35%             | ‚Äî              |
| 80        | **POST-WORKOUT** | 1-2—á –ø–æ—Å–ª–µ                 | -25%             | ‚Äî              |
| 80        | **POST-WORKOUT** | 2-4—á –ø–æ—Å–ª–µ                 | -15%             | ‚Äî              |
| 80        | **POST-WORKOUT** | 4-6—á –ø–æ—Å–ª–µ                 | -8%              | ‚Äî              |
| 60        | **PRE-WORKOUT**  | 0-45 –º–∏–Ω –¥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏     | -20%             | 0.6            |
| 60        | **PRE-WORKOUT**  | 45-90 –º–∏–Ω –¥–æ               | -10%             | 0.8            |
| 20        | **STEPS**        | 12k+ —à–∞–≥–æ–≤                 | -12%             | 0.92           |
| 20        | **STEPS**        | 10k —à–∞–≥–æ–≤                  | -10%             | 0.95           |
| 20        | **STEPS**        | 7.5k —à–∞–≥–æ–≤                 | -6%              | 0.97           |
| 20        | **STEPS**        | 5k —à–∞–≥–æ–≤                   | -4%              | 0.98           |
| 15        | **HOUSEHOLD**    | 90+ –º–∏–Ω –±—ã—Ç–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ | -12%             | 0.90           |
| 15        | **HOUSEHOLD**    | 60 –º–∏–Ω                     | -10%             | 0.93           |
| 15        | **HOUSEHOLD**    | 30 –º–∏–Ω                     | -5%              | 0.96           |
| 10        | **MORNING**      | –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–æ 12:00        | -5% (–≤–µ—Å—å –¥–µ–Ω—å)  | ‚Äî              |
| 10        | **DOUBLE DAY**   | 2+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫              | -10% (–≤–µ—Å—å –¥–µ–Ω—å) | ‚Äî              |

### POST-WORKOUT: –≤–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **nightPenaltyOverride = true** ‚Äî –Ω–æ—á–Ω–æ–π —à—Ç—Ä–∞—Ñ (√ó1.2) –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
- **–ö–∞—Ä–¥–∏–æ** —É—Å–∏–ª–∏–≤–∞–µ—Ç –±–æ–Ω—É—Å √ó1.15 (–ª—É—á—à–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç GLUT4)
- –û–∫–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π: –±–∞–∑–æ–≤—ã–µ 2—á + 60 –º–∏–Ω –∑–∞ –∫–∞–∂–¥—ã–µ 500 –∫–∫–∞–ª (max
  6—á)
- –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞—Ç–æ—â–∞–∫ (8—á+ –±–µ–∑ –µ–¥—ã): POST-WORKOUT –±–æ–Ω—É—Å √ó1.3

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

| –ö–æ–º–±–∏–Ω–∞—Ü–∏—è                | –≠—Ñ—Ñ–µ–∫—Ç                                  |
| ------------------------- | --------------------------------------- |
| –°–∏–ª–æ–≤–∞—è + –±–µ–ª–æ–∫ ‚â• 30–≥     | harmMultiplier √ó0.8 (–±–µ–ª–æ–∫ = –∞–Ω–∞–±–æ–ª–∏–∑–º) |
| –ö–∞—Ä–¥–∏–æ + –ø—Ä–æ—Å—Ç—ã–µ —É–≥–ª–µ–≤–æ–¥—ã | harm–úult √ó0.5, GL √ó0.7 (–≥–ª–∏–∫–æ–≥–µ–Ω)       |
| –ù–æ—á–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞         | –Ω–æ—á–Ω–æ–π —à—Ç—Ä–∞—Ñ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –¥–æ 4—á           |

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ activityBonuses –≤ —Ñ–æ—Ä–º—É–ª–µ

```javascript
// –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ –ú–ù–û–ñ–ò–¢–ï–õ–¨, –∞ –Ω–µ —Å–ª–æ–∂–µ–Ω–∏–µ!
// –≠—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç: GLUT4 –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ—Å—Ç–∞–≤–∞ –µ–¥—ã
activityMultiplier = max(0.1, 1.0 + activityBonuses);
// NEAT –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ activityBonuses –∫–∞–∫ —Ñ–æ–Ω–æ–≤—ã–π –±–æ–Ω—É—Å
// ‚ö†Ô∏è –®–∞–≥–∏ (STEPS) –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
//   - –ï—Å–ª–∏ –µ—Å—Ç—å activityContext ‚Üí —à–∞–≥–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ TRAINING_CONTEXT.stepsBonus.tiers (12k/10k/7.5k/5k)
//   - –ï—Å–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–µ—Ç (fallback) ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è calculateStepsBonus() —Å STEPS_BONUS (8k/-8%, 5k/-4%, 2k/-2%)
```

---

## 10. –ë–ª–æ–∫ 5: NDTE

**Next-Day Training Effect** ‚Äî —ç—Ñ—Ñ–µ–∫—Ç –≤—á–µ—Ä–∞—à–Ω–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è 12-48
—á–∞—Å–æ–≤.

**–§–∞–π–ª**: `heys_iw_constants.js` ‚Üí `calculateNDTE()`

**–£—Å–ª–æ–≤–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**: –í—á–µ—Ä–∞ –±—ã–ª–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ ‚â• 200 –∫–∫–∞–ª –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ.

> ‚ö†Ô∏è –ü—Ä–∏ 200-300 –∫–∫–∞–ª –±–æ–Ω—É—Å –ª–∏–Ω–µ–π–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ —É—Ä–æ–≤–Ω—è –Ω–∏–∂–Ω–µ–≥–æ tier
> (300-500 –∫–∫–∞–ª). –ü—Ä–∏ < 200 –∫–∫–∞–ª ‚Äî NDTE –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è. –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è
> —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ¬´‚â• 300 –∫–∫–∞–ª¬ª –∫–∞–∫ –ø–æ—Ä–æ–≥ –ø–æ–ª–Ω–æ–≥–æ tier-—ç—Ñ—Ñ–µ–∫—Ç–∞.

### –ë–æ–Ω—É—Å—ã –ø–æ –∫–∫–∞–ª

| –ö–∫–∞–ª —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ | –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤–æ–ª–Ω—ã | TDEE –±—É—Å—Ç | –õ–µ–π–±–ª                |
| --------------- | ---------------- | --------- | -------------------- |
| 900+            | ‚àí25%             | +10%      | üî• –ú–æ—â–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ |
| 500-900         | ‚àí15%             | +7%       | üí™ –•–æ—Ä–æ—à–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞  |
| 300-500         | ‚àí8%              | +4%       | ‚ö° –õ—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |

### –ó–∞—Ç—É—Ö–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞

| –ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ | –ú–Ω–æ–∂–∏—Ç–µ–ª—å —ç—Ñ—Ñ–µ–∫—Ç–∞ |
| ---------------- | ----------------- |
| 0-12—á            | 100%              |
| 12-24—á           | 80%               |
| 24-36—á           | 50%               |
| 36-48—á           | 25%               |

### BMI –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∏–Ω—Å—É–ª–∏–Ω–æ—Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª—å—à–µ –ø–æ–ª—å–∑—ã)

| BMI       | –ú–Ω–æ–∂–∏—Ç–µ–ª—å |
| --------- | --------- |
| < 18.5    | √ó0.8      |
| 18.5-24.9 | √ó1.0      |
| 25-29.9   | √ó1.4      |
| 30+       | √ó1.8      |

### –¢–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

| –¢–∏–ø      | TDEE –±—É—Å—Ç | –í–æ–ª–Ω–∞ |
| -------- | --------- | ----- |
| strength | √ó1.2      | √ó0.9  |
| cardio   | √ó1.0      | √ó1.1  |
| hobby    | √ó0.8      | √ó0.8  |

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º—É–ª–µ**:

```javascript
ndteMultiplier = ndteResult.active ? 1 - ndteResult.waveReduction : 1.0;
// –ö—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π (2+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏) max √ó1.5 –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
```

_–ù–∞—É—á–Ω–∞—è –±–∞–∑–∞: Mikines 1988, Magkos 2008, Jamurtas 2004, Cartee 2011_

---

## 11. –ë–ª–æ–∫ 6: IR Score

**IR (Insulin Resistance) Score** ‚Äî –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä
–∏–Ω—Å—É–ª–∏–Ω–æ—Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

**–§–∞–π–ª**: `heys_iw_constants.js` ‚Üí `calculateIRScore(profile, dayData)`

```
irScore = bmiFactor √ó sleepFactor √ó stressFactor √ó ageFactor
```

–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ **–ø–æ—Å–ª–µ–¥–Ω–∏–π –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä** –≤–æ–ª–Ω—ã (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–∏
—Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏):

| –§–∞–∫—Ç–æ—Ä  | –£—Å–ª–æ–≤–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
| ------- | ------- | -------- |
| BMI     | < 25    | √ó1.0     |
| BMI     | 25-30   | √ó1.1     |
| BMI     | 30-35   | √ó1.25    |
| BMI     | 35+     | √ó1.4     |
| –°–æ–Ω     | ‚â• 7—á    | √ó1.0     |
| –°–æ–Ω     | 6-7—á    | √ó1.05    |
| –°–æ–Ω     | < 6—á    | √ó1.15    |
| –°—Ç—Ä–µ—Å—Å  | ‚â§ 3     | √ó1.0     |
| –°—Ç—Ä–µ—Å—Å  | 4-6     | √ó1.08    |
| –°—Ç—Ä–µ—Å—Å  | > 6     | √ó1.15    |
| –í–æ–∑—Ä–∞—Å—Ç | < 30    | √ó1.0     |
| –í–æ–∑—Ä–∞—Å—Ç | 30-45   | √ó1.06    |
| –í–æ–∑—Ä–∞—Å—Ç | 45-60   | √ó1.12    |
| –í–æ–∑—Ä–∞—Å—Ç | 60+     | √ó1.25    |

**–¶–≤–µ—Ç–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ IR Score**:

- ‚â§ 1.1: üü¢ Optimal
- 1.1-1.25: üü° Moderate
- 1.25-1.5: üü† Elevated
- > 1.5: üî¥ High

**–ü—Ä–∏–º–µ—Ä**: –ú—É–∂—á–∏–Ω–∞, BMI=28, 6.5—á —Å–Ω–∞, —Å—Ç—Ä–µ—Å—Å=5, –≤–æ–∑—Ä–∞—Å—Ç=42:

```
irScore = 1.1 √ó 1.05 √ó 1.08 √ó 1.06 ‚âà 1.327  (üü† Elevated)
// –í–æ–ª–Ω–∞ —É–¥–ª–∏–Ω—è–µ—Ç—Å—è –Ω–∞ 32.7%
```

---

## 12. –ë–ª–æ–∫ 7: –û—Ç–¥–µ–ª—å–Ω—ã–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã

–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –º–Ω–æ–∂–µ–Ω–∏–µ–º** (–ø–æ—Å–ª–µ —Å–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ—Ö –±–æ–Ω—É—Å–æ–≤):

### Simple Ratio Modifier (v3.8.5)

```javascript
simpleRatio = totalSimple / totalCarbs; // –î–æ–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤
if (simpleRatio > 0.7) mult = 0.9; // > 70% —Å–∞—Ö–∞—Ä–∞ ‚Üí ‚àí10% –≤–æ–ª–Ω–∞
if (simpleRatio > 0.5) mult = 0.95; // 50-70% ‚Üí ‚àí5%
if (simpleRatio < 0.2 && carbs > 20) mult = 1.05; // –°–ª–æ–∂–Ω—ã–µ ‚Üí +5%
```

### Insulin Index Wave Modifier (v3.8.0)

–ú–æ–ª–æ—á–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç **–≤—ã—Å–æ–∫–∏–π –ø–∏–∫, –Ω–æ –∫–æ—Ä–æ—Ç–∫—É—é –≤–æ–ª–Ω—É** (–±—ã—Å—Ç—Ä–µ–µ —Å–ø–∞–¥):

| –¢–∏–ø         | waveMultiplier | peakMultiplier |
| ----------- | -------------- | -------------- |
| liquidDairy | **√ó0.85**      | √ó1.35          |
| softDairy   | **√ó0.90**      | √ó1.25          |
| hardDairy   | **√ó0.95**      | √ó1.10          |
| pureProtein | **√ó0.92**      | √ó1.15          |

_Holt 1997: "–ú–æ–ª–æ–∫–æ II=98 –ø—Ä–∏ GI=46 ‚Äî –±—ã—Å—Ç—Ä—ã–π –ø–∏–∫, –±—ã—Å—Ç—Ä—ã–π —Å–ø–∞–¥"_

---

## 13. –§–∞–∑—ã –≤–æ–ª–Ω—ã

**–§–∞–π–ª**: `heys_iw_v30.js` ‚Üí
`calculateWavePhases(totalWaveMinutes, nutrients, hasActivity)`

–í–æ–ª–Ω–∞ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 3 —Ñ–∞–∑—ã:

```
RISE (–ø–æ–¥—ä—ë–º) ‚Üí PLATEAU (–ø–ª–∞—Ç–æ) ‚Üí DECLINE (—Å–ø–∞–¥) ‚Üí LIPOLYSIS
```

| –§–∞–∑–∞         | –ë–∞–∑–æ–≤–∞—è –¥–ª–∏–Ω–∞          | –¶–≤–µ—Ç –≤ UI           |
| ------------ | ---------------------- | ------------------- |
| üî∫ Rise      | 20 –º–∏–Ω                 | #f97316 (–æ—Ä–∞–Ω–∂–µ–≤—ã–π) |
| ‚ñ¨ Plateau    | 35% –æ—Ç –≤–æ–ª–Ω—ã           | #ef4444 (–∫—Ä–∞—Å–Ω—ã–π)   |
| üîª Decline   | 45% –æ—Ç –≤–æ–ª–Ω—ã (–æ—Å—Ç–∞—Ç–æ–∫) | #eab308 (–∂—ë–ª—Ç—ã–π)    |
| üî• Lipolysis | –ø–æ—Å–ª–µ —Å–ø–∞–¥–∞            | #22c55e (–∑–µ–ª—ë–Ω—ã–π)   |

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ñ–∞–∑

**Rise**:

- –ö–ª–µ—Ç—á–∞—Ç–∫–∞: +3 –º–∏–Ω –∑–∞ –∫–∞–∂–¥—ã–µ 5–≥ (–∑–∞–º–µ–¥–ª—è–µ—Ç –ø–æ–¥—ä—ë–º)
- –ñ–∏–¥–∫–∞—è –ø–∏—â–∞: √ó0.6 (–Ω–∞ 40% –±—ã—Å—Ç—Ä–µ–µ)
- –ò—Ç–æ–≥: –æ—Ç 10 –¥–æ 45 –º–∏–Ω

**Plateau**:

- –ë–∞–∑–∞: 35% –æ—Ç –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏
- –ë–µ–ª–æ–∫: +5% –∑–∞ –∫–∞–∂–¥—ã–µ 20–≥
- –ñ–∏—Ä—ã: +8% –∑–∞ –∫–∞–∂–¥—ã–µ 15–≥
- –ú–∞–∫—Å –ø–ª–∞—Ç–æ: 55%

**Decline**:

- –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (hasActivity): √ó(1 - 0.15) ‚Üí –Ω–∞ 15% –±—ã—Å—Ç—Ä–µ–µ
- –ú–∏–Ω–∏–º—É–º 20 –º–∏–Ω

---

## 14. Meal Stacking

**Second Meal Effect** (Wolever 2006) ‚Äî –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã—Ö –≤–æ–ª–Ω.

**–§–∞–π–ª**: `heys_iw_v30.js` ‚Üí
`calculateMealStackingBonus(prevWaveEnd, newMealTime, prevGL)`

> ‚ö†Ô∏è –î–æ v3.7.4 —Å—á–∏—Ç–∞–ª–æ—Å—å, —á—Ç–æ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ —É–¥–ª–∏–Ω—è–µ—Ç –≤–æ–ª–Ω—É (+40%). –≠—Ç–æ –±—ã–ª–æ
> **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ**!

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—è**: –ï—Å–ª–∏ –∏–Ω—Å—É–ª–∏–Ω —É–∂–µ –≤ –∫—Ä–æ–≤–∏, –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–∏—ë–º–∞ –Ω—É–∂–Ω–æ
**–º–µ–Ω—å—à–µ** –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—É–ª–∏–Ω–∞ ‚Üí –≤–æ–ª–Ω–∞ **–ö–û–†–û–ß–ï**.

```javascript
overlapMinutes = prevWaveEnd - newMealTime
// –ï—Å–ª–∏ –Ω–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è ‚Üí stackBonus = 0

decayFactor = min(1, overlapMinutes / 90 * MEAL_STACKING.decayRate)  // decayRate = 0.5
glFactor = min(1.2, prevGL / 30)
stackBonus = decayFactor √ó glFactor √ó (-0.15)   // maxStackBonus = -0.15
// –ò—Ç–æ–≥: –¥–æ -15% –∫ –¥–ª–∏–Ω–µ –≤–æ–ª–Ω—ã
```

**–ü—Ä–∏–º–µ—Ä**: –ó–∞–≤—Ç—Ä–∞–∫ –≤ 08:00 (–≤–æ–ª–Ω–∞ –¥–æ 11:00), –æ–±–µ–¥ –≤ 10:30:

- –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ = 30 –º–∏–Ω
- decayFactor = min(1, 30/90 √ó 0.5) = 0.17
- –ï—Å–ª–∏ prevGL=15: glFactor = 0.5
- stackBonus = 0.17 √ó 0.5 √ó (-0.15) ‚âà **-0.013** (-1.3%)

---

## 15. –ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å

**Holt 1997**: –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç –≤ 2-3 —Ä–∞–∑–∞ –≤—ã—à–µ, —á–µ–º
–ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Ö GI.

–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

### 1. –í `calculateMealNutrients()` ‚Äî —É–≤–µ–ª–∏—á–µ–Ω–∏–µ GL

```javascript
// Per-product GL —Å —É—á—ë—Ç–æ–º Insulin Index:
itemGL = (gi * carbs) / 100;
iiFactor = INSULIN_INDEX_FACTORS[type].glBoost; // liquidDairy = 1.5
effectiveGL = min(itemGL * iiFactor, itemGL * 2.0); // maxGLBoost = 2.0
```

### 2. –í —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ ‚Äî —É–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –≤–æ–ª–Ω—ã

```javascript
insulinIndexWaveMult = INSULIN_INDEX_FACTORS[insulinogenicType].waveMultiplier;
// liquidDairy = 0.85, softDairy = 0.90, hardDairy = 0.95, pureProtein = 0.92
```

**–ò—Ç–æ–≥–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç**: –ú–æ–ª–æ–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç `glycemicLoad` (–±–æ–ª–µ–µ —Å–∏–ª—å–Ω—ã–π –ø–∏–∫), –Ω–æ
—É–∫–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤–æ–ª–Ω—É (–±—ã—Å—Ç—Ä–µ–µ —Å–ø–∞–¥). –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Ñ–∏–∑–∏–æ–ª–æ–≥–∏–∏.

---

## 16. –õ–∏–ø–æ–ª–∏–∑

–ö–æ–≥–¥–∞ `remainingMinutes <= 0` ‚Äî –≤–æ–ª–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è **–ª–∏–ø–æ–ª–∏–∑**.

### –°—Ç–∞—Ç—É—Å—ã –≤–æ–ª–Ω—ã

| –°—Ç–∞—Ç—É—Å      | –£—Å–ª–æ–≤–∏–µ            | Emoji |
| ----------- | ------------------ | ----- |
| `lipolysis` | remaining ‚â§ 0      | üî•    |
| `almost`    | remaining ‚â§ 15 –º–∏–Ω | ‚è≥    |
| `soon`      | remaining ‚â§ 30 –º–∏–Ω | üåä    |
| `active`    | remaining > 30 –º–∏–Ω | üìà    |

### –†–µ–∫–æ—Ä–¥—ã –ª–∏–ø–æ–ª–∏–∑–∞

–§–∞–π–ª: `heys_iw_lipolysis.js`

- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∫–æ—Ä–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ª–∏–ø–æ–ª–∏–∑–∞
- –°—á–∏—Ç–∞–µ—Ç streak (–¥–Ω–∏ –ø–æ–¥—Ä—è–¥ —Å –∞–∫—Ç–∏–≤–Ω—ã–º –ª–∏–ø–æ–ª–∏–∑–æ–º)
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `lipolysisKcal` ‚Äî –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–æ–∂–∂—ë–Ω–Ω—ã–µ –∫–∞–ª–æ—Ä–∏–∏

### –ê—É—Ç–æ—Ñ–∞–≥–∏—è (—Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç)

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ UI –¥–ª—è **—Ç–µ–∫—É—â–µ–π** —Ñ–∞–∑—ã –≥–æ–ª–æ–¥–∞–Ω–∏—è (currentFastingHours = –≤—Ä–µ–º—è —Å
–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏—ë–º–∞):

| currentFastingHours | –§–∞–∑–∞                        |
| ------------------- | --------------------------- |
| 12-16—á              | early (–ü–µ—Ä–µ—Ö–æ–¥ –∫ –≥–æ–ª–æ–¥–∞–Ω–∏—é) |
| 16-24—á              | active (–ê—É—Ç–æ—Ñ–∞–≥–∏—è –∞–∫—Ç–∏–≤–Ω–∞)  |
| 24-48—á              | deep (–ì–ª—É–±–æ–∫–∞—è –∞—É—Ç–æ—Ñ–∞–≥–∏—è)   |
| 48—á+                | extended (–ü—Ä–æ–¥–ª—ë–Ω–Ω—ã–π –ø–æ—Å—Ç)  |

---

## 17. –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ª–Ω –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è

### Wave History

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏—ë–º–∞ –¥–Ω—è –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è:

- `startMin`, `endMin`, `duration`, `waveHours`
- –í—Å–µ —Ñ–∞–∫—Ç–æ—Ä—ã (giCategory, protein, activityContext, ndteData, ...)
- `activityContext` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏—ë–º–∞

**–í–∞–∂–Ω–æ**: `waveHistory[last]` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Ä–∞—Å—á—ë—Ç–æ–º:

```javascript
// –í–µ—Ä—Å–∏—è –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ "–≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç"
lastMealWave.waveHours = adjustedWaveHours;
lastMealWave.duration = Math.round(adjustedWaveHours * 60);
```

### –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –ø–∞—Ä—É —Å–æ—Å–µ–¥–Ω–∏—Ö –≤–æ–ª–Ω:
if (current.endMin > next.startMin) {
  overlapMin = current.endMin - next.startMin;
  severity = overlapMin > 60 ? 'high' : overlapMin > 30 ? 'medium' : 'low';
}
```

### –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- `avgGapToday` ‚Äî —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –ø—Ä–∏—ë–º–∞–º–∏ —Å–µ–≥–æ–¥–Ω—è
- `personalAvgGap` ‚Äî —Å—Ä–µ–¥–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π (–∏–∑ localStorage)
- `recommendedGap` = baseWaveHours √ó 60 (–º–∏–Ω—É—Ç)
- `gapQuality`: excellent (‚â•90% –æ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏), good, moderate, needs-work

---

## 18. Gaussian –∫—Ä–∏–≤–∞—è

**v4.0.0**: –î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **3-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è
–ì–∞—É—Å—Å–æ–≤—Å–∫–∞—è –∫—Ä–∏–≤–∞—è**.

–§–∞–π–ª: `heys_iw_constants.js` ‚Üí `generateWaveCurve()`

–¢—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **fast** ‚Äî –±—ã—Å—Ç—Ä—ã–µ —É–≥–ª–µ–≤–æ–¥—ã (—Ä–∞–Ω–Ω–∏–π –ø–∏–∫, ~15-30 –º–∏–Ω)
- **slow** ‚Äî –º–µ–¥–ª–µ–Ω–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã / –±–µ–ª–æ–∫ (–ø–æ–∑–¥–Ω–∏–π –ø–∏–∫, ~60-90 –º–∏–Ω)
- **hepatic** ‚Äî –ø–µ—á—ë–Ω–æ—á–Ω—ã–π –≤—ã–±—Ä–æ—Å –≥–ª–∏–∫–æ–≥–µ–Ω–∞ (–ø–æ–∑–¥–Ω–∏–π, ~90-150 –º–∏–Ω)

–ò—Ç–æ–≥–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:

```javascript
waveData.curve; // [{t, y}] ‚Äî –º–∞—Å—Å–∏–≤ —Ç–æ—á–µ–∫ –¥–ª—è SVG –≥—Ä–∞—Ñ–∏–∫–∞
waveData.waveShape; // 'spike' | 'balanced' | 'prolonged'
waveData.curvePeakMinutes; // –ú–∏–Ω—É—Ç–∞ –ø–∏–∫–∞ –¥–ª—è UI
waveData.curveAUC; // –ü–ª–æ—â–∞–¥—å –ø–æ–¥ –∫—Ä–∏–≤–æ–π (–∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç)
waveData.curveComponents; // {fast, slow, hepatic}
```

---

## 19. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤

–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è 4.2.5 —Å–æ–¥–µ—Ä–∂–∏—Ç **38 —Ñ–∞–∫—Ç–æ—Ä–æ–≤** (37 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, 1 –æ–±—ä—è–≤–ª–µ–Ω –Ω–æ –Ω–µ
—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚Äî MEAL_ORDER_BONUS):

| #   | –ö–∞—Ç–µ–≥–æ—Ä–∏—è    | –§–∞–∫—Ç–æ—Ä                    | –≠—Ñ—Ñ–µ–∫—Ç                             | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                 | PMID              |
| --- | ------------ | ------------------------- | ---------------------------------- | ------------------------- | ----------------- |
| 1   | –ï–¥–∞          | –ì–ò                        | low=√ó0.85, high=√ó1.2               | `GI_CATEGORIES`           | 8198048           |
| 2   | –ï–¥–∞          | GL (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ)           | 0.15-1.30                          | `GL_CONTINUOUS`           | 12828192          |
| 3   | –ï–¥–∞          | –£–≥–ª–µ–≤–æ–¥—ã                  | < 5–≥ = 25% –≤–æ–ª–Ω—ã                   | `CARBS_SCALING`           | Mayer 1995        |
| 4   | –ï–¥–∞          | –ñ–∏—Ä—ã                      | 8–≥=+5%, 25–≥+=+15%                  | `FAT_BONUS`               | 3949984           |
| 5   | –ï–¥–∞          | –ë–µ–ª–æ–∫ (animal/whey)       | 20–≥=+5-14%                         | `PROTEIN_BONUS_V2`        | 6389060           |
| 6   | –ï–¥–∞          | –ö–ª–µ—Ç—á–∞—Ç–∫–∞                 | 5–≥=‚àí8%, 15–≥+=‚àí20%                  | `FIBER_BONUS`             | 1654354           |
| 7   | –ï–¥–∞          | –ñ–∏–¥–∫–∞—è –ø–∏—â–∞               | √ó0.75 –≤–æ–ª–Ω–∞                        | `LIQUID_FOOD`             | Flood 2009        |
| 8   | –ï–¥–∞          | –ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å (GL)   | –º–æ–ª–æ–∫–æ √ó1.5 –∫ GL                   | `INSULIN_INDEX_FACTORS`   | 9356547           |
| 9   | –ï–¥–∞          | –û—Å—Ç—Ä–∞—è –ø–∏—â–∞               | √ó0.96                              | `SPICY_FOOD`              | 21093467          |
| 10  | –ï–¥–∞          | –ê–ª–∫–æ–≥–æ–ª—å                  | +10-25%                            | `ALCOHOL_BONUS`           | ‚Äî                 |
| 11  | –ï–¥–∞          | –ö–æ—Ñ–µ–∏–Ω                    | +6%                                | `CAFFEINE_BONUS`          | 15277438          |
| 12  | –ï–¥–∞          | –¢—Ä–∞–Ω—Å-–∂–∏—Ä—ã                | 0.5–≥=+4%                           | `TRANS_FAT_BONUS`         | 9096978           |
| 13  | –ï–¥–∞          | ~~–ü–æ—Ä—è–¥–æ–∫ –µ–¥—ã~~           | ~~–∫–∞—Ä–±—ã –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ ‚àí25%%~~         | `MEAL_ORDER_BONUS`        | ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù  |
| 14  | –ï–¥–∞          | –§–æ—Ä–º–∞ –ø–∏—â–∏                | –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ √ó1.15                 | `FOOD_FORM_BONUS`         | Flood 2009        |
| 15  | –ï–¥–∞          | Resistant starch          | –æ—Ö–ª. ‚àí15%                          | `RESISTANT_STARCH_BONUS`  | Robertson 2005    |
| 16  | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å   | –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (–æ–±—â–∞—è)        | 45–º–∏–Ω=‚àí15%                         | `WORKOUT_BONUS`           | ‚Äî                 |
| 17  | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å   | –ü–æ—Å—Ç-–ø—Ä–∞–Ω–¥–∏–∞–ª—å–Ω–∞—è         | 30–º–∏–Ω=‚àí50%                         | `POSTPRANDIAL_EXERCISE`   | 19560716          |
| 18  | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å   | NEAT (–±—ã—Ç–æ–≤–∞—è)            | 60–º–∏–Ω=‚àí10%                         | `NEAT_BONUS`              | 17827399          |
| 19  | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å   | –®–∞–≥–∏                      | 10k=‚àí10%                           | `STEPS_BONUS`             | ‚Äî                 |
| 20  | –†–∏—Ç–º—ã        | –¶–∏—Ä–∫–∞–¥–Ω—ã–µ                 | 08:00=√ó0.85, 20:00=√ó1.20           | `CIRCADIAN_CONFIG`        | 9331550           |
| 21  | –†–∏—Ç–º—ã        | –ì–æ–ª–æ–¥–∞–Ω–∏–µ                 | 12—á=‚àí10%                           | `FASTING_BONUS`           | 29754952          |
| 22  | –°–æ—Å—Ç–æ—è–Ω–∏–µ    | –°—Ç—Ä–µ—Å—Å                    | 7+=+15%                            | `STRESS_BONUS`            | ‚Äî                 |
| 23  | –°–æ—Å—Ç–æ—è–Ω–∏–µ    | –ù–µ–¥–æ—Å—ã–ø                   | 4-5—á=+15%                          | `SLEEP_BONUS`             | 10543671          |
| 24  | –°–æ—Å—Ç–æ—è–Ω–∏–µ    | –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞              | 1-4/10=+8%                         | `SLEEP_QUALITY_BONUS`     | 18172212          |
| 25  | –°–æ—Å—Ç–æ—è–Ω–∏–µ    | –ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è                | <30%=+8%                           | `HYDRATION_BONUS`         | 28739050          |
| 26  | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ | –í–æ–∑—Ä–∞—Å—Ç (–≤ –±–∞–∑–µ)          | +0.4%/–≥–æ–¥ >30–ª                     | `PERSONAL_BASELINE`       | 510806            |
| 27  | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ | BMI (–≤ –±–∞–∑–µ)              | +1.5%/–µ–¥ >25                       | `PERSONAL_BASELINE`       | 10953022          |
| 28  | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ | –ü–æ–ª (–≤ –±–∞–∑–µ)              | –ú=+3%, –ñ=‚àí5%                       | `PERSONAL_BASELINE`       | 7813811           |
| 29  | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ | –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª        | –ª—é—Ç. √ó1.12                         | —á–µ—Ä–µ–∑ `HEYS.Cycle`        | Davidsen 2007     |
| 30  | –î–æ–ø.         | –î–æ–±–∞–≤–∫–∏                   | ‚àí10-15%                            | `SUPPLEMENTS_BONUS`       | ‚Äî                 |
| 31  | –î–æ–ø.         | –•–æ–ª–æ–¥–æ–≤–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ     | ‚àí5-12%                             | `COLD_EXPOSURE_BONUS`     | ‚Äî                 |
| 32  | –î–æ–ø.         | –ê—É—Ç–æ—Ñ–∞–≥–∏—è (–¥–æ –ø—Ä–∏—ë–º–∞)     | 12—á+=‚àí5%                           | `AUTOPHAGY_TIMER`         | ‚Äî                 |
| 33  | –î–æ–ø.         | NDTE (–≤—á–µ—Ä–∞—à–Ω—è—è —Ç—Ä–µ–Ω.)    | 500–∫–∫–∞–ª=‚àí15%                       | `NDTE`                    | 3056758           |
| 34  | –î–æ–ø.         | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–∏—â–∏          | –≥–æ—Ä—è—á.=+8%                         | `FOOD_TEMPERATURE_BONUS`  | Vald√©s-Ramos 2019 |
| 35  | –î–æ–ø.         | –ë–æ–ª—å—à–∞—è –ø–æ—Ä—Ü–∏—è            | 800=+10%                           | `LARGE_PORTION_BONUS`     | 1997819           |
| 36  | –î–æ–ø.         | Simple Ratio              | >70% —Å–∞—Ö–∞—Ä–∞=‚àí10%                   | (inline)                  | ‚Äî                 |
| 37  | –ú—É–ª—å—Ç.       | Insulin Index ‚Üí –≤–æ–ª–Ω–∞     | –º–æ–ª–æ–∫–æ √ó0.85                       | `INSULIN_INDEX_FACTORS`   | 9356547           |
| 38  | –ú—É–ª—å—Ç.       | Liquid Dairy Compensation | √ó1.08 –µ—Å–ª–∏ hasLiquid + liquidDairy | `liquidDairyCompensation` | ‚Äî                 |
| ‚Äî   | –ú—É–ª—å—Ç.       | IR Score                  | BMI√ó—Å–æ–Ω√ó—Å—Ç—Ä–µ—Å—Å√ó–≤–æ–∑—Ä–∞—Å—Ç             | `IR_SCORE_CONFIG`         | 510806            |

---

## 20. API

### –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

```javascript
const waveData = HEYS.InsulinWave.calculate({
  meals, // Array ‚Äî –ø—Ä–∏—ë–º—ã –ø–∏—â–∏ –¥–Ω—è [{time, items, mealType}]
  pIndex, // Object ‚Äî –∏–Ω–¥–µ–∫—Å –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  getProductFromItem, // Function(item, pIndex) ‚Üí product
  baseWaveHours, // number = 3 ‚Äî –±–∞–∑–æ–≤–∞—è –¥–ª–∏–Ω–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  trainings, // Array = [] ‚Äî —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –¥–Ω—è [{z, time, type}]
  dayData, // Object = {} ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–Ω—è:
  //   profile: {age, weight, height, gender}
  //   stressAvg, sleepHours, sleepQuality, waterMl
  //   steps, householdMin, cycleDay
  //   date, lsGet (–¥–ª—è NDTE)
  now, // Date = new Date()
});
```

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```javascript
waveData.status; // 'lipolysis' | 'almost' | 'soon' | 'active'
waveData.progress; // 0-100 ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –≤–æ–ª–Ω—ã (%)
waveData.remaining; // –º–∏–Ω—É—Ç –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è
waveData.lipolysisMinutes; // –º–∏–Ω—É—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ª–∏–ø–æ–ª–∏–∑–∞
waveData.insulinWaveHours; // –∏—Ç–æ–≥–æ–≤–∞—è –¥–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã (—á–∞—Å—ã)
waveData.baseWaveHours; // –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –≤–æ–ª–Ω—ã
waveData.finalMultiplier; // –∏—Ç–æ–≥–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

// –ù—É—Ç—Ä–∏–µ–Ω—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏—ë–º–∞
(waveData.gl, waveData.gi, waveData.protein, waveData.fiber);

// –î–µ—Ç–∞–ª–∏ —Ñ–∞–∫—Ç–æ—Ä–æ–≤
waveData.activityContext; // –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (type, badge, waveBonus)
waveData.irScore; // {score, factors, color, label}
waveData.personalBaseline; // {baseHours, factors}
waveData.ndte; // {active, waveReduction, ...}
waveData.mealStacking; // {stackBonus, hasStacking, desc}

// –§–∞–∑—ã –∏ –∫—Ä–∏–≤–∞—è
waveData.currentPhase; // 'rise' | 'plateau' | 'decline' | 'lipolysis'
waveData.wavePhases; // {rise, plateau, decline}
waveData.curve; // [{t, y}] ‚Äî –¥–ª—è SVG –≥—Ä–∞—Ñ–∏–∫–∞
waveData.waveShape; // 'spike' | 'balanced' | 'prolonged'

// –ò—Å—Ç–æ—Ä–∏—è –¥–Ω—è
waveData.waveHistory; // [{time, duration, gi, gl, activityContext, ...}]
waveData.overlaps; // [{from, to, overlapMinutes, severity}]
waveData.avgGapToday; // –º–∏–Ω ‚Äî —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ —Å–µ–≥–æ–¥–Ω—è
waveData.gapQuality; // 'excellent' | 'good' | 'moderate' | 'needs-work'

// –õ–∏–ø–æ–ª–∏–∑
waveData.lipolysisKcal; // –∫–∫–∞–ª –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ª–∏–ø–æ–ª–∏–∑–∞
waveData.isAutophagyActive; // true –µ—Å–ª–∏ >12—á –±–µ–∑ –µ–¥—ã
waveData.autophagy; // {phase: 'none'|'beginning'|'active'|'deep'|'extended'}
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```javascript
// v3.0 —Ñ—É–Ω–∫—Ü–∏–∏
HEYS.InsulinWave.calculateContinuousGLMultiplier(gl)
HEYS.InsulinWave.calculatePersonalBaselineWave(profile)
HEYS.InsulinWave.calculateMealStackingBonus(prevWaveEnd, mealMin, prevGL)
HEYS.InsulinWave.calculateWavePhases(totalMin, nutrients, hasActivity)
HEYS.InsulinWave.calculateInsulinIndex(insulinogenicType, baseGL)
HEYS.InsulinWave.getWaveCalculationDebug(params)  // –ü–æ–ª–Ω—ã–π –¥–µ–±–∞–≥

// v4.0 —Ñ—É–Ω–∫—Ü–∏–∏
HEYS.InsulinWave.calculateIRScore(profile, dayData)
HEYS.InsulinWave.predictInsulinResponse(gl, ...)
HEYS.InsulinWave.calculateWaveScore(waveData)    // –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–ª–Ω—ã

// v4.1 —Ñ—É–Ω–∫—Ü–∏–∏
HEYS.InsulinWave.calculateMetabolicFlexibility({recentDays, profile, trainings7d})
HEYS.InsulinWave.calculateSatietyScore(nutrients, ...)
HEYS.InsulinWave.calculateAdaptiveDeficit(...)
```

### React Hook

```javascript
const {
  data, // –î–∞–Ω–Ω—ã–µ –≤–æ–ª–Ω—ã (null –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∏—ë–º–æ–≤)
  expanded, // boolean ‚Äî —Ä–∞—Å–∫—Ä—ã—Ç –ª–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π –±–ª–æ–∫
  toggle, // Function ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å expanded
  isShaking, // boolean ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ status='almost'
} = HEYS.InsulinWave.useInsulinWave({
  meals,
  pIndex,
  getProductFromItem,
  baseWaveHours,
  trainings,
  dayData,
});
```

---

## 21. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–≤—Ç—Ä–∞–∫

```
–û–≤—Å—è–Ω–∫–∞ 80–≥ (GI=55, carbs=48–≥), –º–æ–ª–æ–∫–æ 150–º–ª (GI=30, carbs=7–≥), —è–±–ª–æ–∫–æ 100–≥ (GI=35, carbs=12–≥)
–í—Ä–µ–º—è: 08:00
–ü—Ä–æ—Ñ–∏–ª—å: –º—É–∂, 35 –ª–µ—Ç, BMI=23, –Ω–æ—Ä–º. —Å–æ–Ω, –Ω–µ—Ç —Å—Ç—Ä–µ—Å—Å–∞

1. calculateMealNutrients():
   avgGI = (55*48 + 30*7 + 35*12) / (48+7+12) = (2640+210+420)/67 ‚âà 49
   –º–æ–ª–æ–∫–æ: itemGL = 30*7/100 = 2.1, liquidDairy ‚Üí glBoost=1.5 ‚Üí boostedGL = min(2.1*1.5, 2.1*2) = 3.15
   –æ–≤—Å—è–Ω–∫–∞: GL = 55*48/100 = 26.4
   —è–±–ª–æ–∫–æ: GL = 35*12/100 = 4.2
   glycemicLoad ‚âà 33.75

2. calculatePersonalBaselineWave({age:35, BMI:23, gender:'male'}):
   ageFactor  = (35-30) * 0.004 = 0.02 (+2%)
   bmiFactor  = 0 (BMI < 25)
   genderFactor = +0.03 (+3%)
   baseHours = 3.0 * 1.05 = 3.15—á

3. GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: GL=33.75 > 20 ‚Üí baseScaleFactor = 1.0
   effectiveBaseWaveHours = 3.15—á

4. calculateMultiplier(GI=49, GL=33.75):
   carbsMult ‚âà 1.07  (GL=33.75 —á—É—Ç—å –≤—ã—à–µ 30 ‚Üí —É–º–µ—Ä–µ–Ω–Ω–æ)
   giMult = 1.0  (medium GI, GL>20)
   proteinBonus = +0.03  (7–≥ –±–µ–ª–∫–∞ < 20–≥ threshold)
   baseMult ‚âà 1.03
   total = 1.03 * 1.07 * 0.75(liquid) ‚âà 0.826  (–º–æ–ª–æ–∫–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏—ë–º ¬´–∂–∏–¥–∫–∏–º¬ª!)

5. –î–Ω–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã (08:00 —É—Ç—Ä–æ, –Ω–µ—Ç —Å—Ç—Ä–µ—Å—Å–∞, –Ω–æ—Ä–º. —Å–æ–Ω):
   circadianMult ‚âà 0.85  (—É—Ç—Ä–æ ‚Üí –ª—É—á—à–µ)
   –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã ‚âà 0

6. Insulin Index Wave Modifier:
   insulinogenicType = liquidDairy ‚Üí waveMultiplier = 0.85

7. IR Score (BMI=23, —Å–æ–Ω OK, —Å—Ç—Ä–µ—Å—Å OK, –≤–æ–∑—Ä–∞—Å—Ç=35):
   irScore = 1.0 * 1.0 * 1.0 * 1.06 ‚âà 1.06

8. liquidDairyCompensation:
   hasLiquid: liquidGrams/totalGrams = 150/(80+150+100) = 0.45 < 0.5 ‚Üí hasLiquid = false
   liquidDairyCompensation = 1.0  (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞ ‚Äî –∂–∏–¥–∫–æ—Å—Ç—å < 50%)

9. finalMultiplier = 0.826 * 1.0 * 1.0 * 0.85 * 1.0 * 0.85 * 1.0 * 1.06 * 1.0 ‚âà 0.633
   (food √ó activity √ó ndte √ó circadian(0.85 –≤ 08:00) √ó spicy √ó insIdx √ó simpleRatio √ó ir √ó liqDairy)
   –û–±—Ä–µ–∑–∞–Ω–∏–µ: max_mult = 1.5 ‚Üí –Ω–µ –Ω—É–∂–Ω–æ (0.633 < 1.5)

10. adjustedWaveHours = 3.15 * 0.633 ‚âà 1.99—á  (~2 —á–∞—Å–∞)
```

---

### –ü—Ä–∏–º–µ—Ä 2: –£–∂–∏–Ω –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

```
–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞ 200–≥ + –≥—Ä–µ—á–∫–∞ 150–≥ + –æ–≥—É—Ä—Ü—ã
–í—Ä–µ–º—è: 20:00, —á–µ—Ä–µ–∑ 40 –º–∏–Ω –ø–æ—Å–ª–µ –∫–∞—Ä–¥–∏–æ-—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 60 –º–∏–Ω (800 –∫–∫–∞–ª)
–ü—Ä–æ—Ñ–∏–ª—å: –∂–µ–Ω, 40 –ª–µ—Ç, BMI=26

ActivityContext: POST-WORKOUT, 40 –º–∏–Ω –ø–æ—Å–ª–µ –∫–∞—Ä–¥–∏–æ
  tier: { maxMin:60, waveBonus:-0.35 }
  typeMultiplier: cardio * 1.15 = 0.35 * 1.15 ‚Üí waveBonus = -0.40
  nightPenaltyOverride = true (–Ω–æ—á–Ω–æ–π —à—Ç—Ä–∞—Ñ –æ—Ç–º–µ–Ω—ë–Ω!)

NDTE: –Ω–µ—Ç (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è, –Ω–µ –≤—á–µ—Ä–∞)

IR Score: BMI=26 ‚Üí 1.1, –≤–æ–∑—Ä–∞—Å—Ç=40 ‚Üí 1.06, —Å–æ–Ω/—Å—Ç—Ä–µ—Å—Å OK ‚Üí ~1.17

finalMultiplier = foodMult * max(0.1, 1 + (-0.40)) * 1.17
               = foodMult * 0.60 * 1.17
               ‚âà ...  (–∏—Ç–æ–≥: –∫–æ—Ä–æ—Ç–∫–∞—è –≤–æ–ª–Ω–∞ ~1.5-2—á)
```

---

## –í–∞–∂–Ω—ã–µ –ª–æ–≤—É—à–∫–∏

1. **–î–≤–æ–π–Ω–æ–π —Å—á—ë—Ç –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤**: –ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –≤
   `calculateMealNutrients()` —á–µ—Ä–µ–∑ `insulinIndexAdjustedGL`. –í
   `calculateMultiplier()` insulinogenicBonus = 0 ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å!

2. **–í–æ–∑—Ä–∞—Å—Ç/BMI/–ø–æ–ª**: –£—á—Ç–µ–Ω—ã –≤ `effectiveBaseWaveHours` (—á–µ—Ä–µ–∑
   `calculatePersonalBaselineWave`). –í `personalBonuses` –æ–Ω–∏ –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è.

3. **Activity –∫–∞–∫ –º–Ω–æ–∂–∏—Ç–µ–ª—å**: `activityBonuses` –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑
   `activityMultiplier = max(0.1, 1 + activityBonuses)`, –∞ –Ω–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –≠—Ç–æ
   –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ! (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ = –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ).

4. **GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞–∑—ã**: –ü—Ä–∏ GL < 10 `effectiveBaseWaveHours` –º—è–≥–∫–æ
   —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `baseScaleFactor` (max 0.85‚Üí1.0). –ü—Ä–∏ GL ‚â• 10 —Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è
   –±–∞–∑—ã –Ω–µ—Ç. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –±–æ–Ω—É—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å —É–∂–µ —É–º–µ–Ω—å—à–µ–Ω–Ω–æ–π –±–∞–∑–æ–π.

5. **Meal Stacking**: –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–¥–ª–∏–Ω—è—Ç—å –≤–æ–ª–Ω—É.
   –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ ‚Äî —É–∫–æ—Ä–∞—á–∏–≤–∞–µ—Ç (Second Meal Effect, Wolever 2006).

6. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è waveHistory**: –ü–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–∏—ë–º –≤ `waveHistory`
   —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Ä–∞—Å—á—ë—Ç–æ–º
   (`waveHistory[last].waveHours = adjustedWaveHours`). HE –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–π
   –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—á—ë—Ç –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ waveHistory.

7. **MEAL_ORDER_BONUS**: –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞ –≤ `heys_iw_constants.js`, –Ω–æ –≤
   —Ñ–æ—Ä–º—É–ª–µ **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**.

8. **–°–∏–º–º–µ—Ç—Ä–∏—è —Ñ–æ—Ä–º—É–ª main vs waveHistory**: –í `waveHistory` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω—ã
   –±—ã—Ç—å –í–°–ï —Ç–µ –∂–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏, —á—Ç–æ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–∞—Å—á—ë—Ç–µ ‚Äî `mealInsIndexWaveMult`,
   `mealSimpleRatioMult`, `irScoreMultiplier`. –ë–µ–∑ –Ω–∏—Ö –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≤–æ–ª–Ω—ã –±—É–¥—É—Ç
   —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª–∏–Ω–Ω–µ–µ —Ä–µ–∞–ª—å–Ω—ã—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ IR > 1.0 –∏–ª–∏ –º–æ–ª–æ—á–Ω–æ–π –µ–¥–µ). ‚úÖ
   –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v4.2.4.

9. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ö—ç—à–µ–π –±–∞–Ω–¥–ª–æ–≤**: –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `pnpm bundle:legacy` —Ö—ç—à–∏
   –±–∞–Ω–¥–ª–æ–≤ –≤ `apps/web/index.html` –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑
   `syncIndexHtml()` –≤ `scripts/bundle-legacy.mjs`. –î–æ v4.2.4 —ç—Ç–æ –Ω–µ –¥–µ–ª–∞–ª–æ—Å—å ‚Äî
   –±—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–ª 404 –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –≤–µ—Å—å –ø–æ—Å—Ç–±—É—Ç (–≤–∫–ª—é—á–∞—è
   HEYS.InsulinWave) –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è. **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –ø—Ä–∞–≤—å —Ö—ç—à–∏ –≤ `index.html`
   –≤—Ä—É—á–Ω—É—é.

10. **SW cache regex**: –°–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä –∫—ç—à–∏—Ä—É–µ—Ç –±–∞–Ω–¥–ª—ã –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
    `\.bundle\.[a-f0-9]{12}\.js$` (`sw.js`, —Å—Ç—Ä–æ–∫–∞ ‚âà219). –î–ª–∏–Ω–∞ —Ö—ç—à–∞ ‚Äî 12
    —Å–∏–º–≤–æ–ª–æ–≤ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ Vite). –ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Äî –±–∞–Ω–¥–ª—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤
    `staleWhileRevalidate` –≤–º–µ—Å—Ç–æ `cacheFirst` –∏ –º–æ–≥—É—Ç —É—Å—Ç–∞—Ä–µ–≤–∞—Ç—å.

11. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã ‚â† —Ñ—É–Ω–∫—Ü–∏–∏**: –ö–æ–Ω—Ñ–∏–≥-–æ–±—ä–µ–∫—Ç—ã (`FIBER_BONUS`,
    `SLEEP_QUALITY_BONUS`, `HYDRATION_BONUS`) –º–æ–≥—É—Ç –∏–º–µ—Ç—å –ø–æ—Ä–æ–≥–∏/tier-—ã, –∫–æ—Ç–æ—Ä—ã–µ
    **–Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö `calculate*()` —Ñ—É–Ω–∫—Ü–∏—è—Ö (dead code).
    –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ tier-–∞ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã ‚Äî –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Ç–æ–∂–µ
    –æ–±–Ω–æ–≤–ª–µ–Ω–∞. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v4.2.5.

---

## 22. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∏ –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 22.1 –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–Ω—è—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π (v4.2.5 ‚Äî runtime)

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–∞—É—á–Ω–æ–π –º–æ–¥–µ–ª—å—é –∏ –∫–æ–¥–æ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ v4.2.5.

**Protein type detection**  
`dominantProteinType` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤ `calculateMealNutrients()`
(`heys_iw_calc.js`) —á–µ—Ä–µ–∑ `detectProteinType(product)` –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤
`calculateMultiplier()` –∫–∞–∫ `proteinType`. –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç
`'animal'` (√ó1.8), –∏–∑–æ–ª—è—Ç—ã ‚Äî `'whey'` (√ó2.0). –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: `whey` —Ç–æ–ª—å–∫–æ –¥–ª—è
–ø—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã—Ö –ø–æ—Ä–æ—à–∫–æ–≤/–∏–∑–æ–ª—è—Ç–æ–≤.

**–ï–¥–∏–Ω—ã–π ActivityContext**  
`waveHistory` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `mealActivityContext.waveBonus` ‚Äî —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç, —á—Ç–æ –∏
badge-–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. UI-–±–µ–π–¥–∂ –∏ —Ñ–æ—Ä–º—É–ª–∞ –≤—Å–µ–≥–¥–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã.

**GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã (GL < 10 ‚Äî —Ç–æ–ª—å–∫–æ –º—è–≥–∫–æ–µ)**  
–ü–æ—Ä–æ–≥ —Å–Ω–∏–∂–µ–Ω —Å 20 –¥–æ 10. –ü—Ä–∏ `GL ‚â• 10` –±–∞–∑–æ–≤–æ–µ —Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è. –≠—Ç–æ
—É—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥–≤–æ–π–Ω–æ–π —à—Ç—Ä–∞—Ñ: GL —É–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—á—Ç—ë–Ω –≤ `carbsMult` —á–µ—Ä–µ–∑
`GL_CONTINUOUS`.

**liquidDairyCompensation (√ó1.08)**  
–ñ–∏–¥–∫–∏–µ –º–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –¥–≤–æ–π–Ω–æ–π —à—Ç—Ä–∞—Ñ: `liquidMult=√ó0.75` +
`insulinIndexWaveMult=√ó0.85`. –ö–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç `√ó1.08` (—É—Å–ª–æ–≤–∏–µ:
`hasLiquid=true` && `insulinogenicType='liquidDairy'`) —á–∞—Å—Ç–∏—á–Ω–æ –Ω–µ–π—Ç—Ä–∞–ª–∏–∑—É–µ—Ç
—ç—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç.

**–°–∏–º–º–µ—Ç—Ä–∏—è —Ñ–æ—Ä–º—É–ª main ‚Üî waveHistory**  
–í `waveHistory` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤—Å–µ —Ç–µ –∂–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏, —á—Ç–æ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–∞—Å—á—ë—Ç–µ:
`mealInsIndexWaveMult`, `mealSimpleRatioMult`, `irScoreMultiplier`. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ
–≤–æ–ª–Ω—ã —Ç–æ—á–Ω–æ –æ—Ç—Ä–∞–∂–∞—é—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

**–¢—Ä–∏ GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è (—Ä–∞–∑–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –Ω–µ –ø—É—Ç–∞—Ç—å!)**

1. `glScaleFactor` (–≤ `calculateMultiplier()`) ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç
   proteinBonus/fiberBonus/fatBonus
2. `dayFactorsScale` (–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ) ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–µ/–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ
   –±–æ–Ω—É—Å—ã
3. `circadianScale` (–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ) ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç —Ü–∏—Ä–∫–∞–¥–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å

**FIBER_BONUS.veryHigh –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (v4.2.5)**  
–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `veryHigh: { threshold: 15, bonus: -0.20 }` –±—ã–ª–∞ dead code —Å –º–æ–º–µ–Ω—Ç–∞
—Å–æ–∑–¥–∞–Ω–∏—è. –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π –≤ —Ü–µ–ø–æ—á–∫–µ `if-else` –≤
`calculateMultiplier()`.

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π —Å –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ (v4.2.5)**  
`calculateSleepQualityBonus()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `maxQuality` –∏–∑
`SLEEP_QUALITY_BONUS` –≤–º–µ—Å—Ç–æ hardcoded –ø–æ—Ä–æ–≥–æ–≤. –†–∞–Ω–µ–µ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–ª–∞ `‚â§2/‚â§4`,
–∫–æ–Ω—Ñ–∏–≥ –≥–æ–≤–æ—Ä–∏–ª `‚â§4/‚â§6`.

---

### 22.2 –í –ø–ª–∞–Ω–∞—Ö (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

| #   | –§–∏—á–∞                                                                | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –§–∞–π–ª(—ã)                |
| --- | ------------------------------------------------------------------- | --------- | ---------------------- |
| 5   | `MEAL_ORDER_BONUS` ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞, –≤ —Ñ–æ—Ä–º—É–ª–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –°—Ä–µ–¥–Ω–∏–π   | `heys_iw_constants.js` |

**MEAL_ORDER_BONUS**: –§–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç —Ä–µ–∞–ª–µ–Ω (Sofer 2011 ‚Äî –∫–∞—Ä–±—ã
–ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–Ω–∏–∂–∞—é—Ç –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ 37%). –í–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏
–Ω–∞–¥—ë–∂–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø–æ—Ä—è–¥–∫–∞ –±–ª—é–¥ –≤ –ø—Ä–∏—ë–º–µ; –∏–Ω–∞—á–µ ‚Äî `mixed` –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.

---

### 22.3 –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫

**–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)**:

- –ó–∞–≤—Ç—Ä–∞–∫ —Å –º–æ–ª–æ—á–∫–æ–π GL 12-16, –±–µ–ª–æ–∫ 35-45–≥ ‚Üí –≤–æ–ª–Ω–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å < 1.5—á
- –ü–µ—Ä–µ–∫—É—Å –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Üí badge `PERI-WORKOUT`, —Å—Ç—Ä–æ–∫–∞ `–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å` –≤
  –º–æ–¥–∞–ª–∫–µ –∏ –∏—Ç–æ–≥–æ–≤–∞—è –¥–ª–∏–Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã
- –ü–ª–æ—Ç–Ω—ã–π –ø—Ä–∏—ë–º GL 40+, –∂–∏—Ä—ã 25+, –±–µ–ª–æ–∫ 40+ ‚Üí –≤–æ–ª–Ω–∞ –¥–ª–∏–Ω–Ω–µ–µ, –Ω–æ ‚â§ 4.5—á
  (`MAX_MULTIPLIER=1.50`)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**:

- `pnpm test:run` ‚Äî –±–µ–∑ —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- CAP: `MAX_MULTIPLIER = 1.50` ‚Äî –Ω–µ –ª–æ–º–∞—Ç—å
- API: `HEYS.InsulinWave.calculate` ‚Äî backward compatible

---

### 22.4 –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø–æ—á–µ–º—É —Ç–∞–∫, –∞ –Ω–µ –∏–Ω–∞—á–µ)

| –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                                                          | –ü—Ä–∏—á–∏–Ω–∞                                                                                                                |
| ------ | ---------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| v3.0.0 | `GL_CONTINUOUS` –≤–º–µ—Å—Ç–æ —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π GL                                    | –°—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–≤–∞–ª–∏ —Ä–µ–∑–∫–∏–µ —Å–∫–∞—á–∫–∏ –≤–æ–ª–Ω—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ GL 19‚Üí21                                                 |
| v3.7.4 | Meal Stacking: –∑–Ω–∞–∫ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω (-15% –≤–º–µ—Å—Ç–æ +40%)                                | Second Meal Effect (Wolever 2006): –∏–Ω—Å—É–ª–∏–Ω –≤ –∫—Ä–æ–≤–∏ ‚Üí –º–µ–Ω—å—à–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—É–ª–∏–Ω–∞ –Ω—É–∂–Ω–æ                                      |
| v3.8.0 | –¶–∏—Ä–∫–∞–¥–Ω—ã–π: –∫–æ—Å–∏–Ω—É—Å–Ω–∞—è –∫—Ä–∏–≤–∞—è –≤–º–µ—Å—Ç–æ —Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã—Ö —á–∞—Å–æ–≤                              | –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥; –Ω–∞–¥–∏—Ä –ø—Ä–∏ 20:00 (peakHour+12), –Ω–µ –ø–æ–ª–Ω–æ—á—å                                                             |
| v3.8.5 | Simple Ratio Modifier                                                              | –ü—Ä–æ—Å—Ç—ã–µ —Å–∞—Ö–∞—Ä–∞ > 70% ‚Üí –ø–∏–∫ –±—ã—Å—Ç—Ä–µ–µ, —Å–ø–∞–¥ —Ç–æ–∂–µ –±—ã—Å—Ç—Ä–µ–µ                                                                  |
| v4.0.0 | Protein type detection (`animal/plant/whey/mixed`)                                 | `'mixed'` ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∑–∞–≥–ª—É—à–∫–∞ –¥–∞–≤–∞–ª–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–Ω–∏–∂–µ–Ω–Ω—ã–π proteinBonus                                          |
| v4.0.0 | Gaussian –∫—Ä–∏–≤–∞—è (3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)                                                     | SVG-–≥—Ä–∞—Ñ–∏–∫ –±–µ–∑ —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã                                                                       |
| v4.2.3 | `baseScaleFactor` –ø–æ—Ä–æ–≥ 20 ‚Üí 10                                                    | –ü—Ä–∏ GL 10-19 –¥–≤–æ–π–Ω–æ–π —à—Ç—Ä–∞—Ñ: –±–∞–∑–æ–≤—ã–π + carbsMult; —Å–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ —É–±–∏—Ä–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ                                  |
| v4.2.3 | `liquidDairyCompensation √ó1.08`                                                    | –ú–æ–ª–æ–∫–æ: `liquidMult√ó0.75` + `insulinIndexWaveMult√ó0.85` = –¥–≤–æ–π–Ω–æ–µ —É–∫–æ—Ä–æ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞                          |
| v4.2.4 | `waveHistory` —Ñ–æ—Ä–º—É–ª–∞ = main —Ñ–æ—Ä–º—É–ª–∞                                               | –î–æ —ç—Ç–æ–≥–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≤–æ–ª–Ω—ã –Ω–µ –≤–∫–ª—é—á–∞–ª–∏ insIdx/simpleRatio/irScore ‚Üí —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª–∏–Ω–Ω–µ–µ                            |
| v4.2.5 | `FIBER_BONUS.veryHigh` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ `calculateMultiplier()`                       | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –±—ã–ª–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞ (15–≥+ ‚Üí ‚àí20%), –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ ‚Äî dead code; Jenkins 1978                            |
| v4.2.5 | `calculateSleepQualityBonus()` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –∫–æ–Ω—Ñ–∏–≥–æ–º                         | –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–ª–∞ ‚â§2/‚â§4, –∫–æ–Ω—Ñ–∏–≥ –≥–æ–≤–æ—Ä–∏–ª ‚â§4/‚â§6; Tasali 2008: quality 1-4 = poor                                         |
| v4.2.5 | `vinegar` bonus ‚àí0.20 ‚Üí ‚àí0.12                                                      | Liljeberg 1998: —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞ –≥–ª–∏–∫–µ–º–∏—é 20-35%, –Ω–æ –Ω–∞ –î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –≤–æ–ª–Ω—ã ~10-15%                                            |
| v4.2.5 | `CIRCADIAN_CONFIG.nadirHour` 24 ‚Üí 20                                               | –ú—ë—Ä—Ç–≤–æ–µ –ø–æ–ª–µ; —Ä–µ–∞–ª—å–Ω—ã–π –Ω–∞–¥–∏—Ä = peakHour+12=20:00, –∞ –Ω–µ –ø–æ–ª–Ω–æ—á—å                                                         |
| v4.2.5 | `HYDRATION_BONUS` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π 35 ‚Üí 30 –º–ª/–∫–≥                                        | –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `weight*30`; IOM 2004: 30 –º–ª/–∫–≥ ‚Äî –Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —á–∏—Å—Ç–æ–π –≤–æ–¥—ã                                        |
| v4.2.5 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω `glScaleFactor` (Section 7)                                 | 3-–µ GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ `calculateMultiplier()` –Ω–µ –±—ã–ª–æ –æ–ø–∏—Å–∞–Ω–æ                                                     |
| v4.2.5 | `MAX_MULTIPLIER` cap –¥–æ–±–∞–≤–ª–µ–Ω –≤ waveHistory                                        | –î–æ —ç—Ç–æ–≥–æ non-last meals –≤ waveHistory –±—ã–ª–∏ –±–µ–∑ cap 1.50 ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å                           |
| v4.2.5 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Ñ–∞–∑—ã –∞—É—Ç–æ—Ñ–∞–≥–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å `AUTOPHAGY_TIMER`                  | Section 16: —Ä–∞–Ω–µ–µ 16-20/20-24/24+ ‚Üí —Ç–µ–ø–µ—Ä—å 16-24/24-48/48+ (–∫–∞–∫ –≤ –∫–æ–¥–µ)                                                |
| v4.2.5 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `FOOD_FORM_BONUS` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã `liquid (√ó1.30)` –∏ `mixed (√ó1.0)`      | Section 7: —Ä–∞–Ω–µ–µ –ø–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ processed/whole, —Ç–µ–ø–µ—Ä—å –≤—Å–µ 4 —Ñ–æ—Ä–º—ã                                                   |
| doc    | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: NDTE –ø–æ—Ä–æ–≥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É—Ç–æ—á–Ω—ë–Ω ‚Äî ‚â• 200 –∫–∫–∞–ª (—Å –ø—Ä–æ–ø–æ—Ä—Ü–∏–µ–π –ø—Ä–∏ 200-300) | –ö–æ–¥: `trainingKcal < 200` ‚Üí –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è; –ø—Ä–∏ 200-300 –∫–∫–∞–ª ‚Äî –ª–∏–Ω–µ–π–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –Ω–∏–∂–Ω–µ–≥–æ tier               |
| doc    | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: STEPS ‚Äî –æ–ø–∏—Å–∞–Ω—ã –æ–±–µ —Å–∏—Å—Ç–µ–º—ã (ActivityContext –∏ fallback)             | Section 9: —à–∞–≥–∏ –≤ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö: —Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π (12k/10k/7.5k/5k via TRAINING_CONTEXT) –∏ –±–µ–∑ (8k/5k/2k via STEPS_BONUS) |

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [DATA_MODEL_REFERENCE.md](DATA_MODEL_REFERENCE.md) ‚Äî –æ–±—â–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö,
  –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è
- [AI_KEY_FILES.md](AI_KEY_FILES.md) ‚Äî –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- [ARCHITECTURE.md](ARCHITECTURE.md) ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ HEYS v2
