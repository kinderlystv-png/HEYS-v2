# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ HEYS v2 ‚Äî –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω (–∞—É–¥–∏—Ç v5)

> **–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 22.02.2026 (v3), –æ–±–Ω–æ–≤–ª–µ–Ω–æ 26.02.2026 (v5 ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π
> –±–∞–Ω–¥–ª–∏–Ω–≥ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–æ—Ä–≥–∞–Ω–∏–π UI)  
> **–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ —Ä–µ–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É +
> –ø—Ä–æ–¥–∞–∫—à–Ω-–ª–æ–≥–∏ `.github/log777.yml` + PERF-–º–∞—Ä–∫–µ—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞: —á—Ç–æ –±—ã–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

| #   | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–∞–Ω–∞              | –°—Ç–∞—Ç—É—Å                        | –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞                                                                                             |
| --- | ------------------------------------------ | ----------------------------- | --------------------------------------------------------------------------------------------------------- |
| 1   | 130+ JS-—Ñ–∞–π–ª–æ–≤ –±–µ–∑ –±–∞–Ω–¥–ª–∏–Ω–≥–∞               | ‚úÖ –í–µ—Ä–Ω–æ                      | 246 `<script src>`, 243 —Å `defer`                                                                         |
| 2   | SW: `networkFirstNoStore` –¥–ª—è JS           | ‚úÖ –í–µ—Ä–Ω–æ                      | `sw.js:286` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ                                                                                  |
| 3   | 3 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö RPC –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏           | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ                   | –ü—Ä–∞–≤–∏–ª—å–Ω–µ–µ: 2 RPC + `ensureAuditConsistency` (–æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ `limit=1`), –∏—Ç–æ–≥–æ 3 –∑–∞–ø—Ä–æ—Å–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø—É—Ç–µ–π |
| 4   | `doImmediateClientUpload` –æ–±—Ö–æ–¥–∏—Ç debounce | ‚úÖ –í–µ—Ä–Ω–æ                      | –¶–µ–ø–æ—á–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞                                                                                      |
| 5   | 543 KV-—Å—Ç—Ä–æ–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç UI                 | ‚úÖ –í–µ—Ä–Ω–æ                      | `bootstrapClientSync` —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π                                                                          |
| 6   | Cascade –∂–¥—ë—Ç `heysSyncCompleted`           | ‚ùå –ù–µ–≤–µ—Ä–Ω–æ ‚Üí **–®–∞–≥ 8 —É–¥–∞–ª—ë–Ω** | –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: `cascade` –∂–¥—ë—Ç `heysSyncCompleted` ‚Äî —ç—Ç–æ **–Ω–µ –±–∞–≥**                                      |
| 7   | `cascadeState` –ø—Ä–∏ 30/30 days missing      | ‚úÖ –í–µ—Ä–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ             | –†–∞—Å—á—ë—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `useMemo`, –ø–æ–∫–∞ —Å–æ–±—ã—Ç–∏–µ –Ω–µ –ø—Ä–∏—à–ª–æ                                      |
| 8   | `ensureAuditConsistency` –ø—Ä–∏ tab-visible   | üÜï **–ù–æ–≤–∞—è –Ω–∞—Ö–æ–¥–∫–∞**          | –ü—Ä–∏ –∫–∞–∂–¥–æ–π —Å–º–µ–Ω–µ –≤–∫–ª–∞–¥–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fetchGamificationHistory` –±–µ–∑ —Ñ–ª–∞–≥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏                       |

**TL;DR:** –ê—É–¥–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª 7 –∏–∑ 8 –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º. –ù–∞–π–¥–µ–Ω–∞ 1 –Ω–æ–≤–∞—è (RPC
–≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ tab-visible). Cascade –≤ `heysSyncCompleted` —É–∂–µ —Å–¥–µ–ª–∞–Ω ‚Äî —ç—Ç–æ—Ç
—à–∞–≥ —É–±—Ä–∞–Ω. –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏–∑–º–µ–Ω—ë–Ω: –±–∞–Ω–¥–ª–∏–Ω–≥ –ø–æ–¥–Ω—è—Ç –≤ –§–∞–∑—É 1 –∫–∞–∫ –∫–ª—é—á–µ–≤–æ–π
–¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.

---

## –§–∞–∑–∞ 1: –°–µ—Ç–µ–≤—ã–µ –∑–∞—Ç–æ—Ä—ã ‚Äî max —ç—Ñ—Ñ–µ–∫—Ç, min —Ä–∏—Å–∫ (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

> –¶–µ–ª—å: –°–Ω–∏–∑–∏—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã —Å 246 –¥–æ <10. –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É UI. –£—Å—Ç—Ä–∞–Ω–∏—Ç—å
> –ø–∞—Ä–∞–∑–∏—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫. –ù–∞ 3G —Å RTT 200–º—Å, 246 –∑–∞–ø—Ä–æ—Å–æ–≤ = **–º–∏–Ω–∏–º—É–º 50 —Å–µ–∫—É–Ω–¥**
> —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

### –®–∞–≥ 1. –ë–∞–Ω–¥–ª–∏–Ω–≥ JS —á–µ—Ä–µ–∑ Vite (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `vite.config.ts` + `apps/web/scripts/bundle-legacy.js`
- **–§–∞–∫—Ç:** –í `index.html` 246 –≤–Ω–µ—à–Ω–∏—Ö `<script src>`, –∏–∑ –Ω–∏—Ö 243 —Å `defer`. –í
  SW –≤ PRECACHE_URLS ‚Äî 73 —Ñ–∞–π–ª–∞ (–∏–∑ 246 ‚Äî –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤–æ–æ–±—â–µ).
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∏–∑–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 246+ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –ü—Ä–∏
  RTT=200–º—Å (3G) —Ç–æ–ª—å–∫–æ TCP-—Ö–µ–Ω–¥—à–µ–π–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç ~50—Å. HTTP/2 –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä—É–µ—Ç
  –æ–¥–∏–Ω –¥–æ–º–µ–Ω, –Ω–æ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –ª–∏–º–∏—Ç –Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –æ–¥–Ω–æ–º—É –¥–æ–º–µ–Ω—É ‚Äî 100.
- **–†–µ—à–µ–Ω–∏–µ:**
  ```
  critical.js   ‚Üí Auth + Core + Storage + UI skeleton  (–ø–µ—Ä–≤—ã–π, –±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
  features.js   ‚Üí Day + Insights + Meal-rec + Sync      (async, –ø–æ—Å–ª–µ FCP)
  lazy.js       ‚Üí Gamification + Widgets + Reports      (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
  ```
  –ü–æ—Å–ª–µ –±–∞–Ω–¥–ª–∏–Ω–≥–∞ PRECACHE_URLS –≤ `sw.js` –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å: –≤–º–µ—Å—Ç–æ 73 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö
  —Ñ–∞–π–ª–æ–≤ ‚Äî 3 –±–∞–Ω–¥–ª–∞.

### –®–∞–≥ 2. Service Worker ‚Äî `staleWhileRevalidate` –¥–ª—è –±–∞–Ω–¥–ª–æ–≤ (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `sw.js:286` ‚Äî –±–ª–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `.js` –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§–∞–∫—Ç:** –°–µ–π—á–∞—Å `networkFirstNoStore` –¥–ª—è –≤—Å–µ—Ö `.js`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: –ø—Ä–∏ –∫–∞–∂–¥–æ–º
  –æ—Ç–∫—Ä—ã—Ç–∏–∏ ‚Äî —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å, –æ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞.
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–∂–µ –ø–æ—Å–ª–µ –±–∞–Ω–¥–ª–∏–Ω–≥–∞ (–®–∞–≥ 1) SW –±—É–¥–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –∏—Ö –∑–∞–Ω–æ–≤–æ –ø—Ä–∏
  –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏.
- **–†–µ—à–µ–Ω–∏–µ:** JS-–±–∞–Ω–¥–ª—ã —Å —Ö–µ—à–µ–º –≤ –∏–º–µ–Ω–∏ (`critical.abc123.js`) ‚Üí `cacheFirst`.
  –ë–∞–Ω–¥–ª—ã –±–µ–∑ —Ö–µ—à–∞ ‚Üí `staleWhileRevalidate`. –î–æ–±–∞–≤–∏—Ç—å `sw.js` –≤ PRECACHE_URLS —Å
  `networkFirst` (—á—Ç–æ–±—ã —Å–∞–º SW –æ–±–Ω–æ–≤–ª—è–ª—Å—è).

### –®–∞–≥ 3. –î–≤—É—Ö—Ñ–∞–∑–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_storage_supabase_v1.js:3787` ‚Äî `bootstrapClientSync`
- **–§–∞–∫—Ç:** –°–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≤—Å–µ 543 KV-—Å—Ç—Ä–æ–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (75 –¥–Ω–µ–π + products +
  profile). –ù–∞ 3G –ø—Ä–∏ —Ä–∞–∑–º–µ—Ä–µ 543 —Å—Ç—Ä–æ–∫ ~200KB –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∑–∞–Ω–∏–º–∞–µ—Ç —Å–µ–∫—É–Ω–¥—ã.
- **–†–µ—à–µ–Ω–∏–µ:**
  - **–§–∞–∑–∞ A (–±–ª–æ–∫–∏—Ä—É—é—â–∞—è, <1—Å):** –¢–æ–ª—å–∫–æ 5 –∫–ª—é—á–µ–π: `heys_profile`,
    `heys_norms`, `heys_products`, `heys_hr_zones`, `heys_dayv2_{today}`.
    –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI.
  - **–§–∞–∑–∞ B (—Ñ–æ–Ω–æ–≤–∞—è):** –û—Å—Ç–∞–≤—à–∏–µ—Å—è 530+ –∫–ª—é—á–µ–π —á–µ—Ä–µ–∑ paginated fetch.
    –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ (`cascadeCard`, `insights`) —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –æ–±–Ω–æ–≤—è—Ç—Å—è –ø–æ —Å–æ–±—ã—Ç–∏—é
    `heysSyncCompleted`.

### –®–∞–≥ 4. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–∑–∏—Ç–Ω–æ–≥–æ Upload (404KB) (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_storage_supabase_v1.js:6094`
- **–§–∞–∫—Ç:** –¶–µ–ø–æ—á–∫–∞ `Store.set('heys_products')` ‚Üí
  `heys_storage_layer_v1.js:281` ‚Üí `HEYS.saveClientKey()` ‚Üí `isCriticalKey=true`
  ‚Üí `doImmediateClientUpload()`. Debounce (300–º—Å –∏–∑
  `heys_app_sync_effects_v1.js:247`) –æ–±—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é.
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è `heys_products` –∏–∑ –æ–±–ª–∞–∫–∞, —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ
  –ª–µ—Ç—è—Ç –æ–±—Ä–∞—Ç–Ω–æ. 404KB –Ω–∞ —É–∑–∫–æ–º –º–æ–±–∏–ª—å–Ω–æ–º upload-–∫–∞–Ω–∞–ª–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ
  –∑–∞–ø—Ä–æ—Å—ã.
- **–†–µ—à–µ–Ω–∏–µ:** Grace period ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `_syncCompletedAt = Date.now()`. –í
  `isCriticalKey` –ø—Ä–æ–≤–µ—Ä—è—Ç—å: –µ—Å–ª–∏ `Date.now() - _syncCompletedAt < 10_000` –ò
  –∫–ª—é—á `heys_products` ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å upload.

---

## –§–∞–∑–∞ 2: –¢—è–∂—ë–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ —Ç–∞–π–º–∞—É—Ç—ã (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

> –¶–µ–ª—å: –£–±—Ä–∞—Ç—å 13—Å+ –æ—Ç–≤–µ—Ç—ã –ë–î, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å retry-–ª–æ–≥–∏–∫—É –ø–æ–¥ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—É—é —Å–≤—è–∑—å.

### –®–∞–≥ 5. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è RPC –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_gamification_v1.js:1421`
- **–ß—Ç–æ –±—ã–ª–æ:** –ú—å—é—Ç–µ–∫—Å `_loadFromCloudPromise` –∏ throttle 60—Å
  `_lastVisibilitySync` —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏. –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π throttle –¥–ª—è
  `ensureAuditConsistency` ‚Äî –ø—Ä–∏ —Å–±—Ä–æ—Å–µ `_auditRebuildDone` (tab-visible)
  —Ñ—É–Ω–∫—Ü–∏—è –º–æ–≥–ª–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ –ø—É—Ç–∏.
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω `_ensureAuditLastRun` ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π timestamp-throttle
  30 —Å–µ–∫. –¢–µ–ø–µ—Ä—å `ensureAuditConsistency` –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç RPC —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ 30—Å,
  –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `_auditRebuildDone`.

### –®–∞–≥ 6. Exponential Backoff –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_yandex_api_v1.js:30`
- **–ß—Ç–æ –±—ã–ª–æ:** –õ–∏–Ω–µ–π–Ω—ã–π delay `1000 * (i+1)` = 1—Å ‚Üí 2—Å ‚Üí 3—Å. –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
  —Ç–∞–π–º–∞—É—Ç 15—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫. –ü—Ä–∏ —Ö–æ–ª–æ–¥–Ω–æ–º —Å—Ç–∞—Ä—Ç–µ Cloud Function (~3-5—Å
  wake-up) –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ—á—Ç–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–∞–¥–∞–ª.
- **–†–µ—à–µ–Ω–∏–µ:** `TIMEOUT_ESCALATION_MS: [15000, 20000, 30000]` ‚Äî –∫–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞
  –¥–∞—ë—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏. `RETRY_DELAY_ESCALATION_MS: [1000, 3000, 7000]` ‚Äî
  exponential backoff –º–µ–∂–¥—É —Ä–µ—Ç—Ä–∞—è–º–∏.

### –®–∞–≥ 7. Delta-sync –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –∑–∞–º–µ–Ω—ã `heys_products` (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_storage_supabase_v1.js:6028`
- **–ß—Ç–æ –±—ã–ª–æ:** –õ—é–±–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `saveClientKey('heys_products', ...)` –≤—Å–µ–≥–¥–∞
  –¥–æ–±–∞–≤–ª—è–ª–æ –≤ –æ—á–µ—Ä–µ–¥—å upload –≤–µ—Å—å –º–∞—Å—Å–∏–≤ 300+ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (404KB).
- **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ –æ—á–µ—Ä–µ–¥—å –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è djb2-fingerprint:
  `length:hash(name+updatedAt)`. –ï—Å–ª–∏ fingerprint —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å
  `cloud._productsFingerprint` ‚Äî upload –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ª–æ–≥–æ–º. –ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ sync
  `_productsFingerprint` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ `null`, —á—Ç–æ–±—ã –ø–µ—Ä–≤–æ–µ —Ä–µ–∞–ª—å–Ω–æ–µ
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞) –ø—Ä–æ—à–ª–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

---

## –§–∞–∑–∞ 3: Perceived Performance (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

> –¶–µ–ª—å: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∫–∞–∑–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä—ã–º, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Å–µ—Ç—å –º–µ–¥–ª–µ–Ω–Ω–∞—è.

### –®–∞–≥ 8. Stale-While-Revalidate –¥–ª—è InsightsPI (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

- **–ì–¥–µ:** `apps/web/insights/pi_thresholds.js:~215`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–º–∞—Ö –∫—ç—à–∞ ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç 29 –¥–Ω–µ–π ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä
  `MealRecommenderCard`.
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ –∫—ç—à–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ (stale),
  –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Å—á—ë—Ç —á–µ—Ä–µ–∑ `setTimeout(0)`. UI –æ–±–Ω–æ–≤–∏—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ.

### –®–∞–≥ 9. Optimistic UI + –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏ (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç, –æ—Ç–º–µ—Ç–∏—Ç—å –≤–æ–¥—É) –∂–¥—É—Ç
  –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º UI.
- **–†–µ—à–µ–Ω–∏–µ:**
  - –í—Å–µ –º—É—Ç–∞—Ü–∏–∏ (–≤–æ–¥–∞: `addWater` ‚Üí `setDay(prev => ...)`, –ø—Ä–æ–¥—É–∫—Ç—ã: `setDay`,
    –≥—Ä–∞–º–º—ã: `setGrams`) —É–∂–µ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã ‚Äî UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, upload
    –∏–¥—ë—Ç async —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å.
  - –ú–∏–∫—Ä–æ-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ —à–∞–ø–∫–µ (`heys_app_shell_v1.js:renderNetworkStatus`):
    `‚óè –û—Ñ–ª–∞–π–Ω (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)` / `‚óè –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è` / `‚úì –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ` ‚Äî —Å
    CSS-–∞–Ω–∏–º–∞—Ü–∏–µ–π –ø—É–ª—å—Å–∞.
  - Props-—Ü–µ–ø–æ—á–∫–∞: `AppShellProps` ‚Üí `AppShell` ‚Üí `AppHeader` –ø–æ–ª—É—á–∞–µ—Ç
    `cloudStatus`, `syncProgress`, `pendingCount`.
  - SW: –±–∞–Ω–¥–ª—ã —Å —Ö–µ—à–µ–º (`*.bundle.{hash}.js`) ‚Üí `cacheFirst`; –ø—Ä–æ—á–∏–π JS ‚Üí
    `staleWhileRevalidate`.

---

## –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å (–ª–æ–∂–Ω—ã–µ —Ü–µ–ª–∏)

| –ò–¥–µ—è                                           | –ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–Ω–∞                                                                                               |
| ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| –û—Ç–ª–æ–∂–∏—Ç—å `cascadeState` –¥–æ `heysSyncCompleted` | **–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** –≤ `heys_cascade_card_v1.js`                                                               |
| –î–æ–±–∞–≤–∏—Ç—å Offline UI —Å –Ω—É–ª—è                     | –£–∂–µ –µ—Å—Ç—å –≤ SW, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è                                                   |
| –ü–æ–ª–Ω—ã–π offline-first —Å IndexedDB               | –û–≥—Ä–æ–º–Ω—ã–π —Ä–∏—Å–∫ –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –Ω–µ –æ–ø—Ä–∞–≤–¥–∞–Ω (–Ω–æ —Ç–æ—á–µ—á–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å —Ç—è–∂–µ–ª—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, —Å–º. –Ω–∏–∂–µ) |

---

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏ (Post-Optimization / –§–∞–∑–∞ 4) (‚úÖ –í–´–ü–û–õ–ù–ï–ù–û)

–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω (–§–∞–∑—ã 1-3) **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω**. –ê—É–¥–∏—Ç –ø–æ–∫–∞–∑–∞–ª 5 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö
–ø—Ä–æ–±–ª–µ–º —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º.

### –®–∞–≥ 10. Render-blocking CSS ‚Üí async (‚úÖ)

- **–ì–¥–µ:** `apps/web/index.html` ‚Äî `<link rel="stylesheet">`
- **–§–∞–∫—Ç:** 3 CSS-—Ñ–∞–π–ª–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è blocking –≤ `<head>`:
  - `styles/tailwind.css` (72 KB) ‚Äî Tailwind v4, –ø–æ–ª–Ω—ã–π CSS. –ë–ª–æ–∫–∏—Ä—É–µ—Ç FCP.
  - `insights/pi_pattern_debugger.css` (20 KB) ‚Äî **–æ—Ç–ª–∞–¥–æ—á–Ω—ã–π** CSS –¥–ª—è –º–æ–¥–∞–ª–∫–∏
    Insights. –ù–µ –Ω—É–∂–µ–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.
  - `styles/critical.css` (4 KB) ‚Äî –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS, –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫
    –µ—Å—Ç—å.
- **–†–µ—à–µ–Ω–∏–µ:**
  - `pi_pattern_debugger.css` ‚Üí async –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑
    `<link rel="preload" as="style" onload>`.
  - `tailwind.css` ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å blocking (–Ω—É–∂–µ–Ω –¥–ª—è layout), –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
    `media="all"` –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏.

### –®–∞–≥ 11. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ useEffect –±–µ–∑ deps (‚úÖ)

- **–ì–¥–µ:**
  - `heys_day_core_bundle_v1.js:~3629` ‚Äî Twemoji `scheduleTwemojiParse()`
    –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–±–µ–∑ deps** ‚Üí DOM-parse **–∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä**.
  - `heys_app_shell_v1.js:~137` ‚Äî EWS Badge fetch **–±–µ–∑ deps** ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç 7
    –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ AppShell.
- **–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–∏ useEffect –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º React-–∫–æ–º–º–∏—Ç–µ, —Å–æ–∑–¥–∞–≤–∞—è
  –±–µ—Å–ø–æ–ª–µ–∑–Ω—É—é CPU-–Ω–∞–≥—Ä—É–∑–∫—É.
- **–†–µ—à–µ–Ω–∏–µ:**
  - Twemoji: –¥–æ–±–∞–≤–∏—Ç—å `[day.meals]` (–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π deps-–º–∞—Å—Å–∏–≤) ‚Äî reparse
    —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
  - EWS Badge: –¥–æ–±–∞–≤–∏—Ç—å `[clientId, date]` –∏–ª–∏ –ø—É—Å—Ç–æ–π `[]` —Å —Ä—É—á–Ω—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–º.

### –®–∞–≥ 12. Inline JSON –∫–æ–Ω—Ñ–∏–≥ ‚Üí external file (‚úÖ)

- **–ì–¥–µ:** `apps/web/index.html:238-1648` ‚Äî 43 KB –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ JSON (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  Insulin Wave).
- **–ü—Ä–æ–±–ª–µ–º–∞:** HTML-–ø–∞—Ä—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å 43 KB JSON –ø—Ä–µ–∂–¥–µ —á–µ–º –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ
  `<body>`. –ù–∞ slow 3G —ç—Ç–æ ~1-2 —Å–µ–∫—É–Ω–¥—ã –ª–∏—à–Ω–∏—Ö.
- **–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ `public/heys-iw-config.json`, –∑–∞–≥—Ä—É–∂–∞—Ç—å async —á–µ—Ä–µ–∑
  `fetch()` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ IW-–º–æ–¥—É–ª—è. –°–∫—Ä–∏–ø—Ç
  `sync-iw-inline-config.cjs` –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

### –®–∞–≥ 13. React.memo –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (‚úÖ)

- **–ì–¥–µ:**
  - `heys_app_shell_v1.js` ‚Äî `AppShell` –ø–æ–ª—É—á–∞–µ—Ç ~35 –ø—Ä–æ–ø—Å–æ–≤, –ù–ï –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω.
  - `heys_app_shell_props_v1.js` ‚Äî `buildAppShellProps` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
    –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä.
  - `heys_app_overlays_v1.js` ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ.
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Å—Ç–µ–π—Ç–∞ –≤ App ‚Üí –ø–æ–ª–Ω—ã–π re-render AppShell
  –∏ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö.
- **–†–µ—à–µ–Ω–∏–µ:**
  - –û–±–µ—Ä–Ω—É—Ç—å `AppShell` –∏ `AppOverlays` –≤ `React.memo`.
  - –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–±—ç–∫–∏ —á–µ—Ä–µ–∑ `useCallback` –≤ `buildAppShellProps`.
  - `useMemo` –¥–ª—è `appShellProps` –∏ `overlaysProps` —Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º —Ä–µ–∞–ª—å–Ω—ã—Ö
    deps.

### –®–∞–≥ 14. fetchpriority cleanup (‚úÖ –£—Å—Ç–∞—Ä–µ–≤—à–µ–µ ‚Äî —Ä–µ—à–µ–Ω–æ –±–∞–Ω–¥–ª–∏–Ω–≥–æ–º)

- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** `apps/web/index.html` —Å–æ–¥–µ—Ä–∂–∞–ª 243 `<script defer>`
  —Ç–µ–≥–∞ —Å `fetchpriority="high"`. –ö–æ–≥–¥–∞ –í–°–ï —Ä–µ—Å—É—Ä—Å—ã –∏–º–µ—é—Ç `fetchpriority="high"`,
  –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –±—Ä–∞—É–∑–µ—Ä –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç hint.
- **–ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ (v9.0):** JS-—Ñ–∞–π–ª—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ 9 –±–∞–Ω–¥–ª–æ–≤ —á–µ—Ä–µ–∑
  `scripts/bundle-legacy.mjs`. –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ 243 —Ñ–∞–π–ª–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é
  —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞: —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ 5 boot-–±–∞–Ω–¥–ª–æ–≤ + 3 postboot + 1 app-tabs —Ç–µ–≥ –≤
  `index.html`. –ë–∞–Ω–¥–ª—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `fetchpriority` ‚Äî –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ
  —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è 9 –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## –§–∞–∑–∞ 4: Runtime-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ Delta Sync (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

> –¶–µ–ª—å: –£—Å–∫–æ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö —Å 7.2—Å –¥–æ <2—Å, —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–∑–∏—Ç–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã
> UI.

### –®–∞–≥ 15. Speculative Prefetch (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `apps/web/index.html` ‚Äî inline `<script>` –≤ `<head>`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–æ—Å –∑–∞ –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞—á–∏–Ω–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
  –≤—Å–µ–≥–æ JS (~1—Å). –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏—è (warm-up ping –∫ `/health`) –Ω–µ –¥–∞–ª–∞
  —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: `/health` –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º Cloud Function, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ
  —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ä–∞–∑–æ–≥—Ä–µ–≤ —à—ë–ª –≤–ø—É—Å—Ç—É—é.
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ HTML-–ø–∞—Ä—Å–∏–Ω–≥–µ (+0.0—Å) —á–∏—Ç–∞–µ–º `heys_client_current` +
  `last_sync_ts` –∏–∑ localStorage, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å—Ç–∞—Ä—Ç—É–µ–º **—Ä–µ–∞–ª—å–Ω—ã–π** delta
  REST-–∑–∞–ø—Ä–æ—Å –∫ CF, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –≤–µ—Ä–Ω—ë—Ç –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–º–∏—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤
  `window.__heysPrefetch`. –í `heys_storage_supabase_v1.js` –ø—Ä–æ–≤–µ—Ä—è–µ–º prefetch:
  –µ—Å–ª–∏ `clientId` –∏ `since` —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –º–∏–Ω—É—è
  –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å. –î–æ–±–∞–≤–ª–µ–Ω—ã `<link rel="preconnect">` –∫ –¥–æ–º–µ–Ω—É API.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Sync-–¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –∫ +0.5‚Äì0.9—Å –≤–º–µ—Å—Ç–æ +1.5‚Äì2.0—Å. –≠–∫–æ–Ω–æ–º–∏—è:
  ~0.8‚Äì1.0—Å.

### –®–∞–≥ 16. Delta Fast-Path & Light Path (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_storage_supabase_v1.js`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–¥–∞–∂–µ –ø—Ä–∏ 0 –∏–∑–º–µ–Ω–µ–Ω–∏–π) –∑–∞–Ω–∏–º–∞–ª 3-4
  —Å–µ–∫—É–Ω–¥—ã –∏–∑-–∑–∞ —Ç—è–∂–µ–ª–æ–π –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ (cleanup, merge, gamification).
- **–†–µ—à–µ–Ω–∏–µ:**
  - **Fast-Path:** –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç (0 keys), —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
    –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.
  - **Light Path:** –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–∞–ª–æ (‚â§10 –∫–ª—é—á–µ–π), –æ–Ω–∏ –ø–∏—à—É—Ç—Å—è –≤ localStorage
    –Ω–∞–ø—Ä—è–º—É—é, UI —É–≤–µ–¥–æ–º–ª—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –∞ —Ç—è–∂–µ–ª–∞—è –æ—á–∏—Å—Ç–∫–∞ (cleanup)
    –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `setTimeout` –Ω–∞ 3-5 —Å–µ–∫—É–Ω–¥.

### –®–∞–≥ 17. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–º–∞—É–Ω—Ç–∞ DayTab (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ì–¥–µ:** `heys_app_sync_effects_v1.js`, `heys_day_tab_impl_v1.js`,
  `heys_day_stats_v1.js`, `heys_app_auth_init_v1.js`
- **–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
  - 9 PERF-–º–∞—Ä–∫–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ `performance.mark()` / `console.info('[HEYS.*] ‚ö°')`
    –≤–æ –≤—Å–µ—Ö —Ç–æ—á–∫–∞—Ö `setSyncVer` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (`source=fetchDays`,
    `source=client-sync-done`, –∏ —Ç.–¥.).
  - `heys_day_tab_impl_v1.js`: `useRef`-—Ç—Ä–µ–∫–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ ‚Äî –ª–æ–≥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ
    —Ä–µ–Ω–¥–µ—Ä—ã —Å gap >200–º—Å, –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è –ø—Ä–æ–ø—Å—ã
    (`date/eatenKcal/products/day/isAnimating/isHydrated/mealsDeps`).
  - `heys_day_stats_v1.js`: –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ ‚Äî –ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä + —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã —Å
    gap >500–º—Å.
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞:** `fetchDays` (—Ñ–æ–Ω–æ–≤–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ 7 –¥–∞—Ç) ‚Üí 7√ó
  `heys:day-updated` ‚Üí 7√ó `setSyncVer++` ‚Üí DayTab
  `key='day'+syncVer+clientId+date` –º–µ–Ω—è–µ—Ç—Å—è ‚Üí React **–ø–æ–ª–Ω–æ—Å—Ç—å—é
  unmount/remount** Tab —Å–æ –≤—Å–µ–º–∏ –¥–µ—Ç—å–º–∏ ‚Üí –≤–∏–¥–∏–º–æ–µ –º–µ—Ä—Ü–∞–Ω–∏–µ UI. –°—á—ë—Ç—á–∏–∫ —Ä–µ–Ω–¥–µ—Ä–∞
  —Å–±—Ä–∞—Å—ã–≤–∞–ª—Å—è –Ω–∞ `render #1`.
- **–ü–æ—á–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å:** `heys_day_effects.js` —É–∂–µ —Å–ª—É—à–∞–µ—Ç
  `heys:day-updated` –Ω–∞–ø—Ä—è–º—É—é –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `day` state –≤–Ω—É—Ç—Ä–∏ DayTab ‚Äî —Ä–µ–º–∞—É–Ω—Ç –Ω–µ
  —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- **–†–µ—à–µ–Ω–∏–µ:** `'fetchDays'` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `IGNORED_SOURCES` –≤ `handleDayUpdate`
  (`heys_app_sync_effects_v1.js`).
- **–†–µ–∑—É–ª—å—Ç–∞—Ç (–∑–∞–º–µ—Ä–µ–Ω–æ, 3 –ø—Ä–æ–≥–æ–Ω–∞):** –ù–∏ –æ–¥–Ω–æ–≥–æ `render #1` –ø–æ–≤—Ç–æ—Ä–Ω–æ, –Ω–∏ –æ–¥–Ω–æ–≥–æ
  DayTab —Ä–µ–º–∞—É–Ω—Ç–∞. –†–µ–Ω–¥–µ—Ä #2 (–∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–π, –Ω–µ–≤–∏–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–∞
  +1.5‚Äì1.8—Å. `other-state` —Ä–µ–Ω–¥–µ—Ä—ã ‚Äî –Ω–∞ +3‚Äì5—Å (–ø–æ—Å—Ç-–∞–Ω–∏–º–∞—Ü–∏—è, –∑–∞ –∫–∞–¥—Ä–æ–º).

### (–û—Ç–ª–æ–∂–µ–Ω–æ) –ú–∏–≥—Ä–∞—Ü–∏—è –≤ IndexedDB

- _–ü—Ä–æ–±–ª–µ–º–∞:_ `localStorage` —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –∫—Ä—É–ø–Ω—ã–µ –∫–ª—é—á–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç main thread.
- _–†–µ—à–µ–Ω–∏–µ:_ –ü–µ—Ä–µ–Ω–æ—Å `heys_products` –∏ —Å—Ç–∞—Ä—ã—Ö –¥–Ω–µ–π –≤ IndexedDB ‚Äî **–≤—ã—Å–æ–∫–∏–π
  —Ä–∏—Å–∫** –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (230+ –º–µ—Å—Ç —á—Ç–µ–Ω–∏—è —á–µ—Ä–µ–∑ `lsGet`/`Store.get`).
  –î–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ TBT (Total Blocking Time) –ø–æ–∫–∞–∂—É—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π
  –≤–∫–ª–∞–¥.

### (–û—Ç–ª–æ–∂–µ–Ω–æ) –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Backend

- _–†–µ—à–µ–Ω–∏–µ:_ –ê—É–¥–∏—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Cloud Functions. –ù–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–µ–∫—É—â—É—é
  —Ñ–∞–∑—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

---

## –ê–Ω–∞–ª–∏–∑ –º–æ–±–∏–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (26.02.2026)

> Throttle-—Ç–µ—Å—Ç: Chrome DevTools ‚Üí Network ‚Üí Mid-tier Mobile (10 Mbps / 750 Kbps
> upload / 40ms RTT)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–∞ (–ü–æ—Å–ª–µ –±–∞–Ω–¥–ª–∏–Ω–≥–∞ –∏ GZIP)

| –≠—Ç–∞–ø                    | –í—Ä–µ–º—è     | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
| ----------------------- | --------- | ----------------------------------------------- |
| HTML parse ‚Üí JS start   | 0.0—Å      | Speculative prefetch –∑–∞–ø—É—Å–∫–∞–µ—Ç delta REST —Å—Ä–∞–∑—É |
| JS –∑–∞–≥—Ä—É–∑–∫–∞ (9 –±–∞–Ω–¥–ª–æ–≤) | **~1.5—Å** | 246 —Ñ–∞–π–ª–æ–≤ —Å–∂–∞—Ç—ã –≤ 9 –±–∞–Ω–¥–ª–æ–≤ + GZIP (Yandex OS) |
| React boot + hydration  | +0.3—Å     | –ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ JS                             |
| Sync complete           | +0.6—Å     | Delta Light Path (‚â§10 –∫–ª—é—á–µ–π)                   |
| DayStats first render   | **+2.6—Å** | –ü–µ—Ä–≤—ã–π –≤–∏–¥–∏–º—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ JS        |

### –í—ã–≤–æ–¥

–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ 246 —Ñ–∞–π–ª–æ–≤ (63—Å –Ω–∞ Mid-tier mobile) **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞**.
–ë–∞–Ω–¥–ª–∏–Ω–≥ (—á–µ—Ä–µ–∑ `scripts/bundle-legacy.mjs`) –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ GZIP –Ω–∞ Yandex Object
Storage —Å–æ–∫—Ä–∞—Ç–∏–ª–∏ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ JS –¥–æ ~1.5—Å. –û–±—â–µ–µ –≤—Ä–µ–º—è –¥–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
(TTI) –Ω–∞ Mid-tier mobile —Å–Ω–∏–∑–∏–ª–æ—Å—å —Å 65—Å –¥–æ **~2.6—Å**.

```
–î–æ –±–∞–Ω–¥–ª–∏–Ω–≥–∞: [HTML: 0.1—Å] + [JS: ~63—Å] + [Runtime: 1.2—Å] = ~65—Å
–ü–æ—Å–ª–µ –±–∞–Ω–¥–ª–∏–Ω–≥–∞: [HTML: 0.1—Å] + [JS: ~1.5—Å] + [Runtime: 1.0—Å] = ~2.6—Å
```

---

## –§–∞–∑–∞ 5: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–æ—Ä–≥–∞–Ω–∏–π UI –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)

> –¶–µ–ª—å: –£–±—Ä–∞—Ç—å "–≤—Å–ø—ã—à–∫–∏" –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω) –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏
> —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å UI.

### –®–∞–≥ 18. Non-blocking DayTabWithCloudSync (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ü—Ä–æ–±–ª–µ–º–∞:** `DayTabWithCloudSync` –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª —Ä–µ–Ω–¥–µ—Ä –≤–∫–ª–∞–¥–∫–∏ –¥–æ –ø–æ–ª–Ω–æ–≥–æ
  –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –¥–æ–ª–≥–∏–π –ø–æ–∫–∞–∑ —Å–∫–µ–ª–µ—Ç–æ–Ω–∞.
- **–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω —Å fallback-—Ç–∞–π–º–µ—Ä–æ–º (5000–º—Å). –ï—Å–ª–∏
  `heysSyncCompleted` –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞ 5—Å, UI —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ.
  –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `clientId`, —á—Ç–æ–±—ã —á—É–∂–∏–µ —Å–æ–±—ã—Ç–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ
  —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ UI.

### –®–∞–≥ 19. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–º–∞—É–Ω—Ç–∞ DayTab (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è `syncVer`,
  –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —á–∞—Å—Ç—å—é `key` —É `DayTabWithCloudSync`
  (`key='day'+syncVer+clientId+date`). –≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –ø–æ–ª–Ω—ã–π unmount/remount –≤—Å–µ–π
  –≤–∫–ª–∞–¥–∫–∏ –∏ –≤–∏–¥–∏–º—É—é –±–µ–ª—É—é –≤—Å–ø—ã—à–∫—É (–º–æ—Ä–≥–∞–Ω–∏–µ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞).
- **–†–µ—à–µ–Ω–∏–µ:** `syncVer` —É–¥–∞–ª–µ–Ω –∏–∑ `key` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `DayTabWithCloudSync`.
  –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã –∏ —Å–æ–±—ã—Ç–∏—è `heys:day-updated` –±–µ–∑
  –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è DOM-–¥–µ—Ä–µ–≤–∞.

### –®–∞–≥ 20. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—ç—à–∞ –∏ CRS (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)

- **–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø—É—Å—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏ (CRS bar `getCrsNumber` –ø–∞–¥–∞–ª) –∏
  –ª–∏—à–Ω–∏–µ —Å–±—Ä–æ—Å—ã –∫—ç—à–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø—É—Å–∫ `flush` –¥–ª—è —Å–≤–µ–∂–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞
  `getCrsNumber` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null).

---

## –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏)

> **–§–∞–∫—Ç = —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—Ä—ã 26.02.2026 (curator mode, WiFi + Mid-tier mobile).**

| –ú–µ—Ç—Ä–∏–∫–∞                                         | –î–æ                        | –§–∞–∫—Ç (–∑–∞–º–µ—Ä–µ–Ω–æ) | –¶–µ–ª—å                |
| ----------------------------------------------- | ------------------------- | --------------- | ------------------- |
| –í—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (DayStats, WiFi warm) | 7.2—Å                      | **1.0‚Äì1.2—Å ‚úÖ** | < 1—Å                |
| Boot –¥–æ sync done (WiFi)                        | 3.0‚Äì3.4—Å                  | **0.9‚Äì1.0—Å ‚úÖ** | < 0.5—Å              |
| –†–µ–º–∞—É–Ω—Ç DayTab per load (fetchDays fix)         | 1√ó –ø–æ–ª–Ω—ã–π —Ä–µ–º–∞—É–Ω—Ç (+2.6—Å) | **0 ‚úÖ**        | 0                   |
| –ú–æ—Ä–≥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ sync (syncVer fix)      | –í—Å–ø—ã—à–∫–∞ –±–µ–ª–æ–≥–æ —ç–∫—Ä–∞–Ω–∞     | **0 ‚úÖ**        | 0                   |
| fetchDays ‚Üí setSyncVer calls per load           | 7√ó                        | **0 ‚úÖ**        | 0                   |
| –ü–∞—Ä–∞–∑–∏—Ç–Ω—ã–π upload –ø–æ—Å–ª–µ sync                    | 404 KB (immediate)        | **0 ‚úÖ**        | 0                   |
| –í—ã–∑–æ–≤–æ–≤ gamification RPC –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ             | 3 (~40—Å —Å—É–º–º–∞—Ä–Ω–æ)         | **1 ‚úÖ**        | 1                   |
| Retry –ø—Ä–∏ —Ö–æ–ª–æ–¥–Ω–æ–º —Å—Ç–∞—Ä—Ç–µ Cloud Fn              | Fail –Ω–∞ 1/3 –ø–æ–ø—ã—Ç–∫–µ       | **–£—Å–ø–µ—Ö ‚úÖ**    | –£—Å–ø–µ—Ö               |
| JS –∑–∞–≥—Ä—É–∑–∫–∞ (Mid-tier mobile)                   | ~63—Å (246 —Ñ–∞–π–ª–æ–≤)         | **~1.5—Å ‚úÖ**    | ~3‚Äì5—Å               |
| –†–µ–Ω–¥–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ JS (Mid-tier mobile)      | 1.2—Å                      | **1.0—Å ‚úÖ**     | < 1—Å                |
| FCP –Ω–∞ Mid-tier mobile (–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)     | ~65—Å                      | **~2.6—Å ‚úÖ**    | < 5—Å                |
| HTTP-–∑–∞–ø—Ä–æ—Å—ã JS –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ                      | 246                       | **9 ‚úÖ**        | < 10                |
| JS-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PRECACHE SW                       | 73 –∏–∑ 246                 | **9 –∏–∑ 9 ‚úÖ**   | –í—Å–µ –±–∞–Ω–¥–ª—ã          |
| Offline-—Ä–µ–∂–∏–º (–Ω–µ—Ç —Å–µ—Ç–∏)                        | –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω               | **–†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ** | –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ SW-–∫—ç—à–∞ |

> **–ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥:** –í—Å–µ —Ñ–∞–∑—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω—ã.
> –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥—Ä—É–∑–∏—Ç—Å—è –∑–∞ ~2.6—Å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö, UI —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ –±–µ–∑
> –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –º–æ—Ä–≥–∞–Ω–∏–π.
