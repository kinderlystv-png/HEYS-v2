# üìä HEYS Data Model Reference

> **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ HEYS** –í–µ—Ä—Å–∏—è: 5.6.0 | –û–±–Ω–æ–≤–ª–µ–Ω–æ:
> 2026-02-26 | **~170 —É–º–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤** | **37 —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã** | **üß†
> Insulin Wave v4.1.0** | **üî¨ PMID Science Links** | **üèãÔ∏è Training Context** |
> **üí∞ Caloric Debt** | **üîÑ Refeed Day** | **üìä Status Score** | **üéÆ
> Gamification (36 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, 8 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)** | **üè≠ NOVA Classification** |
> **üß¨ Extended Nutrients** | **üîÆ Predictive Insights v6.3.0: 41 –ø–∞—Ç—Ç–µ—Ä–Ω (100%
> –Ω–∞—É—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ + ‚ö° –º–µ–º–æ–∏–∑–∞—Ü–∏—è)** | **üõ°Ô∏è Store API v4.8.8 (React State Sync
> Fix)** | **üö® EWS v4.2 (Phenotype-Aware, Global Score, Causal Chains, Weekly
> Progress)** | **üéØ Dynamic Priority Badge v4.3.0 (Acuteness Decay, Section
> Rules, Pattern Degradation)**

üìö **[SCIENTIFIC_REFERENCES.md](./SCIENTIFIC_REFERENCES.md)** ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫
–Ω–∞—É—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å PMID —Å—Å—ã–ª–∫–∞–º–∏

---

## –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Data Model

### –≠—Ç–æ—Ç —Ñ–∞–π–ª (–Ø–¥—Ä–æ ‚Äî DATA_MODEL_REFERENCE.md)

–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —Å—Ö–µ–º—ã, localStorage, –±–∞–∑–æ–≤—ã–µ —Ä–∞—Å—á—ë—Ç—ã.

- [Field Normalization](#-field-normalization-v431)
- [–î–∞–Ω–Ω—ã–µ –¥–Ω—è (DayRecord)](#–¥–∞–Ω–Ω—ã–µ-–¥–Ω—è-dayrecord)
- [–ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞ (Measurements)](#–∑–∞–º–µ—Ä—ã-—Ç–µ–ª–∞-measurements)
- [–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (Training)](#—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏-training)
- [–ë—ã—Ç–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (HouseholdActivity)](#–±—ã—Ç–æ–≤–∞—è-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å-householdactivity)
- [–ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã (heys_hr_zones)](#–ø—É–ª—å—Å–æ–≤—ã–µ-–∑–æ–Ω—ã-heys_hr_zones)
- [–ü—Ä–∏—ë–º—ã –ø–∏—â–∏ (Meal)](#–ø—Ä–∏—ë–º—ã-–ø–∏—â–∏-meal)
- [–ü—Ä–æ–¥—É–∫—Ç –≤ –ø—Ä–∏—ë–º–µ (MealItem)](#–ø—Ä–æ–¥—É–∫—Ç-–≤-–ø—Ä–∏—ë–º–µ-mealitem)
- [–ü—Ä–æ–¥—É–∫—Ç (Product)](#–ø—Ä–æ–¥—É–∫—Ç-product)
- [–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (heys_profile)](#–ø—Ä–æ—Ñ–∏–ª—å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-heys_profile)
- [–ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª (Cycle)](#-–º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π-—Ü–∏–∫–ª-cycle)
- [–ù–æ—Ä–º—ã –ø–∏—Ç–∞–Ω–∏—è (heys_norms)](#–Ω–æ—Ä–º—ã-–ø–∏—Ç–∞–Ω–∏—è-heys_norms)
- [–í—ã—á–∏—Å–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ (dayTot, normAbs, –º–µ—Ç–∞–±–æ–ª–∏–∑–º)](#–≤—ã—á–∏—Å–ª—è–µ–º—ã–µ-–¥–∞–Ω–Ω—ã–µ)
- [–°–æ–≤–µ—Ç—ã (Advice Module)](#—Å–æ–≤–µ—Ç—ã-advice-module)
- [localStorage –∫–ª—é—á–∏](#localstorage-–∫–ª—é—á–∏)
- [–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏](#—á–∞—Å—Ç—ã–µ-–æ—à–∏–±–∫–∏)

### üìä [DATA_MODEL_ANALYTICS.md](./DATA_MODEL_ANALYTICS.md)

–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Å–∫–æ—Ä–∏–Ω–≥–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã:

- Predictive Insights v6.3.0 (41 –ø–∞—Ç—Ç–µ—Ä–Ω)
- Harm Score (–æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–¥–Ω–æ—Å—Ç–∏ 0-10) + NOVA Classification
- Status Score (0-100)
- Gamification (XP, —É—Ä–æ–≤–Ω–∏, 36 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, 8 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- Phenotype v1.1.0 (6 –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏—Ö —Ñ–µ–Ω–æ—Ç–∏–ø–æ–≤)
- Early Warning System v4.2
- Dynamic Priority Badge v4.3.0
- Metabolic Intelligence + Supplements + Analytics

### üìä [SCORING_REFERENCE.md](./SCORING_REFERENCE.md)

–°–∫–æ—Ä–∏–Ω–≥–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã (–ø–æ–ª–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã):

- Status Score (9 —Ñ–∞–∫—Ç–æ—Ä–æ–≤, 5 —É—Ä–æ–≤–Ω–µ–π, 0-100)
- Day Score (–∞–≤—Ç–æ + —Ä—É—á–Ω–æ–π, 0-10)
- Cascade Risk Score v7 (6 —Å–æ—Å—Ç–æ—è–Ω–∏–π, chronotype-aware)

### üîß [APP_SYSTEMS_REFERENCE.md](./APP_SYSTEMS_REFERENCE.md)

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

- Widget Dashboard (grid, D&D, layout)
- Cascade System (product cascading)
- Product SmartSearch (typo tolerance)
- Export/Import (backup format)
- Trial Queue (6 —Å—Ç–∞—Ç—É—Å–æ–≤)
- Migration System (6 –º–∏–≥—Ä–∞—Ü–∏–π)
- Cloud Merge Logic (last-write-wins)

### ü•ó [DATA_MODEL_NUTRITION.md](./DATA_MODEL_NUTRITION.md)

–ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø–∏—Ç–∞–Ω–∏—è –∏ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞:

- Caloric Debt (–∫–∞–ª–æ—Ä–∏–π–Ω—ã–π –¥–æ–ª–≥)
- Caloric Excess (–º—è–≥–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–µ—Ä–µ–±–æ—Ä–∞)
- Protein Debt + –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- Refeed Day (–∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ –¥–Ω–∏)
- Meal Quality Score
- –ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞ (—Å–≤–æ–¥–∫–∞) ‚Üí
  [–ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./INSULIN_WAVE_DOCUMENTATION.md)
- Training Context v3.4.0
- NDTE (Next-Day Training Effect)
- TEF & TDEE

---

## üîß Field Normalization (v4.3.1)

### Harm Field Mapping

> **Canonical field**: `harm` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ: UI, items, products, DB)  
> **Legacy alias**: `harmScore` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π
> —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)  
> **Deprecated**: `harmscore` (lowercase), `harm100` (legacy)

| Source                | Field Name  | Status        | Notes                                |
| --------------------- | ----------- | ------------- | ------------------------------------ |
| **UI/Items/Products** | `harm`      | ‚úÖ Canonical  | Primary field –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π      |
| PostgreSQL            | `harm`      | ‚úÖ DB field   | –ö–æ–ª–æ–Ω–∫–∞ –≤ shared_products            |
| Legacy code           | `harmScore` | ‚ö†Ô∏è Legacy     | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ normalizeHarm() |
| Legacy                | `harmscore` | ‚ö†Ô∏è Deprecated | Lowercase ‚Äî –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ harm      |
| Legacy                | `harm100`   | ‚ùå Removed    | –ë–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è             |

### Centralized Normalization API

```javascript
// –§–∞–π–ª: heys_models_v1.js

// –ü–æ–ª—É—á–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ harm –∏–∑ –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
const harmVal = HEYS.models.normalizeHarm(product);
// Returns: number | undefined

// –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ–±–∞ –ø–æ–ª—è harm –∏ harmScore
const normalized = HEYS.models.normalizeHarmFields(product);
// Returns: { ...product, harm: val, harmScore: val }
```

### Data Flow

```
PostgreSQL (harm)
     ‚Üì
 YandexAPI Response
     ‚Üì
 normalizeSharedProduct()
     ‚Üì
 harm + harmScore (–æ–±–∞ –ø–æ–ª—è)
     ‚Üì
 UI Components (—á–∏—Ç–∞—é—Ç harm)
     ‚Üì
 MealItem (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç harm)
```

### Migration Notes

1. **–ù–æ–≤—ã–π –∫–æ–¥**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `harm` –∫–∞–∫ primary field
2. **–ß—Ç–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π `HEYS.models.normalizeHarm(obj)` –≤–º–µ—Å—Ç–æ
   fallback-—Ü–µ–ø–æ—á–µ–∫
3. **–ó–∞–ø–∏—Å—å**: –°–æ—Ö—Ä–∞–Ω—è–π —Ç–æ–ª—å–∫–æ `harm` (–Ω–µ –¥—É–±–ª–∏—Ä—É–π –≤ harmScore)
4. **DB sync**: `heys_cloud_shared_v1.js` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

---

## –î–∞–Ω–Ω—ã–µ –¥–Ω—è (DayRecord)

**localStorage –∫–ª—é—á**: `heys_dayv2_{YYYY-MM-DD}` (—Å clientId namespace)

| –ü–∞—Ä–∞–º–µ—Ç—Ä               | –¢–∏–ø                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                                           | –ü—Ä–∏–º–µ—Ä                              |
| ---------------------- | ------------------- | ---------------------------------------------------------------------------------- | ----------------------------------- |
| `date`                 | string              | –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD                                                          | `"2025-11-29"`                      |
| `sleepStart`           | string              | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Å–Ω–∞ (HH:MM)                                                           | `"23:30"`                           |
| `sleepEnd`             | string              | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–Ω–∞ (HH:MM)                                                        | `"07:00"`                           |
| `sleepNote`            | string              | –ó–∞–º–µ—Ç–∫–∞ –æ —Å–Ω–µ                                                                      | `"–•–æ—Ä–æ—à–æ –≤—ã—Å–ø–∞–ª—Å—è"`                 |
| `sleepQuality`         | number              | –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ (1-10)                                                                | `7`                                 |
| `weightMorning`        | number              | –£—Ç—Ä–µ–Ω–Ω–∏–π –≤–µ—Å (–∫–≥)                                                                  | `75.5`                              |
| `deficitPct`           | number              | –ü—Ä–æ—Ü–µ–Ω—Ç –¥–µ—Ñ–∏—Ü–∏—Ç–∞/–ø—Ä–æ—Ñ–∏—Ü–∏—Ç–∞ (–¥–µ—Ñ–∏—Ü–∏—Ç = –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)                         | `-15`                               |
| `steps`                | number              | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤                                                                   | `8500`                              |
| `householdActivities`  | HouseholdActivity[] | –ú–∞—Å—Å–∏–≤ –±—ã—Ç–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π                                                         | `[{minutes: 30, time: "14:00"}]`    |
| `householdMin`         | number              | ‚ö†Ô∏è Legacy: —Å—É–º–º–∞ –º–∏–Ω—É—Ç –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π                                            | `30`                                |
| `householdTime`        | string              | ‚ö†Ô∏è Legacy: –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏                                                 | `"14:00"`                           |
| `dayScore`             | number              | –û—Ü–µ–Ω–∫–∞ –¥–Ω—è (1-10)                                                                  | `8`                                 |
| `moodAvg`              | number              | –°—Ä–µ–¥–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞ –¥–µ–Ω—å (1-10)                                                  | `7.5`                               |
| `wellbeingAvg`         | number              | –°—Ä–µ–¥–Ω–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –∑–∞ –¥–µ–Ω—å (1-10)                                                | `7.2`                               |
| `stressAvg`            | number              | –°—Ä–µ–¥–Ω–∏–π —Å—Ç—Ä–µ—Å—Å –∑–∞ –¥–µ–Ω—å (1-10)                                                      | `3.0`                               |
| `moodMorning`          | number              | –£—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (1-10, –∏–∑ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —á–µ–∫-–∏–Ω–∞)                                   | `6`                                 |
| `wellbeingMorning`     | number              | –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ (1-10, –∏–∑ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —á–µ–∫-–∏–Ω–∞)                                 | `7`                                 |
| `stressMorning`        | number              | –£—Ç—Ä–µ–Ω–Ω–∏–π —Å—Ç—Ä–µ—Å—Å (1-10, –∏–∑ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —á–µ–∫-–∏–Ω–∞)                                       | `4`                                 |
| `dayComment`           | string              | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –¥–Ω—é                                                                  | `"–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å"`               |
| `waterMl`              | number              | –í—ã–ø–∏—Ç–æ –≤–æ–¥—ã (–º–ª)                                                                   | `1500`                              |
| `lastWaterTime`        | string              | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏—ë–º–∞ –≤–æ–¥—ã (ISO)                                                 | `"2025-11-29T14:30:00"`             |
| `sleepHours`           | number              | –í—ã—á–∏—Å–ª—è–µ–º–æ–µ: —á–∞—Å—ã —Å–Ω–∞                                                              | `7.5`                               |
| `updatedAt`            | number              | Timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è                                                    | `1732886400000`                     |
| `meals`                | Meal[]              | –ú–∞—Å—Å–∏–≤ –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏                                                                | `[...]`                             |
| `trainings`            | Training[]          | –ú–∞—Å—Å–∏–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (–¥–æ 3)                                                           | `[...]`                             |
| `measurements`         | Measurements        | –ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)                                                          | `{...}`                             |
| `cycleDay`             | number/null         | –î–µ–Ω—å –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (1-7, null=–Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è)                             | `3`                                 |
| `isRefeedDay`          | boolean/null        | –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –¥–µ–Ω—å (–∏–∑ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —á–µ–∫-–∏–Ω–∞)                                            | `true`                              |
| `refeedReason`         | string              | –ü—Ä–∏—á–∏–Ω–∞ refeed (deficit/training/holiday/rest)                                     | `"deficit"`                         |
| `supplementsPlanned`   | string[]            | IDs –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–æ–∫ –Ω–∞ –¥–µ–Ω—å                                                | `["vit_d", "omega3"]`               |
| `supplementsTaken`     | string[]            | IDs —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω—è—Ç—ã—Ö –¥–æ–±–∞–≤–æ–∫                                                    | `["vit_d"]`                         |
| `supplementsTakenAt`   | string              | –í—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ –¥–æ–±–∞–≤–æ–∫ (ISO)                                                         | `"2025-11-29T08:00:00"`             |
| `supplementsTakenMeta` | object              | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—ë–º–∞ (—Ñ–æ—Ä–º–∞, –¥–æ–∑–∞, —Ç–∞–π–º–∏–Ω–≥ –ø–æ ID)                                     | `{vit_d: {dose: 2000, form: "D3"}}` |
| `coldExposure`         | object/null         | –î–∞–Ω–Ω—ã–µ —Ö–æ–ª–æ–¥–æ–≤–æ–π —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ (–∏–∑ —á–µ–∫-–∏–Ω–∞)                                           | `{minutes: 3, type: "shower"}`      |
| `schemaVersion`        | number              | –í–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)                                   | `2`                                 |
| `_sourceId`            | string              | Source ID –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)                                      | `"abc-123-def"`                     |
| `dayScore`             | number              | –û—Ü–µ–Ω–∫–∞ –¥–Ω—è 0-10 (–∞–≤—Ç–æ –∏–ª–∏ —Ä—É—á–Ω–∞—è), —Å–º. [SCORING_REFERENCE](./SCORING_REFERENCE.md) | `7.5`                               |
| `dayScoreManual`       | boolean             | –†—É—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (–≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ cloud merge)                                         | `true`                              |
| `_syncCompletedAt`     | number              | Timestamp –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏                                                 | `1732886400000`                     |

---

## –ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞ (Measurements)

–û–±—ä–µ–∫—Ç –≤–Ω—É—Ç—Ä–∏ DayRecord. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —É—Ç—Ä–µ–Ω–Ω–µ–º —á–µ–∫-–∏–Ω–µ —Ä–∞–∑ –≤ 7 –¥–Ω–µ–π.

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                   | –ü—Ä–∏–º–µ—Ä         |
| ------------ | ------ | -------------------------- | -------------- |
| `waist`      | number | –¢–∞–ª–∏—è (—Å–º)                 | `78`           |
| `hips`       | number | –ë—ë–¥—Ä–∞ (—Å–º)                 | `96`           |
| `thigh`      | number | –ë–µ–¥—Ä–æ ‚Äî –æ–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ (—Å–º)  | `55`           |
| `biceps`     | number | –ë–∏—Ü–µ–ø—Å ‚Äî –æ–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ (—Å–º) | `32`           |
| `measuredAt` | string | –î–∞—Ç–∞ –∑–∞–º–µ—Ä–∞ (YYYY-MM-DD)   | `"2025-12-01"` |

**–õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ `measuredAt` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø—Ä–æ—à–ª–æ ‚â•7 –¥–Ω–µ–π
- –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (canSkip: true)
- –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ placeholder

**API:**

- `HEYS.showCheckin.measurements()` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∫–∞–∑ —à–∞–≥–∞ –∑–∞–º–µ—Ä–æ–≤

---

## –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (Training)

| –ü–∞—Ä–∞–º–µ—Ç—Ä    | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                             | –ü—Ä–∏–º–µ—Ä                                |
| ----------- | --------- | ------------------------------------ | ------------------------------------- |
| `z`         | number[4] | –ú–∏–Ω—É—Ç—ã –≤ –∫–∞–∂–¥–æ–π –ø—É–ª—å—Å–æ–≤–æ–π –∑–æ–Ω–µ       | `[5, 20, 15, 0]`                      |
| `time`      | string    | –í—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (HH:MM)             | `"18:00"`                             |
| `type`      | string    | –¢–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (ID)                  | `"cardio"` / `"strength"` / `"hobby"` |
| `mood`      | number    | –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (1-10)   | `8`                                   |
| `wellbeing` | number    | –°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (1-10) | `7`                                   |
| `stress`    | number    | –°—Ç—Ä–µ—Å—Å –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (1-10)       | `3`                                   |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `z[0]` = –∑–æ–Ω–∞ 1 (–ª—ë–≥–∫–∞—è), `z[3]` = –∑–æ–Ω–∞ 4 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è)

‚ö†Ô∏è **Legacy –º–∏–≥—Ä–∞—Ü–∏—è**: –°—Ç–∞—Ä—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª—è `quality` –∏
`feelAfter` –≤–º–µ—Å—Ç–æ `mood`/`wellbeing`.
`heys_day_calculations.js::normalizeTrainings()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç
–º–∏–≥—Ä–∞—Ü–∏—é: `quality` ‚Üí `mood`, `feelAfter` ‚Üí `wellbeing`, `stress` = 5 (–¥–µ—Ñ–æ–ª—Ç).

**–¢–∏–ø—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** (ID ‚Üí Label): | ID | –ò–∫–æ–Ω–∫–∞ | Label | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------|-------|----------| | `cardio` | üèÉ | –ö–∞—Ä–¥–∏–æ | –±–µ–≥, –≤–µ–ª–æ—Å–∏–ø–µ–¥,
–ø–ª–∞–≤–∞–Ω–∏–µ | | `strength` | üèãÔ∏è | –°–∏–ª–æ–≤–∞—è | —Ç—Ä–µ–Ω–∞–∂—ë—Ä—ã, —Å–≤–æ–±–æ–¥–Ω—ã–µ –≤–µ—Å–∞ | | `hobby` |
‚öΩ | –ê–∫—Ç–∏–≤–Ω–æ–µ —Ö–æ–±–±–∏ | –π–æ–≥–∞, –ø—Ä–æ–≥—É–ª–∫–∏, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã |

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **ID** (`'cardio'`, `'strength'`, `'hobby'`),
–ù–ï —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è!

---

## –ë—ã—Ç–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (HouseholdActivity)

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                              | –ü—Ä–∏–º–µ—Ä    |
| --------- | ------ | ------------------------------------- | --------- |
| `minutes` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω—É—Ç                      | `30`      |
| `time`    | string | –í—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (HH:MM), –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | `"14:00"` |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ `day.householdActivities`
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≤ –¥–µ–Ω—å
- Legacy –ø–æ–ª—è `householdMin` –∏ `householdTime` –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–¥–ª—è
  backward compatibility)
- MET = 2.5 –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∫–∞–ª–æ—Ä–∏–π

---

## –ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã (heys_hr_zones)

**localStorage –∫–ª—é—á**: `heys_hr_zones`

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                  | –ü—Ä–∏–º–µ—Ä           |
| -------- | ------ | ------------------------- | ---------------- |
| `name`   | string | –ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã             | `"–ñ–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏–µ"` |
| `hrFrom` | number | –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø—É–ª—å—Å–∞     | `120`            |
| `hrTo`   | number | –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø—É–ª—å—Å–∞    | `140`            |
| `MET`    | number | –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç | `6.0`            |

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–æ–Ω—ã**:

1. –ó–æ–Ω–∞ 1: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (50-60% –æ—Ç max HR)
2. –ó–æ–Ω–∞ 2: –ñ–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏–µ (60-70%)
3. –ó–æ–Ω–∞ 3: –ê—ç—Ä–æ–±–Ω–∞—è (70-80%)
4. –ó–æ–Ω–∞ 4: –ê–Ω–∞—ç—Ä–æ–±–Ω–∞—è (80-90%)

---

## –ü—Ä–∏—ë–º—ã –ø–∏—â–∏ (Meal)

| –ü–∞—Ä–∞–º–µ—Ç—Ä    | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                  | –ü—Ä–∏–º–µ—Ä                 |
| ----------- | ---------- | ------------------------- | ---------------------- |
| `id`        | string     | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–∏—ë–º–∞      | `"meal_1732886400000"` |
| `name`      | string     | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞           | `"–ó–∞–≤—Ç—Ä–∞–∫"`            |
| `time`      | string     | –í—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ (HH:MM)      | `"08:30"`              |
| `mood`      | number     | –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (1-10)         | `7`                    |
| `wellbeing` | number     | –°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ (1-10)       | `7`                    |
| `stress`    | number     | –£—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ (1-10)    | `3`                    |
| `items`     | MealItem[] | –ú–∞—Å—Å–∏–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ø—Ä–∏—ë–º–µ | `[...]`                |

---

## –ü—Ä–æ–¥—É–∫—Ç –≤ –ø—Ä–∏—ë–º–µ (MealItem)

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ               | –ü—Ä–∏–º–µ—Ä                 |
| ------------ | ------------- | ---------------------- | ---------------------- |
| `id`         | string        | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø–∏—Å–∏   | `"item_1732886400001"` |
| `product_id` | string/number | ID –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ –±–∞–∑—ã    | `"prod_123"`           |
| `name`       | string        | –ù–∞–∑–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | `"–û–≤—Å—è–Ω–∫–∞"`            |
| `grams`      | number        | –ì—Ä–∞–º–º—ã                 | `150`                  |

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: `MealItem` –ù–ï –∏–º–µ–µ—Ç –ø–æ–ª—è `category`! –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
–∏—Å–ø–æ–ª—å–∑—É–π `getProductFromItem(item, pIndex)`.

---

## –ü—Ä–æ–¥—É–∫—Ç (Product)

**localStorage –∫–ª—é—á**: `heys_products` (–º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤)

### –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è (–Ω–∞ 100–≥)

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                             | –ü—Ä–∏–º–µ—Ä                        |
| ------------ | ------------- | ---------------------------------------------------------------------------------------------------- | ----------------------------- |
| `id`         | string/number | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID                                                                                        | `"prod_123"`                  |
| `name`       | string        | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞                                                                                    | `"–û–≤—Å—è–Ω–∞—è –∫–∞—à–∞"`              |
| `simple100`  | number        | –ü—Ä–æ—Å—Ç—ã–µ —É–≥–ª–µ–≤–æ–¥—ã                                                                                     | `2.5`                         |
| `complex100` | number        | –°–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã                                                                                     | `58.0`                        |
| `protein100` | number        | –ë–µ–ª–æ–∫                                                                                                | `12.3`                        |
| `badFat100`  | number        | –í—Ä–µ–¥–Ω—ã–µ –∂–∏—Ä—ã                                                                                         | `1.5`                         |
| `goodFat100` | number        | –ü–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã                                                                                        | `5.0`                         |
| `trans100`   | number        | –¢—Ä–∞–Ω—Å-–∂–∏—Ä—ã                                                                                           | `0`                           |
| `fiber100`   | number        | –ö–ª–µ—Ç—á–∞—Ç–∫–∞                                                                                            | `8.0`                         |
| `gi`         | number        | –ì–ª–∏–∫–µ–º–∏—á–µ—Å–∫–∏–π –∏–Ω–¥–µ–∫—Å                                                                                 | `55`                          |
| `harm`       | number        | –ò–Ω–¥–µ–∫—Å –≤—Ä–µ–¥–∞ (0-10), —Å–º. [Harm Score](#-harm-score--–Ω–∞—É—á–Ω–∞—è-—Å–∏—Å—Ç–µ–º–∞-–æ—Ü–µ–Ω–∫–∏-–≤—Ä–µ–¥–Ω–æ—Å—Ç–∏-–ø—Ä–æ–¥—É–∫—Ç–æ–≤-0-10) | `5.5`                         |
| `category`   | string        | –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞                                                                                   | `"–ú–æ–ª–æ—á–Ω—ã–µ"`                  |
| `portions`   | Portion[]     | –ü–æ—Ä—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)                                                                        | `[{name: "1 —à—Ç", grams: 60}]` |

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Portion:** | –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | |------|-----|----------| |
`name` | string | –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä—Ü–∏–∏ ("1 —à—Ç", "1 —á.–ª.") | | `grams` | number |
–ì—Ä–∞–º–º—ã –≤ –ø–æ—Ä—Ü–∏–∏ |

**–ê–≤—Ç–æ-–ø–æ—Ä—Ü–∏–∏**: –ï—Å–ª–∏ `portions` –Ω–µ –∑–∞–¥–∞–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—Ü–∏–∏
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞ (~25 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: —è–π—Ü–æ, —Ö–ª–µ–±, –º–æ–ª–æ–∫–æ, –±–∞–Ω–∞–Ω,
—è–±–ª–æ–∫–æ –∏ —Ç.–¥.). –°–º. `HEYS.models.getAutoPortions()`.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π** (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏):

- –ì–ò: `gi100`, `GI`, `giIndex`
- –í—Ä–µ–¥: `harmScore`, `harm100`, `harmPct`

### –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è (computeDerived)

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –§–æ—Ä–º—É–ª–∞                                | –û–ø–∏—Å–∞–Ω–∏–µ            |
| ---------- | -------------------------------------- | ------------------- |
| `carbs100` | `simple100 + complex100`               | –í—Å–µ–≥–æ —É–≥–ª–µ–≤–æ–¥–æ–≤     |
| `fat100`   | `badFat100 + goodFat100 + trans100`    | –í—Å–µ–≥–æ –∂–∏—Ä–æ–≤         |
| `kcal100`  | `protein100*3 + carbs100*4 + fat100*9` | –ö–∞–ª–æ—Ä–∏–∏ (TEF-aware) |

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã (Extended Nutrients)

–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ DB (shared_products) –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑
YandexAPI. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–¥—É–ª—è–º–∏ Harm Score, Predictive Insights, Supplements.

#### –í–∏—Ç–∞–º–∏–Ω—ã (% DV –Ω–∞ 100–≥)

| –ü–æ–ª–µ          | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                           | DV (–≤–∑—Ä–æ—Å–ª—ã–µ)   |
| ------------- | ------ | ---------------------------------- | --------------- |
| `vitamin_a`   | number | –í–∏—Ç–∞–º–∏–Ω A (—Ä–µ—Ç–∏–Ω–æ–ª + –±–µ—Ç–∞-–∫–∞—Ä–æ—Ç–∏–Ω) | 900 –º–∫–≥ RAE     |
| `vitamin_c`   | number | –í–∏—Ç–∞–º–∏–Ω C                          | 90 –º–≥           |
| `vitamin_d`   | number | –í–∏—Ç–∞–º–∏–Ω D (D2+D3)                  | 20 –º–∫–≥ (800 –ú–ï) |
| `vitamin_e`   | number | –í–∏—Ç–∞–º–∏–Ω E (–∞–ª—å—Ñ–∞-—Ç–æ–∫–æ—Ñ–µ—Ä–æ–ª)        | 15 –º–≥           |
| `vitamin_k`   | number | –í–∏—Ç–∞–º–∏–Ω K                          | 120 –º–∫–≥         |
| `vitamin_b1`  | number | –¢–∏–∞–º–∏–Ω                             | 1.2 –º–≥          |
| `vitamin_b2`  | number | –†–∏–±–æ—Ñ–ª–∞–≤–∏–Ω                         | 1.3 –º–≥          |
| `vitamin_b3`  | number | –ù–∏–∞—Ü–∏–Ω (PP)                        | 16 –º–≥ NE        |
| `vitamin_b6`  | number | –ü–∏—Ä–∏–¥–æ–∫—Å–∏–Ω                         | 1.7 –º–≥          |
| `vitamin_b9`  | number | –§–æ–ª–∞—Ç (—Ñ–æ–ª–∏–µ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞)           | 400 –º–∫–≥ DFE     |
| `vitamin_b12` | number | –ö–æ–±–∞–ª–∞–º–∏–Ω                          | 2.4 –º–∫–≥         |

#### –ú–∏–Ω–µ—Ä–∞–ª—ã (% DV –Ω–∞ 100–≥)

| –ü–æ–ª–µ         | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ | DV (–≤–∑—Ä–æ—Å–ª—ã–µ) |
| ------------ | ------ | -------- | ------------- |
| `calcium`    | number | –ö–∞–ª—å—Ü–∏–π  | 1000 –º–≥       |
| `iron`       | number | –ñ–µ–ª–µ–∑–æ   | 18 –º–≥         |
| `magnesium`  | number | –ú–∞–≥–Ω–∏–π   | 420 –º–≥        |
| `phosphorus` | number | –§–æ—Å—Ñ–æ—Ä   | 1250 –º–≥       |
| `potassium`  | number | –ö–∞–ª–∏–π    | 4700 –º–≥       |
| `zinc`       | number | –¶–∏–Ω–∫     | 11 –º–≥         |
| `selenium`   | number | –°–µ–ª–µ–Ω    | 55 –º–∫–≥        |
| `iodine`     | number | –ô–æ–¥      | 150 –º–∫–≥       |

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã

| –ü–æ–ª–µ               | –¢–∏–ø      | –ï–¥–∏–Ω–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
| ------------------ | -------- | ------- | ---------------------------------------------------- |
| `sodium100`        | number   | –º–≥      | –ù–∞—Ç—Ä–∏–π –Ω–∞ 100–≥ (Harm Score: >600–º–≥ = –≤—Ä–µ–¥–Ω–æ)         |
| `omega3_100`       | number   | –≥       | –û–º–µ–≥–∞-3 –Ω–∞ 100–≥ (EPA+DHA –¥–ª—è OMEGA_BALANCER)         |
| `omega6_100`       | number   | –≥       | –û–º–µ–≥–∞-6 –Ω–∞ 100–≥ (–æ–ø—Ç–∏–º—É–º O6:O3 ‚â§ 4:1)                |
| `cholesterol`      | number   | –º–≥      | –•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω –Ω–∞ 100–≥                                   |
| `nova_group`       | number   | 1-4     | NOVA –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: 1=—Ü–µ–ª—å–Ω—ã–π, 4=—É–ª—å—Ç—Ä–∞-–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π |
| `nutrient_density` | number   | 0-100   | –ù—É—Ç—Ä–∏–µ–Ω—Ç–Ω–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å (NRF-–ø–æ–¥–æ–±–Ω—ã–π —Å–∫–æ—Ä)            |
| `additives`        | string[] | ‚Äî       | –°–ø–∏—Å–æ–∫ –¥–æ–±–∞–≤–æ–∫ (E-—á–∏—Å–ª–∞)                             |

#### Quality Flags (boolean)

| –ü–æ–ª–µ             | –û–ø–∏—Å–∞–Ω–∏–µ                      | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤          |
| ---------------- | ----------------------------- | ----------------------- |
| `is_organic`     | –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç          | Harm Score (—Å–Ω–∏–∂–∞–µ—Ç)    |
| `is_whole_grain` | –¶–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ                | Harm Score, MQS         |
| `is_fermented`   | –§–µ—Ä–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π              | PI: PROBIOTIC_GUARDIAN  |
| `is_raw`         | –ù–µ –ø–æ–¥–≤–µ—Ä–≥–∞–ª—Å—è —Ç–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–µ | PI: MICRONUTRIENT_RADAR |

#### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–π (DB ‚Üî JS)

```
snake_case (PostgreSQL)  ‚Üí  camelCase (JavaScript)
vitamin_b12              ‚Üí  vitaminB12
omega3_100               ‚Üí  omega3Per100
nova_group               ‚Üí  novaGroup
```

EXTENDED_NUTRIENT_KEYS –º–∞–ø–ø–∏–Ω–≥ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ `heys_models_v1.js`.

---

## –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (heys_profile)

**localStorage –∫–ª—é—á**: `heys_profile`

| –ü–∞—Ä–∞–º–µ—Ç—Ä               | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                                            | –ü—Ä–∏–º–µ—Ä                                   |
| ---------------------- | -------- | --------------------------------------------------- | ---------------------------------------- |
| `firstName`            | string   | –ò–º—è                                                 | `"–ê–Ω—Ç–æ–Ω"`                                |
| `lastName`             | string   | –§–∞–º–∏–ª–∏—è                                             | `"–ü–æ–ø–ª–∞–≤—Å–∫–∏–π"`                           |
| `gender`               | string   | –ü–æ–ª                                                 | `"–ú—É–∂—Å–∫–æ–π"` / `"–ñ–µ–Ω—Å–∫–æ–π"` / `"–î—Ä—É–≥–æ–µ"`   |
| `weight`               | number   | –¢–µ–∫—É—â–∏–π –≤–µ—Å (–∫–≥)                                    | `75`                                     |
| `height`               | number   | –†–æ—Å—Ç (—Å–º)                                           | `180`                                    |
| `age`                  | number   | –í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)                                       | `30`                                     |
| `sleepHours`           | number   | –ù–æ—Ä–º–∞ —Å–Ω–∞ (—á–∞—Å–æ–≤)                                   | `8`                                      |
| `insulinWaveHours`     | number   | –ü–µ—Ä–∏–æ–¥ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã                            | `4`                                      |
| `deficitPctTarget`     | number   | –¶–µ–ª–µ–≤–æ–π % –¥–µ—Ñ–∏—Ü–∏—Ç–∞ (–æ—Ç—Ä–∏—Ü.) / –ø—Ä–æ—Ñ–∏—Ü–∏—Ç–∞ (–ø–æ–ª–æ–∂.)    | `-15`                                    |
| `weightGoal`           | number   | –¶–µ–ª–µ–≤–æ–π –≤–µ—Å (–∫–≥)                                    | `70`                                     |
| `birthDate`            | string   | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (YYYY-MM-DD)                          | `"1995-04-12"`                           |
| `stepsGoal`            | number   | –¶–µ–ª—å –ø–æ —à–∞–≥–∞–º –≤ –¥–µ–Ω—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–∞—Å—Ç–µ—Ä–µ —à–∞–≥–æ–≤) | `10000`                                  |
| `activityLevel`        | string   | –£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–¥–ª—è TDEE)                       | `"moderate"`                             |
| `cycleTrackingEnabled` | boolean  | –í–∫–ª—é—á—ë–Ω –ª–∏ —Ç—Ä–µ–∫–∏–Ω–≥ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞             | `false`                                  |
| `profileCompleted`     | boolean  | –§–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è                     | `true`                                   |
| `plannedSupplements`   | string[] | IDs –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–æ–∫                         | `["vit_d", "omega3", "magnesium"]`       |
| `supplementSettings`   | object   | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–±–∞–≤–æ–∫ (—Ç–∞–π–º–∏–Ω–≥, —Ñ–æ—Ä–º–∞, –¥–æ–∑–∞ –ø–æ ID)      | `{vit_d: {time: "morning", dose: 2000}}` |
| `supplementHistory`    | object   | –õ—ë–≥–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π/–ª–∏–º–∏—Ç–æ–≤           | `{vit_d: {streak: 7, lastTaken: "..."}}` |

---

## üå∏ –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª (Cycle)

**–ú–æ–¥—É–ª—å**: `heys_cycle_v1.js` | **–£—Ç—Ä–µ–Ω–Ω–∏–π —á–µ–∫-–∏–Ω**: —à–∞–≥ `cycle`

### –ü–æ–ª–µ cycleDay (–≤ DayRecord)

| –ó–Ω–∞—á–µ–Ω–∏–µ | –§–∞–∑–∞                        | –û–ø–∏—Å–∞–Ω–∏–µ                               |
| -------- | --------------------------- | -------------------------------------- |
| `1-3`    | –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–∞—è               | –ü–µ—Ä–≤—ã–µ –¥–Ω–∏ —Ü–∏–∫–ª–∞                       |
| `4-7`    | –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–∞—è/–§–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è | –ü–µ—Ä–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–∏–æ–¥                      |
| `null`   | –ù–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è            | –¢—Ä–µ–∫–∏–Ω–≥ –≤—ã–∫–ª—é—á–µ–Ω –∏–ª–∏ –Ω–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª–∞ |

### –§–∞–∑—ã —Ü–∏–∫–ª–∞ (getCyclePhase)

| ID           | –ò–∫–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ      | –î–Ω–∏   | kcalMultiplier | waterMultiplier | insulinWave |
| ------------ | ------ | ------------- | ----- | -------------- | --------------- | ----------- |
| `menstrual`  | üå∏     | –ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è   | 1-7   | 1.05-1.10      | 1.10            | +12-15%     |
| `follicular` | üå±     | –§–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è | 8-14  | 1.00           | 1.00            | 0%          |
| `ovulation`  | ‚≠ê     | –û–≤—É–ª—è—Ü–∏—è      | 14-16 | 1.00           | 1.00            | 0%          |
| `luteal`     | üåô     | –õ—é—Ç–µ–∏–Ω–æ–≤–∞—è    | 17-28 | 1.05-1.08      | 1.05            | +8-10%      |

### –ö–æ—Ä—Ä–µ–∫—Ü–∏–∏ –Ω–æ—Ä–º

**–ö–∞–ª–æ—Ä–∏–∏**: `optimum √ó kcalMultiplier`  
**–í–æ–¥–∞**: `waterGoal + cycleBonus` (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ breakdown)  
**–ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞**: `waveHours √ó insulinWaveMultiplier` (—Ñ–∞–∫—Ç–æ—Ä #26)

### –°–æ–≤–µ—Ç—ã –¥–ª—è —Ü–∏–∫–ª–∞ (7 —à—Ç)

| ID                       | –£—Å–ª–æ–≤–∏–µ                     | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| ------------------------ | --------------------------- | --------------------------------- |
| `cycle_sweet_craving`    | –ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è + —Å–ª–∞–¥–∫–æ–µ >100% | "–¢—è–≥–∞ –∫ —Å–ª–∞–¥–∫–æ–º—É ‚Äî –Ω–æ—Ä–º–∞"         |
| `cycle_iron_important`   | –ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è + –Ω–µ—Ç –∂–µ–ª–µ–∑–∞    | "–°–µ–π—á–∞—Å –∂–µ–ª–µ–∑–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ"    |
| `cycle_rest_ok`          | –î–Ω–∏ 1-2 + –Ω–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏    | "–û—Ç–¥—ã—Ö ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä"        |
| `cycle_hydration`        | –ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è + –≤–æ–¥–∞ <70%     | "–°–µ–π—á–∞—Å –≤–æ–¥–∞ –æ—Å–æ–±–µ–Ω–Ω–æ –Ω—É–∂–Ω–∞"      |
| `cycle_energy_up`        | –§–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è —Ñ–∞–∑–∞          | "–•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫"    |
| `cycle_peak_performance` | –û–≤—É–ª—è—Ü–∏—è                    | "–ü–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏! –í—Ä–µ–º—è –¥–ª—è —Ä–µ–∫–æ—Ä–¥–æ–≤" |
| `cycle_tracking_thanks`  | –õ—é–±–∞—è —Ñ–∞–∑–∞ (–ø–µ—Ä–≤—ã–π –ø–æ–∫–∞–∑)   | "–ù–æ—Ä–º—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Ü–∏–∫–ª"     |

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

**–ö–∞–ª–µ–Ω–¥–∞—Ä—å**: –†–æ–∑–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –¥–Ω—è—Ö —Å `cycleDay != null`  
**–ö–∞—Ä—Ç–æ—á–∫–∞**: `CycleCard` –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ ‚Äî —Ñ–∞–∑–∞, –¥–µ–Ω—å, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏  
**–í–æ–¥–∞**: –ë–æ–Ω—É—Å `üå∏ +X –º–ª` –≤ breakdown  
**–ì—Ä–∞—Ñ–∏–∫ –≤–µ—Å–∞**: –†–æ–∑–æ–≤—ã–µ –∑–æ–Ω—ã –¥–ª—è –¥–Ω–µ–π —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –≤–æ–¥—ã, "—á–∏—Å—Ç—ã–π" —Ç—Ä–µ–Ω–¥
–∏—Å–∫–ª—é—á–∞–µ—Ç —ç—Ç–∏ –¥–Ω–∏

### –ó–∞–¥–µ—Ä–∂–∫–∞ –≤–æ–¥—ã (Water Retention)

–ù–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–≥–µ—Å—Ç–µ—Ä–æ–Ω–∞ ‚Üí –∑–∞–¥–µ—Ä–∂–∫–∞ Na+ –∏ –≤–æ–¥—ã ‚Üí +0.5-3 –∫–≥.

| –î–Ω–∏ —Ü–∏–∫–ª–∞ | Severity | –û—Ü–µ–Ω–∫–∞  | –ò—Å–∫–ª—é—á–∏—Ç—å –∏–∑ —Ç—Ä–µ–Ω–¥–∞ |
| --------- | -------- | ------- | ------------------- |
| 1-3       | high     | +2 –∫–≥   | ‚úÖ –î–∞               |
| 4-5       | medium   | +1 –∫–≥   | ‚úÖ –î–∞               |
| 6-7       | low      | +0.5 –∫–≥ | ‚úÖ –î–∞               |
| 8-14      | none     | 0 –∫–≥    | ‚ùå –ù–µ—Ç              |

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ sparkline –≤–µ—Å–∞**:

- –†–æ–∑–æ–≤—ã–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã –∑–∞ —Ç–æ—á–∫–∞–º–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –†–æ–∑–æ–≤–∞—è –æ–±–≤–æ–¥–∫–∞ –≤–æ–∫—Ä—É–≥ —Ç–æ—á–µ–∫
- –ë–µ–π–¥–∂ "üå∏ —á–∏—Å—Ç—ã–π" ‚Äî —Ç—Ä–µ–Ω–¥ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –±–µ–∑ –¥–Ω–µ–π –∑–∞–¥–µ—Ä–∂–∫–∏
- –°–Ω–æ—Å–∫–∞ –ø–æ–¥ –≥—Ä–∞—Ñ–∏–∫–æ–º —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º (+1-3 –∫–≥, –Ω–µ –∂–∏—Ä)

### API

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —à–∞–≥–∞
HEYS.Steps.shouldShowCycleStep(); // true –¥–ª—è –∂–µ–Ω—â–∏–Ω —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º —Ç—Ä–µ–∫–∏–Ω–≥–æ–º

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–∑—ã
HEYS.Cycle.getCyclePhase(cycleDay); // { id, name, icon, kcalMultiplier, ... }

// –ú–Ω–æ–∂–∏—Ç–µ–ª–∏
HEYS.Cycle.getKcalMultiplier(cycleDay); // 1.00-1.10
HEYS.Cycle.getWaterMultiplier(cycleDay); // 1.00-1.10
HEYS.Cycle.getInsulinWaveMultiplier(cycleDay); // 1.00-1.15

// –ó–∞–¥–µ—Ä–∂–∫–∞ –≤–æ–¥—ã
HEYS.Cycle.getWaterRetentionInfo(cycleDay); // { hasRetention, severity, kgEstimate, advice, excludeFromTrend }
HEYS.Cycle.shouldExcludeFromWeightTrend(cycleDay); // true –¥–ª—è –¥–Ω–µ–π 1-7

// –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
HEYS.Cycle.findAllCycles(monthsBack, lsGet); // [{startDate, endDate, days}]
HEYS.Cycle.analyzeWaterRetentionHistory(monthsBack, lsGet); // {avgRetentionKg, insight, trend, ...}
HEYS.Cycle.getWeightNormalizationForecast(cycleDay); // {daysUntilNormal, message}
```

---

## –ù–æ—Ä–º—ã –ø–∏—Ç–∞–Ω–∏—è (heys_norms)

**localStorage –∫–ª—é—á**: `heys_norms`

| –ü–∞—Ä–∞–º–µ—Ç—Ä         | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                 | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| ---------------- | ------ | ------------------------ | ------------ |
| `carbsPct`       | number | % —É–≥–ª–µ–≤–æ–¥–æ–≤ –æ—Ç –∫–∞–ª–æ—Ä–∞–∂–∞  | `50`         |
| `proteinPct`     | number | % –±–µ–ª–∫–∞ –æ—Ç –∫–∞–ª–æ—Ä–∞–∂–∞      | `25`         |
| `simpleCarbPct`  | number | % –ø—Ä–æ—Å—Ç—ã—Ö –æ—Ç —É–≥–ª–µ–≤–æ–¥–æ–≤   | `30`         |
| `badFatPct`      | number | % –≤—Ä–µ–¥–Ω—ã—Ö –∂–∏—Ä–æ–≤ –æ—Ç –∂–∏—Ä–æ–≤ | `30`         |
| `superbadFatPct` | number | % —Ç—Ä–∞–Ω—Å-–∂–∏—Ä–æ–≤ –æ—Ç –∂–∏—Ä–æ–≤   | `5`          |
| `fiberPct`       | number | –≥ –∫–ª–µ—Ç—á–∞—Ç–∫–∏ –Ω–∞ 1000 –∫–∫–∞–ª | `14`         |
| `giPct`          | number | –¶–µ–ª–µ–≤–æ–π —Å—Ä–µ–¥–Ω–∏–π –ì–ò       | `55`         |
| `harmPct`        | number | –î–æ–ø—É—Å—Ç–∏–º—ã–π % –≤—Ä–µ–¥–∞       | `10`         |

---

## –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°—É–º–º—ã –∑–∞ –¥–µ–Ω—å (dayTot)

‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–Ω–æ**: –ö–ª—é—á –¥–ª—è –±–µ–ª–∫–∞ ‚Äî `prot`, –ù–ï `protein`!

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                |
| --------- | ------ | ----------------------- |
| `kcal`    | number | –°—É–º–º–∞ –∫–∞–ª–æ—Ä–∏–π –∑–∞ –¥–µ–Ω—å   |
| `carbs`   | number | –°—É–º–º–∞ —É–≥–ª–µ–≤–æ–¥–æ–≤         |
| `simple`  | number | –°—É–º–º–∞ –ø—Ä–æ—Å—Ç—ã—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤ |
| `complex` | number | –°—É–º–º–∞ —Å–ª–æ–∂–Ω—ã—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤ |
| `prot`    | number | –°—É–º–º–∞ –±–µ–ª–∫–∞ ‚ö†Ô∏è          |
| `fat`     | number | –°—É–º–º–∞ –∂–∏—Ä–æ–≤             |
| `bad`     | number | –°—É–º–º–∞ –≤—Ä–µ–¥–Ω—ã—Ö –∂–∏—Ä–æ–≤     |
| `good`    | number | –°—É–º–º–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –∂–∏—Ä–æ–≤    |
| `trans`   | number | –°—É–º–º–∞ —Ç—Ä–∞–Ω—Å-–∂–∏—Ä–æ–≤       |
| `fiber`   | number | –°—É–º–º–∞ –∫–ª–µ—Ç—á–∞—Ç–∫–∏         |
| `gi`      | number | –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –ì–ò     |
| `harm`    | number | –°—É–º–º–∞ –≤—Ä–µ–¥–∞             |

### –î–Ω–µ–≤–Ω—ã–µ –Ω–æ—Ä–º—ã –≤ –≥—Ä–∞–º–º–∞—Ö (normAbs)

–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ `optimum` –∏ `heys_norms`:

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –§–æ—Ä–º—É–ª–∞                                             |
| --------- | --------------------------------------------------- |
| `kcal`    | `optimum`                                           |
| `carbs`   | `optimum * carbsPct / 100 / 4`                      |
| `prot`    | `optimum * proteinPct / 100 / 4` ‚ö†Ô∏è                 |
| `fat`     | `optimum * (100 - carbsPct - proteinPct) / 100 / 9` |
| `simple`  | `carbs * simpleCarbPct / 100`                       |
| `complex` | `carbs - simple`                                    |
| `bad`     | `fat * badFatPct / 100`                             |
| `trans`   | `fat * superbadFatPct / 100`                        |
| `good`    | `fat - bad - trans`                                 |
| `fiber`   | `optimum / 1000 * fiberPct`                         |

### –ú–µ—Ç–∞–±–æ–ª–∏–∑–º

| –ü–∞—Ä–∞–º–µ—Ç—Ä          | –û–ø–∏—Å–∞–Ω–∏–µ                     | –§–æ—Ä–º—É–ª–∞                                                                    |
| ----------------- | ---------------------------- | -------------------------------------------------------------------------- |
| `BMR`             | –ë–∞–∑–æ–≤—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º           | Mifflin-St Jeor                                                            |
| `TEF`             | –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø–∏—â–∏ üÜï   | `carbs√ó4√ó0.075 + fat√ó9√ó0.015` (prot TEF=0, –≤—Å—Ç—Ä–æ–µ–Ω –≤ NET Atwater 3 kcal/g) |
| `baseExpenditure` | –ë–∞–∑–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã (–±–µ–∑ TEF) üÜï | `BMR + activity + NDTE`                                                    |
| `TDEE`            | –û–±—â–∏–π —Ä–∞—Å—Ö–æ–¥ (—Å TEF)         | `baseExpenditure + TEF`                                                    |
| `optimum`         | –¶–µ–ª–µ–≤–æ–π –∫–∞–ª–æ—Ä–∞–∂              | `baseExpenditure * (1 ¬± deficitPct/100)` ‚ö†Ô∏è –±–µ–∑ TEF!                       |
| `trainingKcal`    | –û—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫                | `‚àë(zone_minutes * MET * weight / 60)`                                      |
| `ratio`           | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ—Ä–º—ã             | `dayTot.kcal / optimum`                                                    |

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ v3.9.1**: `optimum` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç `baseExpenditure` (–±–µ–∑ TEF),
> —á—Ç–æ–±—ã –Ω–æ—Ä–º–∞ –Ω–µ "–¥–æ–≥–æ–Ω—è–ª–∞" —Å—ä–µ–¥–µ–Ω–Ω–æ–µ. TEF –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ UI –∫–∞–∫ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ
> –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–Ω–∏–µ.

#### –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è (–∏—Ç–æ–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞)

- **–ü–ª–∞–Ω/–Ω–æ—Ä–º–∞ –Ω–∞ –¥–µ–Ω—å (optimum)**: —Ç–æ–ª—å–∫–æ `baseExpenditure` + –¥–µ—Ñ–∏—Ü–∏—Ç + —Ü–∏–∫–ª.
  **TEF –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º**.
- **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –¥–Ω—è (TDEE)**: `baseExpenditure + TEF` **—Å —É—á—ë—Ç–æ–º NDTE**.
- **–†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞ (–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü/–æ—Ç—á—ë—Ç—ã)**: –∏—Å–ø–æ–ª—å–∑—É–µ–º **TDEE** (—Å TEF –∏ NDTE).
- **–ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (`ratio`, streak, heatmap): —Å—á–∏—Ç–∞—é—Ç—Å—è –æ—Ç **optimum**.

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: TEF —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `pIndex`/–ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–∏–Ω–∞—á–µ
> 0).

#### TEF (Thermic Effect of Food) ‚Äî v3.9.0

**–ù–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: Westerterp 2004, Tappy 1996

| –ú–∞–∫—Ä–æ—Å       | Atwater  | TEF %  | –ß–∏—Å—Ç–∞—è —ç–Ω–µ—Ä–≥–∏—è |
| ------------ | -------- | ------ | -------------- |
| **–ë–µ–ª–æ–∫**    | 4 –∫–∫–∞–ª/–≥ | 20-30% | ~3 –∫–∫–∞–ª/–≥      |
| **–£–≥–ª–µ–≤–æ–¥—ã** | 4 –∫–∫–∞–ª/–≥ | 5-10%  | ~3.7 –∫–∫–∞–ª/–≥    |
| **–ñ–∏—Ä—ã**     | 9 –∫–∫–∞–ª/–≥ | 0-3%   | ~8.8 –∫–∫–∞–ª/–≥    |

**–§–æ—Ä–º—É–ª–∞ TEF** (–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ HEYS):

```javascript
// Protein TEF = 0 (–≤—Å—Ç—Ä–æ–µ–Ω –≤ NET Atwater: protein = 3 kcal/g –≤–º–µ—Å—Ç–æ 4)
TEF = prot_g √ó 0 + carbs_g √ó 4 √ó 0.075 + fat_g √ó 9 √ó 0.015
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: Protein –∏—Å–ø–æ–ª—å–∑—É–µ—Ç NET Atwater = 3 kcal/g (—É–∂–µ TEF-adjusted),
> –ø–æ—ç—Ç–æ–º—É TEF-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–µ–ª–∫–∞ = 0. –ù–µ –ø—É—Ç–∞–π—Ç–µ —Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º–∏ —Ñ–æ—Ä–º—É–ª–∞–º–∏ –≥–¥–µ
> protein √ó 4 √ó 0.25.

**–ü—Ä–∏–º–µ—Ä**: –°—ä–µ–¥–µ–Ω–æ 120–≥ –±–µ–ª–∫–∞, 250–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤, 70–≥ –∂–∏—Ä–æ–≤:

- TEF = 0 + 250√ó4√ó0.075 + 70√ó9√ó0.015 = 75 + 9 = **84 –∫–∫–∞–ª**

**UI**: –í popup "‚ö° –ó–∞—Ç—Ä–∞—Ç—ã —ç–Ω–µ—Ä–≥–∏–∏" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ "üî• –ü–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–Ω–∏–µ –ø–∏—â–∏
(TEF)".

### Streak –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä        | –û–ø–∏—Å–∞–Ω–∏–µ                              |
| --------------- | ------------------------------------- |
| `currentStreak` | –î–Ω–µ–π –ø–æ–¥—Ä—è–¥ –≤ –Ω–æ—Ä–º–µ (ratio 0.75-1.15) |
| `activeDays`    | Map –¥–Ω–µ–π —Å ratio –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü     |

---

## –°–æ–≤–µ—Ç—ã (Advice Module)

**–§–∞–π–ª**: `advice/` –º–æ–¥—É–ª–∏ (\_core, \_nutrition, \_timing, \_training,
\_emotional, \_hydration, \_other) | **–í—Å–µ–≥–æ —Å–æ–≤–µ—Ç–æ–≤: ~170**

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `heys_advice_v1.js` ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∏–π shim (42 LOC), —Ä–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤
> `advice/` –º–æ–¥—É–ª—è—Ö.

### üéØ Goal-aware —Å–∏—Å—Ç–µ–º–∞ (v2.0)

–°–æ–≤–µ—Ç—ã —Ç–µ–ø–µ—Ä—å –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –∫ —Ü–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–µ—Ñ–∏—Ü–∏—Ç/–Ω–∞–±–æ—Ä/–ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ).

**–†–µ–∂–∏–º—ã —Ü–µ–ª–∏** (`getGoalMode(deficitPct)`):

| –†–µ–∂–∏–º                       | –£—Å–ª–æ–≤–∏–µ                 | –¶–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω kcalPct | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–±–æ—Ä | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –Ω–µ–¥–æ–±–æ—Ä |
| --------------------------- | ----------------------- | ------------------------ | ------------------- | ------------------- |
| `deficit` (–ü–æ—Ö—É–¥–µ–Ω–∏–µ)       | `deficitPct <= -10%`    | 90-105%                  | >115%               | <80%                |
| `deficit` (–õ—ë–≥–∫–æ–µ)          | `deficitPct -5% –¥–æ -9%` | 92-108%                  | >120%               | <75%                |
| `bulk` (–ù–∞–±–æ—Ä)              | `deficitPct >= +10%`    | 95-110%                  | >125%               | <85%                |
| `bulk` (–õ—ë–≥–∫–∏–π)             | `deficitPct +5% –¥–æ +9%` | 93-112%                  | >120%               | <80%                |
| `maintenance` (–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ) | `deficitPct -4% –¥–æ +4%` | 90-110%                  | >125%               | <70%                |

**–ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–µ–ª–∏**:

1. `day.deficitPct` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å (–∏–∑ –≤–∫–ª–∞–¥–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
2. `prof.deficitPctTarget` ‚Äî —Ü–µ–ª—å –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è (fallback)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `deficitPct` —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫:

- **–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ** –¥–ª—è –¥–µ—Ñ–∏—Ü–∏—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `-15` = 15% –¥–µ—Ñ–∏—Ü–∏—Ç)
- **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ** –¥–ª—è –ø—Ä–æ—Ñ–∏—Ü–∏—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `+10` = 10% –Ω–∞–±–æ—Ä)

### Goal-specific —Å–æ–≤–µ—Ç—ã

| ID                            | –†–µ–∂–∏–º       | –£—Å–ª–æ–≤–∏–µ                          | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| ----------------------------- | ----------- | -------------------------------- | ------------------------------------ |
| `bulk_protein_critical`       | bulk        | `proteinPct < 0.8`               | "–î–ª—è –Ω–∞–±–æ—Ä–∞ –Ω—É–∂–µ–Ω –±–µ–ª–æ–∫!"            |
| `bulk_carbs_low`              | bulk        | `carbsPct < 0.7`                 | "–î–æ–±–∞–≤—å —É–≥–ª–µ–≤–æ–¥–æ–≤ –¥–ª—è —ç–Ω–µ—Ä–≥–∏–∏"       |
| `bulk_kcal_behind`            | bulk        | `hour >= 16 && kcalPct < 0.6`    | "–¢–æ–ª—å–∫–æ X% –æ—Ç –ø–ª–∞–Ω–∞ –Ω–∞–±–æ—Ä–∞"          |
| `deficit_protein_save_muscle` | deficit     | `proteinPct < 0.9`               | "–ë–µ–ª–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º—ã—à—Ü—ã –Ω–∞ –¥–µ—Ñ–∏—Ü–∏—Ç–µ"  |
| `deficit_fiber_satiety`       | deficit     | `fiberPct < 0.5`                 | "–ö–ª–µ—Ç—á–∞—Ç–∫–∞ –¥–∞—ë—Ç —Å—ã—Ç–æ—Å—Ç—å –±–µ–∑ –∫–∞–ª–æ—Ä–∏–π" |
| `deficit_too_harsh`           | deficit     | `hour >= 18 && kcalPct < 0.7`    | "–°–ª–∏—à–∫–æ–º –∂—ë—Å—Ç–∫–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç"            |
| `deficit_on_track_motivation` | deficit     | `isInTargetRange(kcalPct, goal)` | "–î–µ—Ñ–∏—Ü–∏—Ç –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è!"             |
| `maintenance_stable`          | maintenance | `isInTargetRange(kcalPct, goal)` | "–ö–∞–ª–æ—Ä–∏–∏ –≤ –±–∞–ª–∞–Ω—Å–µ!"                 |
| `goal_on_track`               | any         | `isInTargetRange(kcalPct, goal)` | "–¶–µ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!"                  |

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–æ–≤–µ—Ç—ã (–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ)

| ID                     | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                          |
| ---------------------- | -------------------------------------------------- |
| `kcal_excess_critical` | –ü–æ—Ä–æ–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `goal.criticalOver`               |
| `kcal_excess_mild`     | –ü–æ—Ä–æ–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `goal.targetRange.max`            |
| `kcal_under_critical`  | üÜï –ü–æ—Ä–æ–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `goal.criticalUnder`           |
| `evening_undereating`  | –¢–µ–∫—Å—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞ (bulk/deficit/maintenance) |
| `perfect_day`          | –¢–µ–∫—Å—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞                            |
| `weekend_relax`        | –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è bulk —Ä–µ–∂–∏–º–∞                    |

### –í—Å–µ —Ç–∏–ø—ã —Å–æ–≤–µ—Ç–æ–≤

| ID                                   | –£—Å–ª–æ–≤–∏–µ                                                           | –ö–∞—Ç–µ–≥–æ—Ä–∏—è    | –¢—Ä–∏–≥–≥–µ—Ä                    |
| ------------------------------------ | ----------------------------------------------------------------- | ------------ | -------------------------- |
| `monday_motivation`                  | –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ —É—Ç—Ä–æ                                                  | motivation   | tab_open                   |
| `friday_reminder`                    | –ü—è—Ç–Ω–∏—Ü–∞ –≤–µ—á–µ—Ä                                                     | motivation   | tab_open                   |
| `sunday_planning`                    | –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤–µ—á–µ—Ä                                                 | motivation   | tab_open                   |
| `crash_support`                      | `isCriticallyOver/Under(kcalPct, goal)`                           | emotional    | tab_open, product_added    |
| `stress_support`                     | `avgMood < 3`                                                     | emotional    | tab_open                   |
| `streak_7`                           | `currentStreak >= 7`                                              | achievement  | tab_open                   |
| `streak_3`                           | `currentStreak 3-6`                                               | achievement  | tab_open                   |
| `perfect_day`                        | `hour>=18 && isInTargetRange(kcalPct, goal) && macros>=0.9`       | achievement  | tab_open                   |
| `first_day`                          | `mealCount === 1` (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)                                    | achievement  | product_added              |
| `kcal_excess_critical`               | `isCriticallyOver(kcalPct, goal)`                                 | nutrition    | product_added              |
| `kcal_excess_mild`                   | `kcalPct > goal.targetRange.max`                                  | nutrition    | product_added              |
| `kcal_under_critical`                | `isCriticallyUnder(kcalPct, goal) && hour >= 14`                  | nutrition    | tab_open, product_added    |
| `trans_fat_warning`                  | `transPct > 1.0`                                                  | nutrition    | product_added              |
| `simple_carbs_warning`               | `simplePct > 1.3`                                                 | nutrition    | product_added              |
| `harm_warning`                       | `harmPct > 1.0`                                                   | nutrition    | product_added              |
| `protein_low`                        | `proteinPct < 0.5 && hour >= 12`                                  | nutrition    | tab_open, product_added    |
| `fiber_low`                          | `fiberPct < 0.3 && mealCount >= 2`                                | nutrition    | tab_open, product_added    |
| `fiber_good`                         | `fiberPct >= 1.0`                                                 | nutrition    | product_added              |
| `good_fat_low`                       | `goodFatPct < 0.4 && hour >= 14`                                  | nutrition    | tab_open, product_added    |
| `post_training_protein`              | `hasTraining && proteinPct < 0.8`                                 | training     | tab_open, product_added    |
| `post_training_undereating_critical` | `hasTraining && kcalPct < 0.7 && hour >= 18`                      | training     | tab_open                   |
| `undereating_warning`                | `kcalPct < 0.7 && hour >= 18` (crashed state)                     | nutrition    | tab_open                   |
| `evening_undereating`                | `hour >= 20 && isCriticallyUnder(kcalPct, goal)`                  | nutrition    | tab_open                   |
| `balanced_macros`                    | `mealCount>=2 && all macros 0.9-1.2`                              | nutrition    | product_added              |
| `sleep_low`                          | `sleepHours > 0 && < 6`                                           | lifestyle    | tab_open                   |
| `morning_breakfast`                  | `hour 7-10 && mealCount === 0`                                    | lifestyle    | tab_open                   |
| `steps_goal`                         | `steps >= 10000`                                                  | lifestyle    | tab_open                   |
| `variety_low`                        | `items>=5 && uniqueProducts<3`                                    | nutrition    | tab_open, product_added    |
| `after_sweet_protein`                | `lastMeal simplePct>0.6 && kcal>100`                              | nutrition    | product_added              |
| `sleep_hunger_correlation`           | `sleepDeficit>2 && kcalPct>1.15`                                  | correlation  | tab_open, product_added    |
| `sleep_hunger_warning`               | `sleepDeficit>1.5 && hour<12 && kcalPct<0.3`                      | correlation  | tab_open                   |
| `stress_sweet_pattern`               | `avgStress>=4 && simplePct>1.2`                                   | correlation  | product_added              |
| `low_stress_balance`                 | `avgStress 1-2 && kcalPct 0.9-1.1`                                | correlation  | tab_open                   |
| `hard_workout_recovery`              | `highIntensity>20min && proteinPct<1.0`                           | training     | tab_open, product_added    |
| `cardio_carbs_balance`               | `fatBurn>30min && carbsPct>1.2`                                   | training     | product_added              |
| `great_workout`                      | `totalMinutes >= 45`                                              | training     | tab_open                   |
| `water_evening_low`                  | `hour>=18 && waterPct<0.5`                                        | hydration    | tab_open                   |
| `water_reminder`                     | `hoursSinceWater>2 && hour 10-21`                                 | hydration    | tab_open, product_added    |
| `water_goal_reached`                 | `waterPct >= 1.0`                                                 | hydration    | tab_open                   |
| `high_gi_warning`                    | `avgGI>70 && mealCount>=2`                                        | nutrition    | tab_open, product_added    |
| `low_gi_great`                       | `avgGI 0-55 && mealCount>=2`                                      | nutrition    | tab_open                   |
| `simple_complex_ratio`               | `totalCarbs>50 && simpleRatio>0.5`                                | nutrition    | product_added              |
| `carbs_balance_perfect`              | `simpleRatio<=0.3 && mealCount>=2`                                | nutrition    | tab_open                   |
| `fat_quality_low`                    | `totalFat>20 && goodRatio<0.4`                                    | nutrition    | tab_open, product_added    |
| `fat_quality_great`                  | `goodRatio>=0.6`                                                  | nutrition    | tab_open                   |
| `insulin_too_fast`                   | `gap < insulinWave*0.5`                                           | timing       | product_added              |
| `insulin_perfect`                    | `avgGap >= insulinWave*0.9 && meals>=3`                           | timing       | tab_open                   |
| `late_dinner_warning`                | `lastMealHour >= 22`                                              | timing       | product_added              |
| `good_dinner_time`                   | `lastMealHour 18-20 && hour>=21`                                  | timing       | tab_open                   |
| `bad_sleep_advice`                   | `sleepQuality 1-2 && hour<12`                                     | sleep        | tab_open                   |
| `great_sleep`                        | `sleepQuality>=4 && sleepHours>=7`                                | sleep        | tab_open                   |
| `sugar_mood_crash`                   | `moodDrop>=2 && prevMealSimple>30g`                               | emotional    | tab_open                   |
| `wellbeing_low_food`                 | `avgWellbeing<3 && kcalPct<0.4 && hour>=12`                       | emotional    | tab_open                   |
| `wellbeing_nutrition_link`           | `avgWellbeing>=4 && kcalPct 0.8-1.1`                              | emotional    | tab_open                   |
| `iron_reminder`                      | `gender='–ñ–µ–Ω—Å–∫–∏–π' && mealCount>=2 && !hasIronFood`                | personalized | tab_open                   |
| **üíä Supplements (Phase 3)**         |                                                                   |              |                            |
| `morning_supplements_reminder`       | –£—Ç—Ä–æ (6-12) + –µ—Å—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∏–Ω—è—Ç—ã–µ –≤–∏—Ç–∞–º–∏–Ω—ã            | health       | tab_open, checkin_complete |
| `evening_supplements_reminder`       | –í–µ—á–µ—Ä (18-23) + –µ—Å—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∏–Ω—è—Ç—ã–µ –≤–µ—á–µ—Ä–Ω–∏–µ –≤–∏—Ç–∞–º–∏–Ω—ã | health       | product_added              |
| `age_protein`                        | `age>=40 && proteinPct<0.9`                                       | personalized | tab_open, product_added    |
| `household_bonus`                    | `householdMin >= 60`                                              | activity     | tab_open                   |
| `sedentary_day`                      | `household=0 && steps<3000 && !training && hour>=18`              | activity     | tab_open                   |
| `day_score_low`                      | `dayScore < 5 && hour >= 20`                                      | emotional    | tab_open                   |
| `day_score_high`                     | `dayScore >= 8 && hour >= 20`                                     | achievement  | tab_open                   |
| `training_type_strength`             | `training.type === 'strength' && proteinPct < 1.0`                | training     | tab_open, product_added    |
| `training_type_hobby`                | `training.type === 'hobby'`                                       | training     | tab_open                   |
| `caffeine_evening`                   | –ö–æ—Ñ–µ –∑–∞ <6—á –¥–æ —Å–Ω–∞ (—Å —É—á—ë—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ bedtime)                   | nutrition    | product_added              |
| `bedtime_undereating`                | –î–æ —Å–Ω–∞ ‚â§2—á + –Ω–µ–¥–æ–±–æ—Ä –∫–∞–ª–æ—Ä–∏–π                                      | timing       | tab_open                   |
| `undereating_dehydration_combo`      | `kcalPct < 0.6 && waterPct < 0.5` ‚Äî –¥–≤–æ–π–Ω–æ–π —É–¥–∞—Ä                  | nutrition    | tab_open                   |
| `empty_stomach_late`                 | `hour 10-12 && mealCount === 0`                                   | lifestyle    | tab_open                   |
| `late_heavy_meal`                    | `lastMealHour >= 21 && lastMealKcal > 500`                        | timing       | product_added              |
| `insulin_countdown`                  | `minutesUntilEnd > 0 && < 60`                                     | timing       | tab_open                   |
| `bedtime_protein`                    | –î–æ —Å–Ω–∞ ‚â§4—á + –º–∞–ª–æ –±–µ–ª–∫–∞ (—Å —Ä–µ–∞–ª—å–Ω—ã–º bedtime)                      | timing       | tab_open                   |
| `post_holiday_detox`                 | –î–Ω–∏ –ø–æ—Å–ª–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ (1-2 —è–Ω–≤, –∏ –¥—Ä.)                             | lifestyle    | tab_open                   |
| `best_day_recall`                    | –õ—É—á—à–∏–π –¥–µ–Ω—å –∑–∞ 7 –¥–Ω–µ–π                                             | motivation   | tab_open                   |
| `lunch_time`                         | `hour === 13 && mealCount === 1`                                  | lifestyle    | tab_open                   |
| `protein_champion`                   | `proteinPct >= 1.2`                                               | achievement  | tab_open, product_added    |
| `snack_window`                       | `hour === 16 && kcalPct < 0.6`                                    | lifestyle    | tab_open                   |
| `mood_improving`                     | –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤—ã—Ä–æ—Å–ª–æ –º–µ–∂–¥—É –ø—Ä–∏—ë–º–∞–º–∏                                 | correlation  | product_added              |
| `workout_consistent`                 | 3 –¥–Ω—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–æ–¥—Ä—è–¥                                           | achievement  | tab_open                   |
| `evening_snacker`                    | –ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∑–¥–Ω–∏—Ö —É–∂–∏–Ω–æ–≤ 3 –¥–Ω—è                                      | correlation  | tab_open                   |
| `morning_skipper`                    | –ü–∞—Ç—Ç–µ—Ä–Ω –±–µ–∑ –∑–∞–≤—Ç—Ä–∞–∫–∞ 3 –¥–Ω—è                                        | correlation  | tab_open                   |
| `chronic_undereating_pattern`        | 3+ –¥–Ω–µ–π kcalPct < 0.75                                            | correlation  | tab_open                   |
| **Phase 2: Meal-level**              |                                                                   |              |                            |
| `meal_too_large`                     | `lastMeal.kcal > 800`                                             | nutrition    | product_added              |
| `meal_too_small`                     | `meal.kcal < 150 && mealCount >= 2`                               | nutrition    | product_added              |
| `protein_per_meal_low`               | `meal.prot < 20 && meal.kcal > 200`                               | nutrition    | product_added              |
| `evening_carbs_high`                 | `hour >= 20 && lastMeal.carbs > 50`                               | nutrition    | product_added              |
| `fiber_per_meal_good`                | `meal.fiber > 8`                                                  | nutrition    | product_added              |
| `variety_meal_good`                  | `meal.items.length >= 4`                                          | nutrition    | product_added              |
| `late_first_meal`                    | `firstMeal.time >= '12:00' && hour >= 13`                         | lifestyle    | tab_open                   |
| **Phase 2: Day-quality**             |                                                                   |              |                            |
| `trans_free_day`                     | `dayTot.trans === 0 && mealCount >= 2`                            | achievement  | tab_open                   |
| `sugar_low_day`                      | `dayTot.simple < 25 && mealCount >= 2`                            | achievement  | tab_open                   |
| `super_hydration`                    | `waterMl >= 2500`                                                 | hydration    | tab_open                   |
| `variety_day_good`                   | `uniqueProducts >= 10`                                            | nutrition    | tab_open                   |
| `deficit_on_track`                   | `kcalPct 0.85-0.95 && deficitPct > 0`                             | lifestyle    | tab_open                   |
| `weekend_relax`                      | `(–°–± –∏–ª–∏ –í—Å) && kcalPct 1.1-1.3`                                  | lifestyle    | tab_open                   |
| **Phase 2: Timing & Patterns**       |                                                                   |              |                            |
| `fasting_window_good`                | `gap —É–∂–∏–Ω‚Üí–∑–∞–≤—Ç—Ä–∞–∫ >= 14h`                                         | timing       | tab_open                   |
| `long_fast_warning`                  | `gap –º–µ–∂–¥—É –ø—Ä–∏—ë–º–∞–º–∏ > 7h && hour 10-18`                           | timing       | tab_open                   |
| `meal_spacing_perfect`               | `–≤—Å–µ gaps 3-5 —á–∞—Å–æ–≤ && meals >= 3`                                | timing       | tab_open                   |
| `training_recovery_window`           | `30-60 –º–∏–Ω –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏`                                      | training     | tab_open                   |
| `sleep_debt_accumulating`            | `3 –¥–Ω—è < 6 —á–∞—Å–æ–≤ —Å–Ω–∞`                                             | sleep        | tab_open                   |
| `stress_eating_detected`             | `avgStress >= 4 && kcalPct > 1.15`                                | correlation  | tab_open                   |
| **Phase 2: Milestones**              |                                                                   |              |                            |
| `weight_trend_down`                  | `7-day trend < -0.3kg/week`                                       | correlation  | tab_open                   |
| `weight_trend_up`                    | `7-day trend > +0.5kg/week`                                       | correlation  | tab_open                   |
| `weight_forecast_on_track`           | –ü–æ –ø—Ä–æ–≥–Ω–æ–∑—É —Ü–µ–ª—å –¥–æ—Å—Ç–∏–∂–∏–º–∞                                        | weight       | tab_open                   |
| `weight_forecast_slow`               | –¢–µ–º–ø –º–µ–¥–ª–µ–Ω–Ω—ã–π >1 –≥–æ–¥ –¥–æ —Ü–µ–ª–∏                                     | weight       | tab_open                   |
| `weight_forecast_wrong_direction`    | –í–µ—Å –∏–¥—ë—Ç –æ—Ç —Ü–µ–ª–∏                                                  | weight       | tab_open                   |
| `weight_almost_there`                | –î–æ —Ü–µ–ª–∏ <2–∫–≥                                                      | weight       | tab_open                   |
| `milestone_7_days`                   | `totalDaysTracked === 7`                                          | achievement  | tab_open                   |
| `milestone_30_days`                  | `totalDaysTracked === 30`                                         | achievement  | tab_open                   |
| `milestone_100_days`                 | `totalDaysTracked === 100`                                        | achievement  | tab_open                   |
| `new_record_streak`                  | `currentStreak === personalBestStreak`                            | achievement  | tab_open                   |
| `first_training_ever`                | –ø–µ—Ä–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏                                       | achievement  | tab_open                   |
| **Meal Quality Score —Å–æ–≤–µ—Ç—ã**        |                                                                   |              |                            |
| `meal_quality_excellent`             | Score ‚â• 85                                                        | nutrition    | product_added              |
| `meal_quality_good`                  | Score 70-84                                                       | nutrition    | product_added              |
| `meal_quality_poor`                  | Score < 50                                                        | nutrition    | product_added              |
| `meal_quality_improving`             | –°—Ä–µ–¥–Ω–∏–π score —Å–µ–≥–æ–¥–Ω—è > –≤—á–µ—Ä–∞ +10                                 | nutrition    | tab_open                   |
| **Supplements —Å–æ–≤–µ—Ç—ã**               |                                                                   |              |                            |
| `supplements_all_taken`              | –í—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏ –ø—Ä–∏–Ω—è—Ç—ã                               | supplements  | tab_open                   |
| `supplements_coffee_minerals`        | –ö–æ—Ñ–µ + –º–∏–Ω–µ—Ä–∞–ª—ã (–∫–æ—Ñ–µ–∏–Ω —É—Ö—É–¥—à–∞–µ—Ç —É—Å–≤–æ–µ–Ω–∏–µ Ca/Fe/Mg)               | supplements  | product_added              |
| `supplements_dairy_iron_conflict`    | –ú–æ–ª–æ—á–Ω—ã–µ + –∂–µ–ª–µ–∑–æ (Ca –±–ª–æ–∫–∏—Ä—É–µ—Ç Fe)                               | supplements  | product_added              |
| `supplements_fat_meal_synergy`       | –ñ–∏—Ä–æ—Ä–∞—Å—Ç–≤–æ—Ä–∏–º—ã–µ –≤–∏—Ç–∞–º–∏–Ω—ã (A/D/E/K) + –∂–∏—Ä–Ω–∞—è –µ–¥–∞ = –ª—É—á—à–µ —É—Å–≤–æ–µ–Ω–∏–µ  | supplements  | product_added              |
| `supplements_iron_vitc_synergy`      | –ñ–µ–ª–µ–∑–æ + –≤–∏—Ç–∞–º–∏–Ω C = —Å–∏–Ω–µ—Ä–≥–∏—è —É—Å–≤–æ–µ–Ω–∏—è                            | supplements  | product_added              |
| `supplements_personal_rec`           | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –¥–µ—Ñ–∏—Ü–∏—Ç—É –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤           | supplements  | tab_open                   |
| `supplements_streak`                 | –°–µ—Ä–∏—è –¥–Ω–µ–π —Å –ø—Ä–∏—ë–º–æ–º –¥–æ–±–∞–≤–æ–∫                                      | supplements  | tab_open                   |
| `supplements_morning_reminder`       | –£—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –¥–æ–±–∞–≤–∫–∞—Ö                                   | supplements  | tab_open, checkin_complete |
| **Caloric Debt —Å–æ–≤–µ—Ç—ã**              |                                                                   |              |                            |
| `caloric_debt_info`                  | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–º –∫–∞–ª–æ—Ä–∏–π–Ω–æ–º –¥–æ–ª–≥–µ                         | nutrition    | tab_open                   |
| `caloric_debt_high`                  | –í—ã—Å–æ–∫–∏–π –∫–∞–ª–æ—Ä–∏–π–Ω—ã–π –¥–æ–ª–≥ (>500 –∫–∫–∞–ª)                               | nutrition    | tab_open                   |
| `caloric_debt_repaid`                | –ö–∞–ª–æ—Ä–∏–π–Ω—ã–π –¥–æ–ª–≥ –ø–æ–≥–∞—à–µ–Ω                                           | achievement  | tab_open                   |
| **Protein Debt —Å–æ–≤–µ—Ç—ã**              |                                                                   |              |                            |
| `protein_debt_mild`                  | –õ—ë–≥–∫–∏–π –±–µ–ª–∫–æ–≤—ã–π –¥–æ–ª–≥ (1-2 –¥–Ω—è <80%)                               | nutrition    | tab_open                   |
| `protein_debt_moderate`              | –°—Ä–µ–¥–Ω–∏–π –±–µ–ª–∫–æ–≤—ã–π –¥–æ–ª–≥ (3+ –¥–Ω–µ–π <80%)                              | nutrition    | tab_open                   |
| `protein_debt_critical`              | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–µ–ª–∫–æ–≤—ã–π –¥–æ–ª–≥ (5+ –¥–Ω–µ–π <60%)                          | nutrition    | tab_open                   |
| **Excess Compensation —Å–æ–≤–µ—Ç—ã**       |                                                                   |              |                            |
| `excess_activity_recommended`        | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –ø–µ—Ä–µ–±–æ—Ä–∞                  | activity     | tab_open                   |
| `excess_compensated_by_steps`        | –ü–µ—Ä–µ–±–æ—Ä —Å–∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞–Ω —à–∞–≥–∞–º–∏                                     | activity     | tab_open                   |
| `excess_soft_correction`             | –ú—è–≥–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–µ—Ä–µ–±–æ—Ä–∞ —á–µ—Ä–µ–∑ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏—ë–º—ã                  | nutrition    | tab_open                   |
| **Training Nutrition —Å–æ–≤–µ—Ç—ã**        |                                                                   |              |                            |
| `training_cardio_undereating`        | –ö–∞—Ä–¥–∏–æ + –Ω–µ–¥–æ–±–æ—Ä –∫–∞–ª–æ—Ä–∏–π                                          | training     | tab_open                   |
| `training_high_intensity_nutrition`  | –í—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∏—Ç–∞–Ω–∏—é             | training     | tab_open, product_added    |
| `training_strength_undereating`      | –°–∏–ª–æ–≤–∞—è + –Ω–µ–¥–æ–±–æ—Ä –∫–∞–ª–æ—Ä–∏–π (–ø–æ—Ç–µ—Ä—è –º—ã—à—Ü)                           | training     | tab_open                   |
| **Lipolysis —Å–æ–≤–µ—Ç—ã**                 |                                                                   |              |                            |
| `frequent_eating_no_lipolysis`       | –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—ë–º—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –ª–∏–ø–æ–ª–∏–∑                                   | timing       | product_added              |
| `lipolysis_going_strong`             | –ê–∫—Ç–∏–≤–Ω—ã–π –ª–∏–ø–æ–ª–∏–∑ (–¥–ª–∏–Ω–Ω–æ–µ –æ–∫–Ω–æ –±–µ–∑ –µ–¥—ã)                           | timing       | tab_open                   |
| **Insulin Wave —Å–æ–≤–µ—Ç—ã**              |                                                                   |              |                            |
| `high_gi_during_wave`                | –í—ã—Å–æ–∫–∏–π –ì–ò –ø—Ä–æ–¥—É–∫—Ç –≤–æ –≤—Ä–µ–º—è –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã                     | timing       | product_added              |
| `low_gi_during_wave`                 | –ù–∏–∑–∫–∏–π –ì–ò ‚Äî —Ö–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä –≤–æ –≤—Ä–µ–º—è –≤–æ–ª–Ω—ã                          | timing       | product_added              |
| **Circadian —Å–æ–≤–µ—Ç—ã**                 |                                                                   |              |                            |
| `circadian_evening_urgent`           | –ü–æ–∑–¥–Ω–∏–π –≤–µ—á–µ—Ä + –Ω–µ–¥–æ–±–æ—Ä = —Å—Ä–æ—á–Ω–æ –¥–æ–µ—Å—Ç—å                           | timing       | tab_open                   |
| `circadian_morning_calm`             | –£—Ç—Ä–æ: —Å–ø–æ–∫–æ–π–Ω—ã–π —Å—Ç–∞—Ä—Ç, –Ω–µ —Å–ø–µ—à–∏ —Å –µ–¥–æ–π                            | timing       | tab_open                   |
| **Body Measurements —Å–æ–≤–µ—Ç—ã**         |                                                                   |              |                            |
| `first_measurement`                  | –ü–µ—Ä–≤—ã–π –∑–∞–º–µ—Ä —Ç–µ–ª–∞ —Å–¥–µ–ª–∞–Ω                                          | achievement  | tab_open                   |
| `measure_reminder`                   | –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–º–µ—Ä–∞—Ö —Ç–µ–ª–∞ (–ø—Ä–æ—à–ª–æ 7+ –¥–Ω–µ–π)                       | lifestyle    | tab_open                   |
| `waist_down_progress`                | –¢–∞–ª–∏—è —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å!                                     | achievement  | tab_open                   |
| `weight_waist_correlation`           | –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –≤–µ—Å–∞ –∏ –æ–±—Ö–≤–∞—Ç–∞ —Ç–∞–ª–∏–∏                                   | correlation  | tab_open                   |
| `biceps_growing`                     | –ë–∏—Ü–µ–ø—Å —Ä–∞—Å—Ç—ë—Ç (–ø—Ä–∏ —Å–∏–ª–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö)                           | achievement  | tab_open                   |
| **Weekly Analytics —Å–æ–≤–µ—Ç—ã**          |                                                                   |              |                            |
| `weekly_comparison`                  | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–µ–π (–ª—É—á—à–µ/—Ö—É–∂–µ)                          | analytics    | tab_open                   |
| `weekly_summary`                     | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ (—Å—Ä–µ–¥–Ω–∏–µ kcal, –º–∞–∫—Ä–æ—Å—ã, —à–∞–≥–∏)                 | analytics    | tab_open                   |
| **Missing Nutrients —Å–æ–≤–µ—Ç—ã**         |                                                                   |              |                            |
| `missing_dairy`                      | –ù–µ—Ç –º–æ–ª–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ 3+ –¥–Ω—è (–∫–∞–ª—å—Ü–∏–π)                           | nutrition    | tab_open                   |
| `missing_vegetables`                 | –ù–µ—Ç –æ–≤–æ—â–µ–π 2+ –¥–Ω—è (–∫–ª–µ—Ç—á–∞—Ç–∫–∞, –≤–∏—Ç–∞–º–∏–Ω—ã)                           | nutrition    | tab_open                   |
| **Misc –Ω–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã**                |                                                                   |              |                            |
| `day_forecast`                       | –ü—Ä–æ–≥–Ω–æ–∑ –¥–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö                             | analytics    | checkin_complete           |
| `smart_recommendation`               | –£–º–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ PI –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤                         | analytics    | tab_open                   |
| `emotional_risk_high`                | –í—ã—Å–æ–∫–∏–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ (—Å—Ç—Ä–µ—Å—Å + –ø–ª–æ—Ö–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ)           | emotional    | tab_open                   |
| `stress_undereating_warning`         | –°—Ç—Ä–µ—Å—Å + –Ω–µ–¥–æ–±–æ—Ä = —Ä–∏—Å–∫ —Å—Ä—ã–≤–∞                                     | emotional    | tab_open                   |
| `bmi_underweight_warning`            | BMI < 18.5: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–¥–æ–≤–µ—Å–µ                             | health       | tab_open                   |
| `streak_hint`                        | –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ —Å–µ—Ä–∏–∏ (–±–ª–∏–∑–æ–∫ –∫ —Ä–µ–∫–æ—Ä–¥—É)                              | motivation   | tab_open                   |

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è               | –ò—Å—Ç–æ—á–Ω–∏–∫                | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| ------------------------ | ----------------------- | ------------------------------------ |
| `dayTot.prot`            | DayTab                  | –°—É–º–º–∞ –±–µ–ª–∫–∞ –∑–∞ –¥–µ–Ω—å                  |
| `dayTot.gi`              | DayTab                  | –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –ì–ò                  |
| `dayTot.harm`            | DayTab                  | –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π Harm Score (0-10)   |
| `dayTot.trans`           | DayTab                  | –°—É–º–º–∞ —Ç—Ä–∞–Ω—Å-–∂–∏—Ä–æ–≤ –∑–∞ –¥–µ–Ω—å (–≥)        |
| `normAbs.prot`           | DayTab                  | –ù–æ—Ä–º–∞ –±–µ–ª–∫–∞ –≤ –≥—Ä–∞–º–º–∞—Ö                |
| `kcalPct`                | `dayTot.kcal / optimum` | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏              |
| `prof.gender`            | heys_profile            | `'–ñ–µ–Ω—Å–∫–∏–π'` / `'–ú—É–∂—Å–∫–æ–π'`            |
| `prof.age`               | heys_profile            | –í–æ–∑—Ä–∞—Å—Ç                              |
| `prof.sleepHours`        | heys_profile            | –ù–æ—Ä–º–∞ —Å–Ω–∞                            |
| `prof.insulinWaveHours`  | heys_profile            | –ü–µ—Ä–∏–æ–¥ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã             |
| `waterGoal`              | waterGoalBreakdown      | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞ –≤–æ–¥—ã              |
| `pIndex.byId.get()`      | buildProductIndex       | –ò–Ω–¥–µ–∫—Å –ø—Ä–æ–¥—É–∫—Ç–æ–≤                     |
| `day.householdMin`       | DayRecord               | –ú–∏–Ω—É—Ç—ã –¥–æ–º–∞—à–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏           |
| `day.householdTime`      | DayRecord               | –í—Ä–µ–º—è –±—ã—Ç–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (HH:MM)     |
| `day.steps`              | DayRecord               | –®–∞–≥–∏ –∑–∞ –¥–µ–Ω—å                         |
| `day.sleepStart`         | DayRecord               | –í—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è (HH:MM) –∏–∑ —á–µ–∫-–∏–Ω–∞   |
| `day.sleepQuality`       | DayRecord               | –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ (1-5)                   |
| `day.trainings[].type`   | Training                | –¢–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏                       |
| `currentStreak`          | DayTab (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è)    | –î–Ω–µ–π –ø–æ–¥—Ä—è–¥ –≤ –Ω–æ—Ä–º–µ                  |
| `getAverageBedtime()`    | Advice helpers          | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è –∑–∞ 14 –¥–Ω–µ–π   |
| `getHoursUntilBedtime()` | Advice helpers          | –ß–∞—Å–æ–≤ –¥–æ —Å–Ω–∞ (–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏–ª–∏ —Ä–∞—Å—á—ë—Ç) |

---

## üîÆ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

–î–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ –º–æ–¥–µ–ª–∏, –Ω–æ —Å–æ–≤–µ—Ç—ã –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏—Ö:

| ID                 | –î–∞–Ω–Ω—ã–µ             | –£—Å–ª–æ–≤–∏–µ                      | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
| ------------------ | ------------------ | ---------------------------- | -------------------------------------------------- |
| `category_variety` | `Product.category` | –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ | –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–µ category) |
| `weekday_pattern`  | –ò—Å—Ç–æ—Ä–∏—è 28 –¥–Ω–µ–π    | –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏      | –¢—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö                               |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è `category_variety` –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `category`
> –≤ –º–æ–¥–µ–ª—å Product.

---

## localStorage –∫–ª—é—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª—é—á–∏ –¥–∞–Ω–Ω—ã—Ö

| –ö–ª—é—á                  | –û–ø–∏—Å–∞–Ω–∏–µ             | Namespace     | –§–∞–π–ª               |
| --------------------- | -------------------- | ------------- | ------------------ |
| `heys_dayv2_{date}`   | –î–∞–Ω–Ω—ã–µ –¥–Ω—è           | ‚úÖ clientId   | `heys_day_v12.js`  |
| `heys_products`       | –ë–∞–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤       | ‚úÖ clientId   | `heys_core_v12.js` |
| `heys_profile`        | –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ clientId   | `heys_user_v12.js` |
| `heys_norms`          | –ù–æ—Ä–º—ã –ø–∏—Ç–∞–Ω–∏—è        | ‚úÖ clientId   | `heys_user_v12.js` |
| `heys_hr_zones`       | –ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã       | ‚úÖ clientId   | `heys_user_v12.js` |
| `heys_client_current` | –¢–µ–∫—É—â–∏–π –∫–ª–∏–µ–Ω—Ç       | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_app_v12.js`  |

### Insights —Å–∏—Å—Ç–µ–º—ã

| –ö–ª—é—á                         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                  | Namespace   | –§–∞–π–ª                          |
| ---------------------------- | ------------------------------------------------------------------------- | ----------- | ----------------------------- |
| `heys_ews_weekly_v1`         | EWS Weekly Progress (4 –Ω–µ–¥–µ–ª–∏ —Å–Ω–∞–ø—à–æ—Ç–æ–≤)                                  | ‚úÖ clientId | `pi_early_warning.js`         |
| `heys_game`                  | –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ (XP, —É—Ä–æ–≤–µ–Ω—å, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)                          | ‚úÖ clientId | `heys_gamification_v1.js`     |
| `heys_portion_history`       | –ò—Å—Ç–æ—Ä–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ—Ä—Ü–∏–π (–¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏)                               | ‚úÖ clientId | `heys_core_v12.js`            |
| `heys_pending_client_queue`  | –û—á–µ—Ä–µ–¥—å –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–∏–Ω–∫–æ–≤ (retry –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏)                | ‚úÖ clientId | `heys_app_sync_effects_v1.js` |
| `heys_widget_layout_v1`      | Layout –≤–∏–¥–∂–µ—Ç–æ–≤ Dashboard ([—Å–º. APP_SYSTEMS](./APP_SYSTEMS_REFERENCE.md)) | ‚úÖ clientId | `heys_widgets_core_v1.js`     |
| `heys_widget_layout_meta_v1` | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ grid (–≤–µ—Ä—Å–∏—è, –¥–∞—Ç–∞)                                            | ‚úÖ clientId | `heys_widgets_core_v1.js`     |
| `heys_water_history`         | –ò—Å—Ç–æ—Ä–∏—è –≤–æ–¥—ã (compressed)                                                 | ‚úÖ clientId | `heys_day_hooks.js`           |
| `heys_grams_history`         | –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Ä—Ü–∏–π –≤ –≥—Ä–∞–º–º–∞—Ö (–∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞)                                | ‚úÖ clientId | `heys_core_v12.js`            |
| `heys_scheduled_advices`     | –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã/–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è                                        | ‚úÖ clientId | `heys_advice_bundle_v1.js`    |

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–µ—Å—Å–∏—è

| –ö–ª—é—á                       | –û–ø–∏—Å–∞–Ω–∏–µ                                                        | Namespace     | –§–∞–π–ª              |
| -------------------------- | --------------------------------------------------------------- | ------------- | ----------------- |
| `heys_pin_auth_client`     | ID –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ PIN-–≤—Ö–æ–¥–µ                                        | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_auth_v1.js` |
| `heys_session_token`       | Session token PIN-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (JWT, –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ—Å–ª–µ v55)      | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_auth_v1.js` |
| `heys_curator_session`     | JWT —Ç–æ–∫–µ–Ω –∫—É—Ä–∞—Ç–æ—Ä–∞ ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è `isCuratorSession()`   | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_auth_v1.js` |
| `heys_supabase_auth_token` | Legacy supabase token (fallback –¥–ª—è curator-—Å–µ—Å—Å–∏–∏, –∫ —É–¥–∞–ª–µ–Ω–∏—é) | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_auth_v1.js` |
| `heys_auth_rate_limit_v1`  | Rate limiting –¥–ª—è PIN-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏                               | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_auth_v1.js` |

### –ü–æ–¥–ø–∏—Å–∫–∏ –∏ —Ç—Ä–∏–∞–ª

| –ö–ª—é—á                      | –û–ø–∏—Å–∞–Ω–∏–µ              | Namespace   | –§–∞–π–ª                     |
| ------------------------- | --------------------- | ----------- | ------------------------ |
| `heys_trial_queue_status` | –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ —Ç—Ä–∏–∞–ª–∞ | ‚úÖ clientId | `heys_trial_queue_v1.js` |
| `heys_trial_capacity`     | –ö—ç—à —ë–º–∫–æ—Å—Ç–∏ —Ç—Ä–∏–∞–ª–∞    | ‚úÖ clientId | `heys_trial_queue_v1.js` |

### UI –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥

| –ö–ª—é—á                            | –û–ø–∏—Å–∞–Ω–∏–µ                                        | Namespace     | –§–∞–π–ª                       |
| ------------------------------- | ----------------------------------------------- | ------------- | -------------------------- |
| `heys_widgets_tour_completed`   | –°—Ç–∞—Ç—É—Å —Ç—É—Ä–∞ –ø–æ –≤–∏–¥–∂–µ—Ç–∞–º                         | ‚úÖ clientId   | `heys_ui_onboarding_v1.js` |
| `heys_consents_{clientId}`      | –°–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                           | ‚úÖ clientId   | `heys_consents_v1.js`      |
| `heys_registration_in_progress` | –§–ª–∞–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (guard –ø—Ä–æ—Ç–∏–≤ –¥—É–±–ª–µ–π) | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_auth_v1.js`          |

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

| –ö–ª—é—á                                | –û–ø–∏—Å–∞–Ω–∏–µ                                                 | Namespace     | –§–∞–π–ª                          |
| ----------------------------------- | -------------------------------------------------------- | ------------- | ----------------------------- |
| `heys_deleted_products_ignore_list` | –ò–≥–Ω–æ—Ä-–ª–∏—Å—Ç —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (v2 tombstones)           | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_day_utils.js`           |
| `heys_deleted_ids`                  | Tombstone IDs –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Store API) | ‚úÖ clientId   | `heys_app_sync_effects_v1.js` |

### –û—Ç–ª–∞–¥–∫–∞

| –ö–ª—é—á             | –û–ø–∏—Å–∞–Ω–∏–µ                                                          | Namespace     | –§–∞–π–ª                    |
| ---------------- | ----------------------------------------------------------------- | ------------- | ----------------------- |
| `heys_debug_api` | –í–∫–ª—é—á–∏—Ç—å debug-–ª–æ–≥–∏ API (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `'true'` –≤ DevTools) | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `heys_yandex_api_v1.js` |

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (sessionStorage)

| –ö–ª—é—á                         | –û–ø–∏—Å–∞–Ω–∏–µ                      | Namespace     | –§–∞–π–ª                        |
| ---------------------------- | ----------------------------- | ------------- | --------------------------- |
| `heys_session_cache_{key}`   | –ö—ç—à —Å–µ—Å—Å–∏–∏ (shared products)  | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | `advanced-cache-manager.ts` |
| `heys_shared_products_cache` | –ö—ç—à –æ–±—â–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (offline) | ‚ùå –≥–ª–æ–±–∞–ª—å–Ω—ã–π | Fallback –ø—Ä–∏ –æ—Ñ–ª–∞–π–Ω         |

**–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å localStorage:**

> ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û (v4.8.8)**: –í React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫
> localStorage —á–µ—Ä–µ–∑ `U.lsGet/U.lsSet`. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π **Store API**!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û v4.8.8+ (React):**

```javascript
// –ß–∏—Ç–∞–µ–º –ø—Ä–æ–¥—É–∫—Ç—ã —á–µ—Ä–µ–∑ Store API (handles scoping internally)
const products = window.HEYS?.products?.getAll?.() || [];

// –ü–∏—à–µ–º —á–µ—Ä–µ–∑ Store API (sync + localStorage + memory cache)
HEYS.products.setAll(newProducts);
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (broken in React):**

```javascript
// Bypasses scoping ‚Üí reads unscoped key ‚Üí empty array
const products = window.HEYS.utils.lsGet('heys_products', []);
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**

- Store API –ø–∏—à–µ—Ç –≤ scoped key: `heys_{clientId}_products`
- `U.lsGet('heys_products')` —á–∏—Ç–∞–µ—Ç unscoped key ‚Üí empty
- –†–µ–∑—É–ª—å—Ç–∞—Ç: React –≤–∏–¥–∏—Ç 42 –ø—Ä–æ–¥—É–∫—Ç–∞ –≤–º–µ—Å—Ç–æ 290 ‚Üí –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è

**Legacy code (–≤–Ω–µ React):**

1. **–ò—Å–ø–æ–ª—å–∑—É–π `U.lsSet()` / `U.lsGet()`** –¥–ª—è legacy sync logic ‚Äî –æ–Ω–∏
   –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç clientId prefix
2. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏** (‚ùå) ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è auth/session, –ù–ï –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
   –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **sessionStorage** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∞, –ù–ï –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –°–º. [STORE_API_QUICKREF.md](./STORE_API_QUICKREF.md) –¥–ª—è
–ø–æ–ª–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

---

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

| –û—à–∏–±–∫–∞                         | –ü—Ä–∞–≤–∏–ª—å–Ω–æ                                   |
| ------------------------------ | ------------------------------------------- |
| `dayTot.protein`               | `dayTot.prot` ‚ö†Ô∏è                            |
| `normAbs.protein`              | `normAbs.prot` ‚ö†Ô∏è                           |
| `item.category`                | `getProductFromItem(item, pIndex).category` |
| `heys_day_`                    | `heys_dayv2_` (v2!)                         |
| `localStorage.setItem()`       | `U.lsSet()` (legacy) / `Store API` (React)  |
| `utils.lsGet()` in React       | `products.getAll()` ‚ö†Ô∏è **v4.8.8 CRITICAL**  |
| `utils.lsGet('heys_products')` | `HEYS.products.getAll()` ‚ö†Ô∏è **BROKEN**      |

---

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ANCHOR STUBS ‚Äî –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
     –°–µ–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã, —ç—Ç–∏ —è–∫–æ—Ä—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç 404.
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

## –ü–µ—Ä–µ–º–µ—â—ë–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

### ‚Üí Caloric Debt (–ö–∞–ª–æ—Ä–∏–π–Ω—ã–π –¥–æ–ª–≥)

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤
> [DATA_MODEL_NUTRITION.md ‚Äî Caloric Debt](./DATA_MODEL_NUTRITION.md#-caloric-debt-–∫–∞–ª–æ—Ä–∏–π–Ω—ã–π-–¥–æ–ª–≥)

<!-- anchor for old links: #-caloric-debt-–∫–∞–ª–æ—Ä–∏–π–Ω—ã–π-–¥–æ–ª–≥ -->

<a name="-caloric-debt-–∫–∞–ª–æ—Ä–∏–π–Ω—ã–π-–¥–æ–ª–≥"></a>

---

### ‚Üí Harm Score v2

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤
> [DATA_MODEL_ANALYTICS.md ‚Äî Harm Score](./DATA_MODEL_ANALYTICS.md#-harm-score--–Ω–∞—É—á–Ω–∞—è-—Å–∏—Å—Ç–µ–º–∞-–æ—Ü–µ–Ω–∫–∏-–≤—Ä–µ–¥–Ω–æ—Å—Ç–∏-–ø—Ä–æ–¥—É–∫—Ç–æ–≤-0-10)

<!-- anchor for old links: #harm-score-v2 -->

<a name="harm-score-v2"></a>

---

### ‚Üí Predictive Insights

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤
> [DATA_MODEL_ANALYTICS.md ‚Äî Predictive Insights](./DATA_MODEL_ANALYTICS.md#-predictive-insights-v520--41-–Ω–∞—É—á–Ω—ã–π-–ø–∞—Ç—Ç–µ—Ä–Ω)

<a name="-predictive-insights-v520--41-–Ω–∞—É—á–Ω—ã–π-–ø–∞—Ç—Ç–µ—Ä–Ω"></a>

---

### ‚Üí –ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤
> [DATA_MODEL_NUTRITION.md ‚Äî –ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞](./DATA_MODEL_NUTRITION.md#-–∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è-–≤–æ–ª–Ω–∞-insulin-wave-module--—Å–≤–æ–¥–∫–∞)
> –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
> [INSULIN_WAVE_DOCUMENTATION.md](./INSULIN_WAVE_DOCUMENTATION.md)

<a name="–∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è-–≤–æ–ª–Ω–∞-insulin-wave-module"></a>

---

### ‚Üí Refeed Day

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤
> [DATA_MODEL_NUTRITION.md ‚Äî Refeed Day](./DATA_MODEL_NUTRITION.md#-refeed-day-–∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π-–¥–µ–Ω—å)

<a name="-refeed-day-–∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π-–¥–µ–Ω—å"></a>

---

### ‚Üí Status Score, Gamification, Phenotype, EWS

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤ [DATA_MODEL_ANALYTICS.md](./DATA_MODEL_ANALYTICS.md)

<a name="-status-score-—Å—Ç–∞—Ç—É—Å-–¥–Ω—è-0-100"></a>
<a name="-gamification-xp-—É—Ä–æ–≤–Ω–∏-–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è"></a>
<a name="-phenotype-–º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π-—Ñ–µ–Ω–æ—Ç–∏–ø"></a>
<a name="-early-warning-system-v42"></a>
<a name="-dynamic-priority-badge-v430"></a>

---

### ‚Üí Training Context, NDTE, TEF, TDEE

> ‚ö° **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ** –≤ [DATA_MODEL_NUTRITION.md](./DATA_MODEL_NUTRITION.md)

<a name="-training-context-v340"></a>
<a name="-ndte--next-day-training-effect-v360"></a>
<a name="-tef-thermic-effect-of-food"></a>
<a name="-tdee-total-daily-energy-expenditure"></a>
<a name="-meal-quality-score"></a>

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª                                | –û–ø–∏—Å–∞–Ω–∏–µ                                                               |
| ----------------------------------- | ---------------------------------------------------------------------- |
| `heys_models_v1.js`                 | –¢–∏–ø—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏                                        |
| `heys_day_v12.js`                   | Proxy ‚Üí DayTab (14 LOC)                                                |
| `heys_day_hooks.js`                 | React hooks –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –¥–Ω—è                                             |
| `heys_user_v12.js`                  | –ü—Ä–æ—Ñ–∏–ª—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏                                                    |
| `heys_core_v12.js`                  | –ü—Ä–æ–¥—É–∫—Ç—ã, –ø–æ–∏—Å–∫, —É—Ç–∏–ª–∏—Ç—ã                                               |
| `heys_advice_v1.js`                 | DEPRECATED shim (42 LOC) ‚Üí `advice/` modules                           |
| `heys_iw_*.js` (8 —Ñ–∞–π–ª–æ–≤)           | –ú–æ–¥—É–ª—å –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã (37 —Ñ–∞–∫—Ç–æ—Ä–æ–≤), —Å–º. DATA_MODEL_NUTRITION       |
| `heys_cycle_v1.js`                  | –ú–æ–¥—É–ª—å –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞                                            |
| `heys_status_v1.js`                 | –°—Ç–∞—Ç—É—Å –¥–Ω—è 0-100                                                       |
| `heys_gamification_v1.js`           | XP, —É—Ä–æ–≤–Ω–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è                                                 |
| `heys_phenotype_v1.js`              | –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π —Ñ–µ–Ω–æ—Ç–∏–ø                                                 |
| `heys_predictive_insights_v1.js`    | –ü—Ä–æ–≥–Ω–æ–∑—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä Insights)                             |
| `pi_early_warning.js`               | EWS v4.2 ‚Äî 25 warnings, Dual-Mode, Global Score, Phenotype             |
| `pi_causal_chains.js`               | Cross-Pattern Causal Chains (6 —Ü–µ–ø–æ—á–µ–∫)                                |
| `pi_constants.js`                   | Dynamic Priority Badge, SECTION_PRIORITY_RULES v4.3.0                  |
| `pi_whatif.js`                      | What-If Scenarios ‚Äî 10 action types                                    |
| `pi_feedback_loop.js`               | Feedback Loop ‚Äî EMA weight adjustment (Œ±=0.1)                          |
| `pi_outcome_modal.js`               | Outcome Modal ‚Äî UI —Å–±–æ—Ä–∞ feedback                                      |
| `pi_analytics_api.js`               | forecastEnergy() ‚Äî –ø—Ä–æ–≥–Ω–æ–∑ —ç–Ω–µ—Ä–≥–∏–∏ 24—á                                 |
| `pi_meal_recommender.js`            | Meal Recommender v3.0 ‚Äî 8-—Å—Ü–µ–Ω–∞—Ä–Ω—ã–π decision tree                      |
| `pi_product_picker.js`              | Product Picker ‚Äî 11-factor scoring                                     |
| `pi_meal_rec_patterns.js`           | 12 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–ª—è meal recommender (Phase A/B/C)                        |
| `pi_stats.js`                       | Advanced Confidence Layer v3.5.0 ‚Äî 27 —Ñ—É–Ω–∫—Ü–∏–π (131 —Ç–µ—Å—Ç)               |
| `pi_thresholds.js`                  | Adaptive Personalized Thresholds v2.0.0 (~1080 LOC)                    |
| `pi_patterns.js`                    | 22 –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (v4.0)                                        |
| `pi_advanced.js`                    | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã B1-B6 (v3.0)                                      |
| `pi_phenotype.js`                   | Insights EWS phenotype detection                                       |
| `pi_meal_planner.js`                | Meal Planner v1.4.0                                                    |
| `pi_meal_rec_feedback.js`           | Meal Recommendation Feedback v1.0                                      |
| `pi_ui_dashboard.js`                | Insights Dashboard UI v3.0.1                                           |
| `pi_ui_cards.js`                    | Insights Cards UI v3.0.2                                               |
| `pi_ui_meal_rec_card.js`            | Meal Recommendation Card UI                                            |
| `pi_ui_whatif_scenarios.js`         | What-If Scenarios UI v1.0                                              |
| `heys_cascade_card_v1.js`           | Cascade Card v1.2.1 ‚Äî —Ü–µ–ø–æ—á–∫–∞ —Ä–µ—à–µ–Ω–∏–π                                  |
| `heys_bootstrap_v1.js`              | App init, dependency management                                        |
| `heys_widgets_core_v1.js`           | Grid Engine, D&D, State Manager                                        |
| `heys_paywall_v1.js`                | Read-only gating + Paywall UI                                          |
| `heys_trial_queue_v1.js`            | Trial queue + –æ–Ω–±–æ—Ä–¥–∏–Ω–≥                                                |
| `heys_subscriptions_v1.js`          | –ü–æ–¥–ø–∏—Å–∫–∏ –∏ –ø–ª–∞—Ç–µ–∂–∏ –ÆKassa                                              |
| `heys_consents_v1.js`               | –ü–≠–ü, 152-–§–ó compliance                                                 |
| `heys_metabolic_intelligence_v1.js` | A/B —Ç–µ—Å—Ç—ã, Data Inventory                                              |
| `heys_simple_analytics.js`          | Performance tracking                                                   |
| `heys_data_overview_v1.js`          | –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö                                                   |
| `heys_refeed_v1.js`                 | –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ –¥–Ω–∏                                                        |
| `heys_tef_v1.js`                    | –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø–∏—â–∏                                                |
| `heys_tdee_v1.js`                   | –û–±—â–∏–π —Ä–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏                                                   |
| `heys_supplements_v1.js`            | –ö–∞—Ç–∞–ª–æ–≥ –¥–æ–±–∞–≤–æ–∫, —Ç–∞–π–º–∏–Ω–≥, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è                               |
| `heys_supplements_science_v1.js`    | –ë–∏–æ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, —Ñ–æ—Ä–º—ã, –º–∞—Ä–∫–µ—Ä—ã                                         |
| `heys_status_v1.js`                 | Status Score 0-100 ([—Å–º. SCORING_REFERENCE](./SCORING_REFERENCE.md))   |
| `heys_cascade_card_v1.js`           | CRS v7, Cascade Card ([—Å–º. SCORING_REFERENCE](./SCORING_REFERENCE.md)) |
| `heys_widgets_core_v1.js`           | Widget Dashboard ([—Å–º. APP_SYSTEMS](./APP_SYSTEMS_REFERENCE.md))       |
| `heys_cloud_merge_v1.js`            | Cloud merge logic ([—Å–º. APP_SYSTEMS](./APP_SYSTEMS_REFERENCE.md))      |
| `heys_trial_queue_v1.js`            | Trial Queue ([—Å–º. APP_SYSTEMS](./APP_SYSTEMS_REFERENCE.md))            |

---

## Changelog

> üìã –ï–¥–∏–Ω—ã–π changelog –≤—ã–Ω–µ—Å–µ–Ω –≤
> [`CHANGELOG_DATA_MODEL.md`](./CHANGELOG_DATA_MODEL.md). –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
> –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª.
