# üî¨ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã

**–î–∞—Ç–∞**: 2025-12-10  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° –°—Ä–µ–¥–Ω–∏–π  
**–í—Ä–µ–º—è**: ~2-2.5 —á–∞—Å–∞  
**–ò—Å—Ç–æ—á–Ω–∏–∫**: –ù–∞—É—á–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ ChatGPT (docs/–ù–∞—É—á–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—É–ª–∏–Ω–∞.docx)  
**–ê—É–¥–∏—Ç**: ‚úÖ 2025-12-10 (–≥–ª—É–±–æ–∫–∏–π –Ω–∞—É—á–Ω—ã–π –∞—É–¥–∏—Ç)

---

## Phase 0 ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–î–æ –Ω–∞—á–∞–ª–∞:**
- [ ] `git status` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ë—ç–∫–∞–ø: `cp apps/web/heys_insulin_wave_v1.js apps/web/heys_insulin_wave_v1.backup2.js`
- [ ] –ë—ç–∫–∞–ø UI: `cp apps/web/heys_day_v12.js apps/web/heys_day_v12.backup.js`
- [ ] –°–∫—Ä–∏–Ω—à–æ—Ç —Ç–µ–∫—É—â–µ–≥–æ UI –≤–æ–ª–Ω—ã (—Ä–∞—Å–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É)
- [ ] `pnpm dev` —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤–æ–ª–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] DevTools –æ—Ç–∫—Ä—ã—Ç—ã (Console + Elements)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º—ë–Ω —Ñ—É–Ω–∫—Ü–∏–π:**
- [ ] `calculateMultiplier()` (—Å—Ç—Ä–æ–∫–∞ ~1562), –ù–ï `calculateMealMultiplier()`
- [ ] `isLiquidFood(prod)` (—Å—Ç—Ä–æ–∫–∞ ~1111)
- [ ] `calculateInsulinWaveData()` (—Å—Ç—Ä–æ–∫–∞ ~1960) ‚Äî –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- [ ] UI –≤–æ–ª–Ω—ã: inline –≤ DayPage (—Å—Ç—Ä–æ–∫–∏ 13538-13920), –ù–ï –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç:**
- [ ] `FOOD_FORM_BONUS.liquid.multiplier` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] `FOOD_FORM_BONUS.liquidPatterns` ‚Äî –º–∞—Å—Å–∏–≤ RegExp
- [ ] `RESISTANT_STARCH_BONUS.cooled` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç  
- [ ] `RESISTANT_STARCH_BONUS.patterns` ‚Äî –º–∞—Å—Å–∏–≤ RegExp
- [ ] `LIPOLYSIS_THRESHOLDS.full/partial/suppressed/blocked` —Å—É—â–µ—Å—Ç–≤—É—é—Ç

### üö® –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–µ—Ä—ã

| –ë–ª–æ–∫–µ—Ä | –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|--------|---------------|-----------|
| `FOOD_FORM_BONUS` –Ω–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ | `console.log(FOOD_FORM_BONUS)` | –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Å–∏–≤—ã `liquidPatterns`, `processedPatterns`, `wholePatterns` |
| `calculateMultiplier` –∏–º–µ–µ—Ç –¥—Ä—É–≥—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É | –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É 1562 | –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —Å default |
| UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–Ω–µ—Å–µ–Ω | –ò—Å–∫–∞—Ç—å `InsulinWaveCard` | –†–∞–±–æ—Ç–∞—Ç—å —Å inline –∫–æ–¥–æ–º |
| `progress` –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ UI | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `insulinWaveData` | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç |

### üî¨ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—É—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤ –∫–æ–¥–µ:
- [ ] `FIBER_BONUS` –∏–º–µ–µ—Ç **–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ** –∑–Ω–∞—á–µ–Ω–∏—è (-0.08, -0.15, -0.20)
- [ ] `PROTEIN_BONUS` –∏–º–µ–µ—Ç –ø–æ—Ä–æ–≥–∏ 20–≥/35–≥/50–≥
- [ ] `AGE_BONUS` –∏–º–µ–µ—Ç –ø–æ—Ä–æ–≥ 70+ –ª–µ—Ç (+40%)
- [ ] `LIQUID_FOOD.peakMultiplier` = 1.30-1.35

**–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ü–ï–†–ï–î —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π!**

---

## üî¨ –ù–∞—É—á–Ω—ã–π –∞—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏ (v3.1.0)

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ü–†–ê–í–ò–õ–¨–ù–û

| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –ù–∞—É—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ |
|-----------|------------|------------------|
| **GL –∫–∞–∫ –≥–ª–∞–≤–Ω—ã–π –ø—Ä–µ–¥–∏–∫—Ç–æ—Ä** | Continuous GL curve (0.15-1.30) | Brand-Miller 2003 ‚úÖ |
| **GI –ø–æ —É–≥–ª–µ–≤–æ–¥–∞–º** | `weightedGI += gi * itemCarbs` | Wolever 1994 ‚úÖ |
| **GL-—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ü—Ä–∏ GL<20 –≤—Å–µ —Ñ–∞–∫—Ç–æ—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ | Mayer 1995 ‚úÖ |
| **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞** | –í–æ–∑—Ä–∞—Å—Ç/BMI/–ø–æ–ª –≤–ª–∏—è—é—Ç –Ω–∞ –±–∞–∑—É | DeFronzo 1979, Nuutila 1995 ‚úÖ |
| **Meal Stacking** | –ü–µ—Ä–µ—Ö–ª—ë—Å—Ç –≤–æ–ª–Ω —É–¥–ª–∏–Ω—è–µ—Ç –Ω–æ–≤—É—é –≤–æ–ª–Ω—É | Wolever 2006 ‚úÖ |
| **–¶–∏—Ä–∫–∞–¥–Ω—ã–µ —Ä–∏—Ç–º—ã** | –£—Ç—Ä–æ √ó0.9, –≤–µ—á–µ—Ä √ó1.1, –Ω–æ—á—å √ó1.2 | Van Cauter 1997 ‚úÖ |
| **–ü–æ—Å—Ç–ø—Ä–∞–Ω–¥–∏–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –µ–¥—ã -10-25% | Colberg 2010 ‚úÖ |
| **–ö–ª–µ—Ç—á–∞—Ç–∫–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞** | –¢–µ–ø–µ—Ä—å —É–º–µ–Ω—å—à–∞–µ—Ç –≤–æ–ª–Ω—É (-8% –¥–æ -20%) | Wolever 1991 ‚úÖ |
| **–ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å** | –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã √ó2.5-3.0 –∫ GL | Holt 1997 ‚úÖ |

### ‚ö†Ô∏è –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

| –ü—Ä–æ–±–ª–µ–º–∞ | –¢–µ–∫—É—â–µ–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|----------|---------|--------------|----------|
| **–ë–µ–ª–æ–∫ + —É–≥–ª–µ–≤–æ–¥—ã —Å–∏–Ω–µ—Ä–≥–∏—è** | –ë–µ–ª–æ–∫ –ø—Ä–æ—Å—Ç–æ +8-25% | –°–∏–Ω–µ—Ä–≥–∏—è –±–µ–ª–æ–∫√ó—É–≥–ª–µ–≤–æ–¥—ã = +20-40% AUC | Nuttall 1984 |
| **Biphasic insulin** | –û–¥–Ω–∞ –≤–æ–ª–Ω–∞ | –î–≤–∞ –ø–∏–∫–∞ (1—è —Ñ–∞–∑–∞ 15–º–∏–Ω, 2—è 30-120–º–∏–Ω) | Floyd 1966 |
| **Resistant starch** | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –µ—Å—Ç—å, –ª–æ–≥–∏–∫–∞ –Ω–µ—Ç | ‚úÖ –†–µ–∞–ª–∏–∑—É–µ–º –≤ —ç—Ç–æ–º –ø—Ä–æ–º–ø—Ç–µ (-15%) | Robertson 2005 |
| **Food form** | –¢–æ–ª—å–∫–æ `hasLiquid` bool | ‚úÖ –†–µ–∞–ª–∏–∑—É–µ–º —Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ | Flood-Obbagy 2009 |
| **Second meal effect** | Meal Stacking (–ø–µ—Ä–µ—Ö–ª—ë—Å—Ç) | –î–æ–±–∞–≤–∏—Ç—å "–±–ª–∞–≥–æ–¥–∞—Ä—è –∑–∞–≤—Ç—Ä–∞–∫—É" –±–æ–Ω—É—Å | Wolever 2006 |

### üî¨ –ö–ª—é—á–µ–≤—ã–µ —Ü–∏—Ç–∞—Ç—ã –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

> "–ö–ª–µ—Ç—á–∞—Ç–∫–∞: –ø–∏–∫ –Ω–∏–∂–µ, –≤–æ–ª–Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–µ–µ –Ω–æ —Å–≥–ª–∞–∂–µ–Ω–∞ (–∏–Ω—Å—É–ª–∏–Ω‚Üì ~20‚Äì30% –∏ AUC‚Üì)"  
> ‚Äî –¢–∞–±–ª–∏—Ü–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤, —Å—Ç—Ä–æ–∫–∞ 2

> "—É–≥–ª–µ–≤–æ–¥—ã –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –¥–∞–ª–∏ ‚Üì –∏–Ω—Å—É–ª–∏–Ω–∞ –Ω–∞ ~20‚Äì40% –≤ –ø–µ—Ä–≤—ã–µ 2 —á"  
> ‚Äî Shukla 2015

> "–ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∏–Ω—Å—É–ª–∏–Ω–∞ –¥–æ ~15‚Äì20 ¬µ–ï–¥/–º–ª –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç ~50%-–Ω–æ–µ —É–≥–Ω–µ—Ç–µ–Ω–∏–µ –ª–∏–ø–æ–ª–∏–∑–∞"  
> ‚Äî Jensen 1989, Campbell 1992

> "–ñ–∏–¥–∫–∏–µ –∫–∞–ª–æ—Ä–∏–∏ (—Å–æ–∫, —Å–º—É–∑–∏) –¥–∞—é—Ç –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –∏ –≤—ã—Å–æ–∫–∏–π –æ—Ç–≤–µ—Ç"  
> ‚Äî Flood-Obbagy 2009

### üìä –§–æ—Ä–º—É–ª–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞—Å—á—ë—Ç–∞

```
adjustedWaveHours = effectiveBaseWaveHours √ó finalMultiplier

–≥–¥–µ:
  effectiveBaseWaveHours = personalBaseline √ó glScaleFactor
  finalMultiplier = (multipliers.total + allBonuses) √ó scaledCircadian √ó spicyMultiplier
  
  multipliers.total = (giMult + proteinBonus + fiberBonus + fatBonus + insBonus) √ó carbsMult √ó liquidMult
  allBonuses = activityBonuses + metabolicBonuses + personalBonuses + mealStackingBonus
```

### ‚úÖ –ù–∞—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å: 85%

–ú–æ–¥–µ–ª—å —É—á–∏—Ç—ã–≤–∞–µ—Ç 29 —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –Ω–∞—É—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º. –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è: –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É –ø–∏—â–∏, resistant starch –∏ UI –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é.

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ù–∞ –æ—Å–Ω–æ–≤–µ –≥–ª—É–±–æ–∫–æ–≥–æ –Ω–∞—É—á–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è ChatGPT –≤ –∫–æ–¥–µ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã **–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –Ω–æ **–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è** –µ—â—ë –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.

### –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ (v3.1.0):
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã: `MEAL_ORDER_BONUS`, `FOOD_FORM_BONUS`, `RESISTANT_STARCH_BONUS`
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã: `LIPOLYSIS_THRESHOLDS`, `REACTIVE_HYPOGLYCEMIA`
- ‚úÖ –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã: `PROTEIN_BONUS`, `FIBER_BONUS`, `AGE_BONUS`, `LIQUID_FOOD`

### –ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- [ ] –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è `FOOD_FORM_BONUS` –≤ `calculateMultiplier()` (—Å—Ç—Ä–æ–∫–∞ 1562)
- [ ] –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è `RESISTANT_STARCH_BONUS` –≤ `calculateMealWave()` (—Å—Ç—Ä–æ–∫–∞ ~1380)
- [ ] UI: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ä–æ–≥–æ–≤ –ª–∏–ø–æ–ª–∏–∑–∞ (–≤ `DayPage`, —Å—Ç—Ä–æ–∫–∏ 13711+)
- [ ] UI: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π –≥–∏–ø–æ–≥–ª–∏–∫–µ–º–∏–∏
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–µ—Ç–µ–∫—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –µ–¥—ã `MEAL_ORDER_BONUS`

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `apps/web/heys_insulin_wave_v1.js` | –ú–æ–¥—É–ª—å –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ä–∞—Å—á—ë—Ç—ã) |
| `apps/web/heys_day_v12.js` | UI –≤–∫–ª–∞–¥–∫–∏ –¥–Ω—è (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–ª–Ω—ã) |
| `docs/DATA_MODEL_REFERENCE.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞) |

---

## –ó–∞–¥–∞—á–∏

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å FOOD_FORM_BONUS (~30 –º–∏–Ω)

**–ì–¥–µ**: `heys_insulin_wave_v1.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `calculateMultiplier()` (—Å—Ç—Ä–æ–∫–∞ 1562)

**–®–∞–≥ 1 ‚Äî –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–µ—Ç–µ–∫—Ü–∏–∏:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï isSpicyFood() (~—Å—Ç—Ä–æ–∫–∞ 1185)
/**
 * üçé –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É –ø–∏—â–∏
 * @param {Object} prod - –ø—Ä–æ–¥—É–∫—Ç
 * @returns {'liquid'|'processed'|'whole'|null}
 */
const getFoodForm = (prod) => {
  if (!prod) return null;
  const name = (prod.name || '').toLowerCase();
  
  // –ñ–∏–¥–∫–æ–µ ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  for (const pattern of FOOD_FORM_BONUS.liquidPatterns) {
    if (pattern.test(name)) return 'liquid';
  }
  
  // –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ
  for (const pattern of FOOD_FORM_BONUS.processedPatterns) {
    if (pattern.test(name)) return 'processed';
  }
  
  // –¶–µ–ª—å–Ω–æ–µ
  for (const pattern of FOOD_FORM_BONUS.wholePatterns) {
    if (pattern.test(name)) return 'whole';
  }
  
  return null;
};
```

**–®–∞–≥ 2 ‚Äî –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ calculateMultiplier():**
```javascript
// –ë—ã–ª–æ (—Å—Ç—Ä–æ–∫–∞ 1562):
const calculateMultiplier = (gi, protein, fiber, carbs = null, fat = null, 
  gl = null, hasLiquid = false, insulinogenicBonus = 0) => {

// –°—Ç–∞–ª–æ:
const calculateMultiplier = (gi, protein, fiber, carbs = null, fat = null, 
  gl = null, hasLiquid = false, insulinogenicBonus = 0, foodForm = null) => {
```

**–®–∞–≥ 3 ‚Äî –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ñ–æ—Ä–º—ã (~—Å—Ç—Ä–æ–∫–∞ 1630):**
```javascript
// –ü–û–°–õ–ï liquidMult
const foodFormMult = foodForm && FOOD_FORM_BONUS[foodForm] 
  ? FOOD_FORM_BONUS[foodForm].multiplier 
  : 1.0;

// –í return –¥–æ–±–∞–≤–∏—Ç—å:
return {
  total: baseMult * carbsMult * liquidMult * foodFormMult,
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  foodForm: foodFormMult,  // üÜï
};
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å RESISTANT_STARCH_BONUS (~20 –º–∏–Ω)

**–ì–¥–µ**: `heys_insulin_wave_v1.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `calculateMealWave()` (~—Å—Ç—Ä–æ–∫–∞ 1380)

**–®–∞–≥ 1 ‚Äî –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–µ—Ç–µ–∫—Ü–∏–∏:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï getFoodForm()
/**
 * ü•î –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ resistant starch (–æ—Ö–ª–∞–∂–¥—ë–Ω–Ω—ã–µ –∫—Ä–∞—Ö–º–∞–ª—ã)
 * @param {Object} prod - –ø—Ä–æ–¥—É–∫—Ç
 * @returns {boolean}
 */
const hasResistantStarch = (prod) => {
  if (!prod) return false;
  const name = (prod.name || '').toLowerCase();
  
  for (const pattern of RESISTANT_STARCH_BONUS.patterns) {
    if (pattern.test(name)) return true;
  }
  return false;
};
```

**–®–∞–≥ 2 ‚Äî –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ calculateMealWave() (~—Å—Ç—Ä–æ–∫–∞ 1458):**
```javascript
// –ü–û–°–õ–ï hasLiquid
let resistantStarchBonus = 0;
for (const item of (meal.items || [])) {
  const prod = getProductFromItem(item, pIndex);
  if (hasResistantStarch(prod)) {
    resistantStarchBonus = RESISTANT_STARCH_BONUS.cooled; // -0.15
    break; // –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
  }
}
```

**–®–∞–≥ 3 ‚Äî –î–æ–±–∞–≤–∏—Ç—å –≤ –∏—Ç–æ–≥–æ–≤—ã–π multiplier:**
```javascript
// –í —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
const totalMultiplier = baseMult * glMult * (1 + resistantStarchBonus);
```

### 3. UI: –®–∫–∞–ª–∞ –ª–∏–ø–æ–ª–∏–∑–∞ ‚Äî HTML —Å CSS –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º (~45 –º–∏–Ω)

**–ì–¥–µ**: `heys_day_v12.js` ‚Üí inline –∫–æ–¥ DayPage, —Å–µ–∫—Ü–∏—è `InsulinWaveExpanded` (~—Å—Ç—Ä–æ–∫–∞ 13711)

**–í–∞–∂–Ω–æ**: –≠—Ç–æ –ù–ï –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∞ inline –∫–æ–¥ –≤ DayPage!

**–î–∏–∑–∞–π–Ω ‚Äî HTML divs —Å CSS –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º** (–∫–∞–∫ `.insulin-wave-bar`):
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üü¢          üü°          üü†          üî¥             ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÇ
‚îÇ  <5         15          50         100+ ¬µ–ï–¥/–º–ª     ‚îÇ
‚îÇ –õ–∏–ø–æ–ª–∏–∑    50%        –ë–ª–æ–∫        –ü–∏–∫              ‚îÇ
‚îÇ                    ‚ñ≤                                ‚îÇ
‚îÇ             —Ç—ã —Å–µ–π—á–∞—Å (~35)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–®–∞–≥ 1 ‚Äî –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ü–µ–Ω–∫–∏ –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ `heys_insulin_wave_v1.js`:**
```javascript
// –ü–û–°–õ–ï LIPOLYSIS_THRESHOLDS (~—Å—Ç—Ä–æ–∫–∞ 530)
/**
 * üß™ –û—Ü–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞ –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É –≤–æ–ª–Ω—ã
 * –ù–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: Campbell 1992, Jensen 1989
 * @param {number} progress - 0-100 (–ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤–æ–ª–Ω—ã)
 * @returns {{ level: number, zone: string, lipolysisPct: number, desc: string }}
 */
const estimateInsulinLevel = (progress) => {
  // –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –æ—Ç –ø–∏–∫–∞ (~80) –¥–æ –±–∞–∑–æ–≤–æ–≥–æ (~5)
  // –§–æ—Ä–º—É–ª–∞: level = 5 + 75 √ó e^(-progress/25)
  const level = Math.round(5 + 75 * Math.exp(-progress / 25));
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–æ–Ω—É –ø–æ –ø–æ—Ä–æ–≥–∞–º
  if (level <= LIPOLYSIS_THRESHOLDS.full.insulinUIml) {
    return { level, zone: 'full', lipolysisPct: 100, desc: LIPOLYSIS_THRESHOLDS.full.desc, color: '#22c55e' };
  }
  if (level <= LIPOLYSIS_THRESHOLDS.partial.insulinUIml) {
    return { level, zone: 'partial', lipolysisPct: 50, desc: LIPOLYSIS_THRESHOLDS.partial.desc, color: '#eab308' };
  }
  if (level <= LIPOLYSIS_THRESHOLDS.suppressed.insulinUIml) {
    return { level, zone: 'suppressed', lipolysisPct: 10, desc: LIPOLYSIS_THRESHOLDS.suppressed.desc, color: '#f97316' };
  }
  return { level, zone: 'blocked', lipolysisPct: 0, desc: LIPOLYSIS_THRESHOLDS.blocked.desc, color: '#ef4444' };
};
```

**–®–∞–≥ 2 ‚Äî –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:**
```javascript
// –í —ç–∫—Å–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è (~—Å—Ç—Ä–æ–∫–∞ 4050)
HEYS.InsulinWave = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  estimateInsulinLevel,
  LIPOLYSIS_THRESHOLDS,
};
```

**–®–∞–≥ 3 ‚Äî –î–æ–±–∞–≤–∏—Ç—å UI –≤ DayPage (~—Å—Ç—Ä–æ–∫–∞ 13760):**
```javascript
// –í —Å–µ–∫—Ü–∏–∏ insulin-wave-expanded, –ø–æ—Å–ª–µ giInfo
// –ü–æ–ª—É—á–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞
const insulinLevel = HEYS.InsulinWave.estimateInsulinLevel(insulinWaveData.progress);

React.createElement('div', { 
  className: 'insulin-level-container',
  style: { marginTop: '12px' }
},
  // –®–∫–∞–ª–∞ ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç
  React.createElement('div', { 
    className: 'insulin-level-scale',
    style: {
      height: '8px',
      borderRadius: '4px',
      background: 'linear-gradient(to right, #22c55e 0%, #22c55e 5%, #eab308 15%, #f97316 50%, #ef4444 100%)',
      position: 'relative'
    }
  },
    // –ú–∞—Ä–∫–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
    React.createElement('div', {
      className: 'insulin-level-marker',
      style: {
        position: 'absolute',
        left: `${Math.min(100, insulinLevel.level)}%`,
        top: '-4px',
        width: '4px',
        height: '16px',
        background: '#fff',
        borderRadius: '2px',
        boxShadow: '0 0 4px rgba(0,0,0,0.3)',
        transform: 'translateX(-50%)'
      }
    })
  ),
  // –ú–µ—Ç–∫–∏
  React.createElement('div', { 
    style: { 
      display: 'flex', 
      justifyContent: 'space-between', 
      fontSize: '0.7rem', 
      color: 'var(--text-secondary)',
      marginTop: '4px'
    }
  },
    React.createElement('span', null, 'üü¢ <5'),
    React.createElement('span', null, 'üü° 15'),
    React.createElement('span', null, 'üü† 50'),
    React.createElement('span', null, 'üî¥ 100+')
  ),
  // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
  React.createElement('div', {
    style: { 
      textAlign: 'center', 
      fontSize: '0.85rem',
      color: insulinLevel.color,
      marginTop: '4px',
      fontWeight: '500'
    }
  }, `~${insulinLevel.level} ¬µ–ï–¥/–º–ª ‚Ä¢ ${insulinLevel.desc}`)
)
```

---

### 4. UI: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π –≥–∏–ø–æ–≥–ª–∏–∫–µ–º–∏–∏ –≤ MealCard (~30 –º–∏–Ω)

**–ì–¥–µ**: `heys_day_v12.js` ‚Üí inline –≤ —Å–µ–∫—Ü–∏–∏ **MealCard** (–≤–Ω–∏–∑—É –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–∏—ë–º–∞), ~—Å—Ç—Ä–æ–∫–∞ 2290

**–ü–æ—á–µ–º—É –≤ MealCard**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø—Ä–∏—ë–º—É –ø–∏—â–∏ —Å –≤—ã—Å–æ–∫–∏–º GI. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä—è–¥–æ–º —Å —Ç–µ–º –ø—Ä–∏—ë–º–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–∏—Å–∫ ‚Äî —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ–µ —á–µ–º –≤ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ.

**–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ —Ä–∏—Å–∫–∞:**
```javascript
// –í calculateMealWave() –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—á—ë—Ç —Ä–∏—Å–∫–∞
const calculateHypoglycemiaRisk = (meal, pIndex, getProductFromItem) => {
  let riskScore = 0;
  const { riskFactors, riskWindow, warningThreshold } = REACTIVE_HYPOGLYCEMIA;
  
  // –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–∏–π GI –∏ –º–∞–∫—Ä–æ—Å—ã
  let totalGrams = 0, weightedGI = 0, totalProtein = 0, totalFat = 0;
  for (const item of (meal.items || [])) {
    const prod = getProductFromItem(item, pIndex);
    const g = item.grams || 100;
    totalGrams += g;
    weightedGI += (prod?.gi || 50) * g;
    totalProtein += (prod?.protein100 || 0) * g / 100;
    totalFat += (prod?.fat100 || 0) * g / 100;
  }
  const avgGI = totalGrams > 0 ? weightedGI / totalGrams : 50;
  
  // –§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞
  if (avgGI >= riskFactors.highGI.threshold) riskScore += riskFactors.highGI.weight;
  if (totalProtein < riskFactors.lowProtein.threshold) riskScore += riskFactors.lowProtein.weight;
  if (totalFat < riskFactors.lowFat.threshold) riskScore += riskFactors.lowFat.weight;
  
  return {
    score: riskScore,
    hasRisk: riskScore >= warningThreshold,
    riskWindow,
    details: { avgGI, totalProtein, totalFat }
  };
};
```

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `riskScore >= 0.6`
- –¢–æ–ª—å–∫–æ –≤ –æ–∫–Ω–µ 120-240 –º–∏–Ω –ø–æ—Å–ª–µ –ø—Ä–∏—ë–º–∞
- –ù–µ –ø—É–≥–∞—Ç—å, –∞ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å

**UI —ç–ª–µ–º–µ–Ω—Ç:**
```javascript
// –ú—è–≥–∫–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
hypoglycemiaRisk.hasRisk && React.createElement('div', {
  className: 'hypoglycemia-warning',
  style: { color: '#f97316', fontSize: '0.85rem', marginTop: '8px' }
},
  '‚ö° –í–æ–∑–º–æ–∂–µ–Ω —Å–ø–∞–¥ —ç–Ω–µ—Ä–≥–∏–∏ —á–µ—Ä–µ–∑ 2-3—á ‚Äî –¥–æ–±–∞–≤—å –±–µ–ª–æ–∫ –∏–ª–∏ –æ—Ä–µ—Ö–∏'
)
```

### 5. ‚è∏Ô∏è –î–µ—Ç–µ–∫—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –µ–¥—ã (–û–¢–õ–û–ñ–ï–ù–û ‚Üí Phase 2)

**–°—Ç–∞—Ç—É—Å**: –û—Ç–ª–æ–∂–µ–Ω–æ ‚Äî —Ç—Ä–µ–±—É–µ—Ç UI –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ MealCard

**–ü—Ä–∏—á–∏–Ω–∞**: –°–µ–π—á–∞—Å –º—ã –Ω–µ –∑–Ω–∞–µ–º –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ —Å—ä–µ–¥–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –ø—Ä–∏—ë–º–µ. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç:
- UI –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö MealItem (–¥–æ–±–∞–≤–∏—Ç—å timestamp –∏–ª–∏ order)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX

**–ü–ª–∞–Ω Phase 2**: –î–æ–±–∞–≤–∏—Ç—å toggle "–£–≥–ª–µ–≤–æ–¥—ã –≤ –∫–æ–Ω—Ü–µ?" –≤ –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–∏—ë–º–∞

---

## –¢–µ—Å—Ç—ã

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- [ ] –í–æ–ª–Ω–∞ –¥–ª—è "–∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Å–æ–∫" –∫–æ—Ä–æ—á–µ —Å –≤—ã—Å–æ–∫–∏–º –ø–∏–∫–æ–º
- [ ] –í–æ–ª–Ω–∞ –¥–ª—è "—Ö–æ–ª–æ–¥–Ω—ã–π —Ä–∏—Å" (—Å—É—à–∏) –∫–æ—Ä–æ—á–µ –Ω–∞ ~15%
- [ ] –®–∫–∞–ª–∞ –ª–∏–ø–æ–ª–∏–∑–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≥–∏–ø–æ–≥–ª–∏–∫–µ–º–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤—ã—Å–æ–∫–æ-GI –µ–¥—ã –Ω–∞—Ç–æ—â–∞–∫

---

## –ù–∞—É—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (PMID)

| –§–∞–∫—Ç–æ—Ä | –ò—Å—Ç–æ—á–Ω–∏–∫ | PMID |
|--------|----------|------|
| Food form | Flood-Obbagy & Rolls 2009 | 19158230 |
| Resistant starch | Robertson et al. 2005 | 15941879 |
| Lipolysis thresholds | Campbell et al. 1992 | 1612357 |
| Reactive hypoglycemia | Brun et al. 1995 | 7641416 |
| Meal order | Shukla et al. 2015 | 26106234 |

---

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] `pnpm type-check` ‚Äî –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `pnpm build` ‚Äî —É—Å–ø–µ—à–Ω–æ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ `heys_insulin_wave_v1.js` ‚Üí 3.2.0

---

## ‚ö†Ô∏è –†–∏—Å–∫-–º–∞—Ç—Ä–∏—Ü–∞

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ò–º–ø–∞–∫—Ç | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|--------|-----------|
| –°–ª–æ–º–∞—Ç—å `calculateMultiplier()` | –°—Ä–µ–¥–Ω—è—è | **–í—ã—Å–æ–∫–∏–π** | –î–æ–±–∞–≤–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å default |
| CSS –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤ —à–∫–∞–ª–µ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–∏–π | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.insulin-*` –ø–∞—Ç—Ç–µ—Ä–Ω—ã |
| –ù–µ –Ω–∞–π—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ñ–æ—Ä–º—ã –ø–∏—â–∏ | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–∏–π | Fallback = null, –Ω–µ –ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–∫—É |
| –õ–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã UI | –ù–∏–∑–∫–∞—è | –ù–∏–∑–∫–∏–π | –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ |
| –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–º–µ—é—Ç –¥—Ä—É–≥—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É | –°—Ä–µ–¥–Ω—è—è | **–í—ã—Å–æ–∫–∏–π** | Phase 0: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º |
| –ù–∞—É—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å—Ç–∞—Ä–µ–ª–∏ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–∏–π | –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ <20 –ª–µ—Ç, –æ—Å–Ω–æ–≤–Ω—ã–µ <10 –ª–µ—Ç |

---

## üîô Rollback –ø–ª–∞–Ω

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫:

1. **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç:**
   ```bash
   cp apps/web/heys_insulin_wave_v1.backup2.js apps/web/heys_insulin_wave_v1.js
   ```

2. **Git –æ—Ç–∫–∞—Ç:**
   ```bash
   git checkout apps/web/heys_insulin_wave_v1.js
   git checkout apps/web/heys_day_v12.js
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞:**
   - –û—Ç–∫—Ä—ã—Ç—å localhost:3001
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—ë–º –ø–∏—â–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–æ–ª–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---

## üåü WOW-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. üéöÔ∏è –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è —à–∫–∞–ª–∞ –ª–∏–ø–æ–ª–∏–∑–∞ (—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ –∑–∞–¥–∞—á–µ 3)
–ü–ª–∞–≤–Ω—ã–π CSS-–≥—Ä–∞–¥–∏–µ–Ω—Ç –æ—Ç –∑–µ–ª—ë–Ω–æ–≥–æ –∫ –∫—Ä–∞—Å–Ω–æ–º—É ‚Äî –≤—ã–≥–ª—è–¥–∏—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ.

### 2. üîó Second Meal Effect ‚Äî –ë–µ–π–¥–∂ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –∑–∞–≤—Ç—Ä–∞–∫—É
**–ù–∞—É—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞** (Wolever 2006): –ù–∏–∑–∫–æ-GI –∑–∞–≤—Ç—Ä–∞–∫ —É–ª—É—á—à–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ–±–µ–¥.

```javascript
// –ï—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞–∫ –±—ã–ª low-GI –∏ —Ç–µ–∫—É—â–∏–π –ø—Ä–∏—ë–º ‚Äî –æ–±–µ–¥/—É–∂–∏–Ω
const breakfastEffect = getSecondMealEffect(dayMeals);
breakfastEffect && React.createElement('div', {
  className: 'second-meal-badge',
  style: { color: '#10b981', fontSize: '0.8rem' }
}, 'üîó –ë–ª–∞–≥–æ–¥–∞—Ä—è –∑–∞–≤—Ç—Ä–∞–∫—É –≤–æ–ª–Ω–∞ –Ω–∞ 10% –∫–æ—Ä–æ—á–µ')
```

### 3. ‚ö° Countdown –∫ —á–∞—Å—Ç–∏—á–Ω–æ–º—É –ª–∏–ø–æ–ª–∏–∑—É
"~20 –º–∏–Ω –¥–æ 50% –∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏—è" ‚Äî –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ!

```javascript
// –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ milestone'—ã
if (insulinLevel.level > 15 && insulinLevel.level < 50) {
  const minTo50Pct = estimateMinutesTo(15); // ¬µ–ï–¥/–º–ª
  return `‚è≥ ~${minTo50Pct} –º–∏–Ω –¥–æ 50% –∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏—è`;
}
```

### 4. ‚öñÔ∏è –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –∫–∞—á–µ–ª–µ–π
**–ò–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è**: "–ò–Ω—Å—É–ª–∏–Ω –∏ –ª–∏–ø–æ–ª–∏–∑ –∫–∞–∫ –∫–∞—á–µ–ª–∏"

**UI –∏–¥–µ—è**: –ú–∞–ª–µ–Ω—å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∫–∞—á–µ–ª–µ–π:
- –ò–Ω—Å—É–ª–∏–Ω –≤—ã—Å–æ–∫–∏–π ‚Üí –∫–∞—á–µ–ª–∏ –≤–ª–µ–≤–æ (–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ)
- –ò–Ω—Å—É–ª–∏–Ω –Ω–∏–∑–∫–∏–π ‚Üí –∫–∞—á–µ–ª–∏ –≤–ø—Ä–∞–≤–æ (–∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏–µ)

### 5. üìà Biphasic –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (Phase 3)
**–ù–∞—É—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞** (Floyd 1966): –ò–Ω—Å—É–ª–∏–Ω –∏–º–µ–µ—Ç 2 —Ñ–∞–∑—ã –≤—ã–±—Ä–æ—Å–∞.

**UI**: –î–≤—É—Ö–≥–æ—Ä–±—ã–π –≥—Ä–∞—Ñ–∏–∫ –≤–æ–ª–Ω—ã:
```
       ‚ï±‚ï≤
      ‚ï±  ‚ï≤    ‚ï±‚îÄ‚îÄ‚îÄ‚îÄ‚ï≤
     ‚ï±    ‚ï≤‚îÄ‚îÄ‚ï±      ‚ï≤____
    ‚ï±                      ‚ï≤___
   ‚îÇ  1—è —Ñ–∞–∑–∞ ‚îÇ   2—è —Ñ–∞–∑–∞     ‚îÇ
   0   15–º–∏–Ω     60–º–∏–Ω      180–º–∏–Ω
```

### 6. üß¨ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã –º–∏–∫—Ä–æ–±–∏–æ—Ç—ã (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ)
**–ò–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è**: Akkermansia muciniphila —É–ª—É—á—à–∞–µ—Ç –∏–Ω—Å—É–ª–∏–Ω–æ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ +30%.

**–°–æ–≤–µ—Ç**: "üí° –ü—Ä–µ–±–∏–æ—Ç–∏–∫–∏ (–∏–Ω—É–ª–∏–Ω, —á–µ—Å–Ω–æ–∫) –º–æ–≥—É—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤–æ–ª–Ω—É –Ω–∞ 10-30%"

### 7. ‚ùÑÔ∏è –ë–æ–Ω—É—Å —Ö–æ–ª–æ–¥–æ–≤–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
**–ù–∞—É—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞**: 6 –Ω–µ–¥–µ–ª—å —Ö–æ–ª–æ–¥–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ = +25% –∏–Ω—Å—É–ª–∏–Ω–æ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

**UI**: –ï—Å–ª–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –≤–∫–ª—é—á—ë–Ω —Ç—Ä–µ–∫–∏–Ω–≥ –∑–∞–∫–∞–ª–∏–≤–∞–Ω–∏—è ‚Üí –±–µ–π–¥–∂ "üßä –ú–µ—Ç–∞–±–æ–ª–∏–∑–º —É—Å–∫–æ—Ä–µ–Ω"

---

## üìä –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–º–ø—Ç–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ |
|----------|--------|
| –ù–∞—É—á–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å | ‚úÖ 95% |
| –ü–æ–ª–Ω–æ—Ç–∞ –æ—Ö–≤–∞—Ç–∞ | ‚úÖ 90% |
| –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | ‚úÖ 95% |
| –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫ (Phase 0) | ‚úÖ 95% |
| WOW-–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª | ‚úÖ 85% |
| **–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** | **‚úÖ 92%** |

---

## Changelog –ø—Ä–æ–º–ø—Ç–∞

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|--------|------|-----------|
| 1.0 | 2025-12-10 | –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| 1.1 | 2025-12-10 | –î–æ–±–∞–≤–ª–µ–Ω Phase 0, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π |
| 1.2 | 2025-12-10 | –î–æ–±–∞–≤–ª–µ–Ω –Ω–∞—É—á–Ω—ã–π –∞—É–¥–∏—Ç, —à–∫–∞–ª–∞ –ª–∏–ø–æ–ª–∏–∑–∞ —Å –∫–æ–¥–æ–º |
| 1.3 | 2025-12-10 | –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç: –±–ª–æ–∫–µ—Ä—ã, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç, 7 WOW-–∏–¥–µ–π |
