# ะะฐะดะฐัะฐ: ะะฐััะพัะบะธ-ะผะตััะธะบะธ + ะะพะผะฟะฐะบัะฝัะน ะฒะฒะพะด ะฐะบัะธะฒะฝะพััะธ

## ะฆะตะปั

ะะพะฑะฐะฒะธัั ะฒะธะทัะฐะปัะฝัะต ะบะฐััะพัะบะธ ั ะบะปััะตะฒัะผะธ ะผะตััะธะบะฐะผะธ ัะฒะตััั ัััะฐะฝะธัั, ะฟะตัะตะดะตะปะฐัั
violet-table ะฒ ะบะพะผะฟะฐะบัะฝัะน inline-ัะพัะผะฐั.

---

## ะขะตะบััะฐั ััััะบัััะฐ (ะะ)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ day-layout-2col                     โ
โ  โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโ
โ  โ mainBlock   โ โ sideBlock       โโ
โ  โ (violet-    โ โ (ะกะพะฝ, ะะตะฝั,     โโ
โ  โ  table)     โ โ  ะขัะตะฝะธัะพะฒะบะธ)    โโ
โ  โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ daySummary (ะคะฐะบั/ะะพัะผะฐ/ะัะบะป ะะะฃ)    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ mealsUI                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ะะพะฒะฐั ััััะบัััะฐ (ะะะกะะ)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ metricsCards (HERO)                 โ  โ ะะะะะ
โ โโโโโโ โโโโโโ โโโโโโ โโโโโโ        โ
โ โTDEEโ โะกัะตะปโ โะัั.โ โะะตั.โ        โ
โ โโโโโโ โโโโโโ โโโโโโ โโโโโโ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ compact-activity (ะฒะฒะพะด ะดะฐะฝะฝัั)      โ  โ ะะะะกะขะ violet-table
โ [ะะตั] [ะจะฐะณะธ] [ะัั] [ะะตัะธัะธั%]      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ day-layout-2col                     โ  โ sideBlock ะพััะฐัััั
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ sideBlock (ะกะพะฝ, ะะตะฝั, ะขัะตะฝ.)   โโ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ daySummary (ะคะฐะบั/ะะพัะผะฐ/ะัะบะป ะะะฃ)    โ  โ ะฑะตะท ะธะทะผะตะฝะตะฝะธะน
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ mealsUI                             โ  โ ะฑะตะท ะธะทะผะตะฝะตะฝะธะน
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 1. Hero-ะบะฐััะพัะบะธ (ัะพะปัะบะพ ะพัะพะฑัะฐะถะตะฝะธะต)

```
โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ
โ    โก    โ โ    ๐ฝ๏ธ    โ โ    ๐ฏ    โ โ    ๐    โ
โ   1876   โ โ   1564   โ โ   312    โ โ  -16.6%  โ
โ ะะฐััะฐัั  โ โ ะกัะตะดะตะฝะพ  โ โ ะััะฐะปะพัั โ โ ะะตัะธัะธั  โ
โ          โ โ          โ โ          โ โ [โโโโโโ] โ
โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ
```

**ะะฝะฐัะตะฝะธั:**

- `ะะฐััะฐัั` = tdee (ะพะฑัะธะต ะทะฐััะฐัั)
- `ะกัะตะดะตะฝะพ` = eatenKcal
- `ะััะฐะปะพัั` = optimum - eatenKcal (ัะบะพะปัะบะพ ะตัั ะผะพะถะฝะพ ััะตััั)
- `ะะตัะธัะธั` = factDefPct + progress bar

**ะะพะณะธะบะฐ ัะฒะตัะพะฒ:**

- `ะะฐััะฐัั` โ ะฝะตะนััะฐะปัะฝัะน ัะตัะพ-ัะธะฝะธะน (#64748b)
- `ะกัะตะดะตะฝะพ` โ ะทะตะปัะฝัะน ะตัะปะธ <70% ะพั optimum, ะถัะปััะน 70-100%, ะบัะฐัะฝัะน >100%
- `ะััะฐะปะพัั` โ ะทะตะปัะฝัะน >100, ะถัะปััะน 0-100, ะบัะฐัะฝัะน <0 (ะฟะตัะตะฑะพั)
- `ะะตัะธัะธั` โ ะทะตะปัะฝัะน ะตัะปะธ fact <= target, ะบัะฐัะฝัะน ะตัะปะธ ะฟัะพัะธัะธั

---

## 2. ะะพะผะฟะฐะบัะฝัะน ะฑะปะพะบ ะฒะฒะพะดะฐ ะฐะบัะธะฒะฝะพััะธ

ะะฐะผะตะฝัะตั violet-table. Inline ัะพัะผะฐ ะฒ ััะธะปะต compact-card:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ะะบัะธะฒะฝะพััั                                                   โ
โ ะะตั [72.5] ะบะณ  โ  ะจะฐะณะธ [5500]  โ  ะัั [60] ะผะธะฝ  โ  ะะตั [-20]%  โ
โ BMR: 1564      โ  โ 45 ะบะบะฐะป    โ  โ 12 ะบะบะฐะป     โ  ะฆะตะปั: 1501  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะพะปั ะฒะฒะพะดะฐ (ัะตะดะฐะบัะธััะตะผัะต):**

- ะะตั ะฝะฐ ัััะพ โ ะฒะปะธัะตั ะฝะฐ BMR
- ะจะฐะณะธ โ ะฟะพะบะฐะทัะฒะฐะตั ะบะบะฐะป ะพั ัะฐะณะพะฒ
- ะัั.ะฐะบัะธะฒะฝะพััั (ะผะธะฝ) โ ะฟะพะบะฐะทัะฒะฐะตั ะบะบะฐะป
- ะฆะตะปะตะฒะพะน ะดะตัะธัะธั % โ ะฟะพะบะฐะทัะฒะฐะตั optimum

**ะกััะพะบะฐ ะฟะพะด ะธะฝะฟััะฐะผะธ:** ะผะตะปะบะธะผ ััะธััะพะผ ัะฐััััะฝัะต ะทะฝะฐัะตะฝะธั

---

## ะะปััะตะฒัะต ัะฐะนะปั

| ะคะฐะนะป                       | ะงัะพ ะผะตะฝััั                                                                     |
| -------------------------- | ------------------------------------------------------------------------------ |
| `apps/web/heys_day_v12.js` | ะะพะฑะฐะฒะธัั metricsCards, ะทะฐะผะตะฝะธัั mainBlock ะฝะฐ compact-activity, ะธะทะผะตะฝะธัั return |
| `apps/web/styles/main.css` | ะกัะธะปะธ .metrics-cards, .compact-activity                                        |

---

## ะะฐะดะฐัะธ โ ะะซะะะะะะะ

### 1. ะกะพะทะดะฐัั metricsCards โ

- [x] ะะฐะทะผะตััะธัั ะะะะะ day-layout-2col ะฒ return
- [x] 5 ะบะฐััะพัะตะบ: ะะฐััะฐัั, ะฆะตะปั, ะกัะตะดะตะฝะพ, ะััะฐะปะพัั/ะะตัะตะฑะพั, ะะตัะธัะธั
- [x] Progress bar ะฒ ะบะฐััะพัะบะต "ะะตัะธัะธั" (ัะธัะธะฝะฐ = |factDefPct| / 50 \* 100%)
- [x] ะะธะฝะฐะผะธัะตัะบะธะต ัะฒะตัะฐ ะฟะพ ะทะฝะฐัะตะฝะธัะผ
- [x] Responsive: flex-wrap, ะฝะฐ ะผะพะฑะธะปัะฝัั 2x3

### 2. ะกะพะทะดะฐัั compact-activity (ะทะฐะผะตะฝัะตั mainBlock) โ

- [x] ะะดะธะฝ compact-card ั ะทะฐะณะพะปะพะฒะบะพะผ "๐ ะะบัะธะฒะฝะพััั"
- [x] ะะตัะฒะฐั ัััะพะบะฐ: 4 input (ะะตั, ะจะฐะณะธ, ะัั, ะฆะตะปั ะดะตั.%)
- [x] ะัะพัะฐั ัััะพะบะฐ: 4 span ั ัะฐััััะฝัะผะธ ะทะฝะฐัะตะฝะธัะผะธ (BMR, ะบะบะฐะป, ะบะบะฐะป, ะฆะตะปั)
- [x] ะขัะตััั ัััะพะบะฐ: "ะขัะตะฝะธัะพะฒะบะธ: X ะบะบะฐะป โข ะัะตะณะพ: Y ะบะบะฐะป"

### 3. ะะทะผะตะฝะธัั return DayTab โ

```javascript
return React.createElement('div',{className:'page page-day'},
  metricsCards,        // โ ะบะฐััะพัะบะธ ัะฒะตััั
  compactActivity,     // โ ะฒะผะตััะพ mainBlock
  sideBlock,           // โ ะพััะฐัััั (ะกะพะฝ, ะะตะฝั, ะขัะตะฝะธัะพะฒะบะธ)
  daySummary,          // โ ะฑะตะท ะธะทะผะตะฝะตะฝะธะน
  mealsUI,             // โ ะฑะตะท ะธะทะผะตะฝะตะฝะธะน
  React.createElement('button',...) // + ะัะธัะผ
);
```

### 4. ะฃะดะฐะปะธัั mainBlock (violet-table) โ

- [x] ะฃะฑัะฐัั ะฒะตัั ะฑะปะพะบ const mainBlock = ...
- [x] ะฃะฑัะฐัั day-layout-2col ะพะฑัััะบั (sideBlock ัะตะฟะตัั ะพัะดะตะปัะฝะพ)

### 5. CSS ััะธะปะธ โ

- [x] .metrics-cards { display: flex; gap: 12px; margin-bottom: 16px; flex-wrap:
      wrap; }
- [x] .metrics-card { flex: 1; min-width: 100px; padding: 12px; ... }
- [x] .metrics-card .icon { font-size: 20px; }
- [x] .metrics-card .value { font-size: 24px; font-weight: 700; }
- [x] .metrics-card .label { font-size: 11px; color: #64748b; }
- [x] .metrics-card .progress { height: 4px; border-radius: 2px; }
- [x] .compact-activity { margin-bottom: 12px; }

---

## ะงัะพ ะะ ะดะตะปะฐะตะผ

- โ Collapsible โ ะฒัั ะฒะธะดะฝะพ ััะฐะทั
- โ Sticky ะบะฐััะพัะบะธ โ ะพะฒะตัะบะธะปะป
- โ ะะฝะธะผะฐัะธะธ โ ะฟัะพััะพัะฐ ะฒะฐะถะฝะตะต
- โ Tooltip โ ะดะพััะฐัะพัะฝะพ title ะฐััะธะฑััะพะฒ

---

## ะะตัะตะผะตะฝะฝัะต (ัะถะต ะฒััะธัะปััััั ะฒ DayTab)

```javascript
tdee; // ะะฑัะธะต ะทะฐััะฐัั
eatenKcal; // ะกัะตะดะตะฝะพ
optimum; // ะัะถะฝะพ ััะตััั (TDEE * (1 - deficitPct/100))
factDefPct; // ะคะฐะบัะธัะตัะบะธะน ะดะตัะธัะธั %
dayTargetDef; // ะฆะตะปะตะฒะพะน ะดะตัะธัะธั %
bmr; // ะะฐะทะพะฒัะน ะผะตัะฐะฑะพะปะธะทะผ
stepsK; // ะะบะฐะป ะพั ัะฐะณะพะฒ
train1k + train2k; // ะะบะฐะป ะพั ััะตะฝะธัะพะฒะพะบ
householdK; // ะะบะฐะป ะพั ะฑััะพะฒะพะน ะฐะบัะธะฒะฝะพััะธ
```

---

## ะัะตะผั: ~35 ะผะธะฝัั

---

## ะฃะปัััะตะฝะธั (ะธัะตัะฐัะธั 2)

### 3. ะะปะฐะฒะฝัะต transitions ะฟัะธ ะธะทะผะตะฝะตะฝะธัั โ

- [x] ะะพะฑะฐะฒะธัั CSS transitions ะดะปั ะทะฝะฐัะตะฝะธะน ะบะฐััะพัะตะบ
- [x] ะะปะฐะฒะฝะพะต ะธะทะผะตะฝะตะฝะธะต ัะฒะตัะฐ ัะพะฝะฐ ะฟัะธ ะฟะตัะตััััะต (0.3s ease)
- [x] Transition ะดะปั progress bar (0.3s ease)

### 4. ะะปะธะบ ะฝะฐ "ะััะฐะปะพัั" โ ัะพะบัั ะฒ ะฟะพะธัะบ ะฟัะพะดัะบัะพะฒ โ

- [x] ะกะดะตะปะฐัั ะบะฐััะพัะบั "ะััะฐะปะพัั" ะบะปะธะบะฐะฑะตะปัะฝะพะน
- [x] ะัะธ ะบะปะธะบะต โ ัะพะบัั ะฝะฐ ะฟะตัะฒัะน input ะฟะพะธัะบะฐ ะฟัะพะดัะบัะฐ + scroll
- [x] ะะพะฑะฐะฒะธัั cursor: pointer + hover ัััะตะบั

### 5. ะะปะธะบ ะฝะฐ "ะฆะตะปั" โ ะฟะพะฟะฐะฟ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ัะตะปะตะฒะพะณะพ ะดะตัะธัะธัะฐ โ

- [x] ะกะดะตะปะฐัั ะบะฐััะพัะบั "ะฆะตะปั" ะบะปะธะบะฐะฑะตะปัะฝะพะน
- [x] ะัะธ ะบะปะธะบะต โ prompt ะดะปั ะธะทะผะตะฝะตะฝะธั dayTargetDef
- [x] ะกะพััะฐะฝะธัั ะธะทะผะตะฝะตะฝะธะต ะฒ day.deficitPct

### 6. ะะฐััะธัะตะฝะฝัะต tooltips ั ะบะพะฝัะตะบััะพะผ โ

- [x] "ะะฐััะฐัั: X ะบะบะฐะป (BMR Y + ะฐะบัะธะฒะฝะพััั Z)"
- [x] "ะฆะตะปั: X ะบะบะฐะป (ะทะฐััะฐัั Y โ N% ะดะตัะธัะธั) + ะฟะพะดัะบะฐะทะบะฐ ะบะปะธะบะฐ"
- [x] "ะกัะตะดะตะฝะพ: X ะบะบะฐะป (ะพััะฐะปะพัั Y ะธะปะธ ะฟะตัะตะฑะพั Z)"

### 7. ะะธะทัะฐะปัะฝะฐั ัะฒัะทั ะผะตะถะดั ะบะฐััะพัะบะฐะผะธ โ

- [x] ะะพะฑะฐะฒะธัั ัััะตะปะบะธ โ ะผะตะถะดั "ะะฐััะฐัั โ ะฆะตะปั โ ะกัะตะดะตะฝะพ"
- [x] ะะฐะทะดะตะปะธัะตะปั โข ะผะตะถะดั "ะกัะตะดะตะฝะพ" ะธ "ะััะฐะปะพัั"
- [x] CSS ะฟัะตะฒะดะพัะปะตะผะตะฝัั ::after ะดะปั ัััะตะปะพะบ

### 8. ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน ะฒะตัะฐ (ััะตะฝะด) โ

- [x] ะะพะบะฐะทะฐัั ะฒ ะบะฐััะพัะบะต "ะะฐััะฐัั" ััะตะฝะด ะฒะตัะฐ: โฌ๏ธ +0.3 ะบะณ ะทะฐ ะฝะตะดะตะปั
- [x] ะััะธัะปััั ะธะท ะฟะพัะปะตะดะฝะธั 7 ะดะฝะตะน (ะธะท heys_dayv2_YYYY-MM-DD)
- [x] ะะตะปะบะธะน ััะธัั ะฟะพะด ะพัะฝะพะฒะฝัะผ ะทะฝะฐัะตะฝะธะตะผ
- [x] ะะพะณะธะบะฐ: ะผะธะฝะธะผัะผ 2 ัะพัะบะธ, ัััะตะปะบะฐ โ ะฟัะธ ยฑ0.2 ะบะณ, โฌ๏ธ/โฌ๏ธ ะฟัะธ ะฑะพะปััะตะผ
      ะธะทะผะตะฝะตะฝะธะธ

### 9. ะฃะผะฝัะต ะฟะพะดัะบะฐะทะบะธ ะฟัะธ ะฟะตัะตะฑะพัะต โ

- [x] ะัะปะธ ะฟะตัะตะฑะพั > 200 ะบะบะฐะป โ "ะกะพะฒะตั: ะดะพะฑะฐะฒั N ะผะธะฝ ัะพะดัะฑั"
- [x] ะะพะบะฐะทัะฒะฐัั ะฒ ะบะฐััะพัะบะต "ะััะฐะปะพัั/ะะตัะตะฑะพั" ะผะตะปะบะธะผ ัะตะบััะพะผ
- [x] ะคะพัะผัะปะฐ: kcal / 7 = ะผะธะฝััั ัะพะดัะฑั

---

## ะงัะพ ะะ ะดะตะปะฐะตะผ (ะฐะบััะฐะปะธะทะฐัะธั)
