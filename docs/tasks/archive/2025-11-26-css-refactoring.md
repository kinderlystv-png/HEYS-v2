# Task: CSS Refactoring ‚Äî main.css –æ—á–∏—Å—Ç–∫–∞

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: 2025-11-26

---

## üéØ WHY (–ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç)

**Problem**: `main.css` ‚Äî 3005 —Å—Ç—Ä–æ–∫ —Å 256 `!important`, —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ —Å—Ç–∏–ª—è–º–∏ –∏
–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**Impact**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –∫–∞—Å–∫–∞–¥–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –ª–∏—à–Ω–∏–π CSS

**Value**: –ß–∏—â–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –º–µ–Ω—å—à–µ –∫–æ–¥–∞

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞      | –ë—ã–ª–æ    | –°—Ç–∞–ª–æ   | Œî             |
| ------------ | ------- | ------- | ------------- |
| –°—Ç—Ä–æ–∫ CSS    | 3005    | 2832    | **-173**      |
| `!important` | 256     | 242     | **-14**       |
| gzip         | 7.57 KB | 7.55 KB | **-20 bytes** |

### –ö–æ–º–º–∏—Ç—ã

1. `refactor(css): remove dead code from main.css (-163 lines)`
   - –£–¥–∞–ª–µ–Ω—ã: `.area-compare`, `.day-layout*`, `.side-compare`,
     `.under-calendar`
2. `refactor(css): consolidate duplicate mobile styles (-4 !important)`
   - –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏: `.card.tone-green`, `.area-side.right-col`,
     `.tone-green .grid-2`

---

## üìã WHAT (–ß–µ–∫-–ª–∏—Å—Ç –∑–∞–¥–∞—á)

### Phase 1: –£–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞ ‚úÖ

- [x] **–£–¥–∞–ª–∏—Ç—å `.area-compare` —Å—Ç–∏–ª–∏** ‚Äî 3 –º–µ—Å—Ç–∞
- [x] **–£–¥–∞–ª–∏—Ç—å `.day-layout` –∏ –≤—Å–µ –≤–∞—Ä–∏–∞—Ü–∏–∏** ‚Äî 11 –º–µ—Å—Ç
- [x] **–£–¥–∞–ª–∏—Ç—å `.side-compare` —Å—Ç–∏–ª–∏** ‚Äî 3 –º–µ—Å—Ç–∞
- [x] **–£–¥–∞–ª–∏—Ç—å `.under-calendar` —Å—Ç–∏–ª–∏** ‚Äî 17 –º–µ—Å—Ç

### Phase 2: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è !important ‚úÖ

- [x] **–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã** ‚Äî 256 ‚Üí 242

### ~~Phase 3: :where() —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥~~ ‚Äî –û–¢–õ–û–ñ–ï–ù–û

> **–ü—Ä–∏—á–∏–Ω–∞**: –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å ~200 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤. –†–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤—ã—Å–æ–∫–∏–π.

### ~~Phase 4: Dark mode~~ ‚Äî –û–¢–õ–û–ñ–ï–ù–û

> **–ü—Ä–∏—á–∏–Ω–∞**: 176 hardcoded hex —Ü–≤–µ—Ç–æ–≤ vs 27 var() –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π.

---

## üéØ Roadmap (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏)

1. **CSS Variables Migration** ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å 176 hex ‚Üí var(--name)
2. **`:where()` —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** ‚Äî –ø–æ–Ω–∏–∑–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å, —É–±—Ä–∞—Ç—å ~150 !important
3. **Dark mode** ‚Äî –ø–æ—Å–ª–µ –ø.1 –∏ –ø.2

---

## ‚úÖ Quality Gates

- [x] **Build**: `pnpm build` PASS
- [x] **UI –Ω–µ —Å–ª–æ–º–∞–Ω**: HMR –ø—Ä–æ–≤–µ—Ä–∫–∞
- [x] **Mobile —Ä–∞–±–æ—Ç–∞–µ—Ç**: CSS gzip —É–º–µ–Ω—å—à–∏–ª—Å—è

---

## üìù Notes

- **Priority**: medium
- **Complexity**: S (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞ ~30 –º–∏–Ω)
- **Created**: 2025-11-26
- **Completed**: 2025-11-26
