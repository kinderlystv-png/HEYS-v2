# üå∏ –¢—Ä–µ–∫–∏–Ω–≥ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

**–î–∞—Ç–∞**: 2025-12-08  
**–í—Ä–µ–º—è**: ~3-3.5 —á–∞—Å–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° –°—Ä–µ–¥–Ω–∏–π  

---

## Phase 0 ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π)

### –î–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

- [ ] `git status` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ë—ç–∫–∞–ø –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:
  ```bash
  cp apps/web/heys_morning_checkin_v1.js apps/web/heys_morning_checkin_v1.backup.js
  cp apps/web/heys_steps_v1.js apps/web/heys_steps_v1.backup.js
  ```
- [ ] –°–∫—Ä–∏–Ω—à–æ—Ç —Ç–µ–∫—É—â–µ–≥–æ MorningCheckin (–¥–ª—è –∂–µ–Ω—Å–∫–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è!)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å baseline: —á–µ–∫-–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, —à–∞–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–±–ª–æ–∫–µ—Ä—ã)

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —à–∞–≥–æ–≤ –≤ `heys_steps_v1.js`:
  - –ù–∞–π—Ç–∏ `registerStep()` –∏ –ø–æ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç
  - –ù–∞–π—Ç–∏ –≥–¥–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–µ —à–∞–≥–∏ (measurements)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç `activeDays` –≤ DatePicker:
  - –ö–∞–∫ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è: `Map<dateStr, {...}>`
  - –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ: `{kcal, target, ratio}`
  - –ì–¥–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è Map (—Ä–æ–¥–∏—Ç–µ–ª—å): —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç—É–¥–∞ –ø–æ–ø–∞–¥—ë—Ç `cycleDay`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DayRecord –≤ `heys_models_v1.js`:
  - –ï—Å—Ç—å –ª–∏ —Ç–∞–º –≤—Å–µ –ø–æ–ª—è —á—Ç–æ sync-—è—Ç—Å—è
  - –î–æ–±–∞–≤–∏—Ç—å `cycleDay` –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `prof.gender === '–ñ–µ–Ω—Å–∫–∏–π'` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ 'Female', –Ω–µ '–ñ')
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –æ–±–ª–∞–∫–æ–º**:
  - –í `heys_storage_layer_v1.js` / `heys_storage_supabase_v1.js` ‚Äî –Ω–µ—Ç –ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª–µ–π
  - –ï—Å–ª–∏ sync —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `cycleDay` –≤ whitelist –ø–æ–ª–µ–π DayRecord
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `cycleTrackingEnabled` –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Ç–æ–∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—Å—è
- [ ] **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å ID —Å–æ–≤–µ—Ç–æ–≤**: 
  - –ü—Ä–æ–≥–Ω–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ –¥—É–±–ª–∏ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
  - –í—Å–µ –Ω–æ–≤—ã–µ ID —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `cycle_` (—É–∂–µ –≤ –ø—Ä–æ–º–ø—Ç–µ)

### Naming Convention –¥–ª—è —Å–æ–≤–µ—Ç–æ–≤

**–í—Å–µ –Ω–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å `cycle_`:**
- `cycle_menstruation_iron`
- `cycle_menstruation_rest`
- `cycle_luteal_cravings`
- `cycle_luteal_water`
- `cycle_luteal_calories`
- `cycle_ovulation_energy`
- `cycle_weight_water`

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É.

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å `gender: '–ñ–µ–Ω—Å–∫–∏–π'`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–æ–ª–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í–æ –≤—Ä–µ–º—è –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∂–µ–Ω—Å–∫–∏–π –æ—Ä–≥–∞–Ω–∏–∑–º –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º:

| –§–∞–∑–∞ | –î–Ω–∏ | BMR | –ò–Ω—Å—É–ª–∏–Ω | –ê–ø–ø–µ—Ç–∏—Ç | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|------|-----|-----|---------|---------|----------|
| –ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è | 1-5 | +5-10% | ‚Üì —á—É–≤—Å—Ç–≤. | ‚Üë | Webb 1986 |
| –§–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è | 6-14 | baseline | ‚Üë —á—É–≤—Å—Ç–≤. | –Ω–æ—Ä–º–∞ | ‚Äî |
| –û–≤—É–ª—è—Ü–∏—è | ~14-16 | –ø–∏–∫ | ‚Üë‚Üë —á—É–≤—Å—Ç–≤. | ‚Üì | ‚Äî |
| –õ—é—Ç–µ–∞–ª—å–Ω–∞—è | 17-28 | **+8-16%** | ‚Üì‚Üì —á—É–≤—Å—Ç–≤. | ‚Üë‚Üë —É–≥–ª–µ–≤–æ–¥—ã | Solomon 1982 |

**–°–µ–π—á–∞—Å HEYS —ç—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "–ø–µ—Ä–µ–±–æ—Ä –∫–∞–ª–æ—Ä–∏–π" –∫–æ–≥–¥–∞ —ç—Ç–æ —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞.

---

## –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ —Ü–∏–∫–ª–∞ –¥–ª—è –∂–µ–Ω—â–∏–Ω:
1. –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ—Ç–º–µ—Ç–∫–∞ –≤ —É—Ç—Ä–µ–Ω–Ω–µ–º —á–µ–∫-–∏–Ω–µ
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–æ—Ä–º –∏ —Å–æ–≤–µ—Ç–æ–≤
3. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ß—Ç–æ –º–µ–Ω—è—Ç—å |
|------|------------|
| `apps/web/heys_steps_v1.js` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —à–∞–≥–∞ `cycle` —á–µ—Ä–µ–∑ `registerStep()` |
| `apps/web/heys_morning_checkin_v1.js` | –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –ø–æ–∫–∞–∑–∞ —à–∞–≥–∞ |
| `apps/web/heys_models_v1.js` | DayRecord ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `cycleDay` |
| `apps/web/heys_user_v12.js` | –ü—Ä–æ—Ñ–∏–ª—å ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `cycleTrackingEnabled` toggle |
| `apps/web/heys_day_v12.js` | DatePicker ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ cycleDay, CycleCard –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ |
| `apps/web/heys_advice_v1.js` | –°–æ–≤–µ—Ç—ã ‚Äî —É—á—ë—Ç —Ñ–∞–∑—ã —Ü–∏–∫–ª–∞ |
| `apps/web/heys_day_utils.js` | –£—Ç–∏–ª–∏—Ç–∞ `getCyclePhase()` |
| `apps/web/heys_insulin_wave_v1.js` | –î–æ–±–∞–≤–∏—Ç—å CYCLE_PHASE_BONUS –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É GENDER_BONUS |
| `styles/heys-components.css` | –°—Ç–∏–ª–∏ –¥–ª—è `.cycle-card`, `.day-cycle-dot` |
| `docs/DATA_MODEL_REFERENCE.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π |

---

## –ó–∞–¥–∞—á–∏

### 1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (15 –º–∏–Ω)

**–í `heys_models_v1.js`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ DayRecord:

```javascript
// –¢—Ä–µ–∫–∏–Ω–≥ —Ü–∏–∫–ª–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∂–µ–Ω—â–∏–Ω)
cycleDay: null | number  // –î–µ–Ω—å –æ—Å–æ–±–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (1, 2, 3...), null = –Ω–µ –æ—Ç–º–µ—á–µ–Ω–æ
// –ë–µ–∑ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–∏–º–∏—Ç–∞ ‚Äî —É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–∏–æ–¥ 3-5 –¥–Ω–µ–π, —É –¥—Ä—É–≥–∏—Ö –¥–æ 8-10
```

**–í –ø—Ä–æ—Ñ–∏–ª–µ** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å toggle –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è:

```javascript
// –í DEFAULT_PROFILE (heys_user_v12.js)
cycleTrackingEnabled: false  // –†—É—á–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–µ–∫–∏–Ω–≥–∞ (–¥–ª—è –ª—é–±–æ–≥–æ –ø–æ–ª–∞)
```

**–õ–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞ —à–∞–≥–∞**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è `gender === '–ñ–µ–Ω—Å–∫–∏–π'`
- –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ toggle –¥–ª—è –ª—é–±–æ–≥–æ –ø–æ–ª–∞ (–∏–Ω–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ë–µ–∑ –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª–∏–Ω—ã —Ü–∏–∫–ª–∞. –î–∞–Ω–Ω—ã–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –ø–æ —Ñ–∞–∫—Ç—É –æ—Ç–º–µ—Ç–æ–∫.

### 1.1 –ü–µ—Ä–≤—ã–π –ø–æ–∫–∞–∑ ‚Äî –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (5 –º–∏–Ω)

–ü—Ä–∏ **–ø–µ—Ä–≤–æ–º** –ø–æ–∫–∞–∑–µ —à–∞–≥–∞ –≤ —á–µ–∫-–∏–Ω–µ ‚Äî –º—è–≥–∫–∏–π tooltip:

```
üå∏ –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!

–û—Ç–º–µ—á–∞–π—Ç–µ –æ—Å–æ–±—ã–µ –¥–Ω–∏ –¥–ª—è –±–æ–ª–µ–µ 
—Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ –Ω–æ—Ä–º –∏ —Å–æ–≤–µ—Ç–æ–≤.

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.

[–ü–æ–Ω—è—Ç–Ω–æ]
```

–ü–æ–∫–∞–∑–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑, –∑–∞–ø–æ–º–Ω–∏—Ç—å –≤ `sessionStorage.setItem('heys_cycle_onboarding_shown', '1')`

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —à–∞–≥–∞ –≤ HEYS.Steps (45 –º–∏–Ω)

**–í `heys_steps_v1.js`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –¥—Ä—É–≥–∏—Ö —à–∞–≥–æ–≤:

```javascript
HEYS.Steps.registerStep('cycle', {
  title: '–û—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥',
  icon: 'üå∏',
  hint: '–û—Ç–º–µ—Ç—å—Ç–µ, –µ—Å–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ',
  canSkip: true,
  xpAction: 'cycle_logged',
  
  // –£—Å–ª–æ–≤–∏–µ –ø–æ–∫–∞–∑–∞:
  // 1. –ñ–µ–Ω—Å–∫–∏–π –ø–æ–ª –ò–õ–ò
  // 2. –í–∫–ª—é—á—ë–Ω toggle cycleTrackingEnabled –≤ –ø—Ä–æ—Ñ–∏–ª–µ
  shouldShow: (prof) => prof?.gender === '–ñ–µ–Ω—Å–∫–∏–π' || prof?.cycleTrackingEnabled === true,
  
  component: CycleStepComponent,
  getInitialData: (day, prevDay) => ({
    // –ï—Å–ª–∏ –≤—á–µ—Ä–∞ –±—ã–ª cycleDay ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
    suggestedDay: prevDay?.cycleDay ? prevDay.cycleDay + 1 : null
  }),
  save: (data, day) => {
    day.cycleDay = data.cycleDay;
  }
});
```

**–í `heys_morning_checkin_v1.js`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```javascript
// –ü–æ—Å–ª–µ sleepQuality, –ø–µ—Ä–µ–¥ stepsGoal
const steps = ['weight', 'sleepTime', 'sleepQuality'];

// –£—Å–ª–æ–≤–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º cycle
if (prof?.gender === '–ñ–µ–Ω—Å–∫–∏–π' || prof?.cycleTrackingEnabled) {
  steps.push('cycle');
}

// –£—Å–ª–æ–≤–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–º–µ—Ä—ã
if (HEYS.Steps.shouldShowMeasurements()) {
  steps.push('measurements');
}

steps.push('stepsGoal');
```

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CycleStepComponent**:

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CycleStepComponent**:
```
üå∏ –û—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥

–û—Ç–º–µ—Ç—å—Ç–µ, –µ—Å–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ:

‚óã –ù–∞—á–∞–ª—Å—è —Å–µ–≥–æ–¥–Ω—è
‚óã –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è (–¥–µ–Ω—å ___) ‚Üê –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞: –≤—á–µ—Ä–∞ –±—ã–ª –¥–µ–Ω—å 2 ‚Üí —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å 3
‚óã –ó–∞–∫–æ–Ω—á–∏–ª—Å—è –≤—á–µ—Ä–∞
‚óã –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üí° –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç —Ç–æ—á–Ω–µ–µ
   —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤–∞—à–∏ –Ω–æ—Ä–º—ã
```

**–õ–æ–≥–∏–∫–∞**:
- "–ù–∞—á–∞–ª—Å—è —Å–µ–≥–æ–¥–Ω—è" ‚Üí `cycleDay: 1`
- "–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è" ‚Üí `cycleDay: suggestedDay` –∏–ª–∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥
- "–ó–∞–∫–æ–Ω—á–∏–ª—Å—è –≤—á–µ—Ä–∞" ‚Üí `cycleDay: null`
- "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" ‚Üí –Ω–µ –º–µ–Ω—è—Ç—å cycleDay

**–ê–≤—Ç–æ–¥–µ—Ç–µ–∫—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è**:
- –ï—Å–ª–∏ –≤—á–µ—Ä–∞ –±—ã–ª `cycleDay` –∏ —Å–µ–≥–æ–¥–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–ø—É—Å—Ç–∏–ª —à–∞–≥ ‚Üí —á–µ—Ä–µ–∑ 2 –¥–Ω—è –ø–æ–∫–∞–∑–∞—Ç—å: "–ü–æ—Ö–æ–∂–µ, –æ—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è?"

**–°—Ç–∏–ª—å**:
- –ù–µ–∂–Ω—ã–µ —Ü–≤–µ—Ç–∞ (—Ä–æ–∑–æ–≤–∞—Ç—ã–π/–ª–∞–≤–∞–Ω–¥–æ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç)
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –±–µ–∑ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞
- `canSkip: true` ‚Äî —à–∞–≥ –≤—Å–µ–≥–¥–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π

### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–∑—ã —Ü–∏–∫–ª–∞ (30 –º–∏–Ω)

**–°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É –≤ `heys_day_utils.js`** ‚Äî `getCyclePhase(days: DayRecord[])`:

```javascript
/**
 * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é —Ñ–∞–∑—É —Ü–∏–∫–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–º–µ—Ç–æ–∫
 * @param {DayRecord[]} days - –ú–∞—Å—Å–∏–≤ –¥–Ω–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 60-90 –¥–Ω–µ–π (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ –¥–∞—Ç–µ)
 * @returns {{ phase: string, dayOfCycle: number, daysUntilNext: number | null, avgCycleLength: number }}
 */
function getCyclePhase(days) {
  // 1. –ù–∞–π—Ç–∏ –≤—Å–µ –¥–Ω–∏ —Å cycleDay = 1 (–Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–æ–≤)
  const periodStarts = days.filter(d => d.cycleDay === 1);
  
  // 2. –ï—Å–ª–∏ –º–µ–Ω—å—à–µ 2 –Ω–∞—á–∞–ª ‚Äî fallback –Ω–∞ 28 –¥–Ω–µ–π
  const avgCycleLength = periodStarts.length >= 2 
    ? calculateAvgCycleLength(periodStarts) 
    : 28;
  
  // 3. –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–∞—á–∞–ª–æ
  const lastStart = periodStarts[periodStarts.length - 1];
  if (!lastStart) return { phase: 'unknown', dayOfCycle: 0, daysUntilNext: null, avgCycleLength };
  
  // 4. –í—ã—á–∏—Å–ª–∏—Ç—å –¥–µ–Ω—å —Ü–∏–∫–ª–∞
  const dayOfCycle = daysSince(lastStart.date) + 1;
  
  // 5. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–∑—É
  const phase = getPhaseByDay(dayOfCycle, avgCycleLength);
  
  // 6. –ü—Ä–æ–≥–Ω–æ–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ –Ω–∞—á–∞–ª–∞
  const daysUntilNext = avgCycleLength - dayOfCycle;
  
  return { phase, dayOfCycle, daysUntilNext, avgCycleLength };
}

function getPhaseByDay(day, cycleLength) {
  // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥ –¥–ª–∏–Ω—É —Ü–∏–∫–ª–∞
  const ovulationDay = Math.round(cycleLength * 0.5); // ~14 –¥–ª—è 28-–¥–Ω–µ–≤–Ω–æ–≥–æ
  
  if (day <= 5) return 'menstruation';
  if (day <= ovulationDay - 1) return 'follicular';
  if (day <= ovulationDay + 2) return 'ovulation';
  return 'luteal';
}
```

**–§–∞–∑—ã** (–ø—Ä–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º 28-–¥–Ω–µ–≤–Ω–æ–º —Ü–∏–∫–ª–µ):
- `menstruation`: –¥–Ω–∏ 1-5
- `follicular`: –¥–Ω–∏ 6-13
- `ovulation`: –¥–Ω–∏ 14-16
- `luteal`: –¥–Ω–∏ 17-28

**‚ö†Ô∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤ `HEYS.cache.cyclePhase` —á—Ç–æ–±—ã –Ω–µ —Å—á–∏—Ç–∞—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä.

### 4. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–æ—Ä–º (30 –º–∏–Ω)

**–í —Ä–∞—Å—á—ë—Ç–µ `optimum`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å –ø–æ —Ñ–∞–∑–µ:

| –§–∞–∑–∞ | –ú–Ω–æ–∂–∏—Ç–µ–ª—å –∫–∞–ª–æ—Ä–∏–π | –ú–Ω–æ–∂–∏—Ç–µ–ª—å –≤–æ–¥—ã |
|------|-------------------|----------------|
| menstruation | √ó1.05 | √ó1.1 |
| follicular | √ó1.0 | √ó1.0 |
| ovulation | √ó1.0 | √ó1.0 |
| luteal | **√ó1.10** | √ó1.15 |

**–ì–¥–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å**:
- `calculateOptimum()` ‚Äî –∫–∞–ª–æ—Ä–∏–∏
- `waterGoalBreakdown()` ‚Äî –Ω–æ—Ä–º–∞ –≤–æ–¥—ã

### 5. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–æ–π –≤–æ–ª–Ω—ã (20 –º–∏–Ω)

**–í `heys_insulin_wave_v1.js`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç–æ—Ä –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É GENDER_BONUS:

```javascript
// –ü–æ—Å–ª–µ GENDER_BONUS (~—Å—Ç—Ä–æ–∫–∞ 310)
const CYCLE_PHASE_BONUS = {
  menstruation: 0.12,  // +12% –∫ –≤–æ–ª–Ω–µ (–Ω–∏–∂–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
  follicular: 0.00,    // baseline
  ovulation: -0.05,    // -5% (–ø–∏–∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
  luteal: 0.15         // +15% (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∏–∂–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
};

// –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é (~—Å—Ç—Ä–æ–∫–∞ 780)
const getCyclePhaseBonus = (cyclePhase) => {
  if (!cyclePhase) return 0;
  return CYCLE_PHASE_BONUS[cyclePhase] || 0;
};

// –í —Ä–∞—Å—á—ë—Ç–µ personalBonuses (~—Å—Ç—Ä–æ–∫–∞ 1375)
const cyclePhaseBonus = getCyclePhaseBonus(dayData.cyclePhase);
const personalBonuses = sleepQualityBonus + hydrationBonus + ageBonus + bmiBonus + genderBonus + transFatBonus + cyclePhaseBonus;
```

**–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤–æ–ª–Ω—ã**:
- `dayData.cyclePhase` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∏–∑ –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –∫–æ–¥–∞
- –ü–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ `getCyclePhase(recentDays).phase`

### 6. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã (30 –º–∏–Ω)

**–í `heys_advice_v1.js`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–≤–µ—Ç—ã:

| ID | –§–∞–∑–∞ | –£—Å–ª–æ–≤–∏–µ | –¢–µ–∫—Å—Ç |
|----|------|---------|-------|
| `cycle_menstruation_iron` | menstruation | mealCount >= 1 | "–í —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –≤–∞–∂–Ω–æ –∂–µ–ª–µ–∑–æ ‚Äî –∫—Ä–∞—Å–Ω–æ–µ –º—è—Å–æ, –≥—Ä–µ—á–∫–∞, —à–ø–∏–Ω–∞—Ç" |
| `cycle_menstruation_rest` | menstruation | training | "–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –π–æ–≥—É –∏–ª–∏ –ø—Ä–æ–≥—É–ª–∫—É" |
| `cycle_luteal_cravings` | luteal | simplePct > 1.0 | "–¢—è–≥–∞ –∫ —Å–ª–∞–¥–∫–æ–º—É —Å–µ–π—á–∞—Å ‚Äî —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞, –Ω–µ –≤–∏–Ω–∏—Ç–µ —Å–µ–±—è" |
| `cycle_luteal_water` | luteal | waterPct < 0.7 | "–°–µ–π—á–∞—Å –æ—Ä–≥–∞–Ω–∏–∑–º—É –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤–æ–¥—ã ‚Äî +15% –∫ –æ–±—ã—á–Ω–æ–π –Ω–æ—Ä–º–µ" |
| `cycle_luteal_calories` | luteal | kcalPct > 1.0 && < 1.15 | "–ù–µ–±–æ–ª—å—à–æ–π –ø–µ—Ä–µ–±–æ—Ä –≤ —ç—Ç–æ–π —Ñ–∞–∑–µ ‚Äî –Ω–æ—Ä–º–∞, –º–µ—Ç–∞–±–æ–ª–∏–∑–º –≤—ã—à–µ" |
| `cycle_ovulation_energy` | ovulation | ‚Äî | "–ü–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏ ‚Äî –æ—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫" |
| `cycle_weight_water` | menstruation/luteal | weight‚Üë > 1kg | "–ö–æ–ª–µ–±–∞–Ω–∏—è –≤–µ—Å–∞ –¥–æ 2–∫–≥ ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –≤–æ–¥—ã, –Ω–µ –∂–∏—Ä" |

### 7. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ (20 –º–∏–Ω)

**–í `heys_day_v12.js` ‚Üí DatePicker**:

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ activeDays**:
```javascript
// –°–µ–π—á–∞—Å: activeDays.set(dateStr, { kcal, target, ratio });
// –ù—É–∂–Ω–æ: activeDays.set(dateStr, { kcal, target, ratio, cycleDay });
```

2. **–í —Ä–µ–Ω–¥–µ—Ä–µ —è—á–µ–π–∫–∏** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫—Ä–∞—Å–Ω—É—é —Ç–æ—á–∫—É:
```javascript
const dayData = daysDataMap.get(dateStr);
const hasCycle = dayData?.cycleDay != null;

// –ü–æ—Å–ª–µ statusEmoji
hasCycle && React.createElement('span', { 
  className: 'day-cycle-dot',
  title: `–û—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥, –¥–µ–Ω—å ${dayData.cycleDay}` 
}, 'üî¥')
```

3. **–î–æ–±–∞–≤–∏—Ç—å –≤ –ª–µ–≥–µ–Ω–¥—É**:
```javascript
React.createElement('span', { className: 'legend-item cycle' }, 'üî¥ –æ—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥')
```

**CSS** (–≤ heys-components.css):
```css
.day-cycle-dot {
  position: absolute;
  bottom: 2px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 6px;
}
```

### 8. –ò–Ω–¥–∏–∫–∞—Ü–∏—è –≤ UI –¥–Ω—è (15 –º–∏–Ω)

**–†—è–¥–æ–º —Å –¥–∞—Ç–æ–π** –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–∫–æ–Ω–∫—É üå∏ –µ—Å–ª–∏:
- `cycleDay !== null` (—Å–µ–≥–æ–¥–Ω—è –æ—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥)
- –ò–õ–ò `phase === 'luteal'` (–ª—é—Ç–µ–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞)

**–ü—Ä–∏ –∫–ª–∏–∫–µ** ‚Äî tooltip:
```
–û—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥, –¥–µ–Ω—å 3
–ù–æ—Ä–º—ã —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã +5%
```

**–ü–æ–∫–∞–∑ –∫—É—Ä–∞—Ç–æ—Ä—É**: –ö—É—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ —á—Ç–æ –∫–ª–∏–µ–Ω—Ç ‚Äî —Ä—è–¥–æ–º —Å –¥–Ω—ë–º –º–µ–ª–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º: "–õ—é—Ç–µ–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞, –¥–µ–Ω—å 20". –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–ø–æ—á–µ–º—É "–ø–µ—Ä–µ–±–æ—Ä" –∫–∞–ª–æ—Ä–∏–π ‚Äî —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞).

### 9. –ö–∞—Ä—Ç–æ—á–∫–∞ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ + —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (20 –º–∏–Ω)

**–í UI –¥–Ω—è ‚Üí –≤–∫–ª–∞–¥–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** ‚Äî –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–¥ –∑–∞–º–µ—Ä–∞–º–∏:

```javascript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç CycleCard ‚Äî –Ω–µ–±–æ–ª—å—à–æ–π, –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–π
function CycleCard({ day, setDay, cyclePhase }) {
  const hasCycle = day.cycleDay != null;
  
  return React.createElement('div', { 
    className: 'cycle-card',
    // –°—Ç–∏–ª—å: subtle, –Ω–µ –±—Ä–æ—Å–∞–µ—Ç—Å—è –≤ –≥–ª–∞–∑–∞
  },
    // –ó–∞–≥–æ–ª–æ–≤–æ–∫
    React.createElement('div', { className: 'cycle-card__header' },
      React.createElement('span', null, 'üå∏ –û—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥'),
      hasCycle && React.createElement('span', { className: 'cycle-card__day' }, 
        `–¥–µ–Ω—å ${day.cycleDay}`
      )
    ),
    
    // –§–∞–∑–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ)
    cyclePhase?.phase !== 'unknown' && React.createElement('div', { 
      className: 'cycle-card__phase text-xs text-gray-500' 
    }, `–§–∞–∑–∞: ${getPhaseLabel(cyclePhase.phase)}, –¥–µ–Ω—å ${cyclePhase.dayOfCycle}`),
    
    // –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    React.createElement('button', {
      className: 'cycle-card__edit',
      onClick: () => openCycleEditor(day, setDay)
    }, hasCycle ? '–ò–∑–º–µ–Ω–∏—Ç—å' : '–û—Ç–º–µ—Ç–∏—Ç—å')
  );
}
```

**CSS** (–≤ heys-components.css):
```css
.cycle-card {
  background: rgba(236, 72, 153, 0.05);  /* –æ—á–µ–Ω—å subtle —Ä–æ–∑–æ–≤—ã–π */
  border: 1px solid rgba(236, 72, 153, 0.15);
  border-radius: 8px;
  padding: 12px;
  margin-top: 12px;
  font-size: 14px;
}

.cycle-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.cycle-card__day {
  color: #ec4899;
  font-weight: 500;
}

.cycle-card__edit {
  margin-top: 8px;
  font-size: 12px;
  color: #6b7280;
  text-decoration: underline;
  cursor: pointer;
}
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: –ü–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π –∑–∞–º–µ—Ä–æ–≤ (measurements), –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
- `gender === '–ñ–µ–Ω—Å–∫–∏–π'` –ò–õ–ò `cycleTrackingEnabled === true`

**–†–µ–¥–∞–∫—Ç–æ—Ä** (–ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ò–∑–º–µ–Ω–∏—Ç—å" / "–û—Ç–º–µ—Ç–∏—Ç—å"):
- –ú–∏–Ω–∏-–ø–æ–ø–∞–ø —Å —Ç–µ–º–∏ –∂–µ –æ–ø—Ü–∏—è–º–∏ —á—Ç–æ –≤ —á–µ–∫-–∏–Ω–µ
- –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å: "–ù–∞—á–∞–ª—Å—è", "–î–µ–Ω—å N", "–ó–∞–∫–æ–Ω—á–∏–ª—Å—è", "–£–±—Ä–∞—Ç—å –æ—Ç–º–µ—Ç–∫—É"
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `day.cycleDay`

---

## –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ (tone of voice)

**–ò—Å–ø–æ–ª—å–∑—É–µ–º**:
- "–û—Å–æ–±—ã–π –ø–µ—Ä–∏–æ–¥" / "–û—Å–æ–±—ã–µ –¥–Ω–∏"
- "–§–∞–∑–∞ —Ü–∏–∫–ª–∞"
- "–§–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
- üå∏ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –∏–∫–æ–Ω–∫—É

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º**:
- "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–Ω–∏"
- "–ú–µ—Å—è—á–Ω—ã–µ"
- "–ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è" (—Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- ü©∏ (—Å–ª–∏—à–∫–æ–º –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ)

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –®–∞–≥ –≤–∏–¥–µ–Ω –¥–ª—è `gender === '–ñ–µ–Ω—Å–∫–∏–π'`
- [ ] –®–∞–≥ –≤–∏–¥–µ–Ω –µ—Å–ª–∏ `cycleTrackingEnabled === true` (–ª—é–±–æ–π –ø–æ–ª)
- [ ] –®–∞–≥ –ù–ï –≤–∏–¥–µ–Ω –¥–ª—è `gender === '–ú—É–∂—Å–∫–æ–π'` –±–µ–∑ toggle
- [ ] –®–∞–≥ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (canSkip: true)
- [ ] –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
- [ ] –ù–æ—Ä–º—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤ –ª—é—Ç–µ–∞–ª—å–Ω—É—é —Ñ–∞–∑—É (+10% optimum)
- [ ] –°–æ–≤–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ
- [ ] –ö–∞–ª–µ–Ω–¥–∞—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏
- [ ] –ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–∑—É

### Edge cases
- [ ] –°–º–µ–Ω–∞ –ø–æ–ª–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ: –ú‚Üí–ñ ‚Äî —à–∞–≥ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] –°–º–µ–Ω–∞ –ø–æ–ª–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ: –ñ‚Üí–ú ‚Äî —à–∞–≥ –∏—Å—á–µ–∑–∞–µ—Ç, –¥–∞–Ω–Ω—ã–µ cycleDay –æ—Å—Ç–∞—é—Ç—Å—è
- [ ] –ü–µ—Ä–≤—ã–π —Ä–∞–∑: –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ ‚Äî —Ñ–∞–∑–∞ `unknown`, fallback 28 –¥–Ω–µ–π
- [ ] –î–ª–∏–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (8+ –¥–Ω–µ–π) ‚Äî –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è
- [ ] –ù–µ—Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ü–∏–∫–ª (—Ä–∞–∑–Ω–∞—è –¥–ª–∏–Ω–∞) ‚Äî —Å—Ä–µ–¥–Ω–µ–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö—É—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞-–∂–µ–Ω—â–∏–Ω—ã

---

## –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–í `DATA_MODEL_REFERENCE.md`**:

1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `cycleDay` –≤ DayRecord
2. –û–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getCyclePhase()`
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ –ø–æ —Ñ–∞–∑–∞–º
4. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü—É

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚úÖ –ñ–µ–Ω—â–∏–Ω—ã –º–æ–≥—É—Ç –æ—Ç–º–µ—á–∞—Ç—å –æ—Å–æ–±—ã–µ –¥–Ω–∏
- ‚úÖ –ù–æ—Ä–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –°–æ–≤–µ—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—é
- ‚úÖ –ù–µ—Ç –ª–æ–∂–Ω–æ–≥–æ —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã –∑–∞ "–ø–µ—Ä–µ–±–æ—Ä"
- ‚úÖ –ö—É—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ –¥–µ–ª–∏–∫–∞—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏

---

## üü¢ WOW-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (Phase 2 ‚Äî –ø–æ—Å–ª–µ MVP)

### 1. üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∞–∑ –Ω–∞ sparkline
- –õ—ë–≥–∫–∏–π —Ñ–æ–Ω–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –ø–æ —Ñ–∞–∑–∞–º –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ –∫–∞–ª–æ—Ä–∏–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é –∫–∞–ª–æ—Ä–∏–π/–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —Å —Ñ–∞–∑–æ–π

### 2. üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–∏–∫–ª–∞
- –ö–∞—Ä—Ç–æ—á–∫–∞ "–í–∞—à —Ü–∏–∫–ª": —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞, —Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å
- –ò–Ω—Å–∞–π—Ç: "–í –ª—é—Ç–µ–∞–ª—å–Ω—É—é —Ñ–∞–∑—É –≤—ã –æ–±—ã—á–Ω–æ –µ–¥–∏—Ç–µ –Ω–∞ X% –±–æ–ª—å—à–µ"
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Å–Ω–∞ –ø–æ —Ñ–∞–∑–∞–º

### 3. üîÆ –ü—Ä–æ–≥–Ω–æ–∑ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –ó–∞ 2-3 –¥–Ω—è –¥–æ –ª—é—Ç–µ–∞–ª—å–Ω–æ–π —Ñ–∞–∑—ã: "–°–∫–æ—Ä–æ –æ—Ä–≥–∞–Ω–∏–∑–º –±—É–¥–µ—Ç –ø—Ä–æ—Å–∏—Ç—å –±–æ–ª—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏"
- PWA push notification (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)

### 4. üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —Ñ–∞–∑
- –ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è: —Ä–æ–∑–æ–≤—ã–π üå∏
- –§–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è: –≥–æ–ª—É–±–æ–π üíô  
- –û–≤—É–ª—è—Ü–∏—è: –∑–æ–ª–æ—Ç–æ–π ‚≠ê
- –õ—é—Ç–µ–∞–ª—å–Ω–∞—è: –ª–∞–≤–∞–Ω–¥–æ–≤—ã–π üíú
- Subtle –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –¥–Ω—è –≤ UI

### 5. üåô –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å–æ —Å–Ω–æ–º
- –°–æ–≤–µ—Ç: "–í –ª—é—Ç–µ–∞–ª—å–Ω—É—é —Ñ–∞–∑—É –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å—Å—è ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ"
- –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é sleepQuality ‚Üî cyclePhase

---

## ‚ö†Ô∏è –†–∏—Å–∫-–º–∞—Ç—Ä–∏—Ü–∞

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ò–º–ø–∞–∫—Ç | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|--------|-----------|
| –®–∞–≥ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –∂–µ–Ω—â–∏–Ω | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∏–π | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `shouldShow` –∏ –ø–æ—Ä—è–¥–æ–∫ —à–∞–≥–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ |
| cycleDay –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ sync | –ù–∏–∑–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª–µ –µ—Å—Ç—å –≤ DayRecord –º–æ–¥–µ–ª–∏ |
| DatePicker –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ—á–∫–∏ | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–∏–π | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É cycleDay –≤ activeDays Map |
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Ñ–∞–∑—ã | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–∏–π | –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç –¥–ª—è getCyclePhase() |
| –°–æ–≤–µ—Ç—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è | –ù–∏–∑–∫–∞—è | –ù–∏–∑–∫–∏–π | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ priority —Å–æ–≤–µ—Ç–æ–≤ |

---

## üîô Rollback –ø–ª–∞–Ω

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫:

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ git
git checkout apps/web/heys_steps_v1.js
git checkout apps/web/heys_morning_checkin_v1.js
git checkout apps/web/heys_models_v1.js

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–∑ –±—ç–∫–∞–ø–æ–≤
cp apps/web/heys_morning_checkin_v1.backup.js apps/web/heys_morning_checkin_v1.js
cp apps/web/heys_steps_v1.backup.js apps/web/heys_steps_v1.js
```

**–ü–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞**:
1. `pnpm dev` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
2. –û—Ç–∫—Ä—ã—Ç—å localhost:3001 
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MorningCheckin —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ß–µ–∫–ª–∏—Å—Ç –¥–æ/–ø–æ—Å–ª–µ

**–î–æ:**
- [ ] –°–∫—Ä–∏–Ω—à–æ—Ç MorningCheckin (–∂–µ–Ω—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å)
- [ ] –ö–æ–Ω—Å–æ–ª—å —á–∏—Å—Ç–∞—è
- [ ] –ß–µ–∫-–∏–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é

**–ü–æ—Å–ª–µ:**
- [ ] –ù–æ–≤—ã–π —à–∞–≥ –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∂–µ–Ω—â–∏–Ω
- [ ] –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
- [ ] –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å localStorage)
- [ ] –ö–æ–Ω—Å–æ–ª—å ‚Äî –Ω–µ—Ç –Ω–æ–≤—ã—Ö –æ—à–∏–±–æ–∫
- [ ] –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏
