# üíä –ù–∞—É—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –≤–∏—Ç–∞–º–∏–Ω–æ–≤ v2.0 ‚Äî –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –§–æ—Ä–º—ã, –õ–∏–º–∏—Ç—ã

> **–î–∞—Ç–∞**: 2025-12-15  
> **–§–∞–π–ª—ã**: `apps/web/heys_supplements_v1.js`,
> `apps/web/heys_supplements_science_v1.js`, `apps/web/heys_steps_v1.js`,
> `apps/web/heys_advice_v1.js`  
> **–í–µ—Ä—Å–∏—è –º–æ–¥—É–ª—è**: 3.4.0 ‚Üí 4.0.0  
> **–í—Ä–µ–º—è**: ~4-6 —á–∞—Å–æ–≤

---

## üìå TL;DR

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å 3 –Ω–∞—É—á–Ω—ã—Ö —Ñ–∏—á–∏ –≤ –º–æ–¥—É–ª—å –≤–∏—Ç–∞–º–∏–Ω–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ–º**:

1. **‚è∞ Smart Schedule** ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞ —Å —É—á—ë—Ç–æ–º
   –µ–¥—ã/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
2. **üî¨ –§–æ—Ä–º—ã –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤** ‚Äî —Ä–∞–∑–Ω–∞—è –±–∏–æ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (—Ü–∏—Ç—Ä–∞—Ç vs –æ–∫—Å–∏–¥ –º–∞–≥–Ω–∏—è)
3. **‚ö†Ô∏è –í–µ—Ä—Ö–Ω–∏–µ –ª–∏–º–∏—Ç—ã** ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫—É—Ä—Å–∞

**–ó–∞—á–µ–º**:

- –ù–∞—É—á–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å ‚Üí –¥–æ–≤–µ—Ä–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –ª—É—á—à–µ–µ —É—Å–≤–æ–µ–Ω–∏–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–æ–∑–∏—Ä–æ–≤–∫–∏

---

## üß© –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (—á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å –ø—Ä–æ–¥)

### –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (—É–∂–µ –≤ –∫–æ–¥–µ)

- `profile.plannedSupplements: string[]` ‚Äî –≤—ã–±–æ—Ä ¬´–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª (–Ω–∞ –∑–∞–≤—Ç—Ä–∞)
- `day.supplementsPlanned: string[]` ‚Äî –ø–ª–∞–Ω –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å
- `day.supplementsTaken: string[]` ‚Äî —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏–Ω—è—Ç–æ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å

‚ö†Ô∏è –í –∫–æ–¥–µ –º–Ω–æ–≥–æ –º–µ—Å—Ç, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `includes(id)` –∏ –¥–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É
`CATALOG[id]` / `SCIENCE[...][id]`. –ü–æ—ç—Ç–æ–º—É:

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–ù–ï –º–µ–Ω—è–µ–º —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–æ–≤** –≤ —ç—Ç–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö (–Ω–µ –¥–µ–ª–∞–µ–º –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –Ω–µ –¥–µ–ª–∞–µ–º
`'id:form'`). –ò–Ω–∞—á–µ —Å–ª–æ–º–∞–µ–º:

- –∫–∞—Ä—Ç–æ—á–∫—É –≤–∏—Ç–∞–º–∏–Ω–æ–≤ (`renderSupplementsCard`)
- —Å–æ–≤–µ—Ç—ã –≤ `heys_advice_v1.js` (—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ `includes(id)`)
- –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã science-—Å–æ–≤–µ—Ç–æ–≤ (`generateMorning/EveningSupplementAdvice`)
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/—Å–æ–±—ã—Ç–∏—è –∏–∑ `heys_steps_v1.js`

### –ö–∞–∫ –¥–æ–±–∞–≤–ª—è–µ–º ¬´—Ñ–æ—Ä–º—ã/–¥–æ–∑—ã/–∫—É—Ä—Å—ã¬ª –±–µ–∑–æ–ø–∞—Å–Ω–æ

–î–æ–±–∞–≤–ª—è–µ–º **–æ—Ç–¥–µ–ª—å–Ω—É—é –º–∞–ø—É –Ω–∞—Å—Ç—Ä–æ–µ–∫** –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –¥–Ω–µ), –Ω–µ
—Ç—Ä–æ–≥–∞—è –º–∞—Å—Å–∏–≤—ã ID:

```js
// profile
profile.supplementSettings = {
  magnesium: { form: 'glycinate', dose: 200, unit: 'mg' },
  vitD: { form: 'd3', dose: 2000, unit: 'IU' },
};

// day (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω override –¥–æ–∑—ã/—Ñ–æ—Ä–º—ã ¬´—Å–µ–≥–æ–¥–Ω—è¬ª)
day.supplementsTakenMeta = {
  magnesium: { form: 'glycinate', dose: 200, unit: 'mg', takenAt: '22:10' },
};
```

### –£–∂–µ –µ—Å—Ç—å science-–º–æ–¥—É–ª—å ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º

–§–∞–π–ª `apps/web/heys_supplements_science_v1.js` **—É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç**:

- `BIOAVAILABILITY` (–≤ —Ç.—á. —Ñ–æ—Ä–º—ã –º–∞–≥–Ω–∏—è, B12, C)
- `CIRCADIAN_OPTIMAL` (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ + —Ö—Ä–æ–Ω–æ—Ç–∏–ø—ã)
- `MORNING_SUPPLEMENT_SCIENCE` (timing + human —Ç–µ–∫—Å—Ç)
- –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ/–≤–µ—á–µ—Ä–Ω–µ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–º–∏ –ø–æ–ª—å–∑—É–µ—Ç—Å—è advice

–ó–Ω–∞—á–∏—Ç –≤ v2 –Ω–µ —Å–æ–∑–¥–∞—ë–º ¬´–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã¬ª –≤ `SUPPLEMENTS_CATALOG`, –∞
—Ä–∞—Å—à–∏—Ä—è–µ–º/–¥–æ–ø–æ–ª–Ω—è–µ–º `HEYS.Supplements.SCIENCE`.

---

## üéØ –§–∏—á–∞ 1: Smart Schedule (–£–º–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–°–µ–π—á–∞—Å `timing` —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∞: `'morning'`, `'withFood'`, `'beforeBed'`. –ù–µ—Ç
–ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–æ–±—ã—Ç–∏—è–º –¥–Ω—è.

‚úÖ –í–∞–∂–Ω–æ: –≤ –∫–æ–¥–µ **—É–∂–µ –µ—Å—Ç—å** –Ω–∞—É—á–Ω–∞—è –∫–∞—Ä—Ç–∞
`SCIENCE.MORNING_SUPPLEMENT_SCIENCE`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ —Å—É—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º
`timing` (–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ advice). Smart Schedule –¥–æ–ª–∂–µ–Ω —Å—Ç—Ä–æ–∏—Ç—å—Å—è **–ø–æ–≤–µ—Ä—Ö
–Ω–µ—ë**, –∞ –Ω–µ –≤–≤–æ–¥–∏—Ç—å –Ω–æ–≤—ã–π –¥—É–±–ª–∏—Ä—É—é—â–∏–π enum.

### –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è timing

1. `HEYS.Supplements.SCIENCE.MORNING_SUPPLEMENT_SCIENCE[id].timing` (–µ—Å–ª–∏ –µ—Å—Ç—å)

2. fallback: `SUPPLEMENTS_CATALOG[id].timing`

3. fallback: `'anytime'`

_(–¢–∞–∫ –º—ã –Ω–µ –ª–æ–º–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–±–∞–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—â—ë –Ω–µ –æ–ø–∏—Å–∞–Ω—ã –≤ science.)_

### (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) TIMING_DETAILS

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –µ–¥–∏–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–ª—è UI-–ª–µ–π–±–ª–æ–≤/–∏–∫–æ–Ω–æ–∫/–¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –æ–∫–æ–Ω ‚Äî –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏
`TIMING_DETAILS`, –Ω–æ:

- —Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –ª—É—á—à–µ –≤ `heys_supplements_science_v1.js`
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞–∫ UI-—Å–ª–æ–≤–∞—Ä—å
- **–Ω–µ –ø–æ–¥–º–µ–Ω—è—Ç—å** –∏–º `MORNING_SUPPLEMENT_SCIENCE`

```javascript
const TIMING_DETAILS = {
  morning: {
    label: '–£—Ç—Ä–æ–º',
    icon: 'üåÖ',
    optimalHour: 8,
    hourRange: [6, 10],
    withFood: false,
    reason: '–ö–æ—Ä—Ç–∏–∑–æ–ª –º–∞–∫—Å–∏–º–∞–ª–µ–Ω —É—Ç—Ä–æ–º, –≤–∏—Ç–∞–º–∏–Ω—ã —É—Å–≤–∞–∏–≤–∞—é—Ç—Å—è –ª—É—á—à–µ',
  },
  withFood: {
    label: '–° –µ–¥–æ–π',
    icon: 'üçΩÔ∏è',
    optimalHour: null, // –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—Ä–∏—ë–º—É –ø–∏—â–∏
    withFood: true,
    reason: '–ñ–∏—Ä–æ—Ä–∞—Å—Ç–≤–æ—Ä–∏–º—ã–µ –∏ –º–∏–Ω–µ—Ä–∞–ª—ã –ª—É—á—à–µ —É—Å–≤–∞–∏–≤–∞—é—Ç—Å—è —Å –ø–∏—â–µ–π',
  },
  withFat: {
    label: '–° –∂–∏—Ä–Ω–æ–π –ø–∏—â–µ–π',
    icon: 'ü•ë',
    optimalHour: null,
    withFood: true,
    needsFat: true,
    minFat: 5, // –≥—Ä–∞–º–º –∂–∏—Ä–∞ –¥–ª—è —É—Å–≤–æ–µ–Ω–∏—è
    reason: 'D, E, K, A ‚Äî –∂–∏—Ä–æ—Ä–∞—Å—Ç–≤–æ—Ä–∏–º—ã–µ, –±–µ–∑ –∂–∏—Ä–∞ —Ç–µ—Ä—è—é—Ç –¥–æ 80%',
  },
  empty: {
    label: '–ù–∞—Ç–æ—â–∞–∫',
    icon: 'üö∞',
    optimalHour: 7,
    hourRange: [6, 9],
    withFood: false,
    gapBeforeFood: 30, // –º–∏–Ω—É—Ç –¥–æ –µ–¥—ã
    reason: '–ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—ã –∏ –∫–æ–ª–ª–∞–≥–µ–Ω –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç —Å –±–µ–ª–∫–æ–º –ø–∏—â–∏',
  },
  beforeMeal: {
    label: '–ó–∞ 15-30 –º–∏–Ω –¥–æ –µ–¥—ã',
    icon: '‚è∞',
    optimalHour: null,
    gapBeforeFood: 20,
    reason: '–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ñ–µ—Ä–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –ø—Ä–∏—ë–º–æ–º –ø–∏—â–∏',
  },
  evening: {
    label: '–í–µ—á–µ—Ä–æ–º',
    icon: 'üåÜ',
    optimalHour: 19,
    hourRange: [18, 21],
    withFood: true,
    reason: '–ú–∞–≥–Ω–∏–π –∏ —É—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∏–µ –ª—É—á—à–µ –≤–µ—á–µ—Ä–æ–º',
  },
  beforeBed: {
    label: '–ü–µ—Ä–µ–¥ —Å–Ω–æ–º',
    icon: 'üåô',
    optimalHour: 22,
    hourRange: [21, 23],
    gapBeforeSleep: 30,
    withFood: false,
    reason: '–ú–µ–ª–∞—Ç–æ–Ω–∏–Ω –∏ –≥–ª–∏—Ü–∏–Ω —Ä–∞–±–æ—Ç–∞—é—Ç –≤–æ —Å–Ω–µ',
  },
  afterTrain: {
    label: '–ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏',
    icon: 'üèãÔ∏è',
    optimalHour: null, // –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ
    gapAfterTrain: 30, // –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏
    reason: '–ê–Ω–∞–±–æ–ª–∏—á–µ—Å–∫–æ–µ –æ–∫–Ω–æ ‚Äî 30-60 –º–∏–Ω –ø–æ—Å–ª–µ –Ω–∞–≥—Ä—É–∑–∫–∏',
  },
  anytime: {
    label: '–í –ª—é–±–æ–µ –≤—Ä–µ–º—è',
    icon: '‚≠ê',
    optimalHour: null,
    reason: '–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫',
  },
};
```

### –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Ç–æ–ª—å–∫–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)

```javascript
/**
 * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –¥–µ–Ω—å
 * @param {string[]} plannedSupps - –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏
 * @param {Object} dayData - –¥–∞–Ω–Ω—ã–µ –¥–Ω—è (meals, trainings, sleepStart)
 * @returns {Array<{ time: string, supplements: Array, reason: string }>}
 */
function generateDailySchedule(plannedSupps, dayData, profile) {
  const schedule = [];
  const meals = dayData.meals || [];
  const trainings = dayData.trainings || [];
  const bedtime = dayData.sleepStart || '23:00';

  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ timing
  const byTiming = {};
  for (const suppId of plannedSupps) {
    const supp = SUPPLEMENTS_CATALOG[suppId];
    if (!supp) continue;
    const timing =
      HEYS.Supplements?.SCIENCE?.MORNING_SUPPLEMENT_SCIENCE?.[suppId]?.timing ||
      supp.timing ||
      'anytime';
    if (!byTiming[timing]) byTiming[timing] = [];
    byTiming[timing].push(suppId);
  }

  // 1. –£—Ç—Ä–æ –Ω–∞—Ç–æ—â–∞–∫ (empty)
  if (byTiming.empty?.length) {
    schedule.push({
      time: '07:00',
      supplements: byTiming.empty,
      reason: '–ù–∞—Ç–æ—â–∞–∫ –∑–∞ 30 –º–∏–Ω –¥–æ –µ–¥—ã',
      status: 'pending',
    });
  }

  // 2. –£—Ç—Ä–µ–Ω–Ω–∏–µ (morning)
  if (byTiming.morning?.length) {
    schedule.push({
      time: '08:00',
      supplements: byTiming.morning,
      reason: '–£—Ç—Ä–æ ‚Äî –ø–∏–∫ –∫–æ—Ä—Ç–∏–∑–æ–ª–∞, –º–∞–∫—Å —ç–Ω–µ—Ä–≥–∏—è',
      status: 'pending',
    });
  }

  // 3. –° –∑–∞–≤—Ç—Ä–∞–∫–æ–º (withFood, withFat)
  const breakfast = meals.find((m) => {
    const h = parseInt(m.time?.split(':')[0] || 0);
    return h >= 6 && h <= 10;
  });
  if (breakfast && (byTiming.withFood?.length || byTiming.withFat?.length)) {
    schedule.push({
      time: breakfast.time,
      supplements: [...(byTiming.withFood || []), ...(byTiming.withFat || [])],
      reason: '–° –∑–∞–≤—Ç—Ä–∞–∫–æ–º –¥–ª—è –ª—É—á—à–µ–≥–æ —É—Å–≤–æ–µ–Ω–∏—è',
      status: 'pending',
    });
  }

  // 4. –î–æ –æ–±–µ–¥–∞ (beforeMeal)
  const lunch = meals.find((m) => {
    const h = parseInt(m.time?.split(':')[0] || 0);
    return h >= 12 && h <= 14;
  });
  // ‚ö†Ô∏è –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ —Å–æ–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Ä—É–∫–∞–º–∏.
  // –ù—É–∂–Ω—ã —É—Ç–∏–ª–∏—Ç—ã:
  // - parseHHMM(time) -> minutes
  // - formatHHMM(minutes)
  // - clampToDay(minutes)
  // –∏ —Å–º–µ—â–µ–Ω–∏—è —Ç–∏–ø–∞ "gapBeforeFood".

  // 5. –ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (afterTrain)
  // ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ –¥–∞–Ω–Ω—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:
  // - `training.z` –µ—Å—Ç—å –Ω–µ –≤—Å–µ–≥–¥–∞
  // - `training.time` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
  // –ü–æ—ç—Ç–æ–º—É: –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî —Å—á–∏—Ç–∞–µ–º "+30 –º–∏–Ω—É—Ç" –æ—Ç –≤—Ä–µ–º–µ–Ω–∏,
  // –∞ –µ—Å–ª–∏ –µ—Å—Ç—å –∑–æ–Ω—ã ‚Äî duration = sum(z)

  // 6. –í–µ—á–µ—Ä–Ω–∏–µ (evening)
  if (byTiming.evening?.length) {
    schedule.push({
      time: '19:00',
      supplements: byTiming.evening,
      reason: '–í–µ—á–µ—Ä ‚Äî —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ',
      status: 'pending',
    });
  }

  // 7. –ü–µ—Ä–µ–¥ —Å–Ω–æ–º (beforeBed)
  // ‚ö†Ô∏è –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: "–∑–∞ X –º–∏–Ω—É—Ç –¥–æ —Å–Ω–∞" –ª—É—á—à–µ —Å—á–∏—Ç–∞—Ç—å –æ—Ç
  // —Ä–µ–∞–ª—å–Ω–æ–≥–æ `sleepStart` (–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–ø–∞—Ç—å –≤ 01:00).

  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
  schedule.sort((a, b) => a.time.localeCompare(b.time));

  return schedule;
}
```

### Edge cases, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø–æ–∫—Ä—ã—Ç—å

- –í –¥–Ω–µ –Ω–µ—Ç –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏ (`day.meals=[]`) ‚Üí —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ
  –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è (–¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –æ–∫–Ω–∞ + ¬´–∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–≤—Ç—Ä–∞–∫ ‚Äî –ø—Ä–∏–≤—è–∂–µ–º¬ª)
- –í—Ä–µ–º—è –ø—Ä–∏—ë–º–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –∫—Ä–∏–≤–æ–µ (`''`, `null`) ‚Üí –Ω–µ –ø–∞–¥–∞—Ç—å
- –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Üí –±—Ä–∞—Ç—å –±–ª–∏–∂–∞–π—à—É—é –∫ —Ç–µ–∫—É—â–µ–º—É –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ –ø–µ—Ä–≤—É—é –≤ —Å–ø–∏—Å–∫–µ
- –°–æ–Ω –ø–æ—Å–ª–µ –ø–æ–ª—É–Ω–æ—á–∏ (`01:00`) ‚Üí –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å–ª–æ—Ç `beforeBed`
- –•—Ä–æ–Ω–æ—Ç–∏–ø (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SCIENCE.CIRCADIAN_OPTIMAL.chronotypes` –∏
  `profile.chronotype` (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º) –¥–ª—è —Å–¥–≤–∏–≥–∞ –æ–∫–Ω–∞

### UI: –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–í –∫–∞—Ä—Ç–æ—á–∫–µ –≤–∏—Ç–∞–º–∏–Ω–æ–≤ –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫:

```
üìÖ –¢–≤–æ—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 07:00  üö∞ –ö–æ–ª–ª–∞–≥–µ–Ω, –ñ–µ–ª–µ–∑–æ             ‚îÇ
‚îÇ        ‚Üí –ù–∞—Ç–æ—â–∞–∫ –∑–∞ 30 –º–∏–Ω –¥–æ –µ–¥—ã      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 08:30  üçΩÔ∏è D3, Omega-3, B12            ‚îÇ  ‚Üê —Ç–µ–∫—É—â–µ–µ
‚îÇ        ‚Üí –° –∑–∞–≤—Ç—Ä–∞–∫–æ–º                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 19:30  üí™ –ö—Ä–µ–∞—Ç–∏–Ω, –ü—Ä–æ—Ç–µ–∏–Ω             ‚îÇ
‚îÇ        ‚Üí –ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 22:00  üåô –ú–∞–≥–Ω–∏–π, –ú–µ–ª–∞—Ç–æ–Ω–∏–Ω            ‚îÇ
‚îÇ        ‚Üí –ó–∞ —á–∞—Å –¥–æ —Å–Ω–∞                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –§–∏—á–∞ 2: –§–æ—Ä–º—ã –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ (Bioavailability)

### –ù–∞—É—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—ã –æ–¥–Ω–æ–≥–æ –≤–µ—â–µ—Å—Ç–≤–∞ –∏–º–µ—é—Ç **—Ä–∞–∑–Ω—É—é –±–∏–æ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**:

| –í–µ—â–µ—Å—Ç–≤–æ     | –ü–ª–æ—Ö–∞—è —Ñ–æ—Ä–º–∞   | –•–æ—Ä–æ—à–∞—è —Ñ–æ—Ä–º–∞                | –†–∞–∑–Ω–∏—Ü–∞  |
| ------------ | -------------- | ---------------------------- | -------- |
| **–ú–∞–≥–Ω–∏–π**   | –û–∫—Å–∏–¥ (4%)     | –¶–∏—Ç—Ä–∞—Ç (30%), –ì–ª–∏—Ü–∏–Ω–∞—Ç (50%) | **12x**  |
| **–¶–∏–Ω–∫**     | –û–∫—Å–∏–¥ (50%)    | –ü–∏–∫–æ–ª–∏–Ω–∞—Ç (90%)              | **1.8x** |
| **–ñ–µ–ª–µ–∑–æ**   | –°—É–ª—å—Ñ–∞—Ç (10%)  | –ë–∏—Å–≥–ª–∏—Ü–∏–Ω–∞—Ç (40%)            | **4x**   |
| **B12**      | –¶–∏–∞–Ω–æ–∫–æ–±–∞–ª–∞–º–∏–Ω | –ú–µ—Ç–∏–ª–∫–æ–±–∞–ª–∞–º–∏–Ω               | **1.5x** |
| **–§–æ–ª–∏–µ–≤–∞—è** | Folic acid     | 5-MTHF (–º–µ—Ç–∏–ª—Ñ–æ–ª–∞—Ç)          | **2x**   |

### –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ñ–æ—Ä–º–∞—Ö (—á—Ç–æ–±—ã –Ω–µ –ø–ª–æ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–∞–≤–¥—ã)

–ß–∞—Å—Ç—å —Ñ–æ—Ä–º —É–∂–µ –µ—Å—Ç—å –≤ `SCIENCE.BIOAVAILABILITY`:

- `BIOAVAILABILITY.magnesium.forms` (oxide/citrate/glycinate/...)
- `BIOAVAILABILITY.b12.forms`
- `BIOAVAILABILITY.vitC.forms`

–î–ª—è –¥–æ–±–∞–≤–æ–∫, –≥–¥–µ —Ñ–æ—Ä–º –ø–æ–∫–∞ –Ω–µ—Ç (–∂–µ–ª–µ–∑–æ, —Ü–∏–Ω–∫, D3), —Ä–∞—Å—à–∏—Ä—è–µ–º science-–º–æ–¥—É–ª—å:

- –ª–∏–±–æ –¥–æ–ø–æ–ª–Ω—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —É–∑–µ–ª –≤ `BIOAVAILABILITY`
- –ª–∏–±–æ –≤–≤–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–∞—Ä—Ç—É `SCIENCE.FORMS[suppId] = {...}`

‚ö†Ô∏è `SUPPLEMENTS_CATALOG` –æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è UI (–∏–º—è/–∏–∫–æ–Ω–∫–∞/–∫–∞—Ç–µ–≥–æ—Ä–∏—è/–±–∞–∑–æ–≤—ã–π timing),
–∞ —Ñ–æ—Ä–º—ã/—É—Å–≤–æ–µ–Ω–∏–µ –¥–µ—Ä–∂–∏–º –≤ science.

–ü—Ä–∏–º–µ—Ä (–≤ `heys_supplements_science_v1.js`):

```javascript
HEYS.Supplements.SCIENCE.FORMS = {
  magnesium: {
    defaultForm: 'citrate',
    forms: {
      oxide: {
        name: '–û–∫—Å–∏–¥',
        bioavailabilityPct: 4,
        badge: '‚ö†Ô∏è –ù–∏–∑–∫–æ–µ —É—Å–≤–æ–µ–Ω–∏–µ',
        tip: '–î–µ—à—ë–≤—ã–π, –Ω–æ —É—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ',
      },
      citrate: {
        name: '–¶–∏—Ç—Ä–∞—Ç',
        bioavailabilityPct: 30,
        badge: '‚úì –•–æ—Ä–æ—à–æ',
        tip: '–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ',
      },
      glycinate: {
        name: '–ì–ª–∏—Ü–∏–Ω–∞—Ç',
        bioavailabilityPct: 50,
        badge: '‚≠ê –õ—É—á—à–∏–π',
        tip: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É—Å–≤–æ–µ–Ω–∏–µ, –º—è–≥–∫–∏–π –¥–ª—è –ñ–ö–¢',
      },
      taurate: {
        name: '–¢–∞—É—Ä–∞—Ç',
        bioavailabilityPct: 45,
        badge: '‚ù§Ô∏è –î–ª—è —Å–µ—Ä–¥—Ü–∞',
        tip: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ—Ä–¥—Ü–∞/–¥–∞–≤–ª–µ–Ω–∏—è',
      },
      threonate: {
        name: 'L-—Ç—Ä–µ–æ–Ω–∞—Ç',
        bioavailabilityPct: 40,
        badge: 'üß† –î–ª—è –º–æ–∑–≥–∞',
        tip: '–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏',
      },
    },
  },

  iron: {
    defaultForm: 'bisglycinate',
    forms: {
      sulfate: {
        name: '–°—É–ª—å—Ñ–∞—Ç',
        bioavailabilityPct: 10,
        badge: '‚ö†Ô∏è –ü–æ–±–æ—á–∫–∏ –ñ–ö–¢',
        tip: '–ß–∞—â–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç –ñ–ö–¢',
      },
      bisglycinate: {
        name: '–ë–∏—Å–≥–ª–∏—Ü–∏–Ω–∞—Ç',
        bioavailabilityPct: 40,
        badge: '‚≠ê –õ—É—á—à–∏–π',
        tip: '–•–æ—Ä–æ—à–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è',
      },
      liposomal: {
        name: '–õ–∏–ø–æ—Å–æ–º–∞–ª—å–Ω–æ–µ',
        bioavailabilityPct: 50,
        badge: 'üíé –ü—Ä–µ–º–∏—É–º',
        tip: '–í—ã—Å–æ–∫–∞—è –±–∏–æ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
      },
    },
  },

  vitD: {
    defaultForm: 'd3',
    forms: {
      d2: {
        name: 'D2 (—ç—Ä–≥–æ–∫–∞–ª—å—Ü–∏—Ñ–µ—Ä–æ–ª)',
        bioavailabilityPct: 50,
        badge: '‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–≤—à–∏–π',
        tip: '–ú–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω —á–µ–º D3',
      },
      d3: {
        name: 'D3 (—Ö–æ–ª–µ–∫–∞–ª—å—Ü–∏—Ñ–µ—Ä–æ–ª)',
        bioavailabilityPct: 100,
        badge: '‚úì –°—Ç–∞–Ω–¥–∞—Ä—Ç',
        tip: '–ò–¥–µ–Ω—Ç–∏—á–µ–Ω —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ–º–æ–º—É –∫–æ–∂–µ–π',
      },
      liposomal: {
        name: 'D3 –õ–∏–ø–æ—Å–æ–º–∞–ª—å–Ω—ã–π',
        bioavailabilityPct: 130,
        badge: '‚≠ê –ü—Ä–µ–º–∏—É–º',
        tip: '–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –±–∏–æ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
      },
    },
  },
};
```

### UI: –í—ã–±–æ—Ä —Ñ–æ—Ä–º—ã –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–æ–±–∞–≤–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å popup:

```
üí§ –ú–∞–≥–Ω–∏–π ‚Äî –∫–∞–∫–∞—è —Ñ–æ—Ä–º–∞?

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è –û–∫—Å–∏–¥         4% —É—Å–≤–æ–µ–Ω–∏–µ           ‚îÇ
‚îÇ    –î–µ—à—ë–≤—ã–π, –Ω–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úì –¶–∏—Ç—Ä–∞—Ç        30% —É—Å–≤–æ–µ–Ω–∏–µ      ‚≠ê    ‚îÇ ‚Üê —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
‚îÇ    –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚≠ê –ì–ª–∏—Ü–∏–Ω–∞—Ç     50% —É—Å–≤–æ–µ–Ω–∏–µ           ‚îÇ
‚îÇ    –õ—É—á—à–∏–π, –º—è–≥–∫–∏–π –¥–ª—è –∂–µ–ª—É–¥–∫–∞          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚ù§Ô∏è –¢–∞—É—Ä–∞—Ç       45% —É—Å–≤–æ–µ–Ω–∏–µ           ‚îÇ
‚îÇ    –î–ª—è —Å–µ—Ä–¥—Ü–∞ –∏ –¥–∞–≤–ª–µ–Ω–∏—è               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üß† L-–¢—Ä–µ–æ–Ω–∞—Ç    40% —É—Å–≤–æ–µ–Ω–∏–µ           ‚îÇ
‚îÇ    –î–ª—è –º–æ–∑–≥–∞ –∏ –ø–∞–º—è—Ç–∏                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

[?] –ù–µ –∑–Ω–∞—é —Ñ–æ—Ä–º—É ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã (–±–µ–∑ –ª–æ–º–∞–Ω–∏—è `string[]`)

```js
// ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
// planned/taken –æ—Å—Ç–∞—é—Ç—Å—è string[]
profile.plannedSupplements = ['magnesium', 'vitD', 'iron'];

// —Ñ–æ—Ä–º–∞/–¥–æ–∑–∞ ‚Äî –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –º–∞–ø–µ
profile.supplementSettings = {
  magnesium: { form: 'glycinate', dose: 200, unit: 'mg' },
  vitD: { form: 'd3', dose: 2000, unit: 'IU' },
  iron: { form: 'bisglycinate', dose: 18, unit: 'mg' },
};
```

---

## üéØ –§–∏—á–∞ 3: –í–µ—Ä—Ö–Ω–∏–µ –ª–∏–º–∏—Ç—ã –∏ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å

### –ù–∞—É—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤–∫–∏ –∏–º–µ—é—Ç **—Ç–æ–∫—Å–∏—á–Ω—ã–π –ø–æ—Ç–æ–ª–æ–∫**:

| –í–µ—â–µ—Å—Ç–≤–æ      | RDA     | UL (–≤–µ—Ä—Ö–Ω–∏–π –ª–∏–º–∏—Ç) | –°–∏–º–ø—Ç–æ–º—ã –ø–µ—Ä–µ–¥–æ–∑–∏—Ä–æ–≤–∫–∏               |
| ------------- | ------- | ------------------ | ------------------------------------ |
| **–í–∏—Ç–∞–º–∏–Ω D** | 600 IU  | 4000 IU            | –ì–∏–ø–µ—Ä–∫–∞–ª—å—Ü–∏–µ–º–∏—è, –∫–∞–º–Ω–∏ –≤ –ø–æ—á–∫–∞—Ö      |
| **–í–∏—Ç–∞–º–∏–Ω A** | 900 –º–∫–≥ | 3000 –º–∫–≥           | –¢–æ–∫—Å–∏–∫–æ–∑ –ø–µ—á–µ–Ω–∏, —Ç–µ—Ä–∞—Ç–æ–≥–µ–Ω–Ω–æ—Å—Ç—å      |
| **–ñ–µ–ª–µ–∑–æ**    | 18 –º–≥   | 45 –º–≥              | –ñ–µ–ª—É–¥–æ—á–Ω—ã–µ –±–æ–ª–∏, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–æ–≤ |
| **–¶–∏–Ω–∫**      | 11 –º–≥   | 40 –º–≥              | –î–µ—Ñ–∏—Ü–∏—Ç –º–µ–¥–∏, –∏–º–º—É–Ω–æ–¥–µ—Ñ–∏—Ü–∏—Ç          |
| **B6**        | 1.7 –º–≥  | 100 –º–≥             | –ù–µ–π—Ä–æ–ø–∞—Ç–∏—è (–ø–æ–∫–∞–ª—ã–≤–∞–Ω–∏–µ —Ä—É–∫/–Ω–æ–≥)     |
| **–°–µ–ª–µ–Ω**     | 55 –º–∫–≥  | 400 –º–∫–≥            | –í—ã–ø–∞–¥–µ–Ω–∏–µ –≤–æ–ª–æ—Å, –ª–æ–º–∫–æ—Å—Ç—å –Ω–æ–≥—Ç–µ–π     |

### –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å UL/—Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å/–∫—É—Ä—Å—ã

–õ—É—á—à–µ –≤ `heys_supplements_science_v1.js` (–∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ `BIOAVAILABILITY`),
–ø–æ—Ç–æ–º—É —á—Ç–æ:

- —ç—Ç–æ ¬´–Ω–∞—É—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ¬ª, –Ω–µ UI
- –∏–º–∏ –±—É–¥—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –∫–∞—Ä—Ç–æ—á–∫–∞, –∏ advice, –∏ future Schedule

–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```js
HEYS.Supplements.SCIENCE.LIMITS = {
  vitD: {
    dosage: {
      rda: 600,
      optimalRange: [1000, 4000],
      upperLimit: 4000,
      toxicLevel: 10000,
      unit: 'IU',
    },
    toxicity: {
      riskLevel: 'moderate',
      warningAt: 0.8,
      requiresMonitoring: true,
      labTest: '25(OH)D',
      safeRange: '30-80 –Ω–≥/–º–ª',
    },
    course: { maxContinuousDays: 180, pauseDays: 30, note: '...' },
  },
  iron: {
    dosage: { rda: 18, upperLimit: 45, unit: 'mg' },
    toxicity: {
      riskLevel: 'high',
      warningAt: 0.7,
      requiresMonitoring: true,
      labTest: '—Ñ–µ—Ä—Ä–∏—Ç–∏–Ω',
      contraindications: ['–≥–µ–º–æ—Ö—Ä–æ–º–∞—Ç–æ–∑'],
    },
    course: { maxContinuousDays: 90, pauseDays: 60 },
  },
};
```

```javascript
const SUPPLEMENTS_CATALOG = {
  vitD: {
    name: 'D3',
    icon: '‚òÄÔ∏è',
    category: 'immune',
    timing: 'withFat',
    // üÜï –î–æ–∑–∏—Ä–æ–≤–∫–∞ –∏ –ª–∏–º–∏—Ç—ã
    dosage: {
      rda: 600, // —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—É—Ç–æ—á–Ω–∞—è
      optimalRange: [1000, 4000], // —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω
      upperLimit: 4000, // –≤–µ—Ä—Ö–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ª–∏–º–∏—Ç
      toxicLevel: 10000, // —Ç–æ–∫—Å–∏—á–Ω–∞—è –¥–æ–∑–∞
      unit: 'IU',
    },
    // üÜï –¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å
    toxicity: {
      riskLevel: 'moderate', // low | moderate | high
      symptoms: ['–ì–∏–ø–µ—Ä–∫–∞–ª—å—Ü–∏–µ–º–∏—è', '–ö–∞–º–Ω–∏ –≤ –ø–æ—á–∫–∞—Ö', '–¢–æ—à–Ω–æ—Ç–∞'],
      warningAt: 0.8, // –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ 80% –æ—Ç UL
      requiresMonitoring: true,
      labTest: '25(OH)D –≤ –∫—Ä–æ–≤–∏',
      safeRange: '30-80 –Ω–≥/–º–ª',
    },
    // üÜï –ö—É—Ä—Å
    course: {
      recommended: '3-6 –º–µ—Å—è—Ü–µ–≤',
      maxContinuous: 12, // –º–µ—Å—è—Ü–µ–≤ –±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–∞
      cyclePause: 1, // –º–µ—Å—è—Ü –ø–µ—Ä–µ—Ä—ã–≤–∞
      note: '–ü—Ä–æ–≤–µ—Ä—è—Ç—å —É—Ä–æ–≤–µ–Ω—å –≤ –∫—Ä–æ–≤–∏ –∫–∞–∂–¥—ã–µ 3-6 –º–µ—Å',
    },
  },

  iron: {
    name: '–ñ–µ–ª–µ–∑–æ',
    icon: 'ü©∏',
    dosage: {
      rda: 18, // –¥–ª—è –∂–µ–Ω—â–∏–Ω
      optimalRange: [18, 36],
      upperLimit: 45,
      toxicLevel: 60,
      unit: '–º–≥',
    },
    toxicity: {
      riskLevel: 'high',
      symptoms: ['–ë–æ–ª—å –≤ –∂–µ–ª—É–¥–∫–µ', '–ó–∞–ø–æ—Ä—ã', '–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–µ—á–µ–Ω–∏'],
      warningAt: 0.7,
      requiresMonitoring: true,
      labTest: '–§–µ—Ä—Ä–∏—Ç–∏–Ω, –û–ñ–°–°',
      safeRange: '–§–µ—Ä—Ä–∏—Ç–∏–Ω 30-150 –Ω–≥/–º–ª',
      contraindications: ['–≥–µ–º–æ—Ö—Ä–æ–º–∞—Ç–æ–∑', '—Ç–∞–ª–∞—Å—Å–µ–º–∏—è'],
    },
    course: {
      recommended: '2-3 –º–µ—Å—è—Ü–∞',
      maxContinuous: 3,
      cyclePause: 2,
      note: '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–µ—Ä—Ä–∏—Ç–∏–Ω –ø–µ—Ä–µ–¥ –ø—Ä–∏—ë–º–æ–º!',
    },
  },

  b6: {
    name: 'B6',
    icon: 'üß¨',
    dosage: {
      rda: 1.7,
      optimalRange: [2, 50],
      upperLimit: 100,
      toxicLevel: 200,
      unit: '–º–≥',
    },
    toxicity: {
      riskLevel: 'moderate',
      symptoms: [
        '–ù–µ–π—Ä–æ–ø–∞—Ç–∏—è',
        '–ü–æ–∫–∞–ª—ã–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è—Ö',
        '–ü–æ—Ç–µ—Ä—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏',
      ],
      warningAt: 0.5, // –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —É–∂–µ –ø—Ä–∏ 50% –æ—Ç UL
      requiresMonitoring: false,
      reversible: true, // —Å–∏–º–ø—Ç–æ–º—ã –æ–±—Ä–∞—Ç–∏–º—ã –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ
    },
    course: {
      recommended: '1-2 –º–µ—Å—è—Ü–∞',
      maxContinuous: 3,
      note: '–í—ã—Å–æ–∫–∏–µ –¥–æ–∑—ã (>50–º–≥) —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é –≤—Ä–∞—á–∞',
    },
  },

  // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏ (–≤–∏—Ç–∞–º–∏–Ω C, –º–∞–≥–Ω–∏–π)
  vitC: {
    name: 'C',
    icon: 'üçä',
    dosage: {
      rda: 90,
      optimalRange: [500, 2000],
      upperLimit: 2000,
      unit: '–º–≥',
    },
    toxicity: {
      riskLevel: 'low',
      symptoms: ['–î–∏–∞—Ä–µ—è', '–ö–∞–º–Ω–∏ –≤ –ø–æ—á–∫–∞—Ö (–ø—Ä–∏ >2000–º–≥)'],
      warningAt: 1.0, // —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
      requiresMonitoring: false,
    },
    course: {
      maxContinuous: null, // –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
      note: '–í–æ–¥–æ—Ä–∞—Å—Ç–≤–æ—Ä–∏–º—ã–π, –∏–∑–±—ã—Ç–æ–∫ –≤—ã–≤–æ–¥–∏—Ç—Å—è',
    },
  },
};
```

### –¢—Ä–µ–∫–∏–Ω–≥ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏—ë–º–∞

```javascript
// –í –ø—Ä–æ—Ñ–∏–ª–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫—É—Ä—Å–æ–≤
profile.supplementHistory = {
  vitD: {
    startedAt: '2025-10-15',
    lastTakenDate: '2025-12-15',
    streakDays: 62,
    totalTakenDays: 120,
  },
};

/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ –ø–µ—Ä–µ—Ä—ã–≤ –≤ –∫—É—Ä—Å–µ
 */
function checkCourseStatus(suppId, profile) {
  const supp = SUPPLEMENTS_CATALOG[suppId];
  if (!supp?.course?.maxContinuous) return { ok: true };

  const history = getSupplementHistory(suppId, profile);
  if (!history) return { ok: true };

  // –í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–Ω—è–º–∏, –Ω–µ –º–µ—Å—è—Ü–∞–º–∏ (–º–µ–Ω—å—à–µ –º–∞–≥–∏–∏)
  const daysOnCourse = history.streakDays || 0;
  const maxDays = supp.course.maxContinuousDays;

  if (maxDays && daysOnCourse >= maxDays) {
    return {
      ok: false,
      warning: 'break_needed',
      message: `‚ö†Ô∏è ${supp.name}: ${daysOnCourse} –¥–Ω–µ–π –±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–∞—É–∑–∞ ${supp.course.pauseDays} –¥–Ω–µ–π.`,
      action: '–°–¥–µ–ª–∞—Ç—å –ø–∞—É–∑—É',
      severity: 'high',
    };
  }

  if (maxDays && daysOnCourse >= maxDays * 0.8) {
    return {
      ok: true,
      warning: 'break_soon',
      message: `üìÖ ${supp.name}: —Å–∫–æ—Ä–æ –Ω—É–∂–µ–Ω –ø–µ—Ä–µ—Ä—ã–≤ (${daysOnCourse}/${maxDays} –¥–Ω–µ–π)`,
      severity: 'low',
    };
  }

  return { ok: true };
}
```

### –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å history –±–µ–∑ —Å–∫–∞–Ω–∞ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –¥–Ω–µ–π

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

- –ø—Ä–∏ `markSupplementTaken(dateKey, id)` –æ–±–Ω–æ–≤–ª—è—Ç—å:
  - `history.lastTakenDate = dateKey`
  - `history.streakDays = (dateKey === yesterday ? streak+1 : 1)`
  - `history.totalTakenDays += 1`

–¢–∞–∫ –º—ã –∏–∑–±–µ–≥–∞–µ–º —Ç—è–∂—ë–ª–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ 180+ –¥–Ω–µ–π localStorage.

### UI: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

**–í –∫–∞—Ä—Ç–æ—á–∫–µ –≤–∏—Ç–∞–º–∏–Ω–æ–≤:**

```
‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ü©∏ –ñ–µ–ª–µ–∑–æ                              ‚îÇ
‚îÇ ‚è±Ô∏è 14 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ –∏–∑ 90 –º–∞–∫—Å          ‚îÇ
‚îÇ ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ ‚Äî –ø—Ä–æ–≤–µ—Ä—å —Ñ–µ—Ä—Ä–∏—Ç–∏–Ω!   ‚îÇ
‚îÇ [üìÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑]              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚òÄÔ∏è D3                                  ‚îÇ
‚îÇ ‚è±Ô∏è 62 –¥–Ω—è –ø–æ–¥—Ä—è–¥                       ‚îÇ
‚îÇ üí° –ü—Ä–æ–≤–µ—Ä—å —É—Ä–æ–≤–µ–Ω—å 25(OH)D —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ–ø–∞—Å–Ω–æ–π –¥–æ–±–∞–≤–∫–∏:**

```
‚ö†Ô∏è –ñ–µ–ª–µ–∑–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏!

–°–∏–º–ø—Ç–æ–º—ã –ø–µ—Ä–µ–¥–æ–∑–∏—Ä–æ–≤–∫–∏:
‚Ä¢ –ë–æ–ª—å –≤ –∂–µ–ª—É–¥–∫–µ
‚Ä¢ –ó–∞–ø–æ—Ä—ã
‚Ä¢ –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–µ—á–µ–Ω–∏

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
üìã –°–¥–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Ñ–µ—Ä—Ä–∏—Ç–∏–Ω –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
üîÑ –ö—É—Ä—Å –Ω–µ –¥–æ–ª—å—à–µ 3 –º–µ—Å—è—Ü–µ–≤
‚ùå –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–∏ –≥–µ–º–æ—Ö—Ä–æ–º–∞—Ç–æ–∑–µ

[‚úì –ü–æ–Ω—è—Ç–Ω–æ, –¥–æ–±–∞–≤–∏—Ç—å]  [–û—Ç–º–µ–Ω–∞]
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (~1—á)

- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: planned/taken –æ—Å—Ç–∞—é—Ç—Å—è `string[]`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª—å `supplementSettings` (form/dose/unit)
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å –≤ –¥–µ–Ω—å `supplementsTakenMeta` (override + takenAt)
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å `heys_supplements_science_v1.js`: —Ñ–æ—Ä–º—ã + –ª–∏–º–∏—Ç—ã
      (`SCIENCE.LIMITS`)

### –§–∞–∑–∞ 2: –õ–æ–≥–∏–∫–∞ (~1.5—á)

- [ ] `generateDailySchedule(planned, dayData, profile)` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- [ ] `getSelectedForm(suppId, profile, dayData)` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ (—Å fallback)
- [ ] `getFormInfo(suppId, form)` ‚Äî –∏–Ω—Ñ–æ –æ —Ñ–æ—Ä–º–µ (–∏–∑ SCIENCE)
- [ ] `getSelectedDose(suppId, profile, dayData)` ‚Äî –¥–æ–∑–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ UL
- [ ] `checkCourseStatus(suppId, profile)` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—É—Ä—Å–∞
- [ ] `getToxicityWarning(suppId, profile)` ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ UL/–∞–Ω–∞–ª–∏–∑–∞–º
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ history –≤–Ω—É—Ç—Ä–∏ `markSupplementTaken(...)`

### –§–∞–∑–∞ 3: UI (~2—á)

- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ `renderSupplementsCard`
- [ ] Popup –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º—ã –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∫—É—Ä—Å–µ/—Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
- [ ] –ë–µ–π–¥–∂–∏ —Ñ–æ—Ä–º –≤ —Å–ø–∏—Å–∫–µ (‚≠ê –ì–ª–∏—Ü–∏–Ω–∞—Ç)

### –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (~30–º–∏–Ω)

- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã/–¥–æ–∑—ã –≤ `profile.supplementSettings` (–Ω–µ –≤
      `supplementsPlanned`)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∫—É—Ä—Å–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (`profile.supplementHistory`)
- [ ] –í advice –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã, –±–µ–∑ –¥—É–±–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Å–º. –Ω–∏–∂–µ)

### –ù–µ –∑–∞–±—ã—Ç—å –ø—Ä–æ –º–µ—Å—Ç–∞, –≥–¥–µ –º–æ–∂–Ω–æ —Å–ª—É—á–∞–π–Ω–æ ¬´–ø–æ—Ç–µ—Ä—è—Ç—å¬ª –Ω–æ–≤—ã–µ –ø–æ–ª—è

- `ensureDay()` –≤ `heys_models_v1.js` –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –¥–Ω—è (–µ—Å–ª–∏
  –¥–æ–±–∞–≤–∏–º)
- –ª—é–±—ã–µ ¬´–ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è¬ª day/profile –æ–±—ä–µ–∫—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –¥–µ–ª–∞—Ç—å `{...old, newField}`
- —Ä–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∏—Ç–∞–º–∏–Ω–æ–≤ –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å `dayData` –∏–∑ props (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

---

## üîÅ –ì—Ä–∞–Ω–∏—Ü—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: Schedule vs Advice (–≤–∞–∂–Ω–æ)

- **Smart Schedule** = UI –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∏—Ç–∞–º–∏–Ω–æ–≤ (–ø–ª–∞–Ω –ø–æ —Å–ª–æ—Ç–∞–º)
- **Advice** = —Ä–µ–¥–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (—É—Ç—Ä–æ/–≤–µ—á–µ—Ä), —É–∂–µ –µ—Å—Ç—å –≤ `heys_advice_v1.js`

–ù–µ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –¥–≤–∞–∂–¥—ã. –ü–æ—ç—Ç–æ–º—É:

- schedule –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ ¬´–∫–æ–≥–¥–∞ —á—Ç–æ –ø–∏—Ç—å¬ª
- advice –æ—Å—Ç–∞—ë—Ç—Å—è –∫–æ—Ä–æ—Ç–∫–∏–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–º ¬´—É —Ç–µ–±—è –µ—Å—Ç—å –Ω–µ–ø—Ä–∏–Ω—è—Ç—ã–µ –≤–µ—á–µ—Ä–Ω–∏–µ –≤–∏—Ç–∞–º–∏–Ω—ã¬ª

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞
- [ ] –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–∞–≥–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è 5 —Ñ–æ—Ä–º
- [ ] –ü—Ä–∏ –ø—Ä–∏—ë–º–µ –∂–µ–ª–µ–∑–∞ >3 –º–µ—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- [ ] Advice –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞–º

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª                             | –ß—Ç–æ –º–µ–Ω—è—Ç—å                                                   |
| -------------------------------- | ------------------------------------------------------------ |
| `heys_supplements_v1.js`         | –ö–∞—Ç–∞–ª–æ–≥, –ª–æ–≥–∏–∫–∞, UI                                          |
| `heys_supplements_science_v1.js` | –§–æ—Ä–º—ã, –ª–∏–º–∏—Ç—ã, –Ω–∞—É—á–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (source of truth)         |
| `heys_steps_v1.js`               | SupplementsStepComponent                                     |
| `heys_advice_v1.js`              | –°–æ–≤–µ—Ç—ã –ø–æ —Ñ–æ—Ä–º–∞–º –∏ –∫—É—Ä—Å–∞–º                                    |
| `heys_models_v1.js`              | ensureDay: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –¥–Ω—è (–µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è)          |
| `heys_day_v12.js`                | –µ—Å–ª–∏ –¥–æ–±–∞–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ day-–ø–æ–ª—è ‚Äî —É—á–µ—Å—Ç—å –≤ isSameContent guard |
| `DATA_MODEL_REFERENCE.md`        | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                                                 |

---

## üìö –ù–∞—É—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

1. **–ë–∏–æ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–∞–≥–Ω–∏—è**: Firoz M, Graber M. (2001) "Bioavailability of US
   commercial magnesium preparations"
2. **–¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å D3**: Marcinowska-Suchowierska E, et al. (2018) "Vitamin D
   Toxicity‚ÄìA Clinical Perspective"
3. **–§–æ—Ä–º—ã –∂–µ–ª–µ–∑–∞**: Santiago P. (2012) "Ferrous versus Ferric Oral Iron
   Formulations"
4. **B6 –Ω–µ–π—Ä–æ–ø–∞—Ç–∏—è**: Gdynia HJ, et al. (2008) "Severe sensorimotor neuropathy
   after intake of highest dosages of vitamin B6"
