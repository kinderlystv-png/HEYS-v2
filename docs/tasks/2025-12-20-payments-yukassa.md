# ğŸ’³ ĞŸĞ»Ğ°Ñ‚ĞµĞ¶Ğ¸ Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ (Mock + Ğ®Kassa later)

> **ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:** ğŸ”´ Ğ‘Ğ›ĞĞšĞ•Ğ  MVP  
> **Ğ’Ñ€ĞµĞ¼Ñ:** ~4-6 Ñ‡Ğ°ÑĞ¾Ğ²  
> **Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:** ĞĞµÑ‚
> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ğŸ”„ Ğ’ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ

---

## ğŸ“Œ TL;DR

**Ğ¦ĞµĞ»ÑŒ:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ (mock ÑĞµĞ¹Ñ‡Ğ°Ñ, Ğ®Kassa Ğ¿Ğ¾Ğ·Ğ¶Ğµ)

**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµĞ¼:**
1. âœ… SQL Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ â€” Ğ¿Ğ¾Ğ»Ñ subscription Ğ² clients + Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° payments
2. âœ… JS Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ â€” heys_subscriptions_v1.js Ñ UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸
3. â¬œ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ â€” ÑĞµĞºÑ†Ğ¸Ñ "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°"
4. â¬œ Ğ¢Ñ€Ğ¸Ğ°Ğ»-Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ° â€” Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ñ‘Ğ¼Ğµ
5. â¬œ Read-only Ğ³ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ â€” Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**Ğ—Ğ°Ñ‡ĞµĞ¼:**
- ĞœĞ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°
- Ğ“ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ¿Ğ¾ÑĞ»Ğµ Ñ‚Ñ€Ğ¸Ğ°Ğ»Ğ°
- ĞÑĞ½Ğ¾Ğ²Ğ° Ğ´Ğ»Ñ Ñ‚Ñ€Ğ¸Ğ°Ğ»-Ğ¼Ğ°ÑˆĞ¸Ğ½Ñ‹

---

## ğŸ“‹ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ¸Ğ· HEYS_BRIEF.md)

### Ğ¢Ğ°Ñ€Ğ¸Ñ„Ñ‹

| Ğ¢Ğ°Ñ€Ğ¸Ñ„ | Ğ¦ĞµĞ½Ğ°/Ğ¼ĞµÑ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| **Base** | 1 990 â‚½ | ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ + ÑƒĞ¼Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸ + 1 Ñ‡ĞµĞº-Ğ¸Ğ½/Ğ½ĞµĞ´ĞµĞ»Ñ |
| **Pro** | 12 990 â‚½ | + Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ´Ğ½ĞµĞ²Ğ½Ğ¸ĞºĞ° ĞºÑƒÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ + Ñ‡Ğ°Ñ‚ + ÑĞ¾Ğ·Ğ²Ğ¾Ğ½/Ğ½ĞµĞ´ĞµĞ»Ñ |
| **Pro+** | 19 990 â‚½ | + 7/7 Ğ±ĞµĞ· Ğ´ĞµĞ¶ÑƒÑ€Ğ½Ğ¾Ğ³Ğ¾ + Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ñ‹Ğ¹ SLA |

### Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

```
trial â†’ active â†’ read_only â†’ canceled
```

| Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|
| `trial` | Ğ¢Ñ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ (7 Ğ´Ğ½ĞµĞ¹ Pro Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾) |
| `active` | ĞĞ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° |
| `read_only` | Ğ¢Ñ€Ğ¸Ğ°Ğ»/Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ¸ÑÑŒ, Ğ½Ğµ Ğ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ¾ |
| `canceled` | ĞÑ‚Ğ¼ĞµĞ½ĞµĞ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼ |

### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ±Ğ¸Ğ»Ğ»Ğ¸Ğ½Ğ³Ğ°

- ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ¼ĞµÑÑÑ† (Ğ½Ğµ Ñ€ĞµĞºÑƒÑ€Ñ€ĞµĞ½Ñ‚Ğ½Ğ°Ñ Ğ´Ğ»Ñ MVP)
- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ°Ğ¼ Ğ¾Ğ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ (Ğ±ĞµĞ· Ğ°Ğ²Ñ‚Ğ¾ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ)
- Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ¿Ñ€Ğ¾Ğ¿Ğ¾Ñ€Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ½ĞµĞ¾ĞºĞ°Ğ·Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ğ´Ğ½ÑĞ¼

---

## ğŸ—„ï¸ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `clients` â€” Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ

```sql
-- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ clients
ALTER TABLE clients ADD COLUMN IF NOT EXISTS subscription_status TEXT DEFAULT 'trial';
ALTER TABLE clients ADD COLUMN IF NOT EXISTS subscription_plan TEXT; -- 'base', 'pro', 'proplus'
ALTER TABLE clients ADD COLUMN IF NOT EXISTS subscription_expires_at TIMESTAMPTZ;
ALTER TABLE clients ADD COLUMN IF NOT EXISTS subscription_started_at TIMESTAMPTZ;

-- Ğ˜Ğ½Ğ´ĞµĞºÑ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¸ÑÑ‚ĞµĞºĞ°ÑÑ‰Ğ¸Ñ… Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº
CREATE INDEX IF NOT EXISTS idx_clients_subscription_expires 
ON clients(subscription_expires_at) 
WHERE subscription_status = 'active';
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `payments` â€” Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹

```sql
CREATE TABLE IF NOT EXISTS payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  client_id UUID NOT NULL REFERENCES clients(id),
  
  -- Ğ®Kassa Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  yukassa_payment_id TEXT UNIQUE,
  yukassa_status TEXT, -- 'pending', 'waiting_for_capture', 'succeeded', 'canceled'
  
  -- ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶
  amount DECIMAL(10,2) NOT NULL,
  currency TEXT DEFAULT 'RUB',
  plan TEXT NOT NULL, -- 'base', 'pro', 'proplus'
  
  -- ĞŸĞµÑ€Ğ¸Ğ¾Ğ´
  period_start TIMESTAMPTZ,
  period_end TIMESTAMPTZ,
  
  -- ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  metadata JSONB DEFAULT '{}'
);

-- RLS
ALTER TABLE payments ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Clients can view own payments" ON payments
  FOR SELECT USING (client_id = auth.uid() OR 
    EXISTS (SELECT 1 FROM clients WHERE id = payments.client_id AND curator_id = auth.uid()));
```

---

## ğŸ”§ Backend: Ğ®Kassa Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

### Ğ¤Ğ°Ğ¹Ğ»: `apps/web/api/payments/create.js`

```javascript
// POST /api/payments/create
// Body: { client_id, plan }
// Returns: { payment_url, payment_id }

// 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ² Ğ®Kassa
// 2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ payments
// 3. Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ URL Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹
```

### Ğ¤Ğ°Ğ¹Ğ»: `apps/web/api/payments/webhook.js`

```javascript
// POST /api/payments/webhook
// Body: Ğ®Kassa notification
// 
// 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ
// 2. ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ¿Ğ¾ yukassa_payment_id
// 3. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°
// 4. Ğ•ÑĞ»Ğ¸ succeeded â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ subscription_status ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
```

### Ğ¤Ğ°Ğ¹Ğ»: `apps/web/api/payments/status.js`

```javascript
// GET /api/payments/status?client_id=xxx
// Returns: { status, plan, expires_at }
```

### Ğ®Kassa API

```javascript
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°
const payment = await fetch('https://api.yookassa.ru/v3/payments', {
  method: 'POST',
  headers: {
    'Authorization': `Basic ${Buffer.from(shopId + ':' + secretKey).toString('base64')}`,
    'Idempotence-Key': uuid(),
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    amount: { value: '12990.00', currency: 'RUB' },
    confirmation: { 
      type: 'redirect', 
      return_url: 'https://heys-v2-web.vercel.app/payment-success' 
    },
    capture: true,
    description: 'HEYS Pro Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° 1 Ğ¼ĞµÑÑÑ†',
    metadata: { client_id, plan }
  })
});
```

---

## ğŸ¨ Frontend

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚: `PaymentScreen`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ’³ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ‚Ğ°Ñ€Ğ¸Ñ„               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Base                           â”‚    â”‚
â”‚  â”‚  1 990 â‚½/Ğ¼ĞµÑ                    â”‚    â”‚
â”‚  â”‚  â€¢ ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ + Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸       â”‚    â”‚
â”‚  â”‚  â€¢ 1 Ñ‡ĞµĞº-Ğ¸Ğ½/Ğ½ĞµĞ´ĞµĞ»Ñ              â”‚    â”‚
â”‚  â”‚  [Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ]                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Pro â­ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼             â”‚    â”‚
â”‚  â”‚  12 990 â‚½/Ğ¼ĞµÑ                   â”‚    â”‚
â”‚  â”‚  â€¢ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ´Ğ½ĞµĞ²Ğ½Ğ¸ĞºĞ° ĞºÑƒÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼   â”‚    â”‚
â”‚  â”‚  â€¢ Ğ§Ğ°Ñ‚ + ÑĞ¾Ğ·Ğ²Ğ¾Ğ½/Ğ½ĞµĞ´ĞµĞ»Ñ          â”‚    â”‚
â”‚  â”‚  [Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ]                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Pro+                           â”‚    â”‚
â”‚  â”‚  19 990 â‚½/Ğ¼ĞµÑ                   â”‚    â”‚
â”‚  â”‚  â€¢ Ğ’ÑÑ‘ Ğ¸Ğ· Pro                   â”‚    â”‚
â”‚  â”‚  â€¢ 7/7 Ğ±ĞµĞ· Ğ´ĞµĞ¶ÑƒÑ€Ğ½Ğ¾Ğ³Ğ¾            â”‚    â”‚
â”‚  â”‚  â€¢ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ñ‹Ğ¹ SLA             â”‚    â”‚
â”‚  â”‚  [Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ]                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¤Ğ°Ğ¹Ğ»: `apps/web/heys_payments_v1.js`

ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹:
- `PaymentScreen` â€” Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ°
- `PaymentSuccessScreen` â€” Ğ¿Ğ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹
- `SubscriptionBadge` â€” Ğ±ĞµĞ¹Ğ´Ğ¶ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ
- `PaywallBanner` â€” Ğ±Ğ°Ğ½Ğ½ĞµÑ€ "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°"

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² UI

1. **ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ** â†’ ÑĞµĞºÑ†Ğ¸Ñ "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°" Ñ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¼ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ¾Ğ¼
2. **ĞŸĞ¾ÑĞ»Ğµ Ñ‚Ñ€Ğ¸Ğ°Ğ»Ğ°** â†’ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ PaymentScreen
3. **Ğ’ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸** â†’ ĞµÑĞ»Ğ¸ read_only, Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ±Ğ°Ğ½Ğ½ĞµÑ€

---

## ğŸ“¦ Environment Variables

```env
# Ğ®Kassa (Vercel)
YUKASSA_SHOP_ID=xxx
YUKASSA_SECRET_KEY=xxx
YUKASSA_WEBHOOK_SECRET=xxx

# Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ webhook
```

---

## âœ… Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚

### Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- [ ] ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ: Ğ¿Ğ¾Ğ»Ñ subscription Ğ² clients
- [ ] ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ: Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° payments
- [ ] RLS Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸

### Backend API
- [ ] POST /api/payments/create
- [ ] POST /api/payments/webhook
- [ ] GET /api/payments/status
- [ ] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ webhook

### Frontend
- [ ] PaymentScreen (Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ°)
- [ ] PaymentSuccessScreen
- [ ] SubscriptionBadge Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ
- [ ] PaywallBanner Ğ´Ğ»Ñ read_only

### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- [ ] Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ² sandbox Ğ®Kassa
- [ ] Webhook Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
- [ ] Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾

---

## ğŸ”— Ğ ĞµÑÑƒÑ€ÑÑ‹

- [Ğ®Kassa API Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ](https://yookassa.ru/developers/api)
- [Webhook Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°](https://yookassa.ru/developers/using-api/webhooks)
- [Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹](https://yookassa.ru/developers/payment-acceptance/testing-and-going-live/testing)

---

## ğŸ“ ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ

1. **MVP Ğ±ĞµĞ· Ñ€ĞµĞºÑƒÑ€Ñ€ĞµĞ½Ñ‚Ñƒ** â€” Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ°Ğ¼ Ğ¾Ğ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¼ĞµÑÑÑ†
2. **Ğ¤Ğ¸ÑĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** â€” Ğ®Kassa Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ñ‡ĞµĞºĞ¸ (Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ² Ğ›Ğš)
3. **Refund** â€” Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Ñ‡ĞµÑ€ĞµĞ· Ğ›Ğš Ğ®Kassa

---

## DoD (Definition of Done)

âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚:
1. Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ñ€Ğ¸Ñ„
2. ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ğ®Kassa
3. ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ â€” subscription_status = 'active'
4. Ğ’Ğ¸Ğ´ĞµÑ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ
