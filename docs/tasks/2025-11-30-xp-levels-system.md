# Task: XP, Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ¸ Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ â€” ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸

> **Gamification 2.0**: XP, ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸, Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ, Ğ±ĞµĞ¹Ğ´Ğ¶Ğ¸, ÑÑ‚Ğ°Ñ‚ÑƒÑ-Ğ±Ğ°Ñ€ Ğ² ÑˆĞ°Ğ¿ĞºĞµ  
> **Audit Version**: 6.1 | **Last Review**: 2025-11-30 (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ C1-C6, W9-W11, Q1-Q5)

## ğŸ¯ WHY (Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚)

**Problem**: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ñ‚ĞµÑ€ÑÑÑ‚ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ñ… Ğ´Ğ½ĞµĞ¹ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ°, Ğ½ĞµÑ‚ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°

**Impact**: Retention Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚ â€” users Ğ±Ñ€Ğ¾ÑĞ°ÑÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· 1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸

**Value**: ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿ĞµÑ‚Ğ»Ñ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ: Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ â†’ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ğ° â†’ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ feedback â†’ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ â†’ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ

---

## ğŸ“‹ ĞŸĞ Ğ˜ĞĞ¯Ğ¢Ğ«Ğ• Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ¯ (v6.0)

| Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
|--------|---------|-------------|
| **Flying animation** | C+D: `data-game-source` Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹ + fallback Ğ½Ğ° `document.activeElement` | ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° |
| **Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ** | âœ… ĞŸĞ¾Ğ»Ğ½Ğ°Ñ: ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° + Ğ’Ğ¡Ğ• Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ + Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ + Ğ±ĞµĞ¹Ğ´Ğ¶Ğ¸ | Production-ready, Ğ½Ğµ MVP |
| **day_completed** | D1: ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ…Ğ¾Ğ´Ğµ ÑƒÑ‚Ñ€Ğ¾Ğ¼ â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ñ‡ĞµÑ€Ğ°ÑˆĞ½Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ | Ğ ĞµÑ‚Ñ€Ğ¾ÑĞ¿ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾, Ñ‡ĞµÑÑ‚Ğ½Ğ¾ |
| **Coins** | âŒ ĞĞµÑ‚ | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ XP + ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸ Ğ² ÑÑ‚Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ |
| **Haptic Ğ¿Ñ€Ğ¸ XP** | âœ… ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ `HEYS.haptic('light')` Ğ·Ğ° +XP | ĞšĞ°Ğº Ğ»ÑƒÑ‡ÑˆĞµ, Ğ½Ğµ ĞºĞ°Ğº Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ |

---

## ğŸ”¬ Ğ“Ğ›Ğ£Ğ‘ĞĞšĞ˜Ğ™ ĞĞ£Ğ”Ğ˜Ğ¢ v6.0 (Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°)

### âœ… Ğ§Ñ‚Ğ¾ ÑƒĞ¶Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ (Phase 0 Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ°):

| ĞÑĞ¿ĞµĞºÑ‚ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | Ğ“Ğ´Ğµ Ğ² ĞºĞ¾Ğ´Ğµ |
|--------|--------|------------|
| hdr-top = gamification placeholder | âœ… | `heys_app_v12.js:1762` |
| Theme FAB (fixed, z-index: 1000) | âœ… | `heys_app_v12.js:1773` |
| Long-press Ğ½Ğ° Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ | âœ… | `heys_app_v12.js:1796` |
| CSS `.game-*` ĞºĞ»Ğ°ÑÑÑ‹ | âœ… | `styles/main.css:930+` |
| `HEYS.haptic()` ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ | âœ… | `heys_day_utils.js:35` |
| `U.lsSet` Ñ clientId prefix | âœ… | `heys_core_v12.js:823` |

### ğŸ”´ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ‘Ğ›ĞĞšĞ•Ğ Ğ« (Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ² ĞºĞ¾Ğ´Ğµ):

| # | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Ğ“Ğ´Ğµ | Ğ Ğ¸ÑĞº | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ² Phase 0.5 |
|---|----------|-----|------|---------------------|
| **B1** | **4 Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°** | `addProductToMeal` (2543), `addProductAndFocusGrams` (621), `addProductWithGrams` (652) | ğŸ”´ XP Ğ½Ğ°Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑÑ Ğ½Ğµ Ğ²ĞµĞ·Ğ´Ğµ | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ XP Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ Ğ² ĞºĞ°Ğ¶Ğ´ÑƒÑ |
| **B2** | **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ event** | `addWater(ml)`, Ğ²ÑĞµ `addProduct*` | ğŸ”´ Flying animation Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ° | Fallback: `document.activeElement` + `data-game-source` |
| **B3** | **Placeholder ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹** | `heys_app_v12.js:1762` | ğŸ”´ UI Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ | React state + `heysGameUpdate` event |
| **B4** | **ĞĞµÑ‚ dispatch Ğ² addProductAndFocusGrams** | Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° 621 | ğŸŸ¡ advice Ğ½Ğµ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ¸Ñ‚ÑÑ | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `heysProductAdded` |
| **B5** | **`HEYS.Day.getStreak()` Ğ½Ğµ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½** | ĞĞ¸Ğ³Ğ´Ğµ | ğŸ”´ Gamification Ğ½Ğµ Ğ·Ğ½Ğ°ĞµÑ‚ streak | Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² useEffect |
| **B6** | **day_completed Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚** | â€” | ğŸ”´ +50 XP Ğ½Ğµ Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ²Ñ…Ğ¾Ğ´Ğµ ÑƒÑ‚Ñ€Ğ¾Ğ¼ |

### ğŸ”´ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• ĞŸĞ ĞĞ‘Ğ•Ğ›Ğ« (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² v6.1):

| # | ĞŸÑ€Ğ¾Ğ±ĞµĞ» | Ğ Ğ¸ÑĞº | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|---|--------|------|--------|
| **C1** | **ĞĞµÑ‚ dispatch Ğ² `addProductAndFocusGrams` (621) Ğ¸ `addProductWithGrams` (652)** | ğŸ”´ High | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `haptic('light')` + dispatch `heysProductAdded` |
| **C2** | **ĞĞµÑ‚ debounce â€” Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ ĞºĞ»Ğ¸ĞºĞ¸ = Ğ¼Ğ½Ğ¾Ğ³Ğ¾ XP** | ğŸ”´ High | Debounce 500ms per reason Ğ² `addXP()` |
| **C3** | **HEYS.game Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½** | ğŸŸ¡ Medium | Guard: `if (HEYS.game) HEYS.game.addXP(...)` |
| **C4** | **getStreak() stale Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ…Ğ¾Ğ´Ğµ** | ğŸŸ¡ Medium | Refresh streak Ğ¿Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ DayTab |
| **C5** | **clientId switch mid-session** | ğŸ”´ High | Event `heysClientChanged` â†’ refresh XP bar |
| **C6** | **Expanded panel 400px Ğ½Ğ° mobile 320px** | ğŸŸ¡ Medium | `max-height: 60vh; overflow-y: auto` |

### ğŸŸ¡ ĞŸĞĞ¢Ğ•ĞĞ¦Ğ˜ĞĞ›Ğ¬ĞĞ«Ğ• ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ«:

| # | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Ğ Ğ¸ÑĞº | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|---|----------|------|---------|
| **P1** | Double XP Ğ¿Ñ€Ğ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… ĞºĞ»Ğ¸ĞºĞ°Ñ… | Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ | Debounce 300ms Ğ² `addXP()` |
| **P2** | Achievement popup + advice Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ…Ğ°Ğ¾Ñ | Achievement > advice (Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ°) |
| **P3** | Confetti Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 3+ Ğ¼ĞµÑÑ‚Ğ° | Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² `HEYS.game.celebrate()` |
| **P4** | getStreak() Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ pIndex | Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹ Ğ½Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ñ‹ | Fallback: Ğ´ĞµĞ½ÑŒ Ñ meals = streak |
| **P5** | Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ | Mobile UX | `max-height: 60vh; overflow-y: auto` + tap outside + swipe down to close |

### ğŸŸ  ĞŸĞĞ¢Ğ•ĞĞ¦Ğ˜ĞĞ›Ğ¬ĞĞ«Ğ• ĞšĞĞĞ¤Ğ›Ğ˜ĞšĞ¢Ğ«:

| # | ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ | Ğ Ğ¸ÑĞº | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|---|----------|------|--------|
| **K1** | Confetti Ğ¸Ğ· advice + confetti Ğ¸Ğ· game | ğŸŸ¡ | Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ: `HEYS.celebrate()` |
| **K2** | `setShowConfetti` = React state Ğ² DayTab | ğŸ”´ | CustomEvent `heysCelebrate` â†’ DayTab ÑĞ»ÑƒÑˆĞ°ĞµÑ‚ |
| **K3** | 3 flying stars Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ | ğŸŸ¡ | ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¸Ğ»Ğ¸ debounce 300ms |
| **K4** | Level up + Achievement Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ | ğŸŸ¡ | ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ (level first) |

### ğŸ”µ WOW-Ğ­Ğ¤Ğ¤Ğ•ĞšĞ¢Ğ« (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ):

| # | Ğ­Ñ„Ñ„ĞµĞºÑ‚ | Ğ“Ğ´Ğµ | Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|---|--------|-----|-----------|--------|
| **W1** | Flying star â­ Ğ¿Ñ€Ğ¸ +XP | Ğ˜Ğ· source Ğ² header | M | TODO |
| **W2** | Progress bar glow | ĞŸÑ€Ğ¸ >90% | S | TODO |
| **W3** | Number morph animation | XP counter | M | TODO |
| **W4** | Level up shake + pulse | Header bar | S | TODO |
| **W5** | Achievement unlock popup | Modal Ñ confetti | M | TODO |
| **W6** | ğŸ”¥ bounce Ğ¿Ñ€Ğ¸ +streak | Streak icon | S | TODO |
| **W7** | Gradient shift Ğ¿Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼ | Progress bar Ñ†Ğ²ĞµÑ‚ | S | TODO |
| **W8** | Haptic patterns | light/success/celebration | S | TODO |
| **W9** | Floating "+5" Ğ½Ğ°Ğ´ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ | ĞŸĞµÑ€ĞµĞ´ flying star | S | TODO |
| **W10** | XP multiplier x1.5 Ğ´Ğ»Ñ perfect day | ratio 0.95-1.05 | S | TODO |
| **W11** | Achievement progress hints | "Ğ”Ğ¾ ĞĞµĞ´ĞµĞ»Ñ ÑƒÑĞ¿ĞµÑ…Ğ°: 5/7" | M | TODO |

### ğŸ® Ğ¡ĞĞ’Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ• Ğ˜Ğ“Ğ ĞĞ’Ğ«Ğ• ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞ«:

| ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ |
|---------|------------|-----------|
| **Daily login bonus** | +10â†’50 XP (Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ğ²Ğ½Ğ¾ 1-7 Ğ´Ğ½ĞµĞ¹) | âœ… Must |
| **Combo system** | 3 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ·Ğ° 60 ÑĞµĞº = x1.5 XP | ğŸŸ¡ Nice |
| **Near-miss** | "Ğ•Ñ‰Ñ‘ 50 XP Ğ´Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ!" | âœ… Must |
| **Loss aversion** | "ĞĞµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ¹ streak!" Ğ² advice | âœ… Must |
| **Progress illusion** | Bar Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ 5% | âœ… Must |
| **Endowed progress** | ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ñ Ğ£Ñ€.1, Ğ½Ğµ Ğ£Ñ€.0 | âœ… Must |

---

## ğŸ¨ ĞĞĞ’ĞĞ¯ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ UI

### Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿: Ğ’Ğ¡Ğ¯ ÑˆĞ°Ğ¿ĞºĞ° = Ğ³ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

```
ĞšĞĞœĞŸĞĞšĞ¢ĞĞ«Ğ™ Ğ’Ğ˜Ğ” (Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¸Ğ´Ğ½Ğ¾):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ± Ğ£Ñ€.7  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  450/600    ğŸ”¥5    [â–¼]         â”‚ â† hdr-top = gamification bar
â”‚  ĞĞ¾Ğ²Ğ¸Ñ‡Ğ¾Ğº              75%                            â”‚   [â–¼] = ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ ĞĞ—Ğ’ĞĞ ĞĞ£Ğ¢Ğ«Ğ™ Ğ’Ğ˜Ğ” (Ğ¿Ğ¾ ĞºĞ»Ğ¸ĞºÑƒ Ğ½Ğ° [â–¼]):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ± Ğ£Ñ€.7  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  450/600    ğŸ”¥5    [â–²]         â”‚
â”‚  ĞĞ¾Ğ²Ğ¸Ñ‡Ğ¾Ğº              75%                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚   ğŸ“Š Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ Ğ’ÑĞµĞ³Ğ¾ XP   â”‚ Streak     â”‚ Ğ”Ğ½ĞµĞ¹       â”‚          â”‚
â”‚   â”‚   1,250    â”‚  ğŸ”¥ 5      â”‚   23       â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â”‚   ğŸ† Ğ”ĞĞ¡Ğ¢Ğ˜Ğ–Ğ•ĞĞ˜Ğ¯ (3/13)                              â”‚
â”‚   [ğŸ¯ âœ“] [ğŸ”¥ âœ“] [ğŸ† âœ“] [â­ â—‹] [ğŸ‘‘ â—‹] ...           â”‚
â”‚                                                      â”‚
â”‚   ğŸ“ˆ Ğ”Ğ Ğ¡Ğ›Ğ•Ğ”Ğ£Ğ®Ğ©Ğ•Ğ“Ğ Ğ£Ğ ĞĞ’ĞĞ¯                           â”‚
â”‚   Ğ•Ñ‰Ñ‘ 150 XP (~30 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹)                         â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 75%                      â”‚
â”‚                                                      â”‚
â”‚   ğŸ Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ğ±Ğ¾Ğ½ÑƒÑ: Ğ”ĞµĞ½ÑŒ 3 (+20 XP)              â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ [ĞĞŸ] ĞĞ½Ñ‚Ğ¾Ğ½ ĞŸĞ¾Ğ¿Ğ»Ğ°Ğ²ÑĞºĞ¸Ğ¹  [ğŸ“… 30] [< ĞĞ¾ÑĞ±Ñ€ÑŒ 2025 >]    â”‚ â† hdr-bottom
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ hdr-top (ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Ğ¢Ğ¸Ñ‚ÑƒĞ»+Ğ£Ñ€] [â•â•â•Progressâ•â•â•] [XP/Max] [Streak] [Expand]     â”‚
â”‚  ğŸŒ± Ğ£Ñ€.7    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘   450/600   ğŸ”¥5      [â–¼]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|--------|----------|
| Ğ¢Ğ¸Ñ‚ÑƒĞ»+Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ | auto | `ğŸŒ± Ğ£Ñ€.7` Ğ¸Ğ»Ğ¸ `ğŸ‘‘ Ğ£Ñ€.23` |
| Progress bar | flex-grow | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ´Ğ¾ ÑĞ»ĞµĞ´. ÑƒÑ€Ğ¾Ğ²Ğ½Ñ |
| XP counter | auto | `450/600` (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹/Ğ´Ğ¾ ÑĞ»ĞµĞ´. ÑƒÑ€Ğ¾Ğ²Ğ½Ñ) |
| Streak | auto | `ğŸ”¥5` (Ğ´Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´) |
| Expand btn | 32px | `â–¼` / `â–²` toggle |

### Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ (GamePanel):

```javascript
// Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ¾Ğ¹ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
const GamePanel = {
  stats: {
    totalXP: 1250,
    currentStreak: 5,
    bestStreak: 12,
    totalDays: 23,
    perfectDays: 8
  },
  achievements: {
    unlocked: ['first_meal', 'streak_3', 'streak_7'],
    total: 13,
    progress: { streak_14: '7/14', water_master: '3/7' }
  },
  nextLevel: {
    current: 7,
    xpNeeded: 150,
    estimatedActions: 30
  },
  dailyBonus: {
    day: 3,
    xp: 20,
    claimed: false
  }
};
```

### Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ¾Ğ½ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹:

| Ğ¢Ğ¸Ğ¿ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ | ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ | Z-index | Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ |
|-----------------|---------|---------|---------|
| **Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ (advice)** | ĞĞ¸Ğ· ÑĞºÑ€Ğ°Ğ½Ğ° | 900 | tab_open, product_added |
| **XP gain (+5)** | Flying animation â†’ header | 1150 | ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
| **Level up popup** | ĞŸĞ¾Ğ´ hdr-top, Ğ¿Ğ¾Ğ²ĞµÑ€Ñ… hdr-bottom | 1100 | ĞŸÑ€Ğ¸ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ |
| **Achievement popup** | ĞŸĞ¾Ğ´ hdr-top, Ğ¿Ğ¾Ğ²ĞµÑ€Ñ… hdr-bottom | 1100 | ĞŸÑ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ |
| **Confetti** | Ğ’ĞµÑÑŒ ÑĞºÑ€Ğ°Ğ½ | 1200 | Level % 5, streak 7+ |

### Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹:

| Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | Ğ‘Ñ‹Ğ»Ğ¾ | Ğ¡Ñ‚Ğ°Ğ»Ğ¾ |
|---------|------|-------|
| "ğŸ¥— HEYS" Ğ»Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿ | hdr-top | âŒ Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ |
| "ĞŸĞ°Ğ½ĞµĞ»ÑŒ ĞºÑƒÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ°" | hdr-top | âŒ Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ |
| "ĞĞ½Ğ»Ğ°Ğ¹Ğ½/ĞÑ„Ğ»Ğ°Ğ¹Ğ½" ÑÑ‚Ğ°Ñ‚ÑƒÑ | hdr-top | âŒ Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ |
| "â†» Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ" ĞºĞ½Ğ¾Ğ¿ĞºĞ° | hdr-top | â†’ Long-press Ğ½Ğ° Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ |
| Theme toggle â˜€ï¸/ğŸŒ™ | hdr-top | â†’ FAB Ğ² ÑƒĞ³Ğ»Ñƒ (fixed) |
| Analytics button | hdr-top | â†’ Ğ’ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ |

---

## âœ¨ Flying Coins / XP Animation

**ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ**: ĞŸÑ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ XP â€” Ğ¼Ğ¾Ğ½ĞµÑ‚ĞºĞ°/Ğ·Ğ²ĞµĞ·Ğ´Ğ° Ğ²Ñ‹Ğ»ĞµÑ‚Ğ°ĞµÑ‚ Ğ¸Ğ· Ğ¼ĞµÑÑ‚Ğ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¸ Ğ»ĞµÑ‚Ğ¸Ñ‚ Ğ² ÑÑ‚Ğ°Ñ‚ÑƒÑ-Ğ±Ğ°Ñ€

```
[ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½]
       â†“
      â­ â†â”€â”€ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ·Ğ´ĞµÑÑŒ
       \
        \   â†â”€â”€ Ğ»ĞµÑ‚Ğ¸Ñ‚ Ğ¿Ğ¾ Ğ´ÑƒĞ³Ğµ
         \
          â†’ [â–ˆâ–ˆâ–ˆâ–ˆ 455XP] â†â”€â”€ Ğ¿Ñ€Ğ¸Ğ·ĞµĞ¼Ğ»ÑĞµÑ‚ÑÑ ÑÑĞ´Ğ°, Ğ±Ğ°Ñ€ Ğ¿ÑƒĞ»ÑŒÑĞ¸Ñ€ÑƒĞµÑ‚
```

### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:
```javascript
// 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ° (ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ)
const sourceEl = event.target.getBoundingClientRect();

// 2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ Ñ†ĞµĞ»Ğ¸ (XP bar Ğ² header)
const targetEl = document.querySelector('.xp-bar').getBoundingClientRect();

// 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ flying element
const coin = document.createElement('div');
coin.className = 'flying-xp';
coin.textContent = '+5';
coin.style.cssText = `
  position: fixed;
  left: ${sourceEl.x}px;
  top: ${sourceEl.y}px;
  z-index: 9999;
  font-size: 16px;
  font-weight: bold;
  color: #eab308;
`;
document.body.appendChild(coin);

// 4. ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»Ñ‘Ñ‚Ğ° (CSS transition Ğ¸Ğ»Ğ¸ FLIP)
requestAnimationFrame(() => {
  coin.style.transform = `translate(${targetEl.x - sourceEl.x}px, ${targetEl.y - sourceEl.y}px)`;
  coin.style.opacity = '0';
  coin.style.transition = 'all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
});

// 5. Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸
setTimeout(() => coin.remove(), 700);
```

---

## ğŸ”´ ĞĞ£Ğ”Ğ˜Ğ¢: ĞŸĞ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

### ğŸš« Ğ‘Ğ»Ğ¾ĞºĞµÑ€Ñ‹ (Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ”Ğ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ â€” Phase 0)

| # | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Ğ Ğ¸ÑĞº | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|---|----------|------|---------|
| B1 | **Layout shift**: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ XP bar Ğ² header Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ»Ğ¾Ğ¼Ğ°Ñ‚ÑŒ responsive | ğŸ”´ Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ flex Ñ `flex-shrink`, Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° 320px |
| B2 | **Popup vs hdr-bottom**: Popup Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾ Ğ½Ğ°ĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°Ñ‚ÑŒÑÑ | ğŸŸ¡ Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ | CSS: popup `position: absolute; top: 100%`, slideDown animation |
| B3 | **Advice vs Game notifications**: ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ | ğŸŸ¢ Ğ ĞµÑˆĞµĞ½Ğ¾ | Advice = Ğ½Ğ¸Ğ·, Game = Ğ²ĞµÑ€Ñ… (Ğ¿Ğ¾Ğ´ hdr-top) |
| B4 | **Confetti Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** | ğŸŸ¡ | Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ: `HEYS.game.celebrate()` â†’ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ `setShowConfetti` |
| B5 | **Client namespace** | ğŸ”´ | XP Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· `U.lsSet('heys_game', ...)` â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ clientId |
| B6 | **currentStreak Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ²Ğ½Ğµ React** | ğŸ”´ | Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ `HEYS.Day.getStreak()` Ğ´Ğ»Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ² gamification |
| B7 | **event.target Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚** | ğŸŸ¡ | Fallback: `document.querySelector('.xp-bar')` Ğ´Ğ»Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ |
| B8 | **z-index ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹** | ğŸŸ¡ | Advice=900, Game popup=1100, Flying XP=1150, Confetti=1200 |

### âš ï¸ Ğ—Ğ°Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ

| # | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|---|----------|---------|
| W1 | **FAB theme toggle** Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¼ĞµÑˆĞ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ñƒ | z-index: 1000, position: fixed, top: 8px right: 8px. **ĞĞ• Ğ¿ĞµÑ€ĞµĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ** XP bar |
| W2 | **"Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°"** | Long-press Ğ½Ğ° Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ² hdr-bottom |
| W3 | **XP bar Ğ½Ğ° ÑƒĞ·ĞºĞ¸Ñ… ÑĞºÑ€Ğ°Ğ½Ğ°Ñ…** | Mobile: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ `â­7 â–‘â–‘â–‘â–‘` (Ğ±ĞµĞ· Ñ‚ĞµĞºÑÑ‚Ğ° "XP"), desktop: Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ |
| W4 | **day_completed timing** | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑÑ‚ÑŒ Ğ² 23:00 Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ…Ğ¾Ğ´Ğµ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ |
| W5 | **Game popup auto-hide** | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· 4 ÑĞµĞº Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ tap |

### ğŸ†• ĞŸÑ€ĞµĞ²ĞµĞ½Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Phase 0)

| # | Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ | ĞšĞ°Ğº | ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ |
|---|---------------|-----|---------------------|
| P1 | 5 Ñ‚Ğ°Ğ±Ğ¾Ğ² Ğ²Ğ»ĞµĞ·Ğ°ÑÑ‚ Ğ½Ğ° 320px? | DevTools â†’ iPhone SE | Ğ’ÑĞµ Ñ‚Ğ°Ğ±Ñ‹ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ±ĞµĞ· ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° |
| P2 | `HEYS.utils.haptic` Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚? | Console: `HEYS.utils.haptic('success')` | Ğ’Ğ¸Ğ±Ñ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ |
| P3 | `U.lsSet` Ñ clientId? | Console: `U.lsSet('test', {a:1}); localStorage` | ĞšĞ»ÑÑ‡ `heys_test_clientXXX` |
| P4 | confetti Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚? | Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€: Ğ´Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ 100% ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹ | ĞšĞ¾Ğ½Ñ„ĞµÑ‚Ñ‚Ğ¸ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ |
| P5 | currentStreak Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½? | Console: Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ `HEYS.Day` | ĞÑƒĞ¶Ğ½Ğ¾ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ |

---

## ğŸ¤– Output Preferences

**Workflow**: Implement directly â€” ĞºĞ¾Ğ´ ÑƒĞ¶Ğµ ÑĞ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğµ

**Code style**: Follow copilot-instructions.md, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸, Legacy JS Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹

---

## ğŸ—ï¸ Phase 0: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ° âœ… Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ

> **Ğ¦ĞµĞ»ÑŒ**: ĞŸĞ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¿ĞµÑ€ĞµÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ hdr-top Ğ¿Ğ¾Ğ´ Ğ³ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

### 0.1 Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¸Ğ· hdr-top

- [x] **Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿ "ğŸ¥— HEYS"** âœ…
- [x] **Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ "ĞŸĞ°Ğ½ĞµĞ»ÑŒ ĞºÑƒÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ°"** âœ…
- [x] **Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ "ĞĞ½Ğ»Ğ°Ğ¹Ğ½/ĞÑ„Ğ»Ğ°Ğ¹Ğ½"** âœ…
- [x] **Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "â†» Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ"** â†’ Long-press Ğ½Ğ° Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ âœ…
- [x] **Theme toggle â†’ FAB** (fixed, top: 12px, right: 12px, z-index: 1000) âœ…

---

## ğŸ—ï¸ Phase 0.5: Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ»Ğ¾ĞºĞµÑ€Ğ¾Ğ² (ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ!)

> **Ğ¦ĞµĞ»ÑŒ**: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´ Ğº Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ XP Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ¾Ğ²

### 0.5.1 Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `data-game-source` Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹

**Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_day_v12.js`

```javascript
// ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ²Ğ¾Ğ´Ñ‹ (water presets + FAB):
React.createElement('button', {
  'data-game-source': 'water',
  onClick: (e) => addWater(preset.ml, e)
}, ...)

// ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°:
React.createElement('button', {
  'data-game-source': 'product',
  ...
})
```

### 0.5.2 Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ XP Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹ Ğ²Ğ¾ Ğ’Ğ¡Ğ• Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° | Ğ§Ñ‚Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ |
|---------|--------|--------------|
| `addWater(ml)` | 1878 | `if (HEYS.game) HEYS.game.addXP(2, 'water_added', event?.target \|\| document.activeElement);` |
| `addProductToMeal(mi, p)` | 2543 | `if (HEYS.game) HEYS.game.addXP(5, 'product_added', ...);` |
| `addProductAndFocusGrams(product)` | 621 | `if (HEYS.game) HEYS.game.addXP(5, 'product_added', ...);` + `haptic('light')` + dispatch |
| `addProductWithGrams(product, grams)` | 652 | `if (HEYS.game) HEYS.game.addXP(5, 'product_added', ...);` + dispatch |

### 0.5.3 Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ `HEYS.Day.getStreak()`

**Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_day_v12.js` (Ğ² useEffect Ğ¿Ğ¾ÑĞ»Ğµ currentStreak Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ)

```javascript
useEffect(() => {
  HEYS.Day = HEYS.Day || {};
  HEYS.Day.getStreak = () => currentStreak;
}, [currentStreak]);
```

### 0.5.4 Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ day_completed Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºÑƒ

**Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_gamification_v1.js` (Ğ½Ğ¾Ğ²Ñ‹Ğ¹)

```javascript
// ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ñ‡ĞµÑ€Ğ°ÑˆĞ½Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ
function checkYesterdayCompletion() {
  const yesterday = new Date();
  yesterday.setDate(yesterday.getDate() - 1);
  const yesterdayISO = yesterday.toISOString().slice(0, 10);
  
  const todayStr = new Date().toISOString().slice(0, 10);
  const lastChecked = U.lsGet('heys_game_lastDayCheck', '');
  
  // Ğ•ÑĞ»Ğ¸ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞ»Ğ¸ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ â€” Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼
  if (lastChecked === todayStr) return;
  
  // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²Ñ‡ĞµÑ€Ğ°ÑˆĞ½ĞµĞ³Ğ¾ Ğ´Ğ½Ñ
  const dayData = U.lsGet('heys_dayv2_' + yesterdayISO, null);
  if (!dayData) return;
  
  // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ ratio
  const ratio = calcDayRatio(dayData);
  
  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· ratioZones
  if (HEYS.ratioZones && HEYS.ratioZones.isSuccess(ratio)) {
    // Ğ•Ñ‰Ñ‘ Ğ½Ğµ Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞ»Ğ¸ XP Ğ·Ğ° ÑÑ‚Ğ¾Ñ‚ Ğ´ĞµĞ½ÑŒ?
    const awardedDays = U.lsGet('heys_game_awardedDays', []);
    if (!awardedDays.includes(yesterdayISO)) {
      HEYS.game.addXP(50, 'day_completed', null); // +50 XP
      awardedDays.push(yesterdayISO);
      U.lsSet('heys_game_awardedDays', awardedDays);
      
      // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ popup
      HEYS.game.showPopup({
        type: 'day_bonus',
        title: 'ğŸ‰ Ğ’Ñ‡ĞµÑ€Ğ° Ğ² Ğ½Ğ¾Ñ€Ğ¼Ğµ!',
        subtitle: `${r0(ratio * 100)}% Ğ¾Ñ‚ Ñ†ĞµĞ»Ğ¸`,
        xp: '+50 XP'
      });
    }
  }
  
  U.lsSet('heys_game_lastDayCheck', todayStr);
}
```
- [x] **Analytics button â†’ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ** âœ…

### 0.2 ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸

- [x] **hdr-top = gamification placeholder** â€” `ğŸŒ± Ğ£Ñ€.1 | â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ | 0/100 | ğŸ”¥0`
- [x] **FAB Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚** â€” theme toggle Ğ² ÑƒĞ³Ğ»Ñƒ
- [x] **Long-press Ğ½Ğ° Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€** â€” 600ms â†’ confirm â†’ ÑĞ¼ĞµĞ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
- [x] **HEYS.Day.getStreak()** â€” ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ´Ğ»Ñ gamification Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ
- [x] **CSS Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½** â€” `.theme-fab`, `.game-bar-placeholder`, `.game-*`

### 0.3 z-index Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² CSS)

```css
.theme-fab { z-index: 1000; }
.game-panel-expanded { z-index: 1050; }
.game-popup { z-index: 1100; }
.flying-xp { z-index: 1150; }
.confetti-container { z-index: 1200; }
/* Advice toasts ÑƒĞ¶Ğµ z-index: 900 â€” Ğ½Ğ¸Ğ¶Ğµ Ğ²ÑĞµĞ³Ğ¾ */
```

---

## ğŸ—ï¸ Phase 1: Core XP Module

### Must Have (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ñ€ĞµĞ»Ğ¸Ğ·Ğ°)

- [ ] **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ heys_gamification_v1.js** â€” Ğ¯Ğ´Ñ€Ğ¾ XP/ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹/coins
  - **Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_gamification_v1.js`
  - **Why**: Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ³ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ â€” Ğ¾Ğ´Ğ¸Ğ½ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ñ€Ğ°Ğ²Ğ´Ñ‹
  - **Acceptance**: `HEYS.game.addXP(amount, reason, sourceEl)` Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
  - **Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ**:
    ```javascript
    HEYS.game = {
      // XP
      addXP(amount, reason, sourceEl) { ... },
      getLevel() { ... },
      getProgress() { ... },
      
      // Coins (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Phase 2)
      addCoins(amount) { ... },
      getCoins() { ... },
      
      // Achievements
      checkAchievement(id) { ... },
      getAchievements() { ... },
      
      // Stats
      getStats() { ... },
      
      // Flying animation
      flyToBar(sourceEl, type) { ... }
    };
    ```
  - **localStorage ĞºĞ»ÑÑ‡**: `heys_game` (Ñ‡ĞµÑ€ĞµĞ· `U.lsSet`)

- [ ] **GamificationBar ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚** â€” ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² header
  - **Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_app_v12.js` (Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚)
  - **Where**: hdr-top ÑĞ¿Ñ€Ğ°Ğ²Ğ°
  - **Acceptance**: ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ, Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ, streak, coins
  - **Mobile UI**: `â­7 â–‘â–‘â–‘ ğŸ”¥5` (ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ¾)
  - **Desktop UI**: `â­ Ğ£Ñ€.7 â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 450XP | ğŸ”¥5 Ğ´Ğ½ĞµĞ¹ | ğŸ’°230`

- [ ] **Flying XP Animation** â€” Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ feedback
  - **Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_gamification_v1.js`
  - **Trigger**: ĞŸÑ€Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¼ addXP() Ñ sourceEl
  - **ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ**: Ğ—Ğ²ĞµĞ·Ğ´Ğ°/Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ° Ğ»ĞµÑ‚Ğ¸Ñ‚ Ğ¸Ğ· sourceEl Ğ² GamificationBar
  - **CSS**: `@keyframes flyToBar { ... }`

- [ ] **ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ² index.html**
  - **Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/index.html`
  - **After**: `heys_ratio_zones_v1.js`
  - **Acceptance**: `HEYS.game` Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸

- [ ] **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ÑĞ¼Ğ¸** â€” Ğ’Ñ‹Ğ·Ğ¾Ğ²Ñ‹ addXP Ğ² Ğ½ÑƒĞ¶Ğ½Ñ‹Ñ… Ğ¼ĞµÑÑ‚Ğ°Ñ…
  - **Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_day_v12.js`
  - **Why**: XP Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ÑÑ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  - **Ğ¢Ğ¾Ñ‡ĞºĞ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸** (Ñ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡ĞµĞ¹ sourceEl Ğ´Ğ»Ñ flying animation):
    ```javascript
    // addProductToMeal():2500
    function addProductToMeal(mi, p) {
      // ... existing code ...
      if (HEYS.game) HEYS.game.addXP(5, 'product_added', event?.target);
    }
    
    // addWater():1873
    function addWater(ml) {
      // ... existing code ...
      if (HEYS.game) HEYS.game.addXP(2, 'water_added', event?.target);
    }
    
    // confirmTrainingPicker():~2085
    function confirmTrainingPicker() {
      // ... existing code ...
      if (HEYS.game) HEYS.game.addXP(15, 'training_added');
    }
    ```
  - **Acceptance**: ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ â†’ Ğ·Ğ²ĞµĞ·Ğ´Ğ° Ğ»ĞµÑ‚Ğ¸Ñ‚ Ğ² XP bar

---

## ğŸ—ï¸ Phase 2: Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹ (Achievements)

### Achievements Library (ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ±ĞµĞ¹Ğ´Ğ¶ĞµĞ¹)

> **Ğ’ÑĞµĞ³Ğ¾**: 25 Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ² 5 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑÑ…

#### ğŸ”¥ Streak (ÑĞµÑ€Ğ¸Ğ¸)

| ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | XP | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ |
|----|----------|---------|---:|--------|----------|
| `streak_3` | Ğ¢Ñ€Ğ¸ Ğ´Ğ½Ñ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ | Streak â‰¥ 3 | +30 | ğŸ”¥ | Common |
| `streak_7` | ĞĞµĞ´ĞµĞ»Ñ ÑƒÑĞ¿ĞµÑ…Ğ° | Streak â‰¥ 7 | +100 | ğŸ† | Rare |
| `streak_14` | Ğ”Ğ²Ğµ Ğ½ĞµĞ´ĞµĞ»Ğ¸ | Streak â‰¥ 14 | +200 | â­ | Epic |
| `streak_30` | ĞœĞµÑÑÑ† ÑĞ¸Ğ»Ñ‹ | Streak â‰¥ 30 | +500 | ğŸ‘‘ | Legendary |
| `streak_100` | Ğ–ĞµĞ»ĞµĞ·Ğ½Ğ°Ñ Ğ²Ğ¾Ğ»Ñ | Streak â‰¥ 100 | +1000 | ğŸ’ | Mythic |

#### ğŸ¯ ĞŸĞµÑ€Ğ²Ñ‹Ğµ ÑˆĞ°Ğ³Ğ¸ (onboarding)

| ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | XP | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ |
|----|----------|---------|---:|--------|----------|
| `first_meal` | ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑˆĞ°Ğ³ | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ | +50 | ğŸ¯ | Common |
| `first_water` | Ğ’Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ | ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ñ€Ğ°Ğ· Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ğ´Ñƒ | +20 | ğŸ’§ | Common |
| `first_training` | ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ | ĞŸĞµÑ€Ğ²Ğ°Ñ Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° | +30 | ğŸƒ | Common |
| `first_weight` | Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ¾Ñ‚ÑÑ‡Ñ‘Ñ‚Ğ° | ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ñ€Ğ°Ğ· Ğ²Ğ²ĞµÑÑ‚Ğ¸ Ğ²ĞµÑ | +20 | âš–ï¸ | Common |
| `profile_complete` | ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ³Ğ¾Ñ‚Ğ¾Ğ² | Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ½Ğ° 100% | +50 | ğŸ“‹ | Common |

#### ğŸ’ ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ½Ñ

| ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | XP | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ |
|----|----------|---------|---:|--------|----------|
| `perfect_day` | Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ | ratio 0.95-1.05 | +25 | ğŸ’ | Rare |
| `perfect_week` | Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ½ĞµĞ´ĞµĞ»Ñ | 7 perfect days | +200 | ğŸŒŸ | Epic |
| `balanced_macros` | Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ‘Ğ–Ğ£ | Ğ’ÑĞµ Ğ¼Ğ°ĞºÑ€Ğ¾ÑÑ‹ 90-110% | +30 | âš–ï¸ | Rare |
| `fiber_champion` | ĞšĞ»ĞµÑ‚Ñ‡Ğ°Ñ‚ĞºĞ°-Ñ‡ĞµĞ¼Ğ¿Ğ¸Ğ¾Ğ½ | ĞšĞ»ĞµÑ‚Ñ‡Ğ°Ñ‚ĞºĞ° â‰¥100% 7 Ğ´Ğ½ĞµĞ¹ | +100 | ğŸ¥— | Rare |

#### ğŸ’§ Ğ’Ğ¾Ğ´Ğ° Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ

| ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | XP | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ |
|----|----------|---------|---:|--------|----------|
| `water_day` | Ğ’Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ | 100% Ğ½Ğ¾Ñ€Ğ¼Ñ‹ Ğ²Ğ¾Ğ´Ñ‹ | +15 | ğŸ’§ | Common |
| `water_master` | Ğ’Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ¼Ğ°ÑÑ‚ĞµÑ€ | 100% Ğ²Ğ¾Ğ´Ñ‹ 7 Ğ´Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ | +100 | ğŸŒŠ | Rare |
| `training_week` | Ğ¡Ğ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½ | 5 Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ | +150 | ğŸ’ª | Epic |
| `steps_champion` | Ğ¨Ğ°Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¼Ğ°Ñ€Ğ°Ñ„Ğ¾Ğ½ | 10000+ ÑˆĞ°Ğ³Ğ¾Ğ² 7 Ğ´Ğ½ĞµĞ¹ | +150 | ğŸ‘Ÿ | Epic |

#### â­ Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ¸ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ

| ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | XP | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ |
|----|----------|---------|---:|--------|----------|
| `level_5` | Ğ£Ñ‡ĞµĞ½Ğ¸Ğº | Ğ”Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ 5 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ | +50 | ğŸ“š | Common |
| `level_10` | ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ğº | Ğ”Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ 10 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ | +100 | ğŸ’ª | Rare |
| `level_15` | Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚ | Ğ”Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ 15 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ | +150 | â­ | Epic |
| `level_20` | ĞœĞ°ÑÑ‚ĞµÑ€ | Ğ”Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ 20 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ | +200 | ğŸ‘‘ | Legendary |
| `level_25` | Ğ“ÑƒÑ€Ñƒ | Ğ”Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ 25 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ | +300 | ğŸ† | Mythic |

#### ğŸŒ… ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸ Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼

| ID | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | XP | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ |
|----|----------|---------|---:|--------|----------|
| `early_bird` | Ğ Ğ°Ğ½Ğ½ÑÑ Ğ¿Ñ‚Ğ°ÑˆĞºĞ° | Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°Ğº Ğ´Ğ¾ 9:00 7 Ğ´Ğ½ĞµĞ¹ | +100 | ğŸŒ… | Rare |
| `night_owl_safe` | Ğ‘ĞµĞ· Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ğ¿ĞµÑ€ĞµĞºÑƒÑĞ¾Ğ² | ĞĞµÑ‚ ĞµĞ´Ñ‹ Ğ¿Ğ¾ÑĞ»Ğµ 22:00 7 Ğ´Ğ½ĞµĞ¹ | +100 | ğŸŒ™ | Rare |

### Achievement Popup (Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Ğ”ĞĞ¡Ğ¢Ğ˜Ğ–Ğ•ĞĞ˜Ğ• Ğ ĞĞ—Ğ‘Ğ›ĞĞšĞ˜Ğ ĞĞ’ĞĞĞ! â”‚
â”‚                                 â”‚
â”‚       â­ ĞĞµĞ´ĞµĞ»Ñ ÑƒÑĞ¿ĞµÑ…Ğ° â­       â”‚
â”‚     7 Ğ´Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ Ğ² Ğ½Ğ¾Ñ€Ğ¼Ğµ!     â”‚
â”‚                                 â”‚
â”‚         +100 XP ğŸ’«              â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚      Ğ ĞµĞ´ĞºĞ¾ÑÑ‚ÑŒ: RARE ğŸ”·          â”‚
â”‚                                 â”‚
â”‚        [ğŸ‰ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾!]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Ğ”ĞĞ¡Ğ¢Ğ˜Ğ–Ğ•ĞĞ˜Ğ¯  (8/25)                    [Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ğŸ”¥ STREAK                                          â”‚
â”‚  [ğŸ”¥âœ“] [ğŸ†âœ“] [â­â—‹] [ğŸ‘‘â—‹] [ğŸ’â—‹]                      â”‚
â”‚   3d     7d    14d   30d   100d                    â”‚
â”‚                                                     â”‚
â”‚  ğŸ¯ ĞŸĞ•Ğ Ğ’Ğ«Ğ• Ğ¨ĞĞ“Ğ˜                                    â”‚
â”‚  [ğŸ¯âœ“] [ğŸ’§âœ“] [ğŸƒâœ“] [âš–ï¸âœ“] [ğŸ“‹âœ“]                     â”‚
â”‚                                                     â”‚
â”‚  ğŸ’ ĞšĞĞ§Ğ•Ğ¡Ğ¢Ğ’Ğ Ğ”ĞĞ¯                                   â”‚
â”‚  [ğŸ’âœ“] [ğŸŒŸâ—‹] [âš–ï¸â—‹] [ğŸ¥—â—‹]                           â”‚
â”‚                                                     â”‚
â”‚  ğŸ’§ Ğ’ĞĞ”Ğ Ğ˜ ĞĞšĞ¢Ğ˜Ğ’ĞĞĞ¡Ğ¢Ğ¬                              â”‚
â”‚  [ğŸ’§âœ“] [ğŸŒŠâ—‹] [ğŸ’ªâ—‹] [ğŸ‘Ÿâ—‹]                           â”‚
â”‚                                                     â”‚
â”‚  â­ Ğ£Ğ ĞĞ’ĞĞ˜                                         â”‚
â”‚  [ğŸ“šâœ“] [ğŸ’ªâ—‹] [â­â—‹] [ğŸ‘‘â—‹] [ğŸ†â—‹]                      â”‚
â”‚    5     10    15    20    25                      â”‚
â”‚                                                     â”‚
â”‚  ğŸŒ… ĞŸĞ Ğ˜Ğ’Ğ«Ğ§ĞšĞ˜                                       â”‚
â”‚  [ğŸŒ…â—‹] [ğŸŒ™â—‹]                                       â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°: âœ“ = Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾, â—‹ = Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
```

- **ĞŸĞ¾ĞºĞ°Ğ·**: Modal Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¿Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ñ (scale + fade)
- **Confetti**: Ğ”Ğ°, Ğ¿Ñ€Ğ¸ Rare+ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸ÑÑ…
- **Haptic**: `HEYS.haptic('success')` Ğ¿Ñ€Ğ¸ unlock
- **Sound**: ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ (Web Audio API)
- **Dismiss**: Tap anywhere Ğ¸Ğ»Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºĞ°

---

## ğŸ—ï¸ Phase 3: Notifications & Polish

### Must Have

- [ ] **Level Up notification** â€” Popup Ğ¿Ğ¾Ğ´ hdr-top
  - **Where**: Ğ Ğ°Ğ·Ğ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ´ gamification bar, Ğ¿Ğ¾Ğ²ĞµÑ€Ñ… hdr-bottom
  - **Animation**: slideDown + scale, auto-hide Ñ‡ĞµÑ€ĞµĞ· 4 ÑĞµĞº
  - **Acceptance**: ĞŸÑ€Ğ¸ level up Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ "ğŸ‰ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 8! Ğ¢Ñ‹ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ğº"
  - **Bonus**: Confetti Ğ¿Ñ€Ğ¸ ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ… ĞºÑ€Ğ°Ñ‚Ğ½Ñ‹Ñ… 5

- [ ] **Achievement popup** â€” Slide-down Ğ¿Ğ¾Ğ´ hdr-top (ĞĞ• modal!)
  - **UI**: ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ level up, Ğ½Ğ¾ Ñ Ğ¸ĞºĞ¾Ğ½ĞºĞ¾Ğ¹ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ
  - **Animation**: slideDown + confetti Ğ¿Ñ€Ğ¸ milestone Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸ÑÑ…
  - **Auto-hide**: 5 ÑĞµĞº Ğ¸Ğ»Ğ¸ tap anywhere (ĞĞ• Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ UI)

- [ ] **Game Popup ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚**
  - **Ğ¤Ğ°Ğ¹Ğ»**: `apps/web/heys_gamification_v1.js`
  - **ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ**: `position: absolute; top: 100%; left: 0; right: 0`
  - **CSS**: Rounded bottom corners, gradient background, shadow
  - **States**: hidden â†’ visible (slideDown) â†’ hidden (slideUp)

```javascript
// Game Popup API
HEYS.game.showPopup({
  type: 'level_up', // 'level_up' | 'achievement' | 'daily_bonus'
  title: 'ğŸ‰ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 8!',
  subtitle: 'Ğ¢Ñ‹ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ğº ğŸ’ª',
  xp: '+100 XP',
  confetti: true,
  duration: 4000 // auto-hide
});
```

### Could Have (nice to have)

- [ ] **Achievements gallery** â€” ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ²ÑĞµÑ… Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹
  - **Where**: Ğ’ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ, Ğ½Ğ¾Ğ²Ğ°Ñ ÑĞµĞºÑ†Ğ¸Ñ "ğŸ† Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ"
  - **UI**: Grid ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº (locked/unlocked)
  - **Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°**: "ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ 12/25 Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹"

- [ ] **Weekly XP Report** â€” Ğ’ advice Ğ¼Ğ¾Ğ´ÑƒĞ»Ğµ
  - **Trigger**: Ğ’Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ Ğ²ĞµÑ‡ĞµÑ€
  - **Text**: "ĞĞ° ÑÑ‚Ğ¾Ğ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ: 450 XP, 2 Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ! ğŸš€"

- [ ] **Level-up celebration** â€” ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğµ Ğ½Ğ° Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ
  - **Confetti**: ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¿Ñ€Ğ¸ ÑƒÑ€. 5, 10, 15, 20
  - **Sound**: ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ (Web Audio API)
  - **Popup**: ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ + Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚Ğ¸Ñ‚ÑƒĞ»

---

## ğŸ“Š XP Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° (ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ)

| Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ | XP | Reason ID | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ |
|----------|---:|-----------|---------|
| Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ | +5 | `product_added` | ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ· |
| Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ğ´Ñƒ | +2 | `water_added` | ĞœĞ°ĞºÑ 10 Ñ€Ğ°Ğ·/Ğ´ĞµĞ½ÑŒ |
| Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ | +15 | `training_added` | Ğ”Ğ¾ 3 Ğ² Ğ´ĞµĞ½ÑŒ |
| Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ½ | +5 | `sleep_logged` | ĞĞ´Ğ¸Ğ½ Ñ€Ğ°Ğ·/Ğ´ĞµĞ½ÑŒ |
| Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ | +5 | `weight_logged` | ĞĞ´Ğ¸Ğ½ Ñ€Ğ°Ğ·/Ğ´ĞµĞ½ÑŒ |
| Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ñ€Ğ¼Ñƒ ĞºĞ°Ğ»Ğ¾Ñ€Ğ¸Ğ¹ | +50 | `day_completed` | ratio 0.75-1.1, Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·/Ğ´ĞµĞ½ÑŒ |
| Streak 3 Ğ´Ğ½Ñ | +30 | `streak_3` | ĞŸÑ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ |
| Streak 7 Ğ´Ğ½ĞµĞ¹ | +100 | `streak_7` | ĞŸÑ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ |
| Streak 14 Ğ´Ğ½ĞµĞ¹ | +200 | `streak_14` | ĞŸÑ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ |
| Streak 30 Ğ´Ğ½ĞµĞ¹ | +500 | `streak_30` | ĞŸÑ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ |
| Perfect day (ratio 0.95-1.05) | +25 | `perfect_day` | Ğ‘Ğ¾Ğ½ÑƒÑ Ğº day_completed |

**Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ÑĞ¿Ğ°Ğ¼Ğ°**: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `sessionStorage` Ğ¸Ğ»Ğ¸ `heys_xp_daily_{date}` Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ ÑƒĞ¶Ğµ Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ‹Ñ… "Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ…" Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ².

---

## ğŸ“ˆ Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ¸ Ğ¿Ğ¾Ñ€Ğ¾Ğ³Ğ¸

```javascript
const LEVEL_THRESHOLDS = [
  0,      // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 1: 0 XP
  100,    // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2: 100 XP
  300,    // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 3: 300 XP
  600,    // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 4: 600 XP
  1000,   // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 5: 1000 XP
  1500,   // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 6: 1500 XP
  2200,   // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 7: 2200 XP
  3000,   // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 8: 3000 XP
  4000,   // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 9: 4000 XP
  5200,   // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 10: 5200 XP
  6500,   // ...Ğ¸ Ñ‚.Ğ´. Ñ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸ĞµĞ¼ ÑˆĞ°Ğ³Ğ°
  8000,
  10000,
  12500,
  15500,
  19000,
  23000,
  27500,
  32500,
  38000,  // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 20
];
```

**Ğ Ğ°ÑÑ‡Ñ‘Ñ‚**: 
- Ğ£Ñ€. 1â†’2: ~20 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ (2-3 Ğ´Ğ½Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³Ğ°)
- Ğ£Ñ€. 10: ~2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- Ğ£Ñ€. 20: ~2-3 Ğ¼ĞµÑÑÑ†Ğ°

---

## ğŸ”— ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ (Ğ°ÑƒĞ´Ğ¸Ñ‚)

| Ğ¤Ğ°Ğ¹Ğ» | Ğ§Ñ‚Ğ¾ ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ | Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ |
|------|--------------|--------|
| `heys_day_v12.js` | `addProductToMeal()` â€” Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ | ~2483-2500 |
| `heys_day_v12.js` | `addWater()` â€” Ğ²Ğ¾Ğ´Ğ° | ~1873-1890 |
| `heys_day_v12.js` | Training save â€” Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸ | ~2080-2120 |
| `heys_day_v12.js` | `currentStreak` â€” Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ streak | ~2545-2580 |
| `heys_ratio_zones_v1.js` | `isSuccess()` â€” Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ Ğ´Ğ½Ñ | ~120-125 |
| `heys_storage_layer_v1.js` | `Store.set/get` â€” Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ | ~1-100 |
| `archive/legacy-v12/gaming/heys_gaming_system_v1.js` | Legacy XP ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (Ñ€ĞµÑ„ĞµÑ€ĞµĞ½Ñ) | Ğ²ÑÑ |

---

## âœ… DONE (ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸Ñ‘Ğ¼ĞºĞ¸)

### Functional

- [ ] XP Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°, Ğ²Ğ¾Ğ´Ñ‹, Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸
- [ ] XP Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² UI (ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ + Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€)
- [ ] Level up notification Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸ (localStorage)
- [ ] Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ½Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

### Quality Gates

- [ ] `pnpm type-check` PASS
- [ ] `pnpm lint` PASS
- [ ] `pnpm build` PASS
- [ ] Manual test: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ â†’ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ +5 XP

### UI Testing

**Mobile (Chrome DevTools â†’ iPhone SE):**
- [ ] XP bar Ğ²Ğ¸Ğ´ĞµĞ½ Ğ¸ Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚
- [ ] Toast "+5 XP" Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¸ Ğ¸ÑÑ‡ĞµĞ·Ğ°ĞµÑ‚
- [ ] ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€Ğ° Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ°Ñ

**Desktop:**
- [ ] XP bar Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğº ÑˆĞ¸Ñ€Ğ¸Ğ½Ğµ

---

## ğŸ¤– AI Context

### ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ´Ğ»Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```javascript
// Storage (Legacy) â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ÑÑ‚Ğ¾Ñ‚ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½
const U = HEYS.utils || {};
U.lsSet('heys_game', { totalXP: 100, level: 1, lastUpdate: Date.now() });
const gameData = U.lsGet('heys_game', { totalXP: 0, level: 1 });

// âš ï¸ Ğ’ĞĞ–ĞĞ: U.lsSet Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ clientId prefix!
// Ğ­Ñ‚Ğ¾ Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ XP data Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

// Events â€” Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ¾Ğ²ĞµÑ‰ĞµĞ½Ğ¸Ñ UI
window.dispatchEvent(new CustomEvent('heysXPGained', { 
  detail: { amount: 5, reason: 'product_added', newTotal: 105 } 
}));
window.dispatchEvent(new CustomEvent('heysLevelUp', { 
  detail: { newLevel: 8, title: 'ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ğº' } 
}));

// Haptic feedback â€” Ğ£Ğ–Ğ• Ğ•Ğ¡Ğ¢Ğ¬ Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ!
if (HEYS.utils && HEYS.utils.haptic) {
  HEYS.utils.haptic('light');   // +5 XP
  HEYS.utils.haptic('success'); // level up
}

// Confetti â€” Ğ£Ğ–Ğ• Ğ•Ğ¡Ğ¢Ğ¬, Ğ½Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ
// Ğ’Ğ¼ĞµÑÑ‚Ğ¾ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ³Ğ¾ setShowConfetti â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ HEYS.game.celebrate()
```

### Ğ ĞµÑ„ĞµÑ€ĞµĞ½Ñ Ğ¸Ğ· legacy gaming

Ğ¤Ğ°Ğ¹Ğ» `archive/legacy-v12/gaming/heys_gaming_system_v1.js` ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:
- `GAME_CONFIG.XP_MULTIPLIER = 1.2` â€” Ğ¼Ğ½Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ¾Ğ¿Ñ‹Ñ‚Ğ°
- `ExperienceSystem.calculateLevel(totalXP)` â€” Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ
- `addExperience(amount, reason)` â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ¿Ñ‹Ñ‚Ğ°

**Ğ£Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ñ‚ÑŒ**: ĞĞµ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ²Ğ°Ğ»ÑÑ‚Ñ‹ (coins, energy), challenges. Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ XP + ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸ + achievements.

### Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

| Ğ§Ñ‚Ğ¾ | Ğ“Ğ´Ğµ | ĞšĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ |
|-----|-----|------------------|
| `currentStreak` | `heys_day_v12.js:2574` | ĞÑƒĞ¶Ğ½Ğ¾ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² `HEYS.Day.getStreak()` |
| `setShowConfetti` | `heys_day_v12.js:1554` | Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· event Ğ¸Ğ»Ğ¸ prop |
| `haptic()` | `heys_day_utils.js:19` | `HEYS.utils.haptic(type)` |
| `ratioZones.isSuccess()` | `heys_ratio_zones_v1.js:120` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ Ğ´Ğ½Ñ |
| `U.lsSet/lsGet` | `heys_core_v12.js` | Storage Ñ clientId |

---

## ğŸ“ Notes

- **Priority**: high (retention ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµĞ½)
- **Complexity**: M (~2.5-3 Ñ‡Ğ°ÑĞ°)
- **Created**: 2025-11-30
- **Audit Version**: 6.1 (Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ + C1-C6 Ğ±Ğ»Ğ¾ĞºĞµÑ€Ñ‹)

---

## âœ¨ WOW-ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹ Ğ¸ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸

> **Ğ¦ĞµĞ»ÑŒ**: Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹, Ğ° ĞŸĞ Ğ˜Ğ¯Ğ¢ĞĞĞ™ Ğ¸ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹

### ğŸ¨ Micro-animations (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)

| Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
|---------|----------|------------|
| **XP gain** | Ğ§Ğ¸ÑĞ»Ğ¾ Ğ²Ñ‹Ğ»ĞµÑ‚Ğ°ĞµÑ‚ Ğ²Ğ²ĞµÑ€Ñ… Ğ¸ Ğ¸ÑÑ‡ĞµĞ·Ğ°ĞµÑ‚ | CSS `@keyframes flyUp { 0% { opacity:1; transform:translateY(0) } 100% { opacity:0; transform:translateY(-20px) } }` |
| **Progress bar** | ĞŸĞ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ñ glow | `transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)` + `box-shadow: 0 0 10px currentColor` |
| **Level up** | Ğ§Ğ¸ÑĞ»Ğ¾ Ğ¿ÑƒĞ»ÑŒÑĞ¸Ñ€ÑƒĞµÑ‚ 3 Ñ€Ğ°Ğ·Ğ° | `@keyframes pulse { 0%,100% { transform:scale(1) } 50% { transform:scale(1.2) } }` |
| **Milestone confetti** | Ğ£Ğ¶Ğµ ĞµÑÑ‚ÑŒ Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ | ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `setShowConfetti(true)` |
| **Flying star** | Ğ‘eĞ·ÑŒĞµ-Ğ´ÑƒĞ³Ğ° Ğ¾Ñ‚ source Ğº target | `cubic-bezier(0.25, 0.1, 0.25, 1)` + scale down |

### ğŸ”Š Sound Effects (Future â€” Ğ½Ğµ Ğ² ÑÑ‚Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸)

> Web Audio API beep Ğ¿Ñ€Ğ¸ level up. ĞÑ‚Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¾ â€” Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹ ROI.

### ğŸ† Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸ (Ñ‚Ğ¸Ñ‚ÑƒĞ»Ñ‹)

| Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ | Ğ¢Ğ¸Ñ‚ÑƒĞ» | Ğ˜ĞºĞ¾Ğ½ĞºĞ° | Ğ¦Ğ²ĞµÑ‚ | CSS Variable |
|--------|-------|--------|------|--------------|
| 1-4 | ĞĞ¾Ğ²Ğ¸Ñ‡Ğ¾Ğº | ğŸŒ± | #94a3b8 (ÑĞµÑ€Ñ‹Ğ¹) | `--level-color` |
| 5-9 | Ğ£Ñ‡ĞµĞ½Ğ¸Ğº | ğŸ“š | #3b82f6 (ÑĞ¸Ğ½Ğ¸Ğ¹) | `--level-color` |
| 10-14 | ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ğº | ğŸ’ª | #22c55e (Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹) | `--level-color` |
| 15-19 | Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚ | â­ | #eab308 (Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ¾Ğ¹) | `--level-color` |
| 20+ | ĞœĞ°ÑÑ‚ĞµÑ€ | ğŸ‘‘ | #a855f7 (Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹) | `--level-color` |

**UI**: `ğŸ‘‘ ĞœĞ°ÑÑ‚ĞµÑ€ Â· Ğ£Ñ€. 23` â€” Ñ‚Ğ¸Ñ‚ÑƒĞ» Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğµ
**Bonus**: XP bar Ğ¼ĞµĞ½ÑĞµÑ‚ Ñ†Ğ²ĞµÑ‚ Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ!

### ğŸ“Š Streak Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ!)

```
Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ streak: ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ 5 Ğ´Ğ½ĞµĞ¹
                â–²
          ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ² Ğ½Ğ¾Ñ€Ğ¼Ğµ â€” Ğ¾Ğ³Ğ¾Ğ½ÑŒ Ğ³Ğ¾Ñ€Ğ¸Ñ‚!
```

**UI Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ**: Ğ•ÑĞ»Ğ¸ `streak === 0` â†’ ÑĞºÑ€Ñ‹Ñ‚ÑŒ ğŸ”¥ (Ğ½Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ `ğŸ”¥0`)

**Ğ˜Ğ´ĞµÑ**: Ğ’ XP bar Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ½Ğ¸-Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ streak Ñ€ÑĞ´Ğ¾Ğ¼ Ñ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¼:
`â­ Ğ£Ñ€.7 | ğŸ”¥5 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 450/600`

### ğŸ Daily Login Bonus (Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ®!)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ğ±Ğ¾Ğ½ÑƒÑ!        â”‚
â”‚                              â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 1: +10 XP  âœ“           â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 2: +15 XP  âœ“           â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 3: +20 XP  â† ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ   â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 4: +25 XP              â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 5: +30 XP              â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 6: +40 XP              â”‚
â”‚  Ğ”ĞµĞ½ÑŒ 7: +50 XP ğŸ‰           â”‚
â”‚                              â”‚
â”‚      [Ğ—Ğ°Ğ±Ñ€Ğ°Ñ‚ÑŒ +20 XP]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞœĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ°**: 
- ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ…Ğ¾Ğ´Ğµ Ğ·Ğ° Ğ´ĞµĞ½ÑŒ â€” Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ popup (Ğ¿Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ App, Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ°Ğ±)
- ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ±Ğ¾Ğ½ÑƒÑ: 10â†’15â†’20â†’25â†’30â†’40â†’50 XP
- Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞµ Ğ´Ğ½Ñ (Ğ½Ğ¾ Ğ½Ğµ streak!)
- ĞŸÑ€Ğ¸ ÑĞ¼ĞµĞ½Ğµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° â€” Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ popup Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾ (ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ ÑĞ²Ğ¾Ğ¹ loginStreak)
- **Storage**: `heys_login_streak` (Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ Ğ¾Ñ‚ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ streak, Ñ‡ĞµÑ€ĞµĞ· U.lsSet Ñ clientId)

### âš¡ Combo System (Future â€” Ğ½Ğµ Ğ² ÑÑ‚Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸)

> 3+ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ·Ğ° 60 ÑĞµĞº = x1.5 XP. ĞÑ‚Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¾ â€” ÑƒÑĞ»Ğ¾Ğ¶Ğ½ÑĞµÑ‚ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ.

### ğŸ’¡ ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹

1. **Loss aversion**: "ĞĞµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ¹ streak! ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ 3 Ñ‡Ğ°ÑĞ° Ğ´Ğ¾ Ğ¿Ğ¾Ğ»ÑƒĞ½Ğ¾Ñ‡Ğ¸" (Ğ² advice)
2. **Progress illusion**: XP bar Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ 5% Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ (Ğ° Ğ½Ğµ Ñ 0)
3. **Random rewards**: 5% ÑˆĞ°Ğ½Ñ x2 XP Ğ·Ğ° ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ ("ğŸ² Ğ‘Ğ¾Ğ½ÑƒÑ! +10 XP Ğ²Ğ¼ĞµÑÑ‚Ğ¾ +5")
4. **Near-miss**: "Ğ•Ñ‰Ñ‘ 50 XP Ğ´Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ 8!" (Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ³Ğ´Ğ° <10% Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ)
5. **Endowed progress**: ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾ (Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ñ Ğ£Ñ€.1, Ğ½Ğµ Ğ£Ñ€.0)

### ğŸŒŸ Modern UI Touches

| Ğ­Ñ„Ñ„ĞµĞºÑ‚ | Ğ“Ğ´Ğµ | ĞšĞ°Ğº |
|--------|-----|-----|
| **Glassmorphism** | XP bar background | `backdrop-filter: blur(10px); background: rgba(255,255,255,0.1)` |
| **Gradient shimmer** | Progress bar Ğ¿Ñ€Ğ¸ level up | `background: linear-gradient(90deg, ...)` + animation |
| **Particle burst** | ĞŸÑ€Ğ¸ achievement | 5-10 Ğ·Ğ²Ñ‘Ğ·Ğ´Ğ¾Ñ‡ĞµĞº Ñ€Ğ°Ğ·Ğ»ĞµÑ‚Ğ°ÑÑ‚ÑÑ Ğ¸Ğ· Ñ†ĞµĞ½Ñ‚Ñ€Ğ° |
| **Haptic feedback** | ĞŸÑ€Ğ¸ XP gain | `HEYS.utils.haptic('light')` â€” ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ! |
| **Reduced motion** | Ğ’ÑĞµ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ | `@media (prefers-reduced-motion: reduce)` â€” Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ |

---

## ğŸ”„ Future Ideas (Ğ¿Ğ¾ÑĞ»Ğµ MVP)

| Ğ˜Ğ´ĞµÑ | Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ’Ğ°Ñƒ-Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€ |
|------|-----------|------------|
| **Combo system** | M | â­â­â­â­ â€” 3 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ·Ğ° Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ = x1.5 XP |
| **Sound effects** | S | â­â­ â€” Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ñ‹Ğµ Ğ·Ğ²ÑƒĞºĞ¸ level up |
| **Random x2 rewards** | S | â­â­â­ â€” 5% ÑˆĞ°Ğ½Ñ ÑƒĞ´Ğ²Ğ¾ĞµĞ½Ğ¸Ñ |
| **Weekly challenges** | L | â­â­â­ â€” Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ†ĞµĞ»Ğ¸ |
| **Ğ¡ĞµĞ·Ğ¾Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ** | M | â­â­â­ â€” ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ³Ğ¾Ğ´: x2 XP Ğ½ĞµĞ´ĞµĞ»Ñ |

---

## ğŸš€ ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ

### Phase 0.5: Ğ‘Ğ»Ğ¾ĞºĞµÑ€Ñ‹ Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ° (20 Ğ¼Ğ¸Ğ½) âš ï¸ Ğ’Ğ«ĞŸĞĞ›ĞĞ˜Ğ¢Ğ¬ ĞŸĞ•Ğ Ğ’Ğ«Ğœ!

> **Ğ‘ĞµĞ· ÑÑ‚Ğ¾Ğ³Ğ¾ Phase 1 Ğ±ÑƒĞ´ĞµÑ‚ ÑĞ»Ğ¾Ğ¼Ğ°Ğ½!**

**Ğ‘Ğ»Ğ¾ĞºĞµÑ€Ñ‹ B (Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ°):**
1. **B1-B2**: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `data-game-source="product"` Ğº ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²
2. **B4**: Ğ’ `addProductAndFocusGrams()` (ÑÑ‚Ñ€Ğ¾ĞºĞ° 621) Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:
   - `haptic('light');`
   - `window.dispatchEvent(new CustomEvent('heysProductAdded', {...}))`
3. **B5**: Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ `HEYS.Day.getStreak()` âœ… (ÑƒĞ¶Ğµ ÑĞ´ĞµĞ»Ğ°Ğ½Ğ¾ ÑÑ‚Ñ€Ğ¾ĞºĞ° 2648)
4. **B6**: day_completed Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑÑ‚ÑŒ Ğ²Ñ‡ĞµÑ€Ğ° ÑƒÑ‚Ñ€Ğ¾Ğ¼

**ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹ C (Ğ½Ğ¾Ğ²Ñ‹Ğµ):**
5. **C1**: Ğ’ `addProductAndFocusGrams` Ğ¸ `addProductWithGrams` â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ haptic + dispatch
6. **C2**: Ğ’ `addXP()` â€” debounce 500ms per reason (Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ÑĞ¿Ğ°Ğ¼Ğ°)
7. **C3**: Guard `if (HEYS.game)` Ğ¿ĞµÑ€ĞµĞ´ Ğ²ÑĞµĞ¼Ğ¸ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ°Ğ¼Ğ¸ addXP
8. **C5**: Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ÑŒ `heysClientChanged` â†’ refresh XP bar
9. **C6**: Expanded panel â†’ `max-height: 60vh; overflow-y: auto`

**ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ K (Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ):**
10. **K1-K2**: Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ confetti Ñ‡ĞµÑ€ĞµĞ· CustomEvent `heysCelebrate`
11. **K3**: Flying stars Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ (max 1 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾)
12. **K4**: Notifications queue (level up > achievement)

### Phase 0: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ° (25 Ğ¼Ğ¸Ğ½) âœ… Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ!
- âœ… Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ `HEYS.Day.getStreak()` Ğ¸Ğ· useMemo
- âœ… Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ "ĞŸĞ°Ğ½ĞµĞ»ÑŒ ĞºÑƒÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ°" Ğ¸Ğ· hdr-top
- âœ… Theme toggle â†’ FAB (fixed, top-right)
- âœ… "Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°" â†’ long-press Ğ½Ğ° Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€
- âœ… Analytics button â†’ Ğ² ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
- âœ… Placeholder Ğ´Ğ»Ñ XP bar

### Phase 1: Core Module (45 Ğ¼Ğ¸Ğ½)
10. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `heys_gamification_v1.js`:
    - `HEYS.game.addXP(amount, reason, sourceEl)` â€” **Ñ debounce 500ms per reason**
    - `HEYS.game.getLevel()`, `getProgress()`, `getStats()`
    - `HEYS.game.flyToBar(sourceEl)` â€” flying animation **Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒÑ**
    - `HEYS.game.celebrate()` â€” centralized confetti (dispatch `heysCelebrate`)
    - `HEYS.game.showNotification(type, data)` â€” **Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒÑ**
11. GamificationBar ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ (React, Ğ² hdr-top):
    - Progress bar Ñ glow
    - Level + streak indicator (**ÑĞºÑ€Ñ‹Ñ‚ÑŒ ğŸ”¥ ĞµÑĞ»Ğ¸ streak === 0**)
    - Tap â†’ expanded panel (stats + ALL achievements)
    - **max-height: 60vh; overflow-y: auto** + tap outside/swipe down to close
12. Daily login bonus popup (Ğ¿Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ App)
13. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ² `index.html`
14. Ğ¢ĞµÑÑ‚ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸: `HEYS.game.addXP(50, 'test')`

### Phase 2: Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ (30 Ğ¼Ğ¸Ğ½)
15. addXP Ğ² `addProductToMeal()` + flying star
16. addXP Ğ² `addProductAndFocusGrams()` + flying star
17. addXP Ğ² `addProductWithGrams()` + flying star
18. addXP Ğ² `addWater()` + flying star
19. addXP Ğ² `confirmTrainingPicker()`
20. addXP Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğ¸ ÑĞ½Ğ°/Ğ²ĞµÑĞ° (Ğ² user tab)
21. day_completed check (D1: ÑƒÑ‚Ñ€Ğ¾Ğ¼ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ²Ñ‡ĞµÑ€Ğ°)

### Phase 3: Achievements (45 Ğ¼Ğ¸Ğ½)
22. Achievements library (25 ÑˆÑ‚ÑƒĞº Ğ² 5 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑÑ…)
23. Achievement popup (modal Ñ confetti)
24. Streak achievements (Ğ°Ğ²Ñ‚Ğ¾Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ addXP)
25. Level achievements (Ğ¿Ñ€Ğ¸ level up)
26. Expanded panel Ñ grid Ğ²ÑĞµÑ… 25 Ğ°Ñ‡Ğ¸Ğ²Ğ¾Ğº (locked/unlocked)

### Phase 4: Polish & Notifications (25 Ğ¼Ğ¸Ğ½)
27. Level up notification + confetti (levels % 5)
28. Micro-animations (pulse, glow, flying star bezier)
29. Haptic feedback (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `HEYS.haptic()`)
30. `prefers-reduced-motion` support

### Phase 5: Testing & QA (15 Ğ¼Ğ¸Ğ½)
31. `pnpm type-check && pnpm lint && pnpm build`
32. Mobile test (iPhone SE Ğ² DevTools)
33. Edge cases: 0 XP, level up boundary, multi-client switch
34. Performance: no layout shifts, smooth animations

**ĞĞ±Ñ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ**: ~2.5-3 Ñ‡Ğ°ÑĞ°

---

## âš ï¸ ĞĞ²ĞµÑ€ĞºĞ¸Ğ»Ğ»-Ñ‡ĞµĞºĞ»Ğ¸ÑÑ‚ (ĞĞ• Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ)

> Ğ ĞµÑˆĞµĞ½Ğ¾ Ğ² v6.0: Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° XP + ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸ + 25 Ğ°Ñ‡Ğ¸Ğ²Ğ¾Ğº

### âŒ Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ ĞĞ•Ğ¢:
- **Coins/Ğ²Ğ°Ğ»ÑÑ‚Ñ‹** â€” Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞºĞ°Ğ·Ğ°Ğ» "Ğ½ĞµÑ‚" âœ… Ñ€ĞµÑˆĞµĞ½Ğ¾
- **Shop** Ñ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ°Ğ¼Ğ¸ â€” Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½
- **Leaderboard** â€” Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ±ÑĞºĞµĞ½Ğ´Ğ°
- **Avatar customization** â€” ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾, Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹ ROI
- **Prestige/Rebirth** â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ğ´Ğ¾Ğ¹Ğ´Ñ‘Ğ¼ Ğ´Ğ¾ max level
- **Weekly challenges** â€” Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

### â³ ĞÑ‚Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞµ (Ğ¿Ğ¾ÑĞ»Ğµ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸):
- **Sound effects** â€” Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾, Ğ½Ğ¾ Ğ½Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾
- **Combo system** â€” WOW, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ·Ğ¶Ğµ
- **Random rewards (x2 XP)** â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ·Ğ¶Ğµ
- **Ğ¡ĞµĞ·Ğ¾Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ** â€” Ğ¿Ğ¾ÑĞ»Ğµ product-market fit

### âœ… Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ:
- Daily login bonus (+10-50 XP) â€” retention hook
- Flying XP animation â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ WOW
- Level up confetti â€” Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹
- Ğ¢Ğ¸Ñ‚ÑƒĞ»Ñ‹ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹ â€” lookup table, Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ wow
- **25 Ğ°Ñ‡Ğ¸Ğ²Ğ¾Ğº Ğ² 5 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑÑ…** â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
- **Expanded panel Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¾Ğ¼** â€” ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾

---

## ğŸ¯ ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¦ĞµĞ»ÑŒ | ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ |
|---------|------|---------------|
| **XP Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚** | 100% | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ â†’ XP ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ»ÑÑ |
| **Flying animation** | 80% | Ğ—Ğ²ĞµĞ·Ğ´Ğ° Ğ»ĞµÑ‚Ğ¸Ñ‚ Ğº bar (fallback Ğ½Ğ° Ñ†ĞµĞ½Ñ‚Ñ€) |
| **Level up** | Popup | ĞĞ°Ğ±Ñ€Ğ°Ñ‚ÑŒ 100 XP â†’ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2 + confetti |
| **Streak Ğ² bar** | ğŸ”¥N | ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ currentStreak |
| **25 Ğ°Ñ‡Ğ¸Ğ²Ğ¾Ğº** | Grid | Expanded panel â†’ Ğ²ÑĞµ 25 Ğ²Ğ¸Ğ´Ğ½Ñ‹ |
| **Locked/Unlocked** | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾ | Ğ¡ĞµÑ€Ñ‹Ğµ locked, Ñ†Ğ²ĞµÑ‚Ğ½Ñ‹Ğµ unlocked |
| **Mobile OK** | 320px | Ğ’ÑĞµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ²Ğ¸Ğ´Ğ½Ñ‹, touch Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ |
| **Performance** | <100ms | ĞĞµÑ‚ Ğ»Ğ°Ğ³Ğ¾Ğ² Ğ¿Ñ€Ğ¸ addXP |
| **Persistence** | âœ… | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ â†’ XP Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ |
| **Multi-client** | âœ… | Ğ¡Ğ¼ĞµĞ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° â†’ ÑĞ²Ğ¾Ğ¸ XP Ñƒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ |
