# üçΩÔ∏è –ú–æ–¥–∞–ª–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏

> **–¶–µ–ª—å:** –î–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—É–≤—Å—Ç–≤–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ü–µ–ª—å–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏.  
> **–í–µ—Ä—Å–∏—è:** 2.0  
> **–î–∞—Ç–∞:** 2026-01-28

---

## üìå TL;DR

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ–π—á–∞—Å –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ¬´–≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è¬ª –æ–±—Ä–∞—Ç–Ω–æ –≤–æ –≤–∫–ª–∞–¥–∫—É –∏ –¥–æ–ª–∂–µ–Ω –∑–∞–Ω–æ–≤–æ –∏—Å–∫–∞—Ç—å –ø—Ä–∏—ë–º –ø–∏—â–∏, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–¥—É–∫—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –î–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏—ë–º–µ –ø–∏—â–∏:
1. **‚ûï –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ** ‚Äî —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ (–æ–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç, –±–µ–∑ –º–æ–¥–∞–ª–∫–∏)
2. **üìù –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** ‚Äî –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Å –º–æ–¥–∞–ª–∫–æ–π –º–µ–∂–¥—É –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º —Ü–∏–∫–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –Ω–∞–∂–º—ë—Ç ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ¬ª.

---

## üö® –§–∞–∑–∞ 0: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–µ—Ä—ã (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞)

### –ë–ª–æ–∫–µ—Ä 1: `HEYS.Day.getDay()` –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–¥ –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ `HEYS.Day?.getDay?.()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–Ω—è –ø–æ—Å–ª–µ `setDay()`, –Ω–æ —Ç–∞–∫–æ–≥–æ API –Ω–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –≥–µ—Ç—Ç–µ—Ä –≤ `heys_day_global_exports_v1.js`:
```javascript
// –í useDayGlobalExportsEffect –¥–æ–±–∞–≤–∏—Ç—å:
HEYS.Day.getDay = () => dayRef.current;
```

**–§–∞–π–ª:** `apps/web/heys_day_global_exports_v1.js`

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ü–µ—Ä–µ–¥–∞—Ç—å `dayRef` –≤ deps —Ö—É–∫–∞.

---

### –ë–ª–æ–∫–µ—Ä 2: –ü–µ—Ä–µ–¥–∞—á–∞ `multiProductMode` –≤ AddProductStep

**–ü—Ä–æ–±–ª–µ–º–∞:** `AddProductStep.show()` –Ω–µ –∑–Ω–∞–µ—Ç, –≤ –∫–∞–∫–æ–º —Ä–µ–∂–∏–º–µ –æ–Ω –≤—ã–∑–≤–∞–Ω (–±—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ vs —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞).

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `multiProductMode: boolean` –≤ options:
```javascript
HEYS.AddProductStep.show({
  mealIndex,
  multiProductMode: true, // üÜï –í–∫–ª—é—á–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –º–µ–∂–¥—É –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
  // ...–æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
});
```

**–§–∞–π–ª:** `apps/web/heys_add_product_step_v1.js`

---

### –ë–ª–æ–∫–µ—Ä 3: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –º–æ–¥–∞–ª–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –ß—Ç–æ –µ—Å–ª–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞ –¥—Ä—É–≥–∞—è –º–æ–¥–∞–ª–∫–∞ (—Å–æ–≤–µ—Ç—ã, checkin)?

**–†–µ—à–µ–Ω–∏–µ:** –í `HEYS.ConfirmModal.show()` –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ-–∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π:
```javascript
// –í –Ω–∞—á–∞–ª–µ show():
if (currentModal) {
  currentModal.close();
}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –£–∂–µ –µ—Å—Ç—å —Ç–∞–∫–∞—è –ª–æ–≥–∏–∫–∞? ‚Üí –ï—Å–ª–∏ –¥–∞, —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–§–∞–π–ª:** `apps/web/heys_confirm_modal_v1.js`

---

### üîç –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ –º–æ–¥–∞–ª–∫–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

1) **`confirmStyle` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ**: `danger | primary | success`. 
–í –ø—Ä–æ–º–ø—Ç–µ **–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** `secondary` ‚Äî –∏–Ω–∞—á–µ —Å—Ç–∏–ª—å –±—É–¥–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π.

2) **–ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –≤ `text`:** `ConfirmModal` —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–µ–∫—Å—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π `div`,
`
` –Ω–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Äî –ª–∏–±–æ:
- –¥–æ–±–∞–≤–∏—Ç—å `white-space: pre-line` –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –º–æ–¥–∞–ª–∫–∏,
- –ª–∏–±–æ —Å–æ–±–∏—Ä–∞—Ç—å JSX —Å `<br/>`.

---

## üéØ –§–∞–∑–∞ 1: UI ‚Äî –î–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ MealCard

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–û–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ ¬´+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç¬ª.

### –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üç≥ –ó–∞–≤—Ç—Ä–∞–∫                    08:30    ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  –û–≤—Å—è–Ω–∫–∞ 150–≥ .............. 180 –∫–∫–∞–ª  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [‚ûï –ë—ã—Å—Ç—Ä–æ]    [üìù –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ] ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

**–§–∞–π–ª:** `apps/web/heys_day_meals_bundle_v1.js` (MealCard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ó–∞–º–µ–Ω–∏—Ç—å –æ–¥–Ω—É –∫–Ω–æ–ø–∫—É –Ω–∞ –¥–≤–µ
2. **¬´–ë—ã—Å—Ç—Ä–æ¬ª** ‚Üí **—Ç–µ–∫—É—â–∏–π –æ–¥–Ω–æ–ø—Ä–æ—Ö–æ–¥–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π** (–±–µ–∑ —Ü–∏–∫–ª–∞):
  - –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è **–º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è**,
  - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ç–µ–∫—É—â–µ–º—É –ø—Ä–∏—ë–º—É** (–∫–∞–∫ —Å–µ–π—á–∞—Å).
3. **¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤¬ª** ‚Üí –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å —Ü–∏–∫–ª–æ–º:
  - –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ **¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å / –ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª**,
  - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–Ω–µ —Ç–µ—Ä—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–∏—ë–º–∞** (–æ—Å—Ç–∞—ë—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç—É—Ä–µ).

**–î–∏–∑–∞–π–Ω –∫–Ω–æ–ø–æ–∫:**
- **–ë—ã—Å—Ç—Ä–æ:** –ò–∫–æ–Ω–∫–∞ ‚ûï, –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è, secondary style
- **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ:** –ò–∫–æ–Ω–∫–∞ üìù, primary style, –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–∞—è

---

## üîÑ –§–∞–∑–∞ 2: –õ–æ–≥–∏–∫–∞ –º–æ–¥–∞–ª–∫–∏ –º–µ–∂–¥—É –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

### –§–ª–æ—É ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤¬ª

```
[–ù–∞–∂–∞–ª "–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"]
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AddProductStep             ‚îÇ
‚îÇ  (–≤—ã–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞ + –≥—Ä–∞–º–º—ã)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº –ø—Ä–æ–¥—É–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚îÇ
    ‚îÇ  –Ω–æ—Ä–º—ã   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                     ‚îÇ
    ‚ñº                     ‚ñº
[–ù–æ—Ä–º–∞ –ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω–∞]  [–ù–æ—Ä–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ ‚â•100%]
    ‚îÇ                     ‚îÇ
    ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üçΩÔ∏è –î–æ–±–∞–≤–∏—Ç—å –µ—â—ë? ‚îÇ  ‚îÇ üéâ –ù–æ—Ä–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞! ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ –í –ø—Ä–∏—ë–º–µ: X –∫–∫–∞–ª‚îÇ  ‚îÇ –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!    ‚îÇ
‚îÇ –û—Å—Ç–∞–ª–æ—Å—å: Y –∫–∫–∞–ª‚îÇ  ‚îÇ –°—ä–µ–¥–µ–Ω–æ: X –∫–∫–∞–ª     ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ [–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë]  ‚îÇ  ‚îÇ [–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë]      ‚îÇ
‚îÇ [–ó–∞–≤–µ—Ä—à–∏—Ç—å]     ‚îÇ  ‚îÇ [–ó–∞–≤–µ—Ä—à–∏—Ç—å üéä]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ‚îÇ           ‚îÇ         ‚îÇ
    ‚ñº         ‚ñº           ‚ñº         ‚ñº
[–î–æ–±–∞–≤–∏—Ç—å]  [–ó–∞–≤–µ—Ä—à–∏—Ç—å] [–î–æ–±–∞–≤–∏—Ç—å] [–ó–∞–≤–µ—Ä—à–∏—Ç—å]
    ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ
    ‚îÇ           ‚îÇ           ‚îÇ           ‚ñº
    ‚îÇ           ‚îÇ           ‚îÇ     [–ö–æ–Ω—Ñ–µ—Ç—Ç–∏! üéä]
    ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                       ‚îÇ
          ‚ñº                       ‚ñº
    –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è        –í—ã—Ö–æ–¥ –∏–∑ –º–æ–¥–∞–ª–∫–∏
```

### –ö–æ–¥ –º–æ–¥–∞–ª–∫–∏

**–§–∞–π–ª:** `apps/web/heys_day_add_product.js` (–≤–Ω—É—Ç—Ä–∏ `onAdd` callback)

**–¢–æ—á–∫–∞ –≤—Å—Ç–∞–≤–∫–∏:** –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ `heys_grams_history`, –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º `onAdd`.

```javascript
// üÜï –ú–æ–¥–∞–ª–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë?" (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ multiProductMode)
if (multiProductMode && HEYS.ConfirmModal?.show) {
  // –î–∞—ë–º React –æ–±–Ω–æ–≤–∏—Ç—å state
  requestAnimationFrame(() => {
    setTimeout(async () => {
      try {
        // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        const currentDay = HEYS.Day?.getDay?.() || day;
        const currentMeal = currentDay?.meals?.[mealIndex];
        if (!currentMeal) return;

        // –ö–∞–ª–æ—Ä–∏–∏ –ø—Ä–∏—ë–º–∞
        const pIndex = HEYS.dayUtils?.buildProductIndex?.() || HEYS.products?.buildIndex?.() || {};
        const mealTotals = HEYS.models?.mealTotals?.(currentMeal, pIndex) || {};
        const mealKcal = Math.round(mealTotals.kcal || 0);

        // –î–Ω–µ–≤–Ω–∞—è –Ω–æ—Ä–º–∞ –∏ –æ—Å—Ç–∞—Ç–æ–∫
        const optimumData = HEYS.dayUtils?.getOptimumForDay?.(currentDay) || {};
        const optimum = Math.round(optimumData.optimum || 2000);

        const dayTotals = HEYS.dayCalculations?.calculateDayTotals?.(currentDay, pIndex) || {};
        const eatenKcal = Math.round(dayTotals.kcal || 0);
        const remainingKcal = optimum - eatenKcal;
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º –º–æ–¥–∞–ª–∫–∏
        const isGoalReached = remainingKcal <= 0;
        const mealName = currentMeal.name || `–ü—Ä–∏—ë–º ${mealIndex + 1}`;

        let modalResult;

        if (isGoalReached) {
          // üéâ –ù–æ—Ä–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!
          modalResult = await HEYS.ConfirmModal.show({
            icon: 'üéâ',
            title: '–ù–æ—Ä–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!',
            text: `–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!\n\n–í "${mealName}": ${mealKcal} –∫–∫–∞–ª\n–í—Å–µ–≥–æ –∑–∞ –¥–µ–Ω—å: ${eatenKcal} –∫–∫–∞–ª`,
            confirmText: '–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë',
            cancelText: '–ó–∞–≤–µ—Ä—à–∏—Ç—å üéä',
            confirmStyle: 'success'
          });
          
          // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–æ–π
          if (!modalResult && HEYS.Confetti?.fire) {
            HEYS.Confetti.fire();
          }
        } else {
          // –û–±—ã—á–Ω–∞—è –º–æ–¥–∞–ª–∫–∞
          modalResult = await HEYS.ConfirmModal.show({
            icon: 'üçΩÔ∏è',
            title: '–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë?',
            text: `–í "${mealName}": ${mealKcal} –∫–∫–∞–ª\n–û—Å—Ç–∞–ª–æ—Å—å –¥–æ –Ω–æ—Ä–º—ã: ${remainingKcal} –∫–∫–∞–ª`,
            confirmText: '–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë',
            cancelText: '–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ',
            confirmStyle: 'primary'
          });
        }

        if (modalResult && HEYS.AddProductStep?.show) {
          // –°–Ω–æ–≤–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ç–æ–≥–æ –∂–µ –ø—Ä–∏—ë–º–∞
          const updatedDay = HEYS.Day?.getDay?.() || day;
          const updatedMeal = updatedDay?.meals?.[mealIndex] || {};
          
          HEYS.AddProductStep.show({
            mealIndex,
            multiProductMode: true, // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∂–∏–º
            mealPhotos: updatedMeal.photos || [],
            products,
            day: updatedDay,
            dateKey: date
          });
        }
      } catch (err) {
        console.warn('[HEYS] Multi-product modal error:', err);
      }
    }, 100);
  });
}
```

---

## ‚ú® –§–∞–∑–∞ 3: UX-—É–ª—É—á—à–µ–Ω–∏—è (–≤–∞—É-—ç—Ñ—Ñ–µ–∫—Ç)

### 3.1 Micro-animation –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏

**–ü–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –º–æ–¥–∞–ª–∫–∏:**
```javascript
// –ö–æ—Ä–æ—Ç–∫–∞—è –≤–∏–±—Ä–∞—Ü–∏—è (—É–∂–µ –µ—Å—Ç—å)
navigator.vibrate?.(10);

// üÜï Toast —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–æ–¥—É–∫—Ç–∞
if (HEYS.Toast?.show) {
  HEYS.Toast.show({
    icon: '‚úÖ',
    text: `${finalProduct?.name || '–ü—Ä–æ–¥—É–∫—Ç'} –¥–æ–±–∞–≤–ª–µ–Ω`,
    duration: 1500
  });
}
```

### 3.2 –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤ –º–æ–¥–∞–ª–∫–µ

**–†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ–∫—Å—Ç –º–æ–¥–∞–ª–∫–∏:**
```javascript
const progressPct = Math.min(100, Math.round((eatenKcal / optimum) * 100));
const progressBar = '‚ñà'.repeat(Math.floor(progressPct / 10)) + '‚ñë'.repeat(10 - Math.floor(progressPct / 10));

text: `–í "${mealName}": ${mealKcal} –∫–∫–∞–ª

–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–Ω—è: [${progressBar}] ${progressPct}%
${remainingKcal > 0 ? `–û—Å—Ç–∞–ª–æ—Å—å: ${remainingKcal} –∫–∫–∞–ª` : '‚úÖ –ù–æ—Ä–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!'}`
```

### 3.3 –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π —Å–æ–≤–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, v2)

–ï—Å–ª–∏ –±–µ–ª–∫–∞ –º–∞–ª–æ, –∂–∏—Ä–æ–≤ –º–Ω–æ–≥–æ –∏ —Ç.–¥. ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —Å–æ–≤–µ—Ç:
```javascript
const advice = HEYS.Advice?.getQuickTip?.(currentDay, currentMeal);
if (advice) {
  text += `\n\nüí° ${advice}`;
}
```

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–∑–∞ | –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|------|-----------|
| 0 | `heys_day_global_exports_v1.js` | –î–æ–±–∞–≤–∏—Ç—å `HEYS.Day.getDay()` |
| 0 | `heys_add_product_step_v1.js` | –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `multiProductMode` |
| 0 | `heys_confirm_modal_v1.js` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ-–∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –º–æ–¥–∞–ª–∫–∏ |
| 1 | `heys_day_meals_bundle_v1.js` | –î–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ MealCard |
| 2 | `heys_day_add_product.js` | –õ–æ–≥–∏–∫–∞ –º–æ–¥–∞–ª–∫–∏ –≤ `onAdd` |
| 3 | (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | Toast, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, —Å–æ–≤–µ—Ç—ã |

---

## ‚úÖ Definition of Done

- [ ] **–§–∞–∑–∞ 0:** `HEYS.Day.getDay()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] **–§–∞–∑–∞ 0:** `multiProductMode` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ AddProductStep
- [ ] **–§–∞–∑–∞ 0:** –ú–æ–¥–∞–ª–∫–∏ –∞–≤—Ç–æ-–∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
- [ ] **–§–∞–∑–∞ 1:** –î–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ MealCard (–ë—ã—Å—Ç—Ä–æ / –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
- [ ] **–§–∞–∑–∞ 2:** –ü—Ä–∏ "–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ" ‚Äî –º–æ–¥–∞–ª–∫–∞ –º–µ–∂–¥—É –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- [ ] **–§–∞–∑–∞ 2:** –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –Ω–æ—Ä–º—ã ‚Äî –ø–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ + –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
- [ ] **–§–∞–∑–∞ 3:** Toast "–ü—Ä–æ–¥—É–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω"
- [ ] **–¢–µ—Å—Ç:** –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ –ø—Ä–∏—ë–º–∞ (—Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å, –≤—á–µ—Ä–∞, –Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥)
- [ ] **–¢–µ—Å—Ç:** –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ "–ë—ã—Å—Ç—Ä–æ" –Ω–µ —Å–ª–æ–º–∞–Ω–∞

---

## üß™ –¢–µ—Å—Ç-–∫–µ–π—Å—ã

1. **–ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:** –ù–∞–∂–∞—Ç—å "–ë—ã—Å—Ç—Ä–æ" ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç ‚Üí —Å—Ä–∞–∑—É –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤–æ –≤–∫–ª–∞–¥–∫—É ‚úÖ
2. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞:** –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤" ‚Üí –¥–æ–±–∞–≤–∏—Ç—å 3 –ø—Ä–æ–¥—É–∫—Ç–∞ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª–∫–∏ ‚Üí "–ó–∞–≤–µ—Ä—à–∏—Ç—å" ‚úÖ
3. **–ù–æ—Ä–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:** –î–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ–∫–∞ –Ω–æ—Ä–º–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è ‚Üí –º–æ–¥–∞–ª–∫–∞ —Å üéâ + –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ ‚úÖ
4. **–°—Ç–∞—Ä—ã–π –¥–µ–Ω—å:** –û—Ç–∫—Ä—ã—Ç—å –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤" ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
5. **–û—Ç–º–µ–Ω–∞:** –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤" ‚Üí –æ—Ç–º–µ–Ω–∏—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–º —à–∞–≥–µ ‚Üí –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤–æ –≤–∫–ª–∞–¥–∫—É ‚úÖ

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ü—Ä–∏–Ω—Ü–∏–ø –º–æ–¥–∞–ª–æ–∫:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–æ–≤–æ–π –º–æ–¥–∞–ª–∫–∏ —Å—Ç–∞—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- **–†–µ–∂–∏–º ¬´–ë—ã—Å—Ç—Ä–æ¬ª:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (backward compatible)
- **–†–µ–∂–∏–º ¬´–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å¬ª:** –ù–æ–≤—ã–π UX, –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
