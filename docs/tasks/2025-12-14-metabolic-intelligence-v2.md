---
template-version: 3.3.0
created: 2025-12-14
updated: 2025-12-14
purpose:
  Metabolic Intelligence v2.0 ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ Insights –¥–æ —É–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω–æ–π
  –æ—Ü–µ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞
optimization:
  –†–∞–±–æ—Ç–∞—Ç—å –ø–æ–≤–µ—Ä—Ö –≤–∫–ª–∞–¥–∫–∏ Insights (–±–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞), –ø–æ—Ç–æ–º –≤–æ–∑–º–æ–∂–µ–Ω –≤—ã–Ω–æ—Å –≤
  –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
changelog:
  v1.0.0 ‚Äî –ü–µ—Ä–≤—ã–π –ø—Ä–æ–º–ø—Ç (4 —Ñ–∞–∑—ã:
    —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å, –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
---

# Task: Metabolic Intelligence v2.0 ‚Äî —É–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞

## üîí –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è (META ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞)

> **–≠—Ç–æ META-–≤–µ—Ä—Å–∏—è**: –ø–æ–ª–Ω–∞—è, –≥–ª—É–±–æ–∫–∞—è, –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–æ –≤—Å–µ–º–∏
> –º–µ—Ç—Ä–∏–∫–∞–º–∏. Light-–≤–µ—Ä—Å–∏—è (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è) –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º –ø–æ–∑–∂–µ.

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å **—Å—É–ø–µ—Ä-–º–æ–Ω–∏—Ç–æ—Ä –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è** ‚Äî –º–∞–∫—Å–∏–º—É–º
–∏–Ω—Å–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—ã–∂–∞—Ç—å –∏–∑ –∏–º–µ—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö.

- **–ì–ª–∞–≤–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å:** ¬´–°—Ç–∞—Ç—É—Å 0‚Äì100¬ª (–∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ
  —Å–æ—Å—Ç–æ—è–Ω–∏—è).
  - –°–º—ã—Å–ª: **–Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ä–≥–∞–Ω–∏–∑–º –≤ –±–∞–ª–∞–Ω—Å–µ** + —Ä–∏—Å–∫ —Å—Ä—ã–≤–∞ + –ø—Ä–æ–≥–Ω–æ–∑.
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º **–≤—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –ø—Ä–∏—á–∏–Ω—ã** —Å –Ω–∞—É—á–Ω—ã–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º.
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** —Å ETA –∏ –æ–∂–∏–¥–∞–µ–º—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º.
- **–¢–æ–Ω –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –±–µ–∑ —Å—Ç—ã–¥–∞/–æ—Å—É–∂–¥–µ–Ω–∏—è. –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏
  "–∫—É—Ä—Å/–ø–ª–∞–Ω/–∫–æ–Ω—Ç—Ä–æ–ª—å", –∞ –Ω–µ "–ø–ª–æ—Ö–æ–π/—Å–ª–∞–±—ã–π".
- **–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã:** —ç—Ç–æ –Ω–µ –º–µ–¥–∏—Ü–∏–Ω–∞. –ù–∏–∫–∞–∫–∏—Ö –æ–±–µ—â–∞–Ω–∏–π "–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º
  —Å–∞—Ö–∞—Ä/–∏–Ω—Å—É–ª–∏–Ω", –¥–∏–∞–≥–Ω–æ–∑–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π. –ü—Ä–∏ red flags ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è
  –∫ –≤—Ä–∞—á—É.
- **–ù–∞—É—á–Ω–∞—è –≥–ª—É–±–∏–Ω–∞:** –∫–∞–∂–¥–∞—è –º–µ—Ç—Ä–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ (—Å—Å—ã–ª–∫–∞ –Ω–∞
  –º–µ—Ö–∞–Ω–∏–∑–º –∏–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ SCIENCE_INFO).

## üéØ WHY (–ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç)

**Problem**: –í–∫–ª–∞–¥–∫–∞ Insights –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ –¥–∞—ë—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π
—Å—Ç–∞—Ç—É—Å 0-100, –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å.

**Impact**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –∫—É—Ä–∞—Ç–æ—Ä –Ω–µ –≤–∏–¥—è—Ç, –≥–¥–µ –∫–ª–∏–µ–Ω—Ç —Ä–µ–∞–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–µ–π—á–∞—Å
–∏ —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –∑–∞–≤—Ç—Ä–∞ (—Ä–∏—Å–∫ —Å—Ä—ã–≤–∞), —Å–Ω–∏–∂–∞–µ—Ç—Å—è —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å Pro/Pro+.

**Value**: –ï–¥–∏–Ω—ã–π —Å—Ç–∞—Ç—É—Å 0-100 —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏, –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å—Ä—ã–≤–æ–≤ –Ω–∞ 24-48—á,
–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –∏ —Ñ–µ–Ω–æ—Ç–∏–ø ‚Üí –≤—ã—à–µ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ
—Ç–∞—Ä–∏—Ñ—ã.

---

## ü§ñ Output Preferences

**Workflow**: Propose plan first ‚Üí implement —Ñ–∞–∑–∞ –∑–∞ —Ñ–∞–∑–æ–π (–º–æ–∂–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤
–ø—Ä–µ–¥–µ–ª–∞—Ö –≤–∫–ª–∞–¥–∫–∏ Insights).

**Code style**: –°–ª–µ–¥–æ–≤–∞—Ç—å `.github/copilot-instructions.md`; –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –≤
TS; –º–∏–Ω–∏–º—É–º –∏–Ω–ª–∞–π–Ω-—Å—Ç–∏–ª–µ–π; Tailwind/BEM.

---

## üìã WHAT (–ß–µ–∫-–ª–∏—Å—Ç –∑–∞–¥–∞—á)

### Must Have (–§–∞–∑–∞ 0 ‚Äî Foundation / Guardrails / Anti-break)

–¶–µ–ª—å —Ñ–∞–∑—ã 0 ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –§–∞–∑—ã 1‚Äì2 –±—ã–ª–∞:
–æ–±—ä—è—Å–Ω–∏–º–æ–π, —Å—Ç–∞–±–∏–ª—å–Ω–æ–π, –Ω–µ –ª–∞–≥–∞–ª–∞ –∏ –Ω–µ –ª–æ–º–∞–ª–∞ existing Insights.

- [ ] **–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (runtime reality check)**
  - **Why**: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–æ–≥–∞—Ç–∞, –Ω–æ –≤ legacy runtime –ø–æ–ª—è –º–æ–≥—É—Ç –±—ã—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ
    –ø—É—Å—Ç—ã–µ/legacy.
  - **DoD**:
    - –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω —Å–ø–∏—Å–æ–∫ ‚Äú–∫–∞–∫–∏–µ –ø–æ–ª—è —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã‚Äù
      (—Å–æ–Ω/–≤–æ–¥–∞/—Å—Ç—Ä–µ—Å—Å/—à–∞–≥–∏/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/deficitPct/—Ä–µ–¥–∫–æ: refeed, caloricDebt).
    - –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã ‚Äú–æ–ø–∞—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏‚Äù (–∏ –ø—Ä–∞–≤–∏–ª–∞):
      - `dayTot.prot` (–ù–ï `dayTot.protein`) –∏ `normAbs.prot` ‚Äî —á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å
        –±–µ–ª–æ–∫.
      - `optimum` vs `displayOptimum` (caloricDebt/refeed): —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å—á–∏—Ç–∞–µ–º
        ‚Äú–ø–ª–∞–Ω–æ–º‚Äù –≤ —Å—Ç–∞—Ç—É—Å–µ.
      - `ratio`/–∑–æ–Ω—ã: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É `HEYS.ratioZones` (–≤
        —Ç.—á. refeed/streak), –Ω–µ –ø–ª–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏.
    - –Ø–≤–Ω—ã–µ fallback‚Äë–ø—Ä–∞–≤–∏–ª–∞: –∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å —Ä–∏—Å–∫/–ø—Ä–∏—á–∏–Ω—ã, –µ—Å–ª–∏ –ø–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.

- [ ] **–ö–æ–Ω—Ç—Ä–∞–∫—Ç `HEYS.Metabolic.getStatus()` (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥—ã)**
  - **Why**: –í—Å—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Ä–∞—Å—á—ë—Ç, –∏–Ω–∞—á–µ —Ä–∞—Å–ø–æ–ª–∑—ë—Ç—Å—è.
  - **DoD**:
    - –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç:
      - `score` (0‚Äì100) ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
      - `reasons` (–≤—Å–µ –∑–Ω–∞—á–∏–º—ã–µ) ‚Äî
        `{ id, label, short, details, pillar, impactPct, scientificBasis? }`
      - `nextSteps` (–ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) ‚Äî
        `{ id, label, etaMin?, expectedEffect?, why }`
      - `risk` (0‚Äì100) + `riskLevel` (`low|medium|high`) + `riskFactors[]`
      - `metabolicPhase` ‚Äî —Ç–µ–∫—É—â–∞—è —Ñ–∞–∑–∞ (anabolic/transitional/catabolic)
      - `confidence` ‚Äî —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ü–µ–Ω–∫–µ (low/medium/high) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–Ω–æ—Ç—ã
        –¥–∞–Ω–Ω—ã—Ö
      - `debug` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –∫—É—Ä–∞—Ç–æ—Ä–∞
    - `id` —É –ø—Ä–∏—á–∏–Ω/—à–∞–≥–æ–≤ **—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ** (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏).
    - –ö–∞–∂–¥–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∏–º–µ–µ—Ç `scientificBasis` (–∫—Ä–∞—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞).

- [ ] **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Äú–ø–ª–∞–Ω–∞‚Äù –∏ –ø—Ä–∞–≤–∏–ª —Å—Ç–∞—Ç—É—Å–∞ (–±–µ–∑ –º–µ–¥–∏—Ü–∏–Ω—ã)**
  - **Why**: –±—Ä–∏—Ñ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç ‚Äú—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω—É + —Ä–∏—Å–∫ —Å—Ä—ã–≤–∞‚Äù, –Ω–æ –Ω—É–∂–Ω–æ
    —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å ‚Äú–ø–ª–∞–Ω‚Äù.
  - **DoD**:
    - –Ø–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞—Ç—É—Å–∞:
      - `planAdherenceScore` (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ –∫–∞–ª–æ—Ä–∏—è–º/–º–∞–∫—Ä–æ-–º–∏–Ω–∏–º—É–º–∞–º/—Ç–∞–π–º–∏–Ω–≥—É)
      - `crashRiskPenalty` (—à—Ç—Ä–∞—Ñ –∑–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ä—ã–≤–∞)
    - –Ø–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –∫–∞–∫ —É—á–∏—Ç—ã–≤–∞–µ–º:
      - `caloricDebt` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ UI –∫–∞–∫ ‚Äú—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–æ—Ä–º–∞‚Äù)
      - `Refeed Day` (–æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä ‚Äî –Ω–µ —à—Ç—Ä–∞—Ñ–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –≤ –∑–æ–Ω–µ refeed)

- [ ] **–ê–Ω—Ç–∏-–¥—Ä–æ–∂–∞–Ω–∏–µ: —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ + –≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å**
  - **Why**: ‚Äú—Å–∫–∞—á—É—â–∏–π‚Äù —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä—É—à–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ.
  - **DoD**:
    - EMA —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –¥–ª—è `score` (–≤ localStorage), –Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º
      –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —à–∞–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞ —Å–æ–±—ã—Ç–∏–µ.
    - –ì–∏—Å—Ç–µ—Ä–µ–∑–∏—Å –¥–ª—è `riskLevel` (low‚Üîmedium‚Üîhigh –Ω–µ –¥–æ–ª–∂–µ–Ω –º–∏–≥–∞—Ç—å –Ω–∞ –ø–æ—Ä–æ–≥–µ).

- [ ] **Performance guardrails (–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä)**
  - **Why**: legacy React + –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞; —Ç—è–∂—ë–ª—ã–µ —Ä–∞—Å—á—ë—Ç—ã –º–æ–≥—É—Ç –ª–∞–≥–∞—Ç—å.
  - **DoD**:
    - –¢—è–∂—ë–ª—ã–µ —Ä–∞—Å—á—ë—Ç—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º render (–∫—ç—à/useMemo/–≤—ã–Ω–µ—Å–µ–Ω–Ω—ã–π
      –º–æ–¥—É–ª—å).
    - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–∫–Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä 30/60/90 –¥–Ω–µ–π) + early exit.
    - –õ—é–±–∞—è –æ—à–∏–±–∫–∞ ‚Üí graceful fallback + `HEYS.analytics.trackError()` (–±–µ–∑
      `console.*`).

- [ ] **Graceful degradation (PIN auth, offline, –Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)**
  - **Why**: —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å (PIN auth user=null, offline —Ä–µ–∂–∏–º, —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
    –¥–Ω–∏).
  - **DoD**:
    - –ü—Ä–∏ `user=null` (PIN auth) ‚Äî Insights –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ.
    - –ï—Å–ª–∏ `HEYS.InsulinWave` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω/—É–ø–∞–ª ‚Äî MetabolicStateRing –¥–µ–≥—Ä–∞–¥–∏—Ä—É–µ—Ç –≤
      "–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö" (–±–µ–∑ –æ—à–∏–±–æ–∫), –∞ —Å—Ç–∞—Ç—É—Å —Å—á–∏—Ç–∞–µ—Ç –±–µ–∑ —Ñ–∞–∑—ã.
    - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ/0 ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö" + –ø–æ–Ω—è—Ç–Ω—ã–π CTA, –±–µ–∑
      –ø—Å–µ–≤–¥–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.
    - `confidence` —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–µ–ø–æ–ª–Ω–æ—Ç–µ –¥–∞–Ω–Ω—ã—Ö (–∏ —ç—Ç–æ —è–≤–Ω–æ
      –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ UI).

- [ ] **Kill-switch (preprod safety)**
  - **Why**: –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –≤ preprod, –Ω–∞–¥–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π –±–ª–æ–∫ –±–µ–∑
    –æ—Ç–∫–∞—Ç–∞ —Ñ–∞–π–ª–æ–≤.
  - **DoD**:
    - –ï—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ñ–ª–∞–∂–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, localStorage
      `heys_feature_metabolic_intelligence=0/1` –∏–ª–∏ query `?mi=0`) –∫–æ—Ç–æ—Ä—ã–π
      —Å–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏.
    - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤ dev/preprod –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (–∏–ª–∏ –∑–∞ —Ñ–ª–∞–≥–æ–º),
      —á—Ç–æ–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ –∫–∞—Ç–∏—Ç—å.

- [ ] **–ê–Ω—Ç–∏-–æ–≤–µ—Ä–∫–∏–ª–ª (—á—ë—Ç–∫–∏–µ —Å—Ç–æ–ø‚Äë–≥—Ä–∞–Ω–∏—Ü—ã)**
  - **Why**: –ª–µ–≥–∫–æ —É–π—Ç–∏ –≤ ‚ÄúML-lite‚Äù, –Ω–µ –¥–æ–¥–µ–ª–∞–≤ —è–¥—Ä–æ.
  - **DoD**:
    - –§–∞–∑–∞ 3 (—Ñ–µ–Ω–æ—Ç–∏–ø/30 –¥–Ω–µ–π) **–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç** –§–∞–∑—É 1‚Äì2: –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö <30 –¥–Ω–µ–π ‚Üí
      soft-fallback.
    - –ù–µ –≤–≤–æ–¥–∏–º –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –∫–∞–∫ –¥–∏–∞–≥–Ω–æ–∑; –Ω–µ –æ–±–µ—â–∞–µ–º –ª–µ—á–µ–Ω–∏—è.

- [ ] **–ú–∏–∫—Ä–æ-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ)**
  - **Why**: –ø–æ–∑–∂–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–∏—á–∏–Ω—ã/—à–∞–≥–∏).
  - **DoD**: —Å–æ–±—ã—Ç–∏—è (–±–µ–∑ –ü–î–Ω): –ø–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞, –∫–ª–∏–∫ –ø–æ –ø—Ä–∏—á–∏–Ω–µ, –∫–ª–∏–∫ –ø–æ
    next-step, –ø–æ–∫–∞–∑ risk alert (—Å `riskLevel`), –æ—Ç–∫—Ä—ã—Ç–∏–µ META-–¥–µ—Ç–∞–ª–µ–π.

### Must Have (–§–∞–∑–∞ 1 ‚Äî Enhanced Current State)

- [ ] **Legacy UI** ‚Äî `apps/web/heys_predictive_insights_v1.js` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å
      StatusCard 0-100 (–ø–∏—Ç–∞–Ω–∏–µ/—Ç–∞–π–º–∏–Ω–≥/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ + –∫–æ–Ω—Ç–µ–∫—Å—Ç)
  - **Why**: –ù—É–∂–µ–Ω –≥–ª–∞–≤–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å –ø–æ–ª–Ω–æ–π –Ω–∞—É—á–Ω–æ–π –≥–ª—É–±–∏–Ω–æ–π
  - **Acceptance**:
    - –í–∏–¥–Ω–æ **–°—Ç–∞—Ç—É—Å 0‚Äì100** —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π (–∫–æ–ª—å—Ü–æ/–≥—Ä–∞–¥–∏–µ–Ω—Ç).
    - –ü–æ–∫–∞–∑–∞–Ω—ã **–≤—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –ø—Ä–∏—á–∏–Ω—ã** (—Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Å—Ç–æ–ª–ø–∞–º:
      –ø–∏—Ç–∞–Ω–∏–µ/—Ç–∞–π–º–∏–Ω–≥/—Å–æ–Ω/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å/—Å—Ç—Ä–µ—Å—Å).
    - –ö–∞–∂–¥–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ ‚Üí —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç **–Ω–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ** + –¥–µ—Ç–∞–ª–∏
      —Ä–∞—Å—á—ë—Ç–∞.
    - –ü–æ–∫–∞–∑–∞–Ω—ã **–ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** —Å ETA –∏ –æ–∂–∏–¥–∞–µ–º—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º.
    - –ü–æ–∫–∞–∑–∞–Ω **confidence badge** (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ü–µ–Ω–∫–µ).
    - –¢–µ–∫—Å—Ç –∏ –Ω–∞–∑–≤–∞–Ω–∏—è: –±–µ–∑ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –æ–±–µ—â–∞–Ω–∏–π, –±–µ–∑ ‚Äú—Å—Ç—ã–¥–∞‚Äù.
    - –ù–µ—Ç –æ—à–∏–±–æ–∫/–≤–∞—Ä–Ω–∏–Ω–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏.
- [ ] **Legacy UI** ‚Äî `apps/web/heys_predictive_insights_v1.js` ‚Üí
      MetabolicStateRing (anabolic/transitional/catabolic) —Å –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ
      –ª–∏–ø–æ–ª–∏–∑–∞
  - **Why**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫—É—é —Ñ–∞–∑—É
  - **Acceptance**: –§–∞–∑–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ –≤–æ–ª–Ω—ã/–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏—ë–º–∞/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫;
    –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–ª—å—Ü–µ
- [ ] **Legacy UI** ‚Äî `apps/web/heys_predictive_insights_v1.js` ‚Üí RiskIndicators
      (Traffic Light: Low/Medium/High) —Å —Ü–≤–µ—Ç–∞–º–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–æ–π
  - **Why**: –†–∞–Ω–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã —Ä–∏—Å–∫–∞ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±—Ä–∏—Ñ—É: "–†–∏—Å–∫ —Å—Ä—ã–≤–∞ (—Å–≤–µ—Ç–æ—Ñ–æ—Ä)")
  - **Acceptance**:
    - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞ (–∑–µ–ª—ë–Ω—ã–π/–∂—ë–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π).
    - –ü–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ —Ä–∏—Å–∫–µ >30% (Medium) –∏–ª–∏ >70% (High).
    - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç 1 –ø–æ–¥—Å–∫–∞–∑–∫—É ‚Äú–∫–∞–∫ —Å–Ω–∏–∑–∏—Ç—å‚Äù.

#### –§–∞–∑–∞ 1 ‚Äî –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:** —á—Ç–æ–±—ã –Ω–µ "—Å–∫–∞–∫–∞–ª–æ" –æ—Ç –æ–¥–Ω–æ–≥–æ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏,
  –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EMA —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage.
- **–ü—Ä–∏—á–∏–Ω—ã —Å –Ω–∞—É—á–Ω—ã–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º:** –∫–∞–∂–¥–∞—è –ø—Ä–∏—á–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å:
  - `pillar` (—Å—Ç–æ–ª–ø: –ø–∏—Ç–∞–Ω–∏–µ/—Ç–∞–π–º–∏–Ω–≥/—Å–æ–Ω/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å/—Å—Ç—Ä–µ—Å—Å)
  - `impactPct` (–≤–∫–ª–∞–¥ –≤ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)
  - `scientificBasis` (–∫—Ä–∞—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞)
  - `details` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–∏—Ñ—Ä—ã: "–±–µ–ª–æ–∫ 45–≥ –∏–∑ 120–≥ –Ω–æ—Ä–º—ã")
- **Refeed Day Logic:** –ï—Å–ª–∏ –¥–µ–Ω—å –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ Refeed (–∏ ratio –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã
  refeed), —Å—Ç–∞—Ç—É—Å –ù–ï –¥–æ–ª–∂–µ–Ω –ø–∞–¥–∞—Ç—å. –≠—Ç–æ "–æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä", –∞ –Ω–µ —Å—Ä—ã–≤.
- **API Contract:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ `HEYS.Metabolic.getStatus()` —Å
  –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (—Å–º. Phase 0).
- **Interaction Pattern:** –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π ‚Üí —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π
  breakdown —Å –Ω–∞—É—á–Ω—ã–º–∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.
- **Confidence indicator:** –ø—Ä–∏ –Ω–µ–ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
  (low/medium/high) –∏ —á—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç.
- **Non-medical language:** –∏–∑–±–µ–≥–∞—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –∫–∞–∫
  –¥–∏–∞–≥–Ω–æ–∑/–æ–±–µ—â–∞–Ω–∏–µ –ª–µ—á–µ–Ω–∏—è.

### Must Have (–§–∞–∑–∞ 2 ‚Äî Predictive Layer)

- [ ] **Legacy Core** ‚Äî `apps/web/heys_metabolic_intelligence_v1.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è
      `calculateCrashRisk()` (24-48—á), —É—á–∏—Ç—ã–≤–∞—è —Å—Ç—Ä–µ—Å—Å, —Å–æ–Ω, —Å–æ—Ü-—Ç—Ä–∏–≥–≥–µ—Ä—ã,
      –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π —Å—Ç—Ä–µ—Å—Å
  - **Why**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å—Ä—ã–≤—ã
  - **Acceptance**:
    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `risk 0-100` + `primaryTrigger` + `preventionStrategy`.
    - –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã ‚Äú—Å–æ—Ü‚Äë—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤‚Äù (–≤–µ—á–µ—Ä/–≤—ã—Ö–æ–¥–Ω—ã–µ/–ø—Ä–∞–∑–¥–Ω–∏–∫–∏) —Ö–æ—Ç—è
      –±—ã rule‚Äëbased.
    - –í—ã—Ö–æ–¥ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è UI): –ø—Ä–∏—á–∏–Ω—ã/–¥–µ–π—Å—Ç–≤–∏—è —Å
      id/label/desc/confidence.
- [ ] **Legacy Core** ‚Äî `apps/web/heys_metabolic_intelligence_v1.js` ‚Üí
      `calculatePerformanceForecast()` (—ç–Ω–µ—Ä–≥–∏—è/—Ñ–æ–∫—É—Å –æ–∫–Ω–∞ –Ω–∞ –∑–∞–≤—Ç—Ä–∞)
  - **Why**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –∏ –Ω–∞–≥—Ä—É–∑–∫–∏
  - **Acceptance**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∫–Ω–∞ —ç–Ω–µ—Ä–≥–∏–∏, –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏—ë–º—ã, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–µ
    –æ–∫–Ω–æ
- [ ] **Legacy UI** ‚Äî `apps/web/heys_predictive_insights_v1.js` ‚Üí
      PredictiveDashboard (CrashRiskAlert, TomorrowForecast, InterventionCard)
  - **Why**: –ü–æ–∫–∞–∑ –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  - **Acceptance**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö; —Å–∫—Ä—ã—Ç –ø—Ä–∏ —Ä–∏—Å–∫–µ <30%

### Must Have (–§–∞–∑–∞ 3 ‚Äî Personalization)

- [ ] **Legacy Core** ‚Äî `apps/web/heys_metabolic_intelligence_v1.js` ‚Üí
      `identifyPhenotype()` (—Ç–∏–ø, —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ –ë–ñ–£, —Ü–∏—Ä–∫–∞–¥–Ω–∞—è —Å–∏–ª–∞,
      —Å—Ç—Ä–µ—Å—Å-–æ—Ç–≤–µ—Ç)
  - **Why**: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  - **Acceptance**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏; –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ‚â•30 –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö
- [ ] **Legacy Core** ‚Äî `apps/web/heys_metabolic_intelligence_v1.js` ‚Üí
      `calculatePersonalThresholds()` (—Å—Ç—Ä–∏–∫-–¥–∏–∞–ø–∞–∑–æ–Ω, –¥–µ—Ñ–∏—Ü–∏—Ç, –ª–∏—á–Ω–∞—è –≤–æ–ª–Ω–∞,
      –ø–æ—Ä–æ–≥–∏ crash/binge)
  - **Why**: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã –≤–º–µ—Å—Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö
  - **Acceptance**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–±–æ—Ä –ø–æ—Ä–æ–≥–æ–≤; –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞—Ç—É—Å –∏ —Ä–∏—Å–∫–∏
- [ ] **Legacy Core/UI** ‚Äî –°–±–æ—Ä feedback –Ω–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è (lsGet/lsSet) –∏
      –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –≤–µ—Å–æ–≤ (learning loop)
  - **Why**: –°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –æ—Ç–∫–ª–∏–∫–µ
  - **Acceptance**: Feedback —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è; –≤–µ—Å–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è; UI –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –î–∞/–ù–µ—Ç

### Should Have (–§–∞–∑–∞ 4 ‚Äî Integration & Polish)

- [ ] **Legacy UI** ‚Äî `apps/web/heys_predictive_insights_v1.js` ‚Üí Metabolic
      Command Center (–µ–¥–∏–Ω—ã–π —ç–∫—Ä–∞–Ω: —Å—Ç–∞—Ç—É—Å, –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è —Ñ–∞–∑–∞, —Ä–∏—Å–∫–∏, –ø—Ä–æ–≥–Ω–æ–∑,
      —Ñ–µ–Ω–æ—Ç–∏–ø, –æ—Ç–∫—Ä—ã—Ç–∏—è)
  - **Why**: –¶–µ–ª–æ—Å—Ç–Ω—ã–π –æ–ø—ã—Ç
  - **Acceptance**: –í—Å–µ –±–ª–æ–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è; mobile-friendly; –±–µ–∑ –ø—Ä–æ—Å–∞–¥–∫–∏ FPS
- [ ] **Legacy UI** ‚Äî Curator view (–∫–ª—é—á–µ–≤—ã–µ —Ä–∏—Å–∫–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, —Ñ–µ–Ω–æ—Ç–∏–ø)
  - **Why**: –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª –∫—É—Ä–∞—Ç–æ—Ä–∞
  - **Acceptance**: –ë—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä: —Å—Ç–∞—Ç—É—Å, —Ç–æ–ø —Ä–∏—Å–∫–∏, –¥–µ–π—Å—Ç–≤–∏—è
- [ ] **Legacy Core** ‚Äî `generateReport(period)` (–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü) –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
  - **Why**: –ù–µ–¥–µ–ª–∏/–º–µ—Å—è—Ü –∏—Ç–æ–≥–∏
  - **Acceptance**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –æ—Ç—á—ë—Ç–∞

### Could Have

- [ ] **Docs** ‚Äî –û–±–Ω–æ–≤–∏—Ç—å SCIENCE_INFO –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ (–±–µ–∑ –∫–æ–¥–∞)
- [ ] **UI** ‚Äî –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∏—Å–∫–æ–≤ –∏ discoveries

---

## ‚úÖ DONE (–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏)

### Functional

- [ ] –°—Ç–∞—Ç—É—Å 0-100 —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—ã –∏ –¥–µ–π—Å—Ç–≤–∏–µ
- [ ] –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è —Ñ–∞–∑–∞ –∏ –≤—Ä–µ–º—è –¥–æ –ª–∏–ø–æ–ª–∏–∑–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–∏—Å–∫–∏ —Å—Ä—ã–≤–æ–≤ —Å—á–∏—Ç–∞—é—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ >30%
- [ ] –ü—Ä–æ–≥–Ω–æ–∑ —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –ª–æ–≥–∏—á–µ–Ω (–±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤)
- [ ] –§–µ–Ω–æ—Ç–∏–ø –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ ‚â•30 –¥–Ω—è—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] Feedback —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–µ—Å–∞ –º–æ–¥–µ–ª–∏

### Quality Gates

- [ ] Testing: —Ä—É—á–Ω–æ–π —Ç–µ—Å—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ (mobile + desktop) + smoke —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] `pnpm type-check` PASS
- [ ] `pnpm build` PASS (–±–µ–∑ –∑–∞–º–µ—Ç–Ω–æ–≥–æ —Ä–µ–≥—Ä–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏; –±–æ–ª—å—à–∏–µ —Ä–∞—Å—á—ë—Ç—ã –≤—ã–Ω–µ—Å—Ç–∏
      –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π `heys_metabolic_intelligence_v1.js`)
- [ ] Console: 0 –æ—à–∏–±–æ–∫/–≤–∞—Ä–Ω–∏–Ω–≥–æ–≤

### Smoke —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–º–∏–Ω–∏–º—É–º)

- [ ] –ü—É—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è (0 –¥–Ω–µ–π): –Ω–µ—Ç –ø–∞–¥–µ–Ω–∏–π, –µ—Å—Ç—å ‚Äú–∫–∞–∫ –Ω–∞—á–∞—Ç—å‚Äù.
- [ ] –ú–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö (1‚Äì2 –¥–Ω—è): —Å—Ç–∞—Ç—É—Å —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ ‚Äú—á–µ—Ä–Ω–æ–≤–æ–º‚Äù —Ä–µ–∂–∏–º–µ –∏ —è–≤–Ω–æ —ç—Ç–æ
      –ø–æ–º–µ—á–∞–µ—Ç.
- [ ] –û–±—ã—á–Ω—ã–π –¥–µ–Ω—å (–µ—Å—Ç—å –µ–¥–∞/—Å–æ–Ω/—à–∞–≥–∏): —Å—Ç–∞—Ç—É—Å, —Ñ–∞–∑–∞, —Ä–∏—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.
- [ ] Refeed day / caloric debt (–µ—Å–ª–∏ —ç—Ç–∏ –ø–æ–ª—è –µ—Å—Ç—å –≤ DayRecord): —Å—Ç–∞—Ç—É—Å/—Ä–∏—Å–∫–∏
      –Ω–µ ‚Äú–Ω–∞–∫–∞–∑—ã–≤–∞—é—Ç‚Äù –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–∫—Å–∏—á–Ω–æ; –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.
- [ ] PIN auth —Ä–µ–∂–∏–º (–µ—Å–ª–∏ user=null): –≤–∫–ª–∞–¥–∫–∞ Insights –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
      –ª–æ–∫–∞–ª—å–Ω–æ.

### UI Testing

- [ ] Mobile: touch ‚â•44px, –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] Desktop: hover/keyboard –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç FOUC, –Ω–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### Documentation

- [ ] PR —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç
- [ ] –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ SCIENCE_INFO (–±–µ–∑ –∫–æ–¥–∞)

---

## ü§ñ AI Context (Technical Specs)

- –†–∞–±–æ—Ç–∞—Ç—å –≤ `apps/web/` (legacy React 18 CDN), –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ TS
- –ù–µ —Ç—Ä–æ–≥–∞–µ–º HMR/—Å–µ—Ä–≤–µ—Ä—ã; –±–µ–∑ restart
- –°–Ω–∞—á–∞–ª–∞ UI –≤ Insights, –∑–∞—Ç–µ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –≤—ã–Ω–æ—Å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
- Storage: `U.lsSet/U.lsGet` –¥–ª—è namespaced –¥–∞–Ω–Ω—ã—Ö; `HEYS.store` ‚Äî –µ—Å–ª–∏ –Ω—É–∂–µ–Ω
  –∫—ç—à + watchers
- –°–æ–±–ª—é–¥–∞—Ç—å —Å—Ç–∏–ª–∏: Tailwind/BEM, –∏–∑–±–µ–≥–∞—Ç—å –∏–Ω–ª–∞–π–Ω-—Å—Ç–∏–ª–µ–π
- –ù–µ—Ç monkey-patching, –Ω–µ—Ç console.log (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî
  `HEYS.analytics.trackError`)

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –∑–∞–Ω–æ–≤–æ)

- DayRecord / dayTot / normAbs: —Å–º. `docs/DATA_MODEL_REFERENCE.md`.
- Ratio‚Äë–ª–æ–≥–∏–∫–∞ –∏ streak‚Äë—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `HEYS.ratioZones` (—Å–º.
  `apps/web/heys_ratio_zones_v1.js`).
- –ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –≤–æ–ª–Ω–∞/–∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏/NDTE: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `HEYS.InsulinWave`
  (—Å–º. `apps/web/heys_insulin_wave_v1.js`) –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
- Refeed Day / Caloric Debt: —É—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ–ª—è (–µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç) –∏ –Ω–µ –ª–æ–º–∞—Ç—å UX.

### –Ø–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã —Å–∫–æ—É–ø–∞ (—á—Ç–æ–±—ã –Ω–µ —Ä–∞—Å–ø–æ–ª–∑–ª–æ—Å—å)

–í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ **–Ω–µ** —Ä–µ–∞–ª–∏–∑—É–µ–º:

- –ø–ª–∞—Ç–µ–∂–∏/–ø–æ–¥–ø–∏—Å–∫–∏/Read‚Äëonly;
- —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–ü–≠–ü;
- –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä/—á–∞—Ç/–ø—Ä–æ—Ç–æ–∫–æ–ª üëç/‚úÖ;
- Light-–≤–µ—Ä—Å–∏—é (—É–ø—Ä–æ—â—ë–Ω–Ω—É—é) ‚Äî –æ–Ω–∞ –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º;
- ML/AI –±—ç–∫–µ–Ω–¥ ‚Äî —Ç–æ–ª—å–∫–æ client-side rule-based –ª–æ–≥–∏–∫–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

---

## üìù Notes

- **Priority**: high
- **Complexity**: L (8-10 —á, 4 —Ñ–∞–∑—ã)
- **Blockers**: –ù—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è ‚â•30 –¥–Ω–µ–π –¥–ª—è —Ñ–µ–Ω–æ—Ç–∏–ø–∞; –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ insulinWave
  –¥–∞–Ω–Ω—ã–µ
- **Scope**: legacy Insights first
- **Related Tasks**: `2025-12-14-predictive-insights-module.md`
- **Created**: 2025-12-14

---

## üöÄ Usage

1. –†–∞–±–æ—Ç–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –≤–∫–ª–∞–¥–∫–∏ Insights (–±–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
2. –î–µ–ª–∞—Ç—å –ø–æ —Ñ–∞–∑–∞–º: 1 ‚Üí 2 ‚Üí 3 ‚Üí 4 (–∫–∞–∂–¥—É—é –º–æ–∂–Ω–æ –∫–∞—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å UI –Ω–∞ mobile/desktop –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
4. –í PR –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç
