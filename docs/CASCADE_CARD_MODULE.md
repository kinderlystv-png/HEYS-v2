# Cascade Card ‚Äî ¬´–í–∞—à –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –∫–∞—Å–∫–∞–¥¬ª

> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è `heys_cascade_card_v1.js` v2.0.0  
> –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2026-02-19

---

## –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –∫–∞—Å–∫–∞–¥–∞ (v2.0.0)

–ö–∞—Å–∫–∞–¥ ‚Äî –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π —Å–∫–æ—Ä–∏–Ω–≥ –¥–Ω—è. 10 —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –∫–∞–∂–¥—ã–π –≤–Ω–æ—Å–∏—Ç –≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –≤–∫–ª–∞–¥
–≤ `score`.  
Score –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä.

---

### –°–≤–æ–¥–∫–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤

```
#   –§–∞–∫—Ç–æ—Ä              –î–∏–∞–ø–∞–∑–æ–Ω –≤–∫–ª–∞–¥–∞   –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1   –ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–∏—ë–º–∞      -1.0 ‚Ä¶ +1.5      getMealQualityScore(meal)
2   –ë—ã—Ç–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å   -0.3 ‚Ä¶ +1.0      day.householdMin
3   –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞           -0.5 ‚Ä¶ +2.5      day.trainings[].z
4   –í—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è      -2.0 ‚Ä¶ +1.0      day.sleepStart
5   –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∞     -1.5 ‚Ä¶ +1.0      day.sleepHours
6   –ß–µ–∫-–∏–Ω               0    ‚Ä¶ +0.5      day.weightMorning > 0
7   –ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞          -0.3 ‚Ä¶ +1.0      day.measurements
8   –®–∞–≥–∏                 -0.3 ‚Ä¶ +1.0      day.steps / prof.stepsGoal
9   –í–∏—Ç–∞–º–∏–Ω—ã             -0.2 ‚Ä¶ +0.5      day.supplementsTaken
10  –ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–µ –≤–æ–ª–Ω—ã    -1.5 ‚Ä¶ +1.5      HEYS.InsulinWave.calculate()
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    –î–ò–ê–ü–ê–ó–û–ù TOTAL        ~-8  ‚Ä¶ ~+11.5
    MOMENTUM_TARGET       10.0
```

---

### –§–∞–∫—Ç–æ—Ä 1: –ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏

**–ò—Å—Ç–æ—á–Ω–∏–∫:**
`HEYS.mealScoring.getMealQualityScore(meal, null, normKcal, pIndex)` ‚Üí
`score: 0‚Äì100`

**–ü—Ä–∏–Ω—Ü–∏–ø:** —á–µ–º –ª—É—á—à–µ –æ—Ü–µ–Ω–∫–∞ ‚Äî —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ –±—É—Å—Ç; —á–µ–º —Ö—É–∂–µ ‚Äî —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ —à—Ç—Ä–∞—Ñ.

```
score ‚â• 80   ‚Üí +1.5  (excellent)  ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –ø—Ä–∏—ë–º
score 60‚Äì79  ‚Üí +1.0  (good)       ‚Äî —Ö–æ—Ä–æ—à–∏–π
score 40‚Äì59  ‚Üí +0.5  (ok)         ‚Äî –ø—Ä–∏–µ–º–ª–µ–º—ã–π
score 20‚Äì39  ‚Üí  0.0  (poor)       ‚Äî —Å–ª–∞–±—ã–π (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ)
score <  20  ‚Üí -0.5  (bad)        ‚Äî –ø–ª–æ—Ö–æ–π
```

**–ñ—ë—Å—Ç–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è** (–ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç quality score ‚Üí –≤—Å–µ–≥–¥–∞ ‚àí1.0):

- Cumulative kcal > 120% –¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Ä–º—ã
- harm ‚â• 7 (–≤—Ä–µ–¥–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç)
- –ü—Ä–∏—ë–º –ø–æ—Å–ª–µ 23:00

**–¶–µ–ø–æ—á–∫–∞:** poor/bad ‚Üí `positive = false` ‚Üí —Ä–∞–∑—Ä—ã–≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏.  
**–§–æ–ª–±—ç–∫:** –µ—Å–ª–∏ `getMealQualityScore` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –±–∏–Ω–∞—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (+1.0 /
‚àí1.0).

–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–∫ –∫–∞–∂–¥–æ–º—É –ø—Ä–∏—ë–º—É** ‚Äî 3 —Ö–æ—Ä–æ—à–∏—Ö –æ–±–µ–¥–∞ = +3.0, 3 –ø–ª–æ—Ö–∏—Ö = ‚àí1.5.

---

### –§–∞–∫—Ç–æ—Ä 2: –ë—ã—Ç–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (NEAT)

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.householdMin` (–º–∏–Ω—É—Ç—ã –±—ã—Ç–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, 0+)

**–ü—Ä–∏–Ω—Ü–∏–ø:** NEAT (non-exercise activity thermogenesis) –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è
–º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ > 2 –¥–Ω–µ–π ‚Äî —Å–∏–≥–Ω–∞–ª –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏.

```
householdMin ‚â• 60   ‚Üí +1.0  ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å (—É–±–æ—Ä–∫–∞, –ø—Ä–æ–≥—É–ª–∫–∞, —Ä–∞–±–æ—Ç–∞ –ø–æ –¥–æ–º—É)
householdMin 30‚Äì59  ‚Üí +0.5  ‚Äî —á–∞—Å—Ç–∏—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
householdMin 10‚Äì29  ‚Üí +0.2  ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
householdMin < 10   ‚Üí  0.0  ‚Äî –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö / –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

**–®—Ç—Ä–∞—Ñ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ (–º–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã–π):**

```
–ï—Å–ª–∏ householdMin < 10 –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ (N > 2):
  —à—Ç—Ä–∞—Ñ = -0.1 √ó (N - 2), max -0.3
  –ø—Ä–∏–º–µ—Ä: 4 –¥–Ω—è –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Üí -0.2
```

–ú–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—É—é —Å–µ—Ä–∏—é –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º 7 –¥–Ω—è–º –∏–∑ localStorage.

---

### –§–∞–∫—Ç–æ—Ä 3: –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.trainings[]` ‚Äî –º–∞—Å—Å–∏–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å =
`training.z.reduce((a,b) => a+b, 0)` –º–∏–Ω.

**–ü—Ä–∏–Ω—Ü–∏–ø:** —Å–∞–º—ã–π —Å–∏–ª—å–Ω—ã–π –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π —Å–∏–≥–Ω–∞–ª. –ì–∏–±–∫–∏–π –≤–µ—Å –æ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ > 2 –¥–Ω–µ–π ‚Äî –ª—ë–≥–∫–∏–π —à—Ç—Ä–∞—Ñ.

```
–°—É–º–º–∞—Ä–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ –¥–µ–Ω—å:
  ‚â• 60 –º–∏–Ω   ‚Üí +2.5  ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
  45‚Äì59 –º–∏–Ω  ‚Üí +2.0  ‚Äî —Ö–æ—Ä–æ—à–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
  30‚Äì44 –º–∏–Ω  ‚Üí +1.5  ‚Äî –∫–æ—Ä–æ—Ç–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
  15‚Äì29 –º–∏–Ω  ‚Üí +1.0  ‚Äî –ª—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  1‚Äì14 –º–∏–Ω   ‚Üí +0.5  ‚Äî —Ä–∞–∑–º–∏–Ω–∫–∞
  0 –º–∏–Ω      ‚Üí  0.0  ‚Äî –Ω–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
```

**–®—Ç—Ä–∞—Ñ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ (–º–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã–π):**

```
–ï—Å–ª–∏ 0 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ (N > 2):
  —à—Ç—Ä–∞—Ñ = -0.15 √ó (N - 2), max -0.5
  –ø—Ä–∏–º–µ—Ä: 5 –¥–Ω–µ–π –±–µ–∑ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Üí -0.45
```

---

### –§–∞–∫—Ç–æ—Ä 4: –í—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.sleepStart` (—Å—Ç—Ä–æ–∫–∞ `"HH:MM"`)

**–ü—Ä–∏–Ω—Ü–∏–ø:** —Ü–∏—Ä–∫–∞–¥–Ω—ã–π —Ä–∏—Ç–º. –†–∞–Ω–Ω–µ–µ –∑–∞—Å—ã–ø–∞–Ω–∏–µ (–¥–æ 23:00) = –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ,
–º–µ–ª–∞—Ç–æ–Ω–∏–Ω, GH. –ü–æ–∑–¥–Ω–µ–µ ‚Äî —Å–∏–ª—å–Ω—ã–π —à—Ç—Ä–∞—Ñ: –Ω–∞—Ä—É—à–∞–µ—Ç –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å, –ø–æ–≤—ã—à–∞–µ—Ç
–∫–æ—Ä—Ç–∏–∑–æ–ª, —Å–Ω–∏–∂–∞–µ—Ç –∏–Ω—Å—É–ª–∏–Ω–æ–≤—É—é —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

```
sleepStart ‚â§ 22:00   ‚Üí +1.0  ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∂–∏–º
22:01‚Äì23:00          ‚Üí +0.5  ‚Äî —Ö–æ—Ä–æ—à–∏–π
23:01‚Äì00:00          ‚Üí  0.0  ‚Äî –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ
00:01‚Äì01:00          ‚Üí -1.0  ‚Äî –ø–æ–∑–¥–Ω–æ
01:01‚Äì02:00          ‚Üí -1.5  ‚Äî –æ—á–µ–Ω—å –ø–æ–∑–¥–Ω–æ
> 02:00              ‚Üí -2.0  ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∑–¥–Ω–æ
–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö           ‚Üí  0.0  ‚Äî –Ω–µ —à—Ç—Ä–∞—Ñ—É–µ–º
```

**–ö–æ–Ω–≤–µ—Ä—Å–∏—è:** `sleepStart` –ø–∞—Ä—Å–∏—Ç—Å—è –≤ –º–∏–Ω—É—Ç—ã –æ—Ç –ø–æ–ª—É–Ω–æ—á–∏. –ó–Ω–∞—á–µ–Ω–∏—è 0:00‚Äì6:00
—Å—á–∏—Ç–∞—é—Ç—Å—è ¬´–ø–æ–∑–¥–Ω–∏–º –∑–∞—Å—ã–ø–∞–Ω–∏–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–Ω—è¬ª (+ 1440).

---

### –§–∞–∫—Ç–æ—Ä 5: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.sleepHours` (—á–∏—Å–ª–æ —á–∞—Å–æ–≤) –∏–ª–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫
`sleepEnd - sleepStart`

**–ü—Ä–∏–Ω—Ü–∏–ø:** –æ–ø—Ç–∏–º—É–º 7‚Äì8 —á–∞—Å–æ–≤. –ù–µ–¥–æ—Å—ã–ø —Ä–µ–∑–∫–æ —É—Ö—É–¥—à–∞–µ—Ç –∏–Ω—Å—É–ª–∏–Ω–æ–≤—É—é
—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ–≤—ã—à–∞–µ—Ç –≥—Ä–µ–ª–∏–Ω, —Å–Ω–∏–∂–∞–µ—Ç –ª–µ–ø—Ç–∏–Ω. –ü–µ—Ä–µ—Å—ã–ø –º–µ–Ω–µ–µ –≤—Ä–µ–¥–µ–Ω, –Ω–æ —Ç–æ–∂–µ
–º–∞—Ä–∫–µ—Ä –ø—Ä–æ–±–ª–µ–º.

```
sleepHours 7.0‚Äì8.5   ‚Üí +1.0  ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Å–æ–Ω
sleepHours 6.0‚Äì6.9   ‚Üí +0.3  ‚Äî –¥–æ–ø—É—Å—Ç–∏–º–æ
sleepHours 8.6‚Äì9.5   ‚Üí +0.3  ‚Äî —á—É—Ç—å –º–Ω–æ–≥–æ, –Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
sleepHours 5.0‚Äì5.9   ‚Üí -0.5  ‚Äî –Ω–µ–¥–æ—Å—ã–ø
sleepHours 9.6‚Äì10.5  ‚Üí -0.3  ‚Äî –ø–µ—Ä–µ—Å—ã–ø
sleepHours < 5.0     ‚Üí -1.5  ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –Ω–µ–¥–æ—Å—ã–ø
sleepHours > 10.5    ‚Üí -0.5  ‚Äî —Å–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—ã–ø
–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö           ‚Üí  0.0  ‚Äî –Ω–µ —à—Ç—Ä–∞—Ñ—É–µ–º
```

---

### –§–∞–∫—Ç–æ—Ä 6: –ß–µ–∫-–∏–Ω

**–ò—Å—Ç–æ—á–Ω–∏–∫:** –Ω–∞–ª–∏—á–∏–µ `day.weightMorning > 0` ‚Üí –º–∞—Ä–∫–µ—Ä —Ç–æ–≥–æ, —á—Ç–æ —É—Ç—Ä–µ–Ω–Ω–∏–π —á–µ–∫-–∏–Ω
–≤—ã–ø–æ–ª–Ω–µ–Ω.

**–ü—Ä–∏–Ω—Ü–∏–ø:** —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–º–æ–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–∏–ª–∏–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫—É—é –ø–µ—Ç–ª—é.
–ù–µ–±–æ–ª—å—à–æ–π, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –±–æ–Ω—É—Å –∑–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É.

```
weightMorning > 0   ‚Üí +0.5  ‚Äî —á–µ–∫-–∏–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω
weightMorning = 0   ‚Üí  0.0  ‚Äî –Ω–µ —à—Ç—Ä–∞—Ñ—É–µ–º (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
```

---

### –§–∞–∫—Ç–æ—Ä 7: –ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.measurements` ‚Äî –æ–±—ä–µ–∫—Ç `{ waist, hips, thigh, biceps }`. –•–æ—Ç—è
–±—ã –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ > 0 = –∑–∞–º–µ—Ä—ã —Å–¥–µ–ª–∞–Ω—ã.

**–ü—Ä–∏–Ω—Ü–∏–ø:** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ ‚Äî –∫–ª—é—á–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–π –ø–µ—Ç–ª–∏.
–ó–∞–º–µ—Ä—ã 1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã. –ï—Å–ª–∏ –¥–∞–≤–Ω–æ –Ω–µ –±—ã–ª–æ ‚Äî –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —à—Ç—Ä–∞—Ñ.

```
–ó–∞–º–µ—Ä—ã –µ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è      ‚Üí +1.0  ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
–ó–∞–º–µ—Ä—ã –±—ã–ª–∏ ‚â§ 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ ‚Üí 0.0 ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ
–ó–∞–º–µ—Ä—ã –±—ã–ª–∏ 8‚Äì14 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ ‚Üí -0.1 ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
–ó–∞–º–µ—Ä—ã –±—ã–ª–∏ > 14 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ ‚Üí -0.3 ‚Äî —Ç–µ—Ä—è–µ—Ç—Å—è —Ñ–æ–∫—É—Å
–ó–∞–º–µ—Ä—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∞–ª–∏—Å—å   ‚Üí 0.0 ‚Äî –Ω–µ —à—Ç—Ä–∞—Ñ—É–µ–º –Ω–æ–≤–∏—á–∫–æ–≤
```

–ü–æ—Å–ª–µ–¥–Ω—é—é –¥–∞—Ç—É –∑–∞–º–µ—Ä–æ–≤ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –¥–Ω–µ–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –≤
localStorage).

---

### –§–∞–∫—Ç–æ—Ä 8: –®–∞–≥–∏

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.steps` / `prof.stepsGoal || 7000`

**–ü—Ä–∏–Ω—Ü–∏–ø:** —à–∞–≥–∏ ‚Äî —Å–∞–º—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –¥–Ω–µ–≤–Ω–æ–π –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏. –í—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π
–Ω–æ—Ä–º—ã = –±–æ–Ω—É—Å. –ù–∏–∂–µ ‚Äî –ª—ë–≥–∫–∏–π —à—Ç—Ä–∞—Ñ.

```
steps / goal ‚â• 1.2   ‚Üí +1.0  ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ü–µ–ª–∏
steps / goal 1.0‚Äì1.19 ‚Üí +0.7 ‚Äî —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
steps / goal 0.7‚Äì0.99 ‚Üí +0.3 ‚Äî –±–ª–∏–∑–∫–æ –∫ —Ü–µ–ª–∏
steps / goal 0.5‚Äì0.69 ‚Üí  0.0 ‚Äî –Ω–∏–∂–µ –Ω–æ—Ä–º—ã, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ
steps / goal < 0.5   ‚Üí -0.3  ‚Äî –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∏–∂–µ
steps = 0            ‚Üí  0.0  ‚Äî –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –Ω–µ —à—Ç—Ä–∞—Ñ—É–µ–º
```

---

### –§–∞–∫—Ç–æ—Ä 9: –í–∏—Ç–∞–º–∏–Ω—ã

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `day.supplementsTaken` vs `day.supplementsPlanned` –∏–ª–∏
`prof.plannedSupplements`

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ø—Ä–∏—ë–º—ã –≤–∏—Ç–∞–º–∏–Ω–æ–≤ = —Å–∏—Å—Ç–µ–º–Ω–æ—Å—Ç—å –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å. –ú–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ
—Å—Ç–∞–±–∏–ª—å–Ω—ã–π –≤–∫–ª–∞–¥.

```
–í—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω—è—Ç—ã ‚Üí +0.5  ‚Äî –ø–æ–ª–Ω–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞
–ß–∞—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∞ (‚â• 50%)       ‚Üí +0.2  ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ
–ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏–Ω—è—Ç–æ            ‚Üí -0.2  ‚Äî –ø—Ä–æ–ø—É—â–µ–Ω–æ
–ù–µ—Ç –ø–ª–∞–Ω–∞ –≤–∏—Ç–∞–º–∏–Ω–æ–≤          ‚Üí  0.0  ‚Äî –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
```

---

### –§–∞–∫—Ç–æ—Ä 10: –ü–µ—Ä–µ—Ö–ª—ë—Å—Ç –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã—Ö –≤–æ–ª–Ω

**–ò—Å—Ç–æ—á–Ω–∏–∫:**
`HEYS.InsulinWave.calculate({ meals, trainings, steps, householdMin, profile }, pIndex)`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `overlaps[]` –∏ `gaps[]` –º–µ–∂–¥—É –ø—Ä–∏—ë–º–∞–º–∏.

**–ü—Ä–∏–Ω—Ü–∏–ø:** –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã—Ö –≤–æ–ª–Ω ‚Äî –∫–ª—é—á–µ–≤–æ–π –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π —Ñ–∞–∫—Ç–æ—Ä. –•–æ—Ä–æ—à–∏–µ
–ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É –ø—Ä–∏—ë–º–∞–º–∏ –¥–∞—é—Ç –±–æ–Ω—É—Å. –ù–æ—á–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

**–ü–µ—Ä–µ—Ö–ª—ë—Å—Ç—ã (—à—Ç—Ä–∞—Ñ—ã):**

```
–ó–∞ –ö–ê–ñ–î–´–ô overlap:
  severity 'high'   (> 60 –º–∏–Ω –Ω–∞–ª–æ–∂–µ–Ω–∏—è) ‚Üí -0.5
  severity 'medium' (30‚Äì60 –º–∏–Ω)          ‚Üí -0.3
  severity 'low'    (< 30 –º–∏–Ω)           ‚Üí -0.1
  –°—É–º–º–∞—Ä–Ω—ã–π —à—Ç—Ä–∞—Ñ –∑–∞ overlaps: max -1.5
```

**–î–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ (–±–æ–Ω—É—Å—ã):**

```
–°—Ä–µ–¥–Ω–∏–π gap –º–µ–∂–¥—É –ø—Ä–∏—ë–º–∞–º–∏ (avgGapToday):
  ‚â• 240 –º–∏–Ω (4—á)  ‚Üí +1.0  ‚Äî –æ—Ç–ª–∏—á–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏
  180‚Äì239 –º–∏–Ω (3—á) ‚Üí +0.5  ‚Äî —Ö–æ—Ä–æ—à–∏–µ
  120‚Äì179 –º–∏–Ω (2—á) ‚Üí +0.2  ‚Äî –¥–æ–ø—É—Å—Ç–∏–º—ã–µ
  < 120 –º–∏–Ω       ‚Üí  0.0  ‚Äî —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
```

**–ù–æ—á–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫:**

```
–°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π gap (–Ω–æ—á–Ω–æ–π —Ñ–∞—Å—Ç–∏–Ω–≥):
  ‚â• 14—á  ‚Üí +0.5  ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –Ω–æ—á–Ω–æ–π —Ñ–∞—Å—Ç–∏–Ω–≥
  12‚Äì13—á ‚Üí +0.3  ‚Äî —Ö–æ—Ä–æ—à–∏–π
  10‚Äì11—á ‚Üí +0.1  ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π
  < 10—á  ‚Üí  0.0  ‚Äî –Ω–µ—Ç –±–æ–Ω—É—Å–∞ (—É–∂–µ —É—á—Ç—ë–Ω –≤ –¥–Ω–µ–≤–Ω—ã—Ö)
```

–ò—Ç–æ–≥–æ –ø–æ —Ñ–∞–∫—Ç–æ—Ä—É 10: –æ—Ç ‚àí1.5 (—Å–ø–ª–æ—à–Ω—ã–µ –Ω–∞–ª–æ–∂–µ–Ω–∏—è) –¥–æ +1.5 (—á–∏—Å—Ç—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ +
–Ω–æ—á–Ω–æ–π —Ñ–∞—Å—Ç–∏–Ω–≥).

---

### –ü–æ—Ä–æ–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π

```
STRONG:   score ‚â• 7.0   ‚Äî –º–æ—â–Ω—ã–π –¥–µ–Ω—å
GROWING:  score ‚â• 4.0   ‚Äî –∫–∞—Å–∫–∞–¥ —Ä–∞—Å—Ç—ë—Ç
BUILDING: score ‚â• 1.5   ‚Äî –Ω–∞—á–∞–ª–æ
RECOVERY: score > 0 + –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è ‚Äî –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ
BROKEN:   score ‚â§ 0 + –µ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è ‚Äî –ø–∞—É–∑–∞
EMPTY:    –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π   ‚Äî –Ω–∞—á–∞–ª–æ –¥–Ω—è
```

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

```
Momentum = min(1, max(0, score) / MOMENTUM_TARGET)
MOMENTUM_TARGET = 10.0

–•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π):
  3 —Ö–æ—Ä. –µ–¥—ã (+3.0) + —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ 45–º (+2.0) + —Å–æ–Ω 7—á –≤–æ–≤—Ä–µ–º—è (+2.0)
  + —á–µ–∫-–∏–Ω (+0.5) + —à–∞–≥–∏ 100% (+0.7) + –≤–∏—Ç–∞–º–∏–Ω—ã (+0.5) + gaps 3—á (+0.5)
  = 9.2 ‚Üí –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä 92%

–û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å:
  3 –æ—Ç–ª. –µ–¥—ã (+4.5) + —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ 60–º (+2.5) + —Å–æ–Ω 7.5—á –≤ 22:00 (+2.0)
  + —á–µ–∫-–∏–Ω (+0.5) + –∑–∞–º–µ—Ä—ã (+1.0) + —à–∞–≥–∏ 120% (+1.0) + –≤–∏—Ç–∞–º–∏–Ω—ã (+0.5)
  + gaps 4—á (+1.0) + –Ω–æ—á–Ω–æ–π —Ñ–∞—Å—Ç–∏–Ω–≥ 14—á (+0.5) + NEAT 60–º (+1.0)
  = 14.5 ‚Üí –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä 100%
```

### –ü–æ—Å—Ç-—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–µ –æ–∫–Ω–æ

| –£—Å–ª–æ–≤–∏–µ               | –≠—Ñ—Ñ–µ–∫—Ç                        |
| :-------------------- | :---------------------------- |
| < 2—á –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ | –ü—É–ª —Å–æ–æ–±—â–µ–Ω–∏–π: ANTI_LICENSING |

### –í–∏–∑—É–∞–ª—å–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ (`chain`)

`chain` ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è ‚Äî –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ—á–µ–∫ –≤
—Ç–∞–π–º–ª–∞–π–Ω–µ. –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ state/progress.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ö–æ–Ω—Ü–µ–ø—Ü–∏—è](#1-–∫–æ–Ω—Ü–µ–ø—Ü–∏—è)
2. [–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#2-—Ñ–∞–π–ª–æ–≤–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è](#3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–º–æ–¥—É–ª—è)
4. [–î–≤–∏–∂–æ–∫: computeCascadeState](#4-–¥–≤–∏–∂–æ–∫-computecascadestate)
5. [–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö](#5-–º–æ–¥–µ–ª—å-–¥–∞–Ω–Ω—ã—Ö)
6. [–°–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏](#6-—Å–æ—Å—Ç–æ—è–Ω–∏—è-–∫–∞—Ä—Ç–æ—á–∫–∏)
7. [–ê–ª–≥–æ—Ä–∏—Ç–º —Ü–µ–ø–æ—á–∫–∏](#7-–∞–ª–≥–æ—Ä–∏—Ç–º-—Ü–µ–ø–æ—á–∫–∏)
8. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React](#8-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-react)
9. [–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è](#9-–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ-—Å–æ–æ–±—â–µ–Ω–∏—è)
10. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](#10-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–≤-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
11. [CSS –∏ —Å—Ç–∏–ª–∏](#11-css-–∏-—Å—Ç–∏–ª–∏)
12. [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞](#12-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–æ—Ç–ª–∞–¥–∫–∞)
13. [API –º–æ–¥—É–ª—è](#13-api-–º–æ–¥—É–ª—è)
14. [–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å](#14-—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
15. [–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è](#15-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

---

## 1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**¬´–í–∞—à –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –∫–∞—Å–∫–∞–¥¬ª** ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ Day View, –∫–æ—Ç–æ—Ä–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ü–µ–ø–æ—á–∫—É
–∑–¥–æ—Ä–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å.

**–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞** (–±–µ–∑ –Ω–∞—É—á–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤):

- –ö–∞–∂–¥–æ–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–≤–µ–Ω–æ –≤ —Ü–µ–ø–æ—á–∫—É
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –æ–±–Ω—É–ª—è–µ—Ç —Ü–µ–ø–æ—á–∫—É, –Ω–æ –Ω–µ ¬´—à—Ç—Ä–∞—Ñ—É–µ—Ç¬ª ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ —Å—Ä–∞–∑—É –≥–æ–≤–æ—Ä–∏—Ç ¬´–Ω–µ –≤—Å—ë
  –ø–æ—Ç–µ—Ä—è–Ω–æ¬ª
- 2 —á–∞—Å–∞ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∞–Ω—Ç–∏–ª–∏—Ü–µ–Ω–∑–∏—Ä—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç ¬´–∑–∞—Å–ª—É–∂–µ–Ω–Ω—É—é¬ª –ø–µ—Ä–µ–µ–¥–∫—É)
- RECOVERY-—Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–æ—â—Ä—è–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –ø–æ—Å–ª–µ —Å—Ä—ã–≤–∞

**–ú–µ—Å—Ç–æ –≤ UI:** –º–µ–∂–¥—É Goal Progress Bar –∏ Refeed Card –≤ `renderDiarySection`.

---

## 2. –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –§–∞–π–ª                                           | –¢–∏–ø              | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
| ---------------------------------------------- | ---------------- | ------------------------------------------ |
| `apps/web/heys_cascade_card_v1.js`             | JS (~1190 —Å—Ç—Ä–æ–∫) | –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å: –¥–≤–∏–∂–æ–∫ + React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| `apps/web/styles/modules/740-cascade-card.css` | CSS              | –°—Ç–∏–ª–∏ standalone-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞                |

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

| –§–∞–π–ª                                 | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                                        |
| ------------------------------------ | ---------------------------------------------------------------- |
| `apps/web/heys_day_diary_section.js` | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏ –≤—Å—Ç–∞–≤–∫–∞ `cascadeCard` –≤–Ω—É—Ç—Ä–∏ `renderDiarySection()` |
| `apps/web/index.html`                | `<script defer src="heys_cascade_card_v1.js?v=1">`               |
| `apps/web/styles/main.css`           | `@import url("./modules/740-cascade-card.css")`                  |

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
heys_cascade_card_v1.js
‚îÇ
‚îú‚îÄ‚îÄ CONSTANTS
‚îÇ   ‚îú‚îÄ‚îÄ STATES            ‚Äî 6 —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–∞—Ä—Ç–æ—á–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ STATE_CONFIG      ‚Äî –∏–∫–æ–Ω–∫–∞, —Ü–≤–µ—Ç, –ª–µ–π–±–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ MESSAGES          ‚Äî –ø—É–ª—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (6 –ø—É–ª–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ EVENT_ICONS       ‚Äî —ç–º–æ–¥–∑–∏ –∏–∫–æ–Ω–∫–∏ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
‚îÇ
‚îú‚îÄ‚îÄ UTILITIES
‚îÇ   ‚îú‚îÄ‚îÄ parseTime(str)           ‚Äî "HH:MM" ‚Üí –º–∏–Ω—É—Ç—ã –æ—Ç –ø–æ–ª—É–Ω–æ—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ formatTimeShort(str)     ‚Äî –º–∏–Ω—É—Ç—ã ‚Üí "HH:MM"
‚îÇ   ‚îú‚îÄ‚îÄ pickMessage(pool, key)   ‚Äî –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä –ø–æ —á–∞—Å—É
‚îÇ   ‚îú‚îÄ‚îÄ isWithinHours(str, h)    ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ getMealLabel(meal, i)    ‚Äî –º–µ—Ç–∫–∞ –ø—Ä–∏—ë–º–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ checkMealHarm(meal, pi) ‚Äî –Ω–∞–ª–∏—á–∏–µ product.harm ‚â• 7
‚îÇ   ‚îî‚îÄ‚îÄ getPreviousDays(n)       ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π –∏–∑ localStorage
‚îÇ
‚îú‚îÄ‚îÄ ENGINE
‚îÇ   ‚îî‚îÄ‚îÄ computeCascadeState(day, dayTot, normAbs, prof, pIndex)
‚îÇ       ‚Äî 17-—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, —á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç cascadeState
‚îÇ
‚îú‚îÄ‚îÄ REACT COMPONENTS (standalone, –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç HEYS.ExpandableCard)
‚îÇ   ‚îú‚îÄ‚îÄ ChainDots(props)         ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Ç–æ—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ CascadeTimeline(props)   ‚Äî —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π —Ç–∞–π–º–ª–∞–π–Ω —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ CascadeCard(props)       ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (useState –¥–ª—è toggle)
‚îÇ
‚îî‚îÄ‚îÄ ENTRY POINT
    ‚îî‚îÄ‚îÄ renderCard(params)       ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏–∑ diary section
```

**–ü–∞—Ç—Ç–µ—Ä–Ω –º–æ–¥—É–ª—è:** IIFE `(function(global) { ... })(window)` ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
–≤—Å–µ–º legacy-–º–æ–¥—É–ª—è–º (`heys_refeed_v1.js`, `heys_supplements_v1.js` –∏ –¥—Ä.)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

- `global.React` ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω –¥–æ –º–æ–¥—É–ª—è
- `HEYS.dayUtils.getProductFromItem` –∏–ª–∏ `HEYS.models.getProductFromItem` ‚Äî –¥–ª—è
  —Ä–∞—Å—á—ë—Ç–∞ –∫–∫–∞–ª –∏ harm –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, graceful degradation –±–µ–∑ –Ω–∏—Ö)

---

## 4. –î–≤–∏–∂–æ–∫: computeCascadeState

```js
computeCascadeState(day, dayTot, normAbs, prof, pIndex) ‚Üí cascadeState
```

**–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
| --------- | ------ | ----------------------------------------------------------------- |
| `day`     | Object | –û–±—ä–µ–∫—Ç –¥–Ω—è: `meals[]`, `trainings[]`, `water`, `steps`            |
| `dayTot`  | Object | –î–Ω–µ–≤–Ω—ã–µ —Å—É–º–º–∞—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è) |
| `normAbs` | Object | –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã: `normAbs.kcal` ‚Äî –∫–∞–ª–æ—Ä–∏–π–Ω–∞—è –Ω–æ—Ä–º–∞ –Ω–∞ –¥–µ–Ω—å       |
| `prof`    | Object | –ü—Ä–æ—Ñ–∏–ª—å: `water_norm` (–º–ª), `stepsGoal` / `steps_goal`            |
| `pIndex`  | Object | –ò–Ω–¥–µ–∫—Å –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è `getProductFromItem`                         |

**–ê–ª–≥–æ—Ä–∏—Ç–º (17 —à–∞–≥–æ–≤):**

```
–®–ê–ì 1  ‚Äî –ë—ã—Ç–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: day.householdMin ‚Üí +0.2..+1.0 / streak-—à—Ç—Ä–∞—Ñ
–®–ê–ì 2  ‚Äî –ü—Ä–∏—ë–º—ã –ø–∏—â–∏: getMealQualityScore ‚Üí +1.5..‚àí1.0; –∂—ë—Å—Ç–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è ‚Üí ‚àí1.0
–®–ê–ì 3  ‚Äî –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Üí +0.5..+2.5 / streak-—à—Ç—Ä–∞—Ñ –µ—Å–ª–∏ > 2 –¥–Ω–µ–π –ø—Ä–æ–ø—É—Å–∫–∞
–®–ê–ì 4  ‚Äî –í—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è: sleepStart ‚Üí +1.0..‚àí2.0 (6 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤)
–®–ê–ì 5  ‚Äî –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∞: sleepHours ‚Üí +1.0..‚àí1.5 (7 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤)
–®–ê–ì 6  ‚Äî –®–∞–≥–∏: steps / stepsGoal (ratio) ‚Üí +1.0..‚àí0.3
–®–ê–ì 7  ‚Äî –ß–µ–∫-–∏–Ω –≤–µ—Å–∞: weightMorning > 0 ‚Üí +0.5
–®–ê–ì 8  ‚Äî –ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞: measurements ‚Üí +1.0 / –¥–∞–≤–Ω–∏–µ ‚Üí ‚àí0.1..‚àí0.3
–®–ê–ì 9  ‚Äî –í–∏—Ç–∞–º–∏–Ω—ã: supplementsTaken / planned ‚Üí +0.5..‚àí0.2
–®–ê–ì 10 ‚Äî –ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–µ –≤–æ–ª–Ω—ã: InsulinWave.calculate ‚Üí –ø–µ—Ä–µ—Ö–ª—ë—Å—Ç—ã (‚àí1.5 max) + gaps (+1.5 max)
–®–ê–ì 11 ‚Äî –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ events –ø–æ sortKey (–≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö)
–®–ê–ì 12 ‚Äî –ê–ª–≥–æ—Ä–∏—Ç–º —Ü–µ–ø–æ—á–∫–∏: –ø–æ–¥—Å—á—ë—Ç chain, maxChain, breaks, hasBreak
–®–ê–ì 13 ‚Äî –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (EMPTY/BUILDING/GROWING/STRONG/BROKEN/RECOVERY) –ø–æ score
–®–ê–ì 14 ‚Äî Post-training window: lastTraining.time –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 2 —á–∞—Å–æ–≤?
–®–ê–ì 15 ‚Äî –í—ã–±–æ—Ä –ø—É–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å —É—á—ë—Ç–æ–º post-training)
–®–ê–ì 16 ‚Äî Momentum score: min(1, max(0, score) / MOMENTUM_TARGET)
–®–ê–ì 17 ‚Äî Next step hint: —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —à–∞–≥
```

---

## 5. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –°–æ–±—ã—Ç–∏–µ (Event object)

```js
{
  type:        'meal' | 'training' | 'household' | 'sleep' | 'checkin' | 'measurements' | 'steps' | 'supplements' | 'insulin',
  time:        '08:30' | null,   // —Å—Ç—Ä–æ–∫–∞ HH:MM
  positive:    true | false,     // —Å–æ–∑–¥–∞—ë—Ç –∏–ª–∏ –ª–æ–º–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É
  icon:        'ü•ó' | 'üí™' | ... // —ç–º–æ–¥–∑–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  label:       '–ó–∞–≤—Ç—Ä–∞–∫',        // —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
  sortKey:     480,              // –º–∏–Ω—É—Ç—ã –æ—Ç –ø–æ–ª—É–Ω–æ—á–∏ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  weight:      number            // —á–∏—Å–ª–æ–≤–æ–π –≤–∫–ª–∞–¥ –≤ score
}
```

### –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Å–æ–∑–¥–∞—é—Ç –∑–≤–µ–Ω–æ —Ü–µ–ø–æ—á–∫–∏)

| –¢–∏–ø            | –ò—Å—Ç–æ—á–Ω–∏–∫               | –£—Å–ª–æ–≤–∏–µ                                                    |
| -------------- | ---------------------- | ---------------------------------------------------------- |
| `household`    | `day.householdMin`     | householdMin ‚â• 10 (–≤–µ—Å 0.2‚Äì1.0)                            |
| `meal`         | `meals[i]`             | –ù–µ—Ç –ø–µ—Ä–µ–±–æ—Ä–∞ –∫–∞–ª–æ—Ä–∏–π –ò –Ω–µ—Ç harm-–ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ò –Ω–µ –ø–æ—Å–ª–µ 23:00 |
| `training`     | `trainings[i]`         | –ö–∞–∂–¥–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (–≤–µ—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)            |
| `sleep`        | `day.sleepStart`       | sleepOnsetWeight ‚â• 0 (–∑–∞—Å—ã–ø–∞–Ω–∏–µ –¥–æ 00:00)                  |
| `steps`        | `day.steps`            | stepsWeight > 0 (steps / goal ‚â• 0.7)                       |
| `checkin`      | `day.weightMorning`    | weightMorning > 0                                          |
| `measurements` | `day.measurements`     | –•–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑–º–µ—Ä–µ–Ω–∏–µ > 0                                 |
| `supplements`  | `day.supplementsTaken` | suppRatio ‚â• 0.5                                            |

### –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Ä–≤—É—Ç —Ü–µ–ø–æ—á–∫—É)

| –£—Å–ª–æ–≤–∏–µ                             | –¢—è–∂–µ—Å—Ç—å | `breakReason`       |
| ----------------------------------- | ------- | ------------------- |
| –ö—É–º—É–ª—è—Ç–∏–≤–Ω—ã–µ –∫–∫–∞–ª > 120% –Ω–æ—Ä–º—ã      | hard    | `'–ü–µ—Ä–µ–±–æ—Ä –∫–∫–∞–ª'`    |
| –õ—é–±–æ–π –ø—Ä–æ–¥—É–∫—Ç –≤ –ø—Ä–∏—ë–º–µ —Å `harm ‚â• 7` | soft    | `'–í—Ä–µ–¥–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç'` |
| –í—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ ‚â• 23:00 (1380 –º–∏–Ω)     | soft    | `'–ü–æ–∑–¥–Ω–∏–π –ø—Ä–∏—ë–º'`   |

### cascadeState (—Ä–µ–∑—É–ª—å—Ç–∞—Ç computeCascadeState)

```js
{
  events:             CascadeEvent[],  // –≤—Å–µ —Å–æ–±—ã—Ç–∏—è, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
  chainLength:        number,          // —Ç–µ–∫—É—â–∞—è –¥–ª–∏–Ω–∞ —Ü–µ–ø–æ—á–∫–∏ (–æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ break)
  maxChainToday:      number,          // –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –∑–∞ –¥–µ–Ω—å
  score:              number,          // –≤–∑–≤–µ—à–µ–Ω–Ω—ã–π —Å–∫–æ—Ä (—Å—É–º–º–∞ –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤)
  breaks:             BreakInfo[],     // —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏
  state:              CascadeState,    // —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  momentumScore:      number,          // 0..1 (score / MOMENTUM_TARGET)
  postTrainingWindow: boolean,         // true = 2—á –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
  message:            { short: string }, // –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  nextStepHint:       string | null    // –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
}
```

---

## 6. –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏

| –°–æ—Å—Ç–æ—è–Ω–∏–µ  | –ò–∫–æ–Ω–∫–∞ | –¶–≤–µ—Ç      | –£—Å–ª–æ–≤–∏–µ               | –õ–µ–π–±–ª         |
| ---------- | ------ | --------- | --------------------- | ------------- |
| `EMPTY`    | üåÖ     | `#94a3b8` | –ù–µ—Ç —Å–æ–±—ã—Ç–∏–π           | –ù–∞—á–Ω–∏ –¥–µ–Ω—å    |
| `BUILDING` | üîó     | `#3b82f6` | score ‚â• 1.5, –Ω–µ—Ç brk  | –ù–∞—á–∞–ª–æ        |
| `GROWING`  | ‚ö°     | `#22c55e` | score ‚â• 4.0, –Ω–µ—Ç brk  | –ö–∞—Å–∫–∞–¥ —Ä–∞—Å—Ç—ë—Ç |
| `STRONG`   | üî•     | `#eab308` | score ‚â• 7.0, –Ω–µ—Ç brk  | –ú–æ—â–Ω—ã–π –¥–µ–Ω—å   |
| `BROKEN`   | üí™     | `#f59e0b` | hasBreak && chain = 0 | –ü–∞—É–∑–∞         |
| `RECOVERY` | üå±     | `#0ea5e9` | hasBreak && chain > 0 | –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ   |

**–ú–∞—Ç—Ä–∏—Ü–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:**

```
(–Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π)           ‚Üí EMPTY
EMPTY + –ø–æ–∑–∏—Ç–∏–≤         ‚Üí BUILDING
BUILDING + –ø–æ–∑–∏—Ç–∏–≤√ó2    ‚Üí GROWING
GROWING + –ø–æ–∑–∏—Ç–∏–≤√ó2     ‚Üí STRONG
–ª—é–±–æ–µ + –Ω–µ–≥–∞—Ç–∏–≤         ‚Üí BROKEN
BROKEN + –ø–æ–∑–∏—Ç–∏–≤        ‚Üí RECOVERY
RECOVERY + –µ—â—ë –ø–æ–∑–∏—Ç–∏–≤  ‚Üí RECOVERY (chain —Ä–∞—Å—Ç—ë—Ç)
```

---

## 7. –ê–ª–≥–æ—Ä–∏—Ç–º —Ü–µ–ø–æ—á–∫–∏

```js
// –õ–∏–Ω–µ–π–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º events
chain = 0; maxChain = 0; breaks = [];

for event in sortedEvents:
    if event.positive:
        chain++
        maxChain = max(maxChain, chain)
    else:
        if chain > 0:
            breaks.push({ time, reason, chainBefore: chain })
        hasBreak = true
        chain = 0

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–®–ê–ì 13)
if events.length == 0         ‚Üí EMPTY
elif hasBreak && chain > 0    ‚Üí RECOVERY
elif hasBreak && chain == 0   ‚Üí BROKEN
elif score >= 7.0             ‚Üí STRONG
elif score >= 4.0             ‚Üí GROWING
elif score >= 1.5             ‚Üí BUILDING
```

**Momentum score (–®–ê–ì 16):**

```
momentumScore = min(1.0, max(0, score) / MOMENTUM_TARGET)  // MOMENTUM_TARGET = 10.0
```

> –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å 10 ‚Äî —Ü–µ–ª—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –¥–Ω—è: –≤—Å–µ 10 —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤ –ø–ª—é—Å–µ

---

## 8. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React

### ChainDots

```
props: { events: CascadeEvent[] }
```

–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Ü–≤–µ—Ç–Ω—ã—Ö –∫—Ä—É–∂–∫–æ–≤ —Å —è–≤–Ω—ã–º–∏ connector-—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤ DOM:

- `.cascade-dot--{type}` ‚Äî —Ü–≤–µ—Ç –ø–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è
- `.cascade-dot--break` ‚Äî —Å–µ—Ä—ã–π —Å –ø—É–Ω–∫—Ç–∏—Ä–æ–º –¥–ª—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- `.cascade-dot--latest` ‚Äî –ø—É–ª—å—Å-–∞–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–º –∑–≤–µ–Ω–µ
- `.cascade-dot-connector` ‚Äî –ª–∏–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
- `.cascade-dot-connector--broken` ‚Äî –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è —Ä–∞–∑—Ä—ã–≤–∞

**–¶–≤–µ—Ç–∞ —Ç–æ—á–µ–∫:** | –¢–∏–ø | –¶–≤–µ—Ç | |-----|------| | `meal` | `#22c55e` –∑–µ–ª—ë–Ω—ã–π | |
`training` | `#f59e0b` —è–Ω—Ç–∞—Ä—å | | `household` | `#f97316` –æ—Ä–∞–Ω–∂–µ–≤—ã–π | | `sleep`
| `#6366f1` –∏–Ω–¥–∏–≥–æ | | `checkin` | `#14b8a6` —Ç–∏–ª–æ–≤—ã–π | | `measurements` |
`#ec4899` —Ä–æ–∑–æ–≤—ã–π | | `steps` | `#8b5cf6` —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π | | `supplements` |
`#0ea5e9` –≥–æ–ª—É–±–æ–π | | _(break)_ | `#d1d5db` —Å–µ—Ä—ã–π |

### CascadeTimeline

```
props: { events: CascadeEvent[], nextStepHint: string | null }
```

–†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π —Ç–∞–π–º–ª–∞–π–Ω —Å –∏–∫–æ–Ω–∫–æ–π, –≤—Ä–µ–º–µ–Ω–µ–º, –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –±–µ–π–¥–∂–µ–º `‚úì` /
`breakReason`.  
–í –∫–æ–Ω—Ü–µ ‚Äî hint `üí° ...`.

### CascadeCard (–≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

```
props: cascadeState (–≤—Å–µ –ø–æ–ª—è –∏–∑ computeCascadeState)
```

**Standalone** ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `HEYS.ExpandableCard`. –£–ø—Ä–∞–≤–ª—è–µ—Ç expanded —á–µ—Ä–µ–∑
`React.useState(false)`.

**–°–≤—ë—Ä–Ω—É—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**

```
[üîó icon] [–í–∞—à –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –∫–∞—Å–∫–∞–¥] [3 ‚ö° badge]
 –¢—Ä–∏ —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥—Ä—è–¥ ‚Äî —Ç—ã –Ω–∞–±–∏—Ä–∞–µ—à—å —Ö–æ–¥.
 ‚óè ‚Äî ‚óè ‚Äî ‚óè (ChainDots)
 [======-------] (progress bar)                 [‚Ä∫]
```

**–†–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**

```
[üîó icon] [–í–∞—à –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –∫–∞—Å–∫–∞–¥] [3 ‚ö° badge]
 –¢—Ä–∏ —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥—Ä—è–¥ ‚Äî —Ç—ã –Ω–∞–±–∏—Ä–∞–µ—à—å —Ö–æ–¥.
 ‚óè ‚Äî ‚óè ‚Äî ‚óè (ChainDots)
 [======-------] (progress bar)                 [‚Äπ]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 ‚óè ‚Äî ‚óè ‚Äî ‚óè (ChainDots full)
 üåÖ  08:15  –†–∞–Ω–Ω–∏–π –∑–∞–≤—Ç—Ä–∞–∫                      ‚úì
 ü•ó  09:00  –ó–∞–≤—Ç—Ä–∞–∫                             ‚úì
 üí™  10:30  –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ 45 –º–∏–Ω                   ‚úì
 üí° –í—ã–ø–µ–π –≤–æ–¥—ã ‚Äî —Ç—ã –µ—â—ë –Ω–µ –Ω–∞ 50% –Ω–æ—Ä–º—ã
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 ‚ö†Ô∏è –†–∞–∑—Ä—ã–≤–æ–≤ —Ü–µ–ø–æ—á–∫–∏ —Å–µ–≥–æ–¥–Ω—è: 0
 üèÜ –ú–∞–∫—Å. —Ü–µ–ø–æ—á–∫–∞: 3    ‚ö° –ò–º–ø—É–ª—å—Å: 43%
```

---

## 9. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–í—ã–±–æ—Ä –ø—É–ª–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ post-training window.  
–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ —á–∞—Å—É –¥–Ω—è (`hour % poolSize`), –Ω–µ
–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∞—Ö.

### BUILDING (chain 1‚Äì2)

- ¬´–•–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ. –ü–µ—Ä–≤—ã–π —à–∞–≥ —É–∂–µ —Å–¥–µ–ª–∞–Ω.¬ª
- ¬´–ù–∞—á–∞–ª–æ –ø–æ–ª–æ–∂–µ–Ω–æ ‚Äî –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å, –∫–æ–≥–¥–∞ —É–∂–µ –Ω–∞—á–∞–ª.¬ª

### GROWING (chain 3‚Äì4)

- ¬´–¢—Ä–∏ —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥—Ä—è–¥ ‚Äî —Ç—ã –Ω–∞–±–∏—Ä–∞–µ—à—å —Ö–æ–¥.¬ª
- ¬´–•–æ—Ä–æ—à–∏–π —Ä–∏—Ç–º. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –¥–∞—ë—Ç—Å—è –ª–µ–≥—á–µ.¬ª
- ¬´–ö–æ–≥–¥–∞ –≤—Å—ë —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ—â–µ.¬ª

### STRONG (chain 5+)

- ¬´–ú–æ—â–Ω—ã–π –¥–µ–Ω—å. –ö–æ–≥–¥–∞ —Å—Ç–æ–ª—å–∫–æ —Å–¥–µ–ª–∞–Ω–æ ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ.¬ª
- ¬´–°–µ–≥–æ–¥–Ω—è –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç. –¢–∞–∫–∏–µ –¥–Ω–∏ —Å—Ç—Ä–æ—è—Ç –ø—Ä–∏–≤—ã—á–∫–∏.¬ª
- ¬´–ü—è—Ç—å+ —Ä–µ—à–µ–Ω–∏–π ‚Äî —ç—Ç–æ —É–∂–µ —Å–∏—Å—Ç–µ–º–∞. –¢–µ–±–µ –ø—Ä–æ—â–µ –¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä.¬ª

### BROKEN (—Ü–µ–ø–æ—á–∫–∞ –ø—Ä–µ—Ä–≤–∞–ª–∞—Å—å)

- ¬´–û–¥–∏–Ω —à–∞–≥ –≤ —Å—Ç–æ—Ä–æ–Ω—É ‚Äî –Ω–µ –∫–æ–Ω–µ—Ü –ø—É—Ç–∏. –°–ª–µ–¥—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ —É–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å
  —Ö–æ—Ä–æ—à–∏–º.¬ª
- ¬´–ù–µ –≤—Å—ë –∏–ª–∏ –Ω–∏—á–µ–≥–æ. –î–∞–∂–µ 70% —Ö–æ—Ä–æ—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å.¬ª
- ¬´–¶–µ–ø–æ—á–∫–∞ –ø—Ä–µ—Ä–≤–∞–ª–∞—Å—å? –ù–∞—á–Ω–∏ –Ω–æ–≤—É—é. –ö–∞–∂–¥–∞—è —Ü–µ–ø–æ—á–∫–∞ –∏–∑ 2+ –∑–≤–µ–Ω—å–µ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç.¬ª

### RECOVERY (–≤–æ–∑–≤—Ä–∞—Ç –ø–æ—Å–ª–µ —Å—Ä—ã–≤–∞)

- ¬´–ù–æ–≤–∞—è —Ü–µ–ø–æ—á–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è. –≠—Ç–æ –≤–∞–∂–Ω–µ–µ, —á–µ–º –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–º.¬ª
- ¬´–¢—ã –≤–µ—Ä–Ω—É–ª—Å—è –≤ —Ä–∏—Ç–º. –ü–µ—Ä–≤—ã–π —à–∞–≥ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã ‚Äî —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π.¬ª
- ¬´–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ä—ã–≤–∞ –∫–∞–∂–¥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ. –¢—ã —É–∂–µ –Ω–∞ –ø—É—Ç–∏.¬ª

### ANTI_LICENSING (2—á –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –ª—é–±—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)

- ¬´–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî —Å–∞–º–∞ –ø–æ —Å–µ–±–µ –ø–æ–±–µ–¥–∞. –ù–µ ¬´–Ω–∞–≥—Ä–∞–∂–¥–∞–π¬ª —Å–µ–±—è –µ–¥–æ–π.¬ª
- ¬´–ü–æ—Å–ª–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–º –ª—É—á—à–µ –≤—Å–µ–≥–æ —É—Å–≤–æ–∏—Ç –±–µ–ª–æ–∫ –∏ –æ–≤–æ—â–∏.¬ª
- ¬´–ö–ª–∞—Å—Å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞! –í—ã–±–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–æ, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.¬ª

> **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:** ANTI_LICENSING –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ BROKEN –∏ EMPTY.

### Next step hint (–ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞)

–ü—Ä–∞–≤–∏–ª–æ –≤—ã–±–æ—Ä–∞ (–ø–µ—Ä–≤–æ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ):

| –£—Å–ª–æ–≤–∏–µ                   | Hint                                                |
| ------------------------- | --------------------------------------------------- |
| –ù–µ—Ç –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏, —á–∞—Å < 20 | ¬´–î–æ–±–∞–≤—å –ø–µ—Ä–≤—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏¬ª                          |
| –ù–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, —á–∞—Å 6‚Äì20  | ¬´–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ –ø—Ä–æ–≥—É–ª–∫–∞ –¥–æ–±–∞–≤—è—Ç –∑–≤–µ–Ω–æ –≤ —Ü–µ–ø–æ—á–∫—É¬ª   |
| –ù–µ—Ç —á–µ–∫-–∏–Ω–∞, —á–∞—Å < 11     | ¬´–í–∑–≤–µ—Å—å—Å—è —É—Ç—Ä–æ–º ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å¬ª |
| –ù–µ—Ç –∑–∞–º–µ—Ä–æ–≤, —á–∞—Å < 11     | ¬´–°–Ω–∏–º–∏ –∑–∞–º–µ—Ä—ã ‚Äî —ç—Ç–æ –ø–æ–≤—ã—Å–∏—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞¬ª       |
| –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Å–Ω–∞            | ¬´–ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π –≤—Ä–µ–º—è –∑–∞—Å—ã–ø–∞–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–Ω–∞¬ª        |
| chain > 0, —á–∞—Å < 21       | ¬´–ü—Ä–æ–¥–æ–ª–∂–∞–π ‚Äî —Å–ª–µ–¥—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ —É—Å–∏–ª–∏—Ç —Ü–µ–ø–æ—á–∫—É¬ª      |

---

## 10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –¢–æ—á–∫–∞ –≤—ã–∑–æ–≤–∞ ‚Äî `apps/web/heys_day_diary_section.js`

```js
// –í–Ω—É—Ç—Ä–∏ renderDiarySection(), –ø–æ—Å–ª–µ mealRecCard:
const cascadeCard = app.CascadeCard?.renderCard?.({
    React, day, prof, pIndex, dayTot, normAbs
}) || null;

// –í return React.createElement(React.Fragment, ...):
goalProgressBar,
cascadeCard,      // ‚Üê –ó–î–ï–°–¨, –º–µ–∂–¥—É goalProgressBar –∏ refeedCard
refeedCard,
mealRecCard,
...
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ ‚Äî `apps/web/index.html`

```html
<script defer src="heys_cascade_card_v1.js?v=1"></script>
<!-- –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ heys_day_diary_section.js -->
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS ‚Äî `apps/web/styles/main.css`

```css
@import url('./modules/740-cascade-card.css');
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `renderCard`

```js
// –§—É–Ω–∫—Ü–∏—è renderCard –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É –µ—Å–ª–∏:
// 1. day = null
// 2. –ù–µ—Ç –Ω–∏–∫–∞–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (meals, trainings, water, steps ‚Äî –≤—Å–µ –ø—É—Å—Ç—ã–µ)
// 3. computeCascadeState –≤–µ—Ä–Ω—É–ª state = EMPTY
// –í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç React.createElement(CascadeCard, cascadeState)
```

---

## 11. CSS –∏ —Å—Ç–∏–ª–∏

–§–∞–π–ª: `apps/web/styles/modules/740-cascade-card.css` (430 —Å—Ç—Ä–æ–∫)

### BEM-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
.cascade-card                     ‚Äî –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç
.cascade-card--{state}            ‚Äî –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è (--building, --strong, etc.)
‚îÇ
‚îú‚îÄ‚îÄ .cascade-card__header         ‚Äî –∫–Ω–æ–ø–∫–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .cascade-card__title-row  ‚Äî —Å—Ç—Ä–æ–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-card__icon   ‚Äî —ç–º–æ–¥–∑–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-card__title  ‚Äî ¬´–í–∞—à –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –∫–∞—Å–∫–∞–¥¬ª
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .cascade-card__badge  ‚Äî —Å—á—ë—Ç—á–∏–∫ ¬´3 ‚ö°¬ª
‚îÇ   ‚îú‚îÄ‚îÄ .cascade-card__subtitle   ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .cascade-card__hint       ‚Äî anti-licensing —Ö–∏–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ .cascade-chain-dots       ‚Äî —Ü–µ–ø–æ—á–∫–∞ —Ç–æ—á–µ–∫ (—Å–≤—ë—Ä–Ω—É—Ç–æ–µ)
‚îÇ   ‚îú‚îÄ‚îÄ .cascade-card__progress-track
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .cascade-card__progress-bar
‚îÇ   ‚îî‚îÄ‚îÄ .cascade-card__chevron    ‚Äî ¬´‚Ä∫¬ª / ¬´‚Äπ¬ª
‚îÇ       ‚îî‚îÄ‚îÄ --open
‚îÇ
‚îî‚îÄ‚îÄ .cascade-card__body           ‚Äî —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ .cascade-chain-dots       ‚Äî —Ü–µ–ø–æ—á–∫–∞ —Ç–æ—á–µ–∫ (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è)
    ‚îú‚îÄ‚îÄ .cascade-timeline         ‚Äî —Ç–∞–π–º–ª–∞–π–Ω
    ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-timeline-row--positive
    ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-timeline-row--negative
    ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-timeline-icon
    ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-timeline-time
    ‚îÇ   ‚îú‚îÄ‚îÄ .cascade-timeline-label
    ‚îÇ   ‚îî‚îÄ‚îÄ .cascade-timeline-badge
    ‚îú‚îÄ‚îÄ .cascade-next-step        ‚Äî hint üí°
    ‚îú‚îÄ‚îÄ .cascade-card__breaks-info
    ‚îî‚îÄ‚îÄ .cascade-card__stats
        ‚îî‚îÄ‚îÄ .cascade-card__stat
```

### Chain dots

```
.cascade-chain-dots               ‚Äî flex-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, overflow-x: auto
‚îú‚îÄ‚îÄ .cascade-dot                  ‚Äî 12√ó12px –∫—Ä—É–∂–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ --meal / --training / --household / --sleep / --checkin / --measurements / --steps / --supplements / --insulin ‚Äî —Ü–≤–µ—Ç –ø–æ —Ç–∏–ø—É
‚îÇ   ‚îú‚îÄ‚îÄ --break                   ‚Äî —Å–µ—Ä—ã–π, dashed border
‚îÇ   ‚îî‚îÄ‚îÄ --latest                  ‚Äî –ø—É–ª—å—Å @keyframes cascadePulse
‚îî‚îÄ‚îÄ .cascade-dot-connector        ‚Äî 12px –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è
    ‚îî‚îÄ‚îÄ --broken                  ‚Äî dashed border-top (—Ä–∞–∑—Ä—ã–≤)
```

### –ê–Ω–∏–º–∞—Ü–∏—è

```css
@keyframes cascadePulse {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.35);
  }
  50% {
    box-shadow: 0 0 0 5px rgba(34, 197, 94, 0);
  }
}
/* –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ .cascade-dot--latest:not(.cascade-dot--break) */
```

### Dark mode

–í—Å–µ –∫–ª–∞—Å—Å—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ–¥ `[data-theme="dark"]`.

---

## 12. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

**–§–∏–ª—å—Ç—Ä –≤ –∫–æ–Ω—Å–æ–ª–∏:** `[HEYS.cascade]`

–í—Å–µ –ª–æ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `console.info` (–∏–ª–∏ `console.warn` –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π).

### –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –ª–æ–≥–æ–≤

| –≠–º–æ–¥–∑–∏              | –õ–æ–≥                           | –ö–æ–≥–¥–∞                                  |
| ------------------- | ----------------------------- | -------------------------------------- |
| `‚îÄ‚îÄ‚îÄ START ‚îÄ‚îÄ‚îÄ`     | computeCascadeState START     | –ù–∞—á–∞–ª–æ —Ä–∞—Å—á—ë—Ç–∞                         |
| `üì•`                | Input data                    | –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã                      |
| `ÔøΩÔ∏è [MEAL N/M]`     | –î–∞–Ω–Ω—ã–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏—ë–º–∞         | –∫–∫–∞–ª, –∫—É–º—É–ª—è—Ç–∏–≤, ratio, breakReason    |
| `üí™ [TRAINING N/M]` | –î–∞–Ω–Ω—ã–µ –∫–∞–∂–¥–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏      | –≤—Ä–µ–º—è, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, streak            |
| `üè† [EVENT]`        | Household event added         | –±—ã—Ç–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞           |
| `üè†`                | No household data, streak‚â§2   | –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, —à—Ç—Ä–∞—Ñ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω          |
| `üí™ [EVENT]`        | Training event added          | —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞                   |
| `üí™`                | No trainings today, streak‚â§2  | –Ω–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, —à—Ç—Ä–∞—Ñ –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω      |
| `üò¥ [EVENT]`        | Sleep onset/duration event    | —Å–æ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–æ–±—ã—Ç–∏—è                 |
| `üò¥`                | No sleepStart / No sleepHours | –¥–∞–Ω–Ω—ã–µ —Å–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, —à–∞–≥ –ø—Ä–æ–ø—É—â–µ–Ω   |
| `üö∂ [EVENT]`        | Steps event added             | —à–∞–≥–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã                         |
| `üö∂`                | No steps data                 | –¥–∞–Ω–Ω—ã–µ —à–∞–≥–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, —à–∞–≥ –ø—Ä–æ–ø—É—â–µ–Ω |
| `‚öñÔ∏è [EVENT]`        | Checkin (weight) event added  | –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ                  |
| `‚öñÔ∏è`                | No weight checkin today       | –Ω–µ—Ç –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è, —à–∞–≥ –ø—Ä–æ–ø—É—â–µ–Ω          |
| `üìè [EVENT]`        | Measurements event added      | –∑–∞–º–µ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã                       |
| `üíä [EVENT]`        | Supplements event added       | –¥–æ–±–∞–≤–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã                      |
| `üíä`                | No supplement plan configured | –ø–ª–∞–Ω –¥–æ–±–∞–≤–æ–∫ –Ω–µ –∑–∞–¥–∞–Ω, —à–∞–≥ –ø—Ä–æ–ø—É—â–µ–Ω    |
| `‚ö° [EVENT]`        | InsulinWave event added       | InsulinWave –¥–æ–±–∞–≤–ª–µ–Ω                   |
| `‚ö°`                | InsulinWave skipped           | –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω      |
| `üìã`                | Events sorted (N total)       | —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π               |
| `‚õìÔ∏è`                | Chain algorithm trace         | —Ç—Ä–µ–π—Å –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ —Ü–µ–ø–æ—á–∫–∏             |
| `üîó`                | Chain result                  | –∏—Ç–æ–≥: chain, maxChain, breaks[]        |
| `üè∑Ô∏è`                | State determination           | –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è                |
| `‚è∞`                | Post-training window          | –∞–∫—Ç–∏–≤–Ω–æ/–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç            |
| `üí¨`                | Message selected              | –ø—É–ª, –∏–Ω–¥–µ–∫—Å, —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è           |
| `üìä`                | Momentum score                | —Ñ–æ—Ä–º—É–ª–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç                    |
| `üí°`                | Next step hint                | –∫–∞–∫–æ–π hint –∏ –ø–æ—á–µ–º—É                    |
| `‚úÖ DONE`           | computeCascadeState DONE      | –∏—Ç–æ–≥–æ–≤—ã–π –æ–±—ä–µ–∫—Ç + elapsed –º—Å           |
| `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`     | —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å                   | –∫–æ–Ω–µ—Ü —Ä–∞—Å—á—ë—Ç–∞                          |
| `üìå`                | renderCard called             | –≤—ã–∑–æ–≤ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞                      |
| `‚è≠Ô∏è`                | No activity / State=EMPTY     | –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è               |
| `üß† Cache MISS`     | recompute triggered           | –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –ø–µ—Ä–µ—Å—á—ë—Ç    |
| `‚ö° Cache HIT`      | compute skipped               | –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –∫—ç—à –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω  |
| `üöÄ`                | Rendering CascadeCard         | –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è                    |
| `üé®`                | CascadeCard render            | –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞               |
| `üîÑ`                | Toggle expanded               | —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ                     |
| `‚ö†Ô∏è`                | ExpandableCard not loaded     | –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (legacy guard)          |
| `‚úÖ Module loaded`  | –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è               | –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫—Ä–∏–ø—Ç–∞                   |

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏

```js
// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é:
HEYS.CascadeCard.computeCascadeState(
  HEYS.day,
  HEYS.dayTot,
  HEYS.normAbs,
  HEYS.prof,
  HEYS.pIndex,
);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é:
HEYS.CascadeCard.VERSION; // ‚Üí "2.0.0"

// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
HEYS.CascadeCard.STATES;

// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ñ–∏–≥ —Å–æ—Å—Ç–æ—è–Ω–∏–π:
HEYS.CascadeCard.STATE_CONFIG;

// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—É–ª—ã —Å–æ–æ–±—â–µ–Ω–∏–π:
HEYS.CascadeCard.MESSAGES;
```

---

## 13. API –º–æ–¥—É–ª—è

```js
HEYS.CascadeCard = {
  VERSION:             '2.0.0',
  STATES:              { EMPTY, BUILDING, GROWING, STRONG, BROKEN, RECOVERY },
  STATE_CONFIG:        { [state]: { icon, color, label } },
  MESSAGES:            { [poolKey]: [{ short }] },
  computeCascadeState: function(day, dayTot, normAbs, prof, pIndex) ‚Üí cascadeState,
  renderCard:          function({ day, dayTot, normAbs, prof, pIndex, React? }) ‚Üí ReactElement | null
}
```

### renderCard ‚Äî –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è                |
| --------- | ---------- | ----------------------------- |
| `day`     | **–¥–∞**     | `params.day` –∏–∑ diary section |
| `dayTot`  | –Ω–µ—Ç        | `params.dayTot`               |
| `normAbs` | –Ω–µ—Ç        | `params.normAbs`              |
| `prof`    | –Ω–µ—Ç        | `params.prof`                 |
| `pIndex`  | –Ω–µ—Ç        | `params.pIndex`               |
| `React`   | –Ω–µ—Ç        | –±–µ—Ä—ë—Ç—Å—è –∏–∑ `global.React`     |

### –£—Å–ª–æ–≤–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö renderCard –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null

1. `day` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω / null
2. –ù–µ—Ç –Ω–∏–∫–∞–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
   `meals.length === 0 && trainings.length === 0 && steps === 0 && householdMin === 0 && weightMorning === 0 && sleepStart === null && measurements === null && supplementsTaken === 0`
3. `computeCascadeState` –≤–µ—Ä–Ω—É–ª `state = 'EMPTY'`

---

## 14. –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

–ö–∞—Ä—Ç–æ—á–∫–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞** —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π React re-render:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–¥—É / —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É / –≤–æ–¥—É
  ‚Üí React state (day) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ DayTab
  ‚Üí DayTab re-render
  ‚Üí renderDiarySection() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ
  ‚Üí app.CascadeCard.renderCard({ day, ... }) –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
  ‚Üí computeCascadeState() ‚Äî —á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, 0 side effects
  ‚Üí CascadeCard —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –Ω–æ–≤—ã–º cascadeState
```

`computeCascadeState` ‚Äî **—á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è** (pure function):

- –ë–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ë–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~0.5‚Äì2 –º—Å (3‚Äì5 meals + 0‚Äì2 trainings)

**–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** (`expanded`) ‚Äî —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `React.useState`
–≤–Ω—É—Ç—Ä–∏ `CascadeCard`. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∞—Ö –ø–æ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω,
—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.

---

## 15. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä—É—á–Ω—É—é

| –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ                              | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç                            |
| --- | ------------------------------------- | ---------------------------------------------- |
| 1   | –û—Ç–∫—Ä—ã—Ç—å Day tab –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö            | –ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ—Ç                                   |
| 2   | –î–æ–±–∞–≤–∏—Ç—å 1 –ø—Ä–∏—ë–º –≤ –Ω–æ—Ä–º–µ              | BUILDING, ¬´–•–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ¬ª, score~1.0, 1 —Ç–æ—á–∫–∞ |
| 3   | –î–æ–±–∞–≤–∏—Ç—å 2-–π –ø—Ä–∏—ë–º –≤ –Ω–æ—Ä–º–µ            | BUILDING, 2 —Ç–æ—á–∫–∏, hint –ø–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ/—á–µ–∫-–∏–Ω—É  |
| 4   | –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É 45 –º–∏–Ω            | score —Ä–∞—Å—Ç—ë—Ç, GROWING –µ—Å–ª–∏ score‚â•4.0           |
| 5   | –°—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (< 2—á)         | ANTI_LICENSING —Å–æ–æ–±—â–µ–Ω–∏–µ                       |
| 6   | –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—ë–º —Å harm ‚â• 7             | BROKENüí™, —Ä–∞–∑—Ä—ã–≤ –ø—É–Ω–∫—Ç–∏—Ä–æ–º, anti-WTH —Å–æ–æ–±—â–µ–Ω–∏–µ |
| 7   | –î–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø—Ä–∏—ë–º   | RECOVERYüå±, –Ω–æ–≤–∞—è —Ç–æ—á–∫–∞, ¬´–ù–æ–≤–∞—è —Ü–µ–ø–æ—á–∫–∞¬ª       |
| 8   | –í–∑–≤–µ—Å–∏—Ç—å—Å—è —É—Ç—Ä–æ–º (weightMorning)      | checkin —Ç–æ—á–∫–∞ +0.5 –≤ score                     |
| 9   | –ó–∞–ø–∏—Å–∞—Ç—å –≤—Ä–µ–º—è —Å–Ω–∞ (sleepStart)       | sleep onset —Ç–æ—á–∫–∞, bonus/penalty –∑–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ |
| 10  | 5+ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∏–ª–∏ score ‚â• 7.0 | STRONGüî•, ¬´–ú–æ—â–Ω—ã–π –¥–µ–Ω—å¬ª, –∑–æ–ª–æ—Ç–æ                |
| 11  | –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É                    | –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–ª–∞–π–Ω —Å —Å–æ–±—ã—Ç–∏—è–º–∏           |
| 12  | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ dark mode                 | –í—Å–µ —Ü–≤–µ—Ç–∞ —á–∏—Ç–∞—é—Ç—Å—è                             |
| 13  | –ö–æ–Ω—Å–æ–ª—å ‚Üí —Ñ–∏–ª—å—Ç—Ä `[HEYS.cascade]`     | –í—Å—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞; –∫–∞–∂–¥—ã–π –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π —à–∞–≥ –≤–∏–¥–µ–Ω    |

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```js
// –ü—Ä—è–º–æ–π —Ç–µ—Å—Ç –¥–≤–∏–∂–∫–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
HEYS.CascadeCard.computeCascadeState(
  {
    meals: [
      { time: '08:00', items: [] },
      { time: '12:30', items: [] },
    ],
    trainings: [{ time: '10:00', duration: 45 }],
    steps: 5000,
    householdMin: 20,
    weightMorning: 75.3,
    sleep: { start: '23:00', hoursTotal: 7.5 },
    measurements: { waist: 80 },
    supplementsTaken: 2,
    supplementsPlanned: 3,
  },
  {},
  { kcal: 2000 },
  { stepsGoal: 10000 },
  null,
);
// –û–∂–∏–¥–∞–µ–º–æ: state=GROWING –∏–ª–∏ STRONG, score~5-8, –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π –≤ —Ü–µ–ø–æ—á–∫–µ
```

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞       | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                                                                                                                                                                                                                                                                                 |
| ------ | ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| v1.0.0 | 2026-02-19 | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `HEYS.ExpandableCard`. –ù–∞–∑–≤–∞–Ω–∏–µ ¬´–¢–≤–æ–π –∏–º–ø—É–ª—å—Å —Å–µ–≥–æ–¥–Ω—è¬ª                                                                                                                                                                                                                        |
| v1.1.0 | 2026-02-19 | Standalone –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–±–µ–∑ `ExpandableCard`). –î–µ—Ç–∞–ª—å–Ω–æ–µ 12-—à–∞–≥–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ ‚Üí ¬´–í–∞—à –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –∫–∞—Å–∫–∞–¥¬ª. –Ø–≤–Ω—ã–µ DOM-–∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –≤–º–µ—Å—Ç–æ CSS `::before`                                                                                                                                     |
| v1.2.1 | 2026-02-19 | Decision chain visualization —É–ª—É—á—à–µ–Ω–∏—è. 816 LOC                                                                                                                                                                                                                                                           |
| v2.0.0 | 2026-02-19 | 10-—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞. 17-—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º. –ù–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π: household, sleep, checkin, measurements, supplements, insulin. EVENT_WEIGHTS —Å–∏—Å—Ç–µ–º–∞. Score-based —Å–æ—Å—Ç–æ—è–Ω–∏—è (BUILDING‚â•1.5, GROWING‚â•4.0, STRONG‚â•7.0). MOMENTUM_TARGET=10. –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤. ~1195 LOC |
