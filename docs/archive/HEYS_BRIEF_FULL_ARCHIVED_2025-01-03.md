# HEYS โ ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

> **ะะตััะธั:** v4.2  
> **ะะฐัะฐ ะพะฑะฝะพะฒะปะตะฝะธั:** 2025-01-03  
> **ะกัะฐััั:** ๐ก SOFT LAUNCH โ ัะตัะฒะธัั ัะฐะฑะพัะฐัั, ะพะถะธะดะฐะตััั ะฎKassa

---

## ะะฐะบ ะฟะพะปัะทะพะฒะฐัััั ััะธะผ ะดะพะบัะผะตะฝัะพะผ

- ะญัะพ **ะตะดะธะฝััะฒะตะฝะฝัะน ะธััะพัะฝะธะบ ะธััะธะฝั** ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ ะฟัะพะตะบัะฐ.
- ะกะพะดะตัะถะธั ะฒัะต ัะปะพะธ: Layer 0 (ะพะฟะตัะฐัะธะพะฝะบะฐ), Layer 1 (ะฟัะพะดัะบั), Layer 2
  (ัะตัะฝะธะบะฐ).
- ะะปั AI-ะฐะณะตะฝัะพะฒ: ัะฐะทะผะตั ะดะพะบัะผะตะฝัะฐ (~1800 ัััะพะบ) ะฝะต ะฟัะพะฑะปะตะผะฐ.

---

## ๐ ะะฐะฒะธะณะฐัะธั ะฟะพ ะดะพะบัะผะตะฝัั

| ะะปะพะบ          | ะะฐะทะฝะฐัะตะฝะธะต                                  | ะัััััะน ะฟะตัะตัะพะด                                |
| ------------- | ------------------------------------------- | ---------------------------------------------- |
| **ะงะะกะขะฌ I**   | ะะธะทะฝะตั-ัะดัะพ (ััะพ ะฟัะพะดะฐัะผ, ะบะพะผั, ะทะฐ ัะบะพะปัะบะพ) | [โ ะกััั](#ัะฐััั-i-ะฑะธะทะฝะตั-ัะดัะพ)                 |
| **ะงะะกะขะฌ II**  | ะะฟะตัะฐัะธะพะฝะบะฐ (SLA, ะฟัะพัะพะบะพะปั, ัะธัะผ)          | [โ ะะฟะตัะฐัะธะพะฝะบะฐ](#ัะฐััั-ii-ะพะฟะตัะฐัะธะพะฝะฝะฐั-ะผะพะดะตะปั) |
| **ะงะะกะขะฌ III** | ะัะพะดัะบั (UI, ัะปะพั, ัะธัะธ)                    | [โ ะัะพะดัะบั](#ัะฐััั-iii-ะฟัะพะดัะบั-ะธ-ะธะฝัะตััะตะนั)    |
| **ะงะะกะขะฌ IV**  | ะฎัะธะดะธะบะฐ ะธ ะฑะตะทะพะฟะฐัะฝะพััั                      | [โ Legal](#ัะฐััั-iv-ััะธะดะธะบะฐ-ะธ-ะฑะตะทะพะฟะฐัะฝะพััั)    |
| **ะงะะกะขะฌ V**   | ะกัะฐััั ะณะพัะพะฒะฝะพััะธ (ัะตะบะปะธัั ะทะฐะฟััะบะฐ)         | [โ ะกัะฐััั](#ัะฐััั-v-ััะฐััั-ะณะพัะพะฒะฝะพััะธ)         |
| **ะงะะกะขะฌ VI**  | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ (ะบะพะด โ ะฑะธะทะฝะตั)          | [โ ะขะตัะฝะธะบะฐ](#ัะฐััั-vi-ัะตัะฝะธัะตัะบะฐั-ัะฒัะทะบะฐ)      |

**ะะพะธัะบ ะฟะพ ะผะฐัะบะตัะฐะผ:** `[BIZ]` ะฑะธะทะฝะตั, `[TECH]` ัะตัะฝะธะบะฐ, `[OPS]` ะพะฟะตัะฐัะธะพะฝะบะฐ,
`[LEGAL]` ััะธะดะธะบะฐ, `[READY]` ะณะพัะพะฒะพ ะบ production

---

## โ๏ธ ะะะะขะะงะะกะะะ ะะขะะะซะขะซะ ะะะะะะกะซ

### 1. โ ะะฝััะฐััััะบัััะฐ ะะค โ ะะะจะะะ

**ะัะพะฑะปะตะผะฐ:** Supabase (ะะตัะผะฐะฝะธั) ะฝะฐัััะฐะปะฐ 152-ะคะ ั.5 ัั.18 โ ะฟะตัะฒะธัะฝะพะต ััะฐะฝะตะฝะธะต
ะะะฝ ะณัะฐะถะดะฐะฝ ะะค ะดะพะปะถะฝะพ ะฑััั ะฒ ะะค.

**ะะตัะตะฝะธะต: Yandex.Cloud PostgreSQL**

- [x] ะะตัะตะตะทะด ะฝะฐ ัะพััะธะนัะบะธะน Postgres (ะฏะฝะดะตะบั.ะะฑะปะฐะบะพ) โ **ะะซะะะะะะะ 2025-12-20**
- ะฅะพัั: `rc1b-obkgs83tnrd6a2m3.mdb.yandexcloud.net`
- ะะฐะทะฐ: `heys_production`
- PostgreSQL 16.10, SSL verify-full
- ะะตะณะธะพะฝ: ะะพััะธั (ru-central1-b)

**ะะธะณัะฐัะธั ะดะฐะฝะฝัั:**

| ะขะฐะฑะปะธัะฐ         | ะะฐะฟะธัะตะน | ะกัะฐััั |
| --------------- | ------- | ------ |
| clients         | 2       | โ     |
| consents        | 4       | โ     |
| shared_products | 272     | โ     |
| client_kv_store | 235     | โ     |
| **ะัะตะณะพ**       | **513** | โ     |

### 2. โ ะขัะฐะฝัะณัะฐะฝะธัะฝะฐั ะฟะตัะตะดะฐัะฐ โ ะะะข (ะฒัะต ะพัะบะปััะตะฝะพ)

**ะกัะฐััั (ะพะฑะฝะพะฒะปะตะฝะพ 2025-12-24):**

- [x] GA4 โ **ะะขะะะฎะงะะ** (`GA4_ID = null` ะฒ `layout.tsx`)
- [x] Meta Pixel โ **ะะขะะะฎะงะะ** (`META_PIXEL_ID = null`)
- [x] Telegram ัะฒะตะดะพะผะปะตะฝะธั โ **ะผะธะฝะธะผะธะทะธัะพะฒะฐะฝั** (ัะพะปัะบะพ `lead_id`, ะฑะตะท ะะะฝ)

**ะะปั ะฒะบะปััะตะฝะธั ะฐะฝะฐะปะธัะธะบะธ ะฟะพััะตะฑัะตััั:**

1. ะฃะฒะตะดะพะผะปะตะฝะธะต ะะะ ะดะพ ะฝะฐัะฐะปะฐ ะฟะตัะตะดะฐัะธ (ัั.12 152-ะคะ)
2. ะะฟะธัะฐะฝะธะต ะฒ ะะพะปะธัะธะบะต: ะบะฐะบะธะต ะดะฐะฝะฝัะต ะธ ะบัะดะฐ ะฟะตัะตะดะฐัััั
3. ะฏะฒะฝะพะต ัะพะณะปะฐัะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐ ะฟะตัะตะดะฐัั
4. ะกะตัะฒะตั-ัะฐะนะด ะฐะฝะฐะปะธัะธะบะฐ (Yandex Metrica) ะบะฐะบ ะฐะปััะตัะฝะฐัะธะฒะฐ

### 3. ะะญะ ะดะปั health_data

ะกะฟะตัะบะฐัะตะณะพัะธั ััะตะฑัะตั **ะฟะธััะผะตะฝะฝะพะณะพ ัะพะณะปะฐัะธั** (ัั.10 152-ะคะ):

- [x] ะัะดะตะปัะฝัะน ัะฐะณ ะฒ UI (ะฝะต ะฟัะพััะพ ัะตะบะฑะพะบั) โ `ConsentScreen`
- [x] ะะญะ ัะตัะตะท ะฐััะตะฝัะธัะธะบะฐัะธั (ัะตะปะตัะพะฝ+PIN) + ะดะตะนััะฒะธะต ะฒ ะธะฝัะตััะตะนัะต (ะปะพะณะธััะตััั
      ะบะฐะบ `checkbox_after_auth`)
- [x] ะะพะณะธัะพะฒะฐะฝะธะต ัะฟะพัะพะฑะฐ ะฟะพะดะฟะธัะธ โ ัะฐะฑะปะธัะฐ `consents`
- [ ] SMS-ะฒะตัะธัะธะบะฐัะธั ะบะฐะบ ััะธะปะตะฝะธะต ะะญะ โ ะฟะปะฐะฝะธััะตััั ะฟัะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะธ (>50
      ะบะปะธะตะฝัะพะฒ)

### 4. โ Supabase SDK ะฟะพะปะฝะพัััั ัะดะฐะปัะฝ โ ะะซะะะะะะะ 2025-12-24 `[TECH]`

**ะัะพะฑะปะตะผะฐ:** Supabase JS SDK ะทะฐะณััะถะฐะปัั ั CDN ะธ ะผะพะณ ะพะฑัะฐัะฐัััั ะบ ัะตัะฒะตัะฐะผ
Supabase (ะะตัะผะฐะฝะธั), ะดะฐะถะต ะฟะพัะปะต ะผะธะณัะฐัะธะธ ะะ ะฒ ะะค โ ะฝะฐัััะตะฝะธะต ัั.18 ั.5 152-ะคะ.

**ะะตัะตะฝะธะต (ะพะฑะฝะพะฒะปะตะฝะพ 2025-12-24):**

- [x] ะัะต ะพะฟะตัะฐัะธะธ ั ะดะฐะฝะฝัะผะธ ะฟะตัะตะฒะตะดะตะฝั ะฝะฐ `YandexAPI` ะผะพะดัะปั
- [x] `heys_yandex_api_v1.js` โ ะตะดะธะฝัะน API ะบะปะธะตะฝั ะดะปั `api.heyslab.ru`
- [x] `cloud.client.from()` / `cloud.client.rpc()` โ **ะฑะพะปััะต ะฝะต ะธัะฟะพะปัะทััััั**
- [x] Legacy ัะฐะนะปั `apps/web/api/supabase/` โ **ัะดะฐะปะตะฝั**
- [x] `heys_storage_supabase_v1.js` โ `_directUrl = null` (ะพัะบะปัััะฝ)
- [x] **๐ Supabase JS CDN ัะดะฐะปัะฝ ะธะท `index.html`** โ SDK ะฑะพะปััะต ะะ ะทะฐะณััะถะฐะตััั!

**ะะฒัะพัะธะทะฐัะธั ะบััะฐัะพัะพะฒ:**

- ะะพะปััะต ะะ ะธัะฟะพะปัะทัะตั `Supabase auth`
- ะะตะฐะปะธะทะพะฒะฐะฝะพ: `heys-api-auth` (Yandex Cloud Function) + JWT
- ะญะฝะดะฟะพะธะฝั: `api.heyslab.ru/auth/*`

**ะััะฐะฒัะธะตัั ัะฟะพะผะธะฝะฐะฝะธั Supabase (ะฝะต ะฒะปะธััั ะฝะฐ runtime):**

- ะะพะผะผะตะฝัะฐัะธะธ ะฒ ะบะพะดะต (ะดะพะบัะผะตะฝัะฐัะธั)
- `.env.example` (ัะฐะฑะปะพะฝ)
- TypeScript ะผะพะดัะปะธ `src/lib/supabase/` (ะฝะต ะทะฐะณััะถะฐัััั ะฒ web app)

---

### 5. ะขะตัะฝะธัะตัะบะธะน ะดะพะปะณ (ะฐัะดะธั ะดะตะบะฐะฑัั 2025) `[TECH]`

**ะััะพัะฝะธะบ:** ะัะดะธั ะฐะฝะฐะปะธัะธัะตัะบะธั ะผะพะดัะปะตะน (~28,880 ัััะพะบ ะบะพะดะฐ)

| ะัะธะพัะธัะตั | ะัะพะฑะปะตะผะฐ              | ะะฟะธัะฐะฝะธะต                                                               | ะะตัะตะฝะธะต                                 | ะกัะฐััั |
| --------- | --------------------- | ---------------------------------------------------------------------- | --------------------------------------- | ------ |
| โ DONE   | **ะัะฑะปะธัะพะฒะฐะฝะธะต TDEE** | `heys_yesterday_verify_v1.js` ะธะผะตะป inline ัะฐัััั โ ัะธัะบ ัะฐััะธะฝััะพะฝะฐ    | ะะตะปะตะณะธัะพะฒะฐัั ะฒ `HEYS.TDEE.calculate()`  | โ     |
| โ DONE   | **Dead code**         | ะัะพะฒะตัะบะฐ ัะบัะฟะพััะพะฒ Phenotype/PredictiveInsights/MetabolicIntelligence  | ะะฝะฐะปะธะท ะฒัะฟะพะปะฝะตะฝ โ **ะฝะตั ะผัััะฒะพะณะพ ะบะพะดะฐ** | โ     |
| ๐ก LOW    | **ะะตะฐะบัะธะฒะฝัะน A/B**    | `heys_metabolic_intelligence_v1.js` ะธะผะตะตั A/B ัะตััั, ะฝะพ ะฝะต ัะฒัะทะฐะฝ ั UI | ะะบัะธะฒะธัะพะฒะฐัั variants A/B/C ะฒ UI (v2)   |        |

**ะะตะนััะฒะธั:**

- [x] ะะพะฝัะพะปะธะดะธัะพะฒะฐัั TDEE ัะฐััััั โ ะตะดะธะฝัะน ะธััะพัะฝะธะบ ะฟัะฐะฒะดั โ 2025-12-24
- [x] ะัะพะฒะตััะธ dead code ะฐะฝะฐะปะธะท โ 2025-12-24 โ **ะะะข ะผัััะฒะพะณะพ ะบะพะดะฐ**, ะฒัะต
      ัะบัะฟะพััั ะธัะฟะพะปัะทััััั
- [ ] ะกะฒัะทะฐัั A/B ัะตััั ั UI ะดะปั ัะบัะฟะตัะธะผะตะฝัะพะฒ
- [ ] ะะพะบัะผะตะฝัะธัะพะฒะฐัั ะฒ
      [ANALYTICS_AUDIT_2025-01.md](./ANALYTICS_AUDIT_2025-01.md)

### 5. โ ะะตัะตะตะทะด ั Vercel ะฝะฐ Yandex Cloud โ ะะะะะะจะะ `[TECH]` `[LEGAL]`

**ะัะพะฑะปะตะผะฐ:** API-ััะฝะบัะธะธ ะฝะฐ Vercel (rpc.js, rest.js, sms.js) **ะพะฑัะฐะฑะฐััะฒะฐะปะธ
ะะะฝ** ะฝะฐ ัะตัะฒะตัะฐั ะฒะฝะต ะะค (Frankfurt/USA). ะญัะพ ะฝะฐัััะฐะปะพ 152-ะคะ!

**ะกัะฐััั:** โ **ะะะะะะกะขะฌะฎ ะะะะะะจะะะ** (2025-12-24)

**ะขะตะบััะฐั ะฐััะธัะตะบัััะฐ (โ compliant):**

| ะะพะผะฟะพะฝะตะฝั         | ะะดะต                    | ะฅัะฐะฝะธั/ะพะฑัะฐะฑะฐััะฒะฐะตั ะะะฝ?     | ะกัะฐััั    |
| ----------------- | ---------------------- | ---------------------------- | --------- |
| PostgreSQL        | Yandex.Cloud           | โ ะฅัะฐะฝะธั                    | โ ะะตัะตะฝะพ |
| PWA (ััะฐัะธะบะฐ)     | Nginx VM โ S3          | โ ะะตั                       | โ ะะตัะตะฝะพ |
| Landing (ััะฐัะธะบะฐ) | Yandex CDN โ S3        | โ ะะตั                       | โ ะะตัะตะฝะพ |
| **API Functions** | Yandex Cloud Functions | โ **ะะฑัะฐะฑะฐััะฒะฐะตั**          | โ ะะตัะตะฝะพ |
| **SMS API**       | Yandex Cloud Functions | โ **ะะฑัะฐะฑะฐััะฒะฐะตั ัะตะปะตัะพะฝั** | โ ะะตัะตะฝะพ |
| **Landing API**   | Yandex Cloud Functions | โ **ะกะพััะฐะฝัะตั ะปะธะดั**        | โ ะะตัะตะฝะพ |

**ะััะธัะตะบัััะฐ (ะฟะพัะปะต ะผะธะณัะฐัะธะธ):**

| ะะพะผะฟะพะฝะตะฝั            | ะกะตัะฒะธั Yandex Cloud       | ะกัะพะธะผะพััั       | ะัะธะผะตัะฐะฝะธะต             |
| -------------------- | ------------------------- | --------------- | ---------------------- |
| **PWA ััะพะฝัะตะฝะด**     | Nginx VM + Object Storage | ~700 โฝ/ะผะตั      | VM ะดะตัะตะฒะปะต CDN ะดะปั PWA |
| **Landing ััะพะฝัะตะฝะด** | CDN + Object Storage      | ~300 โฝ/ะผะตั      | CDN OK ะดะปั ััะฐัะธะบะธ     |
| **API Functions**    | Cloud Functions           | ~1000 โฝ/ะผะตั     | 7 ััะฝะบัะธะน              |
| **PostgreSQL**       | Managed PostgreSQL        | ~2500 โฝ/ะผะตั     | ru-central1-b          |
| **DNS**              | reg.ru                    | ~100 โฝ/ะผะตั      | ะะฝะตัะฝะธะน ะฟัะพะฒะฐะนะดะตั      |
| **ะกะตััะธัะธะบะฐัั PWA**  | Let's Encrypt             | ะะตัะฟะปะฐัะฝะพ       | Auto-renew ะฝะฐ VM       |
| **ะกะตััะธัะธะบะฐัั CDN**  | Certificate Manager       | ะะตัะฟะปะฐัะฝะพ       | Managed                |
| **ะัะพะณะพ**            |                           | **~4600 โฝ/ะผะตั** |                        |

> ๐ก **ะัะฐะฝั Yandex.Cloud ะดะปั ััะฐััะฐะฟะพะฒ:** ะะพ 2ะ โฝ ะฝะฐ ะณะพะด โ ะฟะพะบััะฒะฐะตั ะฒัะต
> ัะฐััะพะดั!

**ะงะตะบะปะธัั ะฟะตัะตะตะทะดะฐ:**

- [x] **ะญัะฐะฟ 0: GitHub Actions Workflow** โ ะกะะะะะะ 2025-12-22
  - [x] `.github/workflows/deploy-yandex.yml` โ ะฐะฒัะพะดะตะฟะปะพะน ะฟัะธ push
  - [x] ะกะฑะพัะบะฐ PWA ั version.json
  - [x] S3-ัะพะฒะผะตััะธะผะฐั ะทะฐะณััะทะบะฐ ะฒ Object Storage
  - [x] ะัะฐะฒะธะปัะฝัะต Cache-Control ะดะปั PWA (sw.js, html ะฑะตะท ะบััะฐ)
  - [x] ะะตะฟะปะพะน Cloud Functions ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ
  - [x] `docs/YANDEX_DEPLOY_SETUP.md` โ ะฟะพะปะฝะฐั ะธะฝััััะบัะธั ะฝะฐัััะพะนะบะธ

- [x] **ะญัะฐะฟ 1: Yandex Object Storage** โ ะะซะะะะะะะ 2025-12-23
  - [x] ะกะพะทะดะฐะฝ bucket `heys-app` (PWA)
  - [x] ะกะพะทะดะฐะฝ bucket `heys-static` (Landing)
  - [x] ะะฐัััะพะตะฝ ะฟัะฑะปะธัะฝัะน ะดะพัััะฟ + ัะตะถะธะผ ะฒะตะฑ-ัะฐะนัะฐ
  - [x] ะะพะฑะฐะฒะปะตะฝั GitHub Secrets (YC_ACCESS_KEY_ID, YC_SECRET_ACCESS_KEY)
  - [x] ะะฒัะพะดะตะฟะปะพะน ัะตัะตะท workflow ัะฐะฑะพัะฐะตั

- [x] **ะญัะฐะฟ 2: Yandex CDN** โ ะะซะะะะะะะ 2025-12-23 โ **ะขะะะฌะะ ะดะปั Landing**
  - [x] ~~CDN `bc8rvrvenqslkmti5yts` ะฟะพะดะบะปัััะฝ ะบ heys-app~~ (ะพัะบะปัััะฝ, ัะผ.
        ะญัะฐะฟ 7)
  - [x] CDN `bc8rk3pnqppsfime3nth` ะฟะพะดะบะปัััะฝ ะบ heys-static (Landing)
  - [x] ~~ะะฐัััะพะตะฝะพ ะบััะธัะพะฒะฐะฝะธะต (assets: 1 ะณะพะด, html: no-cache)~~ (ะฟัะพะฑะปะตะผะฐ ั
        Cache-Control)
  - [x] ะัะธะฒัะทะฐะฝั ะดะพะผะตะฝั app.heyslab.ru ะธ heyslab.ru
  - [x] SSL ัะตััะธัะธะบะฐัั ะฝะฐัััะพะตะฝั

- [x] **ะญัะฐะฟ 3: Yandex Cloud Functions** โ ะะซะะะะะะะ 2025-12-21, ะะกะะะะะะะะ
      2025-12-22
  - [x] ะกะพะทะดะฐัั ััะฝะบัะธั `heys-api-rpc` โ PostgreSQL RPC (12 ะพะฟะตัะฐัะธะน)
  - [x] ะกะพะทะดะฐัั ััะฝะบัะธั `heys-api-rest` โ REST CRUD (GET/POST/PATCH/DELETE)
  - [x] ะกะพะทะดะฐัั ััะฝะบัะธั `heys-api-sms` โ SMS.ru ะธะฝัะตะณัะฐัะธั
  - [x] ะกะพะทะดะฐัั ััะฝะบัะธั `heys-api-health` โ healthcheck
  - [x] ะกะพะทะดะฐัั ััะฝะบัะธั `heys-api-leads` โ ะปะตะฝะดะธะฝะณ + Telegram
  - [x] ะะฐัััะพะธัั API Gateway ั ัะพััะธะฝะณะพะผ
        (`d5d7939njvjp27ofsok0.apigw.yandexcloud.net`)
  - [x] ะะฐัััะพะธัั CORS ะดะปั ััะพะฝัะตะฝะดะฐ
  - [x] **FIX 2025-12-22**: ะฃะดะฐะปัะฝ ะดัะฑะปะธััััะธะน UNIQUE constraint ะฒ
        `client_kv_store`
  - [x] **FIX 2025-12-22**: ะัะฟัะฐะฒะปะตะฝั env vars (PG*\* ะฒะผะตััะพ DB*\*)

- [x] **ะญัะฐะฟ 4: Landing Page** โ ะะซะะะะะะะ 2025-12-23
  - [x] Bucket `heys-static` ะฝะฐัััะพะตะฝ
  - [x] Next.js static export ะทะฐะดะตะฟะปะพะตะฝ
  - [x] ะกะพะทะดะฐะฝะฐ ััะฝะบัะธั `heys-api-leads` ะดะปั ัะพัะผั โ
  - [x] ะะฑะฝะพะฒะปัะฝ TrialForm.tsx โ `api.heyslab.ru/leads` โ
  - [x] ะฃะดะฐะปัะฝ `vercel.json` ะธะท apps/landing โ
  - [x] ะะฑะฝะพะฒะปัะฝ `.env.example` (ัะฑัะฐะฝ Supabase) โ
  - [x] **https://heyslab.ru ะะะะะขะะะข!** ๐

- [x] **ะญัะฐะฟ 5: DNS ะธ ัะธะฝะฐะปะธะทะฐัะธั** โ ะะซะะะะะะะ 2025-12-23
  - [x] DNS ะฝะฐัััะพะตะฝ ะฝะฐ Yandex Cloud CDN
  - [x] A-ะทะฐะฟะธัะธ ะพะฑะฝะพะฒะปะตะฝั
  - [x] SSL ัะฐะฑะพัะฐะตั
  - [x] Smoke-ัะตัั: heyslab.ru=200, app.heyslab.ru=200,
        api.heyslab.ru/health=200

- [x] **ะญัะฐะฟ 6: ะัะบะปััะตะฝะธะต Vercel** โ ะะซะะะะะะะ 2025-12-22
  - [x] ะฃะดะฐะปัะฝ `vercel.json` ะธะท apps/web โ
  - [x] ะฃะดะฐะปัะฝ `vercel.json` ะธะท apps/landing โ
  - [x] ะฃะดะฐะปะธัั ะฟัะพะตะบั ะธะท Vercel Dashboard โ
  - [x] ะััะธะฒะธัะพะฒะฐัั ััะฐััะต API ัะฐะนะปั โ

- [x] **ะญัะฐะฟ 7: PWA โ Nginx VM Proxy** โ ะะซะะะะะะะ 2025-12-24

  > โ๏ธ **ะัะธัะธะฝะฐ ะผะธะณัะฐัะธะธ**: Yandex CDN ะดะพะฑะฐะฒะปัะป
  > `Cache-Control: public, max-age=3600` ะบะพ ะะกะะ ัะฐะนะปะฐะผ, ะธะณะฝะพัะธััั S3
  > ะทะฐะณะพะปะพะฒะบะธ. PWA Service Worker ะฝะต ะพะฑะฝะพะฒะปัะปัั ั ะฟะพะปัะทะพะฒะฐัะตะปะตะน โ ะทะฐัััะตะฒะฐะปะธ ะฝะฐ
  > ััะฐััั ะฒะตััะธัั. Nginx ะฟะพะทะฒะพะปัะตั ัะฒะฝะพ ะฟะตัะตะพะฟัะตะดะตะปััั ะทะฐะณะพะปะพะฒะบะธ ัะตัะตะท
  > `add_header ... always`.
  - [x] ะกะพะทะดะฐะฝะฐ VM `app-heyslab-proxy` (Ubuntu 20.04, ru-central1-a)
  - [x] ะฃััะฐะฝะพะฒะปะตะฝ Nginx 1.18.0 ะบะฐะบ reverse proxy ะบ S3
  - [x] ะะฐัััะพะตะฝั ะฟัะฐะฒะธะปัะฝัะต Cache-Control ะดะปั PWA:
    - `sw.js`, `index.html`: `no-cache, no-store, must-revalidate`
    - `heys_*.js`: `no-cache, must-revalidate` (legacy JS)
    - `assets/*`: `max-age=31536000, immutable` (hashed)
  - [x] SSL ัะตัะตะท Let's Encrypt (expires 2026-03-24, auto-renew)
  - [x] DNS: `app.heyslab.ru` โ A โ `158.160.53.194`
  - [x] ะะตะทะพะฟะฐัะฝะพััั: UFW, fail2ban, SSH key-only (IP restricted)
  - [x] **https://app.heyslab.ru ะะะะะขะะะข ัะตัะตะท Nginx!** ๐

**ะัะตะฝะบะฐ ัะฐะฑะพัั:** ~~2-3 ะดะฝั~~ **ะะะะะะจะะะ ะทะฐ 5 ะดะฝะตะน (20-24 ะดะตะบะฐะฑัั)**

**API Functions โ ะดะตัะฐะปะธ ัะตะฐะปะธะทะฐัะธะธ:**

```
yandex-cloud-functions/         โ  โ ะกะะะะะะ 2025-12-21
โโโ heys-api-rpc/               โ  PostgreSQL RPC (18 ะพะฟะตัะฐัะธะน) โ
โ   โโโ index.js                   client_pin_auth, create_client_with_pin,
โ   โโโ package.json               get_curator_clients, upsert_day_record,
โ   โโโ certs/root.crt             get_shared_products, get_client_data,
โ                                  reset_client_pin, create_pending_product, ะธ ะดั.
โโโ heys-api-rest/              โ  REST CRUD ะดะปั ะฒัะตั ัะฐะฑะปะธั โ
โ   โโโ index.js                   GET/POST/PATCH/DELETE
โ   โโโ certs/root.crt             clients, client_kv_store, leads, consents
โโโ heys-api-sms/               โ  SMS.ru ะธะฝัะตะณัะฐัะธั โ
โ   โโโ index.js                   ะัะฟัะฐะฒะบะฐ SMS ะบะพะดะพะฒ ะฟะพะดัะฒะตัะถะดะตะฝะธั
โโโ heys-api-leads/             โ  ะะตะฝะดะธะฝะณ ััะธะฐะปะพะฒ โ
โ   โโโ index.js                   ะกะพััะฐะฝะตะฝะธะต ะปะธะดะพะฒ + Telegram ัะฒะตะดะพะผะปะตะฝะธั
โ   โโโ certs/root.crt
โโโ heys-api-health/            โ  Healthcheck โ
โ   โโโ index.js                   ะัะพััะพะน OK response
โโโ heys-api-auth/              โ  ะััะตะฝัะธัะธะบะฐัะธั ะบััะฐัะพัะพะฒ โ
โ   โโโ index.js                   JWT login/verify/register
โโโ heys-api-payments/          โ  ๐ณ ะฎKassa ะธะฝัะตะณัะฐัะธั (NEW!)
โ   โโโ index.js                   ะกะพะทะดะฐะฝะธะต ะฟะปะฐัะตะถะตะน, webhook, ััะฐัััั
โ   โโโ package.json
โ   โโโ DEPLOY.md                  ะะฝััััะบัะธั ะดะตะฟะปะพั
โโโ migrations/                 โ  SQL ััะตะผะฐ + ะผะธะณัะฐัะธะธ
โ   โโโ yandex_postgresql_setup.sql
โ   โโโ 2025-12-22_missing_functions.sql  โ 6 ะฝะตะดะพััะฐััะธั ััะฝะบัะธะน
โโโ DEPLOY_GUIDE.md             โ  ะะฝััััะบัะธั ะดะตะฟะปะพั
```

**API Gateway URL:** `https://api.heyslab.ru` (ะฐะปะธะฐั ะดะปั
`d5d7939njvjp27ofsok0.apigw.yandexcloud.net`)

| Endpoint            | ะะตัะพะด    | ะคัะฝะบัะธั           | ะกัะฐััั                              |
| ------------------- | -------- | ----------------- | ----------------------------------- |
| `/rpc`              | POST     | heys-api-rpc      | โ                                  |
| `/rest/*`           | GET/POST | heys-api-rest     | โ                                  |
| `/sms`              | POST     | heys-api-sms      | โ                                  |
| `/leads`            | POST     | heys-api-leads    | โ                                  |
| `/health`           | GET      | heys-api-health   | โ                                  |
| `/auth/*`           | POST     | heys-api-auth     | โ                                  |
| `/payments`         | GET      | heys-api-payments | โณ ะฎKassa ัะตะณะธัััะฐัะธั (ัะฐะนั ะณะพัะพะฒ!) |
| `/payments/create`  | POST     | heys-api-payments | โณ ะะดัะผ shopId + secretKey          |
| `/payments/webhook` | POST     | heys-api-payments | โณ ะะดัะผ ะฎKassa                      |
| `/payments/status`  | GET      | heys-api-payments | โณ ะะดัะผ ะฎKassa                      |

**โ ะะะะะะ ะกะะฏะข (2025-12-23):** ะะตะฝะดะธะฝะณ heyslab.ru ัะฐะฑะพัะฐะตั! ะฎKassa ะผะพะถะฝะพ
ัะตะณะธัััะธัะพะฒะฐัั. **ะะพะด ะฟะปะฐัะตะถะตะน ะณะพัะพะฒ** โ ะฝัะถะฝั ัะพะปัะบะพ shopId ะธ secretKey.

**Env variables ะดะปั Cloud Functions:**

> โ๏ธ **ะะะะะ**: ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะดะพะปะถะฝั ะธัะฟะพะปัะทะพะฒะฐัั ะฟัะตัะธะบั `PG_*` (ะฝะต
> `DB_*`), ั.ะบ. ะบะพะด ะฒ `index.js` ัะธัะฐะตั ะธะผะตะฝะฝะพ `PG_HOST`, `PG_PORT` ะธ ั.ะด.

```bash
# PostgreSQL (Yandex.Cloud) โ ะธัะฟะพะปัะทัะน PG_* !
PG_HOST=rc1b-obkgs83tnrd6a2m3.mdb.yandexcloud.net
PG_PORT=6432
PG_DATABASE=heys_production
PG_USER=heys_admin
PG_PASSWORD=<secret>
PG_SSL=verify-full
JWT_SECRET=<secret>

# SMS.ru
SMS_API_KEY=<secret>

# Telegram Bot
TELEGRAM_BOT_TOKEN=<secret>
TELEGRAM_CHAT_ID=<secret>

# ๐ณ ะฎKassa (ะดะปั heys-api-payments)
YUKASSA_SHOP_ID=<shop_id>
YUKASSA_SECRET_KEY=<test_...ะธะปะธ_live_...>
```

---

# ะงะะกะขะฌ I: ะะะะะะก-ะฏะะะ

## 1. ะกััั HEYS (elevator pitch)

> **HEYS โ ะฝะต ััะตะบะตั. HEYS โ ัะบะพัะธััะตะผะฐ.**

**ะญะบะพัะธััะตะผะฐ = ะฟัะธะปะพะถะตะฝะธะต + ะถะธะฒะพะน ะบััะฐัะพั + ะฟัะพัะพะบะพะปั ัะพะฟัะพะฒะพะถะดะตะฝะธั.**

| ะงัะพ ะฟัะพะดะฐัะผ                     | ะะต ัะธัะธ                   |
| ------------------------------- | ------------------------- |
| ะกะพะฟัะพะฒะพะถะดะตะฝะธะต ะธ ัะดะตัะถะฐะฝะธะต ะบัััะฐ | ะกััััะธะบ ะบะฐะปะพัะธะน           |
| ะงะตะปะพะฒะตะบะฐ, ะบะพัะพัะพะผั ะฝะต ะฒัั ัะฐะฒะฝะพ | ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝัะต ะพััััั |
| ะะฝะตัะฝะธะน ะบะพะฝััั ะพัะฒะตัััะฒะตะฝะฝะพััะธ  | DIY-ััะตะบะธะฝะณ               |

**ะฆะตะฝััะฐะปัะฝัะน ััะตัะถะตะฝั:**

- ะััั ัะตะปะพะฒะตะบ, ะบะพัะพัะพะผั **ะฝะต ะฒัั ัะฐะฒะฝะพ** ะฝะฐ ะถะธะทะฝั ะฟะพะปัะทะพะฒะฐัะตะปั
- ะััะฐัะพั **ะฒะพะฒะปะตััะฝ ะฒ ะบะพะฝัะตะบัั ะถะธะทะฝะธ** ะธ ัะดะตัะถะธะฒะฐะตั ัะพะบัั ะฝะฐ ะทะดะพัะพะฒัะต

---

## 2. ะฆะตะปะตะฒะพะน ะบะปะธะตะฝั

| ะะฐัะฐะผะตัั              | ะะฝะฐัะตะฝะธะต                                                                         |
| --------------------- | -------------------------------------------------------------------------------- |
| **ะัะดะธัะพัะธั**         | ะัะดะธ, ะบะพัะพััะต ัะพััั ััะดะตัั/ัะปะตะดะธัั ะทะฐ ะทะดะพัะพะฒัะตะผ, ะฝะพ **ะฒ ะพะดะธะฝะพัะบั ะฝะต ะฟะพะปััะฐะตััั** |
| **ะะปััะตะฒะฐั ะฑะพะปั**     | ยซะฏ ะทะฝะฐั, ััะพ ะบะพะฝััะพะปั ัะฐะฑะพัะฐะตั, ะฝะพ ั ะฝะต ะฒัะดะตัะถะธะฒะฐั ัััะธะฝั ะธ ัััะฒะฐัััยป            |
| **ะะพัะตะผั ะฟะปะฐััั**     | ะัะถะตะฝ **ะฒะฝะตัะฝะธะน ะบะพะฝััั ะพัะฒะตัััะฒะตะฝะฝะพััะธ** (ะบะฐะบ ััะตะฝะตั/ะดะธะตัะพะปะพะณ/ะผะฐัะฐัะพะฝ)           |
| **ะะปััะตะฒะฐั ัะตะฝะฝะพััั** | ะััะฐัะพั ััะดะพะผ (ะฟะพะดะดะตัะถะบะฐ ะฟัะธ ัััะฒะต) + ัะฝะธะผะฐะตั ัััะธะฝั (ะฒะตะดัั ะดะฝะตะฒะฝะธะบ)             |

---

## 3. ะขะฐัะธัั ะธ ัะตะฝะพะพะฑัะฐะทะพะฒะฐะฝะธะต

### 3.1 ะขะฐัะธัะฝะฐั ะปะธะฝะตะนะบะฐ

| ะขะฐัะธั    | ะฆะตะฝะฐ/ะผะตั | ะงัะพ ะฒัะพะดะธั                                                                     |
| -------- | -------- | ------------------------------------------------------------------------------ |
| **Base** | 1 990 โฝ  | ะัะธะปะพะถะตะฝะธะต + ัะผะฝัะต ะฟะพะดัะบะฐะทะบะธ + **1 ัะตะบ-ะธะฝ/ะฝะตะดะตะปั (async)**                     |
| **Pro**  | 12 990 โฝ | ะัั ะธะท Base + **ะฒะตะดะตะฝะธะต ะดะฝะตะฒะฝะธะบะฐ ะบััะฐัะพัะพะผ** + ัะฐั + ัะพะทะฒะพะฝ/ะฝะตะดะตะปั             |
| **Pro+** | 19 990 โฝ | ะัั ะธะท Pro + **7/7 ะฑะตะท ะดะตะถััะฝะพะณะพ ัะตะถะธะผะฐ** + ะฟัะธะพัะธัะตัะฝัะน SLA + mid-week ัะตะบ-ะธะฝ |

### 3.2 ะะธะปะปะธะฝะณ-ะผะพะดะตะปั

| ะัะฐะฒะธะปะพ        | ะะฝะฐัะตะฝะธะต                                             |
| -------------- | ---------------------------------------------------- |
| ะะตัะธะพะด ะพะฟะปะฐัั  | ะะพะดะฟะธัะบะฐ ะฝะฐ ะผะตััั                                    |
| ะัะพะฑะฝะฐั ะฝะตะดะตะปั | **Pro ะฑะตัะฟะปะฐัะฝะพ** (ะฑะตะท ะฟัะธะฒัะทะบะธ ะบะฐััั)               |
| ะกัะฐัั ััะธะฐะปะฐ   | ะก **ะฟะตัะฒะพะณะพ ัััะตะฝะฝะตะณะพ ัะตะบ-ะธะฝะฐ** (ัะตะณะธัััะฐัะธะพะฝะฝัะน โ) |
| ะะพัะปะต ััะธะฐะปะฐ   | ะัะฑะพั ัะฐัะธัะฐ: Base / Pro / Pro+                      |
| ะะฒัะพัะฟะธัะฐะฝะธั   | **ะะตั** โ ะฟะพะปัะทะพะฒะฐัะตะปั ัะฐะผ ะพะฟะปะฐัะธะฒะฐะตั                |
| ะะฐะผะพัะพะทะบะฐ      | ะะพ 2 ะฝะตะดะตะปั ะฟะพ ัะพัั-ะผะฐะถะพัั                           |
| ะะพะทะฒัะฐั        | ะัะพะฟะพััะธะพะฝะฐะปัะฝะพ ะฝะตะพะบะฐะทะฐะฝะฝัะผ ะดะฝัะผ                     |

### 3.3 ะะฝัะธ-ะฐะฑััะท ััะธะฐะปะฐ

| ะะตัะฐะฝะธะทะผ                | ะะตะฐะปะธะทะฐัะธั                                       | ะกัะฐััั |
| ----------------------- | ------------------------------------------------ | ------ |
| ะะธะผะธั ัะปะพัะพะฒ            | ะะฟะตัะฐัะธะพะฝะฝะพ (ัะบะพะปัะบะพ ะฒัะดะตัะถะธั ะบััะฐัะพั)           | โ     |
| 1 ะฟัะพะฑะฐ ะฝะฐ ะฐะบะบะฐัะฝั      | ะขะตะปะตัะพะฝ/ััััะพะนััะฒะพ                               | โ     |
| ะะบัะธะฒะฝัะน ััะธะฐะป          | โฅ4 ะฐะบัะธะฒะฝัั ะดะฝั + โฅ12 ะฟัะธัะผะพะฒ ะทะฐ ะฝะตะดะตะปั          | โ     |
| ะะตะฐะบัะธะฒะฝัะน ะฟะพะปัะทะพะฒะฐัะตะปั | ะขัะธะฐะป ะทะฐะผะพัะฐะถะธะฒะฐะตััั ะดะพ ะฟะตัะฒะพะน ะฐะบัะธะฒะฝะพััะธ _(v2)_ | โ      |

### 3.4 ะญะบะพะฝะพะผะธะบะฐ ะบััะฐัะพัะพะฒ (ะะะ)

| ะะตััะธะบะฐ              | ะะฝะฐัะตะฝะธะต                       |
| -------------------- | ------------------------------ |
| ะะพัะผะฐ ะทะฐะณััะทะบะธ Pro   | 14 ะบะปะธะตะฝัะพะฒ ะฝะฐ ะบััะฐัะพัะฐ        |
| ะคะธะบั ะทะฐ ะบะปะธะตะฝัะฐ Pro  | 7 500 โฝ/ะผะตั                    |
| ะคะธะบั ะทะฐ ะบะปะธะตะฝัะฐ Pro+ | 9 500 โฝ/ะผะตั                    |
| ะะธะฝะธะผะฐะปะบะฐ            | 50 000 โฝ/ะผะตั                   |
| ะะพะฝัั ัะดะตัะถะฐะฝะธะต      | +500 โฝ ะทะฐ ะฟัะพะดะปะตะฝะธะต ะบะปะธะตะฝัะฐ    |
| ะะพะฝัั SLA            | +5 000 โฝ/ะผะตั ะฟัะธ โค5% ะฝะฐัััะตะฝะธะน |
| ะะบัะธะฒะฝัะน ััะธะฐะป       | +500 โฝ                         |
| ะะพะฝะฒะตััะธั ะฒ ะพะฟะปะฐัั   | +2 500 โฝ                       |

---

## 4. ะััะตั ะธ ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต

### 4.1 ะะปััะตะฒัะต ัะพะพะฑัะตะฝะธั

| ะคะพัะผัะปะธัะพะฒะบะฐ                                        | ะะฐัะตะผ                 |
| --------------------------------------------------- | --------------------- |
| ยซะะฐั ะฒะตะดัั, ะฐ ะฝะต ะพััะฐะฒะปััั ั ัะธััะฐะผะธยป               | ะััััะพะนะบะฐ ะพั ััะตะบะตัะพะฒ |
| ยซะะฝะตะฒะฝะธะบ ะฒะตะดัะผ ะผั: ะฒั ะฟัะธััะปะฐะตัะต ัะพัะพ โ ะผั ััะธัะฐะตะผยป | ะกะฝััะธะต ัััะธะฝั         |
| ยซะะฝัะธ-ัััะฒ ะบะพะฝััั: ะฒ ะผะพะผะตะฝั ัะธัะบะฐ ะฒั ะฝะต ะพะดะฝะธยป       | ะะปััะตะฒะฐั ัะตะฝะฝะพััั     |

### 4.2 ะะฐะฟัะตััะฝะฝัะต ัะพัะผัะปะธัะพะฒะบะธ

| โ ะะตะปัะทั                    | โ ะะพะถะฝะพ                                       |
| ---------------------------- | ---------------------------------------------- |
| ยซ24/7ยป                       | ยซะั ะฝะต ะพะดะฝะธ + ัะตััะฝัะน SLAยป                     |
| ยซะัะธัะพะปะพะณยป                   | ยซะะพะดะดะตัะถะบะฐยป, ยซะบะพััยป, ยซะฐะฝัะธ-ัััะฒ ัะพะฟัะพะฒะพะถะดะตะฝะธะตยป |
| ยซะะฐัะฐะฝัะธัะพะฒะฐะฝะฝะพ ะฟะพััะดะตะตัะตยป   | ยซะัะตะดัะบะฐะทัะตะผะพััั ะธ ัะธััะตะผะฝะพัััยป                |
| ยซะัะปะตััยป, ยซะฝะพัะผะฐะปะธะทัั ัะฐัะฐัยป | ยซะะพะผะพะณะฐั ะฒััััะพะธัั ะฟะธัะฐะฝะธะต/ัะตะถะธะผยป              |

---

# ะงะะกะขะฌ II: ะะะะะะฆะะะะะะฏ ะะะะะะฌ

## 5. SLA ะธ ะฒัะตะผั ัะตะฐะบัะธะธ

### 5.1 ะะฟะตัะฐัะธะพะฝะฝัะต ัะฐัั

| ะขะฐัะธั | ะงะฐัั                        | ะััะพะดะฝัะต/ะฟัะฐะทะดะฝะธะบะธ   |
| ----- | --------------------------- | -------------------- |
| Pro   | 09:00โ21:00 (ะฒัะตะผั ะบะปะธะตะฝัะฐ) | ะะตะถััะฝัะน ัะตะถะธะผ       |
| Pro+  | 09:00โ21:00                 | **ะะพะปะฝัะน ัะตะถะธะผ 7/7** |

### 5.2 ะัะตะผั ัะตะฐะบัะธะธ (ัะฐะฑะพัะตะต ะฒัะตะผั)

| ะกะพะฑััะธะต                  | SLA                            |
| ------------------------ | ------------------------------ |
| ะัะพะดััะธะน ะฒะพะฟัะพั/ัะธััะฐัะธั | โค30 ะผะธะฝัั                      |
| ะคะพัะพ ะตะดั โ ะฒะฝะตัะตะฝะธะต      | โค30 ะผะธะฝัั                      |
| ะะฝัะธ-ัััะฒ ัะธะณะฝะฐะป         | ะัะธะพัะธัะตั (ะผะฐะบัะธะผะฐะปัะฝะพ ะฑััััะพ) |
| ะะฝะต ัะฐะฑะพัะตะณะพ ะฒัะตะผะตะฝะธ     | ะกะปะตะดัััะธะน ัะฐะฑะพัะธะน ะฟะตัะธะพะด       |

**ะฆะตะปะตะฒะพะน ะฟะพะบะฐะทะฐัะตะปั:** โค5% ะฝะฐัััะตะฝะธะน SLA ะฒ ัะฐะฑะพัะตะต ะฒัะตะผั

### 5.3 ะัะพัะพะบะพะป ะพัะผะตัะพะบ ะฒ ะผะตััะตะฝะดะถะตัะต

| ะัะผะตัะบะฐ | ะะฝะฐัะตะฝะธะต                                |
| ------- | --------------------------------------- |
| ๐      | ยซะัะธะฝััะพ/ะฒะธะถัยป โ ะฑัััััะน ัะธะณะฝะฐะป         |
| โ      | ยซะะฝะตัะตะฝะพยป โ ะฟัะธัะผ ะฒ ะดะฝะตะฒะฝะธะบะต            |
| โ      | ยซะัะถะฝั ััะพัะฝะตะฝะธัยป โ ะฝะตััะฝัะน ะฟัะพะดัะบั/ะฒะตั |
| โ      | ยซะะฝัะธ-ัััะฒ/ััะพัะฝะพยป โ ะฟัะธะพัะธัะตั          |

---

## 6. ะะธัะผ ัะพะฟัะพะฒะพะถะดะตะฝะธั

### 6.1 ะะฝะธัะธะฐัะธะฒะฝัะต ะบะฐัะฐะฝะธั (Pro/Pro+)

| ะัะตะผั           | ะกะพะดะตัะถะฐะฝะธะต                                                  |
| --------------- | ----------------------------------------------------------- |
| **ะฃััะพ**        | ะะปะฐะฝ/ัะพะบัั ะดะฝั, ะฟัะพะณะฝะพะท ะฟะธัะฐะฝะธั, ะฟะพะดะณะพัะพะฒะบะฐ ะบ ะบะฐัะต/ะฟะพะตะทะดะบะฐะผ |
| **ะะพัะปะต ะพะฑะตะดะฐ** | ะะพััะตะบัะธัะพะฒะบะฐ ะฟะพ ัะฐะบัั, ััะพ ะพััะฐะปะพัั ะฝะฐ ะฒะตัะตั               |
| **ะะตัะตั**       | ะัะพะณะธ ะดะฝั, ะฟะพะดะดะตัะถะบะฐ, ัะธะบัะฐัะธั ะฟัะพะณัะตััะฐ                    |

### 6.2 ะััะพะดะฝัะต/ะฟัะฐะทะดะฝะธะบะธ

| ะขะฐัะธั | ะะตะถะธะผ                                      |
| ----- | ------------------------------------------ |
| Pro   | ะะตะถััะฝัะน: ัััะพ + ะพะฑะตะด, ะฒะฝะตัะตะฝะธะต ะฑะฐััะฐะผะธ    |
| Pro+  | ะะพะปะฝัะน: ัะพััะฐะฝัะตะผ SLA, ะพะฟะตัะฐัะธะฒะฝัะต ัะตัะตะฝะธั |

### 6.3 ะะตะดะตะปัะฝัะน ัะพะทะฒะพะฝ

| ะะฐัะฐะผะตัั     | ะะฝะฐัะตะฝะธะต                                                 |
| ------------ | -------------------------------------------------------- |
| ะะปะธัะตะปัะฝะพััั | 20โ45 ะผะธะฝัั                                              |
| ะคะพัะผะฐั       | ะะธะดะตะพ                                                    |
| ะกะพะดะตัะถะฐะฝะธะต   | ะกะฐะผะผะฐัะธ ะฝะตะดะตะปะธ โ ััะพ ะผะตัะฐะปะพ โ ะบะพััะตะบัะธัะพะฒะบะฐ โ 1โ2 ัะพะบััะฐ |
| ะัะพะณ         | 5โ7 ัััะพะบ ัะฐะผะผะฐัะธ ะฒ ัะฐั                                  |

### 6.4 Pro+ ะดะพะฟะพะปะฝะธัะตะปัะฝะพ

| ะคะธัะฐ                  | ะะฟะธัะฐะฝะธะต                                               |
| --------------------- | ------------------------------------------------------ |
| Mid-week ัะตะบ-ะธะฝ       | Async ัะตะบัั/ะฐัะดะธะพ ะฒ ัะตัะตะดะธะฝะต ะฝะตะดะตะปะธ                    |
| ะะธะฝะธ-ัะพะทะฒะพะฝ 10โ15 ะผะธะฝ | ะะพ ััะธะณะณะตัะฐะผ: 2+ ัััะฒะฐ, ะฟะฐะดะตะฝะธะต ะฐะบัะธะฒะฝะพััะธ, ัะธัะบ-ะธะฒะตะฝั |
| ะะทะฐะธะผะพะฟะพะดะผะตะฝะฐ         | ะะพ ัะฐัะฟะธัะฐะฝะธั ะฝะฐ ะฒััะพะดะฝัะต/ะฟัะฐะทะดะฝะธะบะธ                    |

---

## 7. ะะฐะฝะฐะปั ะบะพะผะผัะฝะธะบะฐัะธะธ

| ะะฐะฝะฐะป      | ะัะฟะพะปัะทะพะฒะฐะฝะธะต                             |
| ---------- | ----------------------------------------- |
| ะะตััะตะฝะดะถะตั | ะัะฝะพะฒะฝะพะน (ะบะปะธะตะฝั ะฒัะฑะธัะฐะตั)                |
| ะะธะดะตะพ      | 1 ัะฐะท/ะฝะตะดะตะปั (ัะพะทะฒะพะฝ)                     |
| PWA        | **ะััะตะน ะฝะตั** โ ะฒัะต ะบะฐัะฐะฝะธั ะฒ ะผะตััะตะฝะดะถะตัะต |

**ะัะฐะฒะธะปะพ:** ะะฐะฝะฐะป ัะฒัะทะธ ะผะพะถะตั ะผะตะฝััััั ะฟะพ ะดะพะณะพะฒะพััะฝะฝะพััะธ.

---

## 8. ะะพะฝััะพะปั ะบะฐัะตััะฒะฐ

### 8.1 ะะตััะธะบะธ

| ะะตััะธะบะฐ            | ะฆะตะปั                    |
| ------------------ | ----------------------- |
| ะัะตะผั ะดะพ ๐        | ะะทะผะตััะตะผ                |
| ะัะตะผั ะดะพ โ        | ะะทะผะตััะตะผ                |
| ะะพะปั ะฝะฐัััะตะฝะธะน SLA | โค5%                     |
| ะะพะบัััะธะต ะดะฝะตะฒะฝะธะบะฐ  | 100% ะฟัะธัะปะฐะฝะฝัั ะฟัะธัะผะพะฒ |

### 8.2 ะฃะดะพะฒะปะตัะฒะพััะฝะฝะพััั

| ะะพะณะดะฐ  | ะะพะฟัะพัั                                   |
| ------ | ----------------------------------------- |
| ะะตะฝั 3 | ยซะกัะฐะปะพ ะปะธ ะฟัะพัะต ะดะตัะถะฐัั ัะตะถะธะผ?ยป (1โ5)     |
| ะะตะฝั 7 | ยซะะพะผัะพััะฝะพ ะปะธ ะดะตะปะธัััั ะบะพะฝัะตะบััะพะผ?ยป (1โ5) |
| ะัะผะตะฝะฐ | ะัะธัะธะฝะฐ ะธะท ัะฟะธัะบะฐ + ะบะพะผะผะตะฝัะฐัะธะน           |

### 8.3 ะัะปะธ ะบะฐัะตััะฒะพ ะฟะฐะดะฐะตั

1. ะฃะผะตะฝััะธัั ะฝะฐะณััะทะบั (ะพะณัะฐะฝะธัะธัั ะฝะพะฒัั ะบะปะธะตะฝัะพะฒ)
2. ะฃัะธะปะธัั ัะฐะฑะปะพะฝั ัะพะพะฑัะตะฝะธะน
3. ะกะผัะณัะธัั ะพะฑะตัะฐะฝะธั (ะพัะดะตะปัะฝะพะต ะพะบะฝะพ ะดะปั ัะพะทะฒะพะฝะพะฒ)

---

# ะงะะกะขะฌ III: ะะะะะฃะะข ะ ะะะขะะะคะะะก

## 9. ะััะธัะตะบัััะฐ ะฟัะธะปะพะถะตะฝะธั

### 9.1 ะะพะฝัะตะฟัะธั ะธะฝัะตััะตะนัะฐ

| ะัะธะฝัะธะฟ                    | ะะตะฐะปะธะทะฐัะธั                                                 |
| -------------------------- | ---------------------------------------------------------- |
| **ะะดะฝะพ ะฟัะธะปะพะถะตะฝะธะต**        | HEYS Nutrition Tracker โ ะฑะตะท ยซะปัะณะบะธัยป/ยซัะฐััะธัะตะฝะฝััยป ะฒะตััะธะน |
| **Widgets Dashboard**      | ะะตััะพะฝะฐะปัะฝะฐั ะฟะฐะฝะตะปั-ะบะพะฝััััะบัะพั                            |
| **ะะดะฐะฟัะธะฒะฝะฐั ะดะตัะฐะปะธะทะฐัะธั** | ะะฐะทะผะตั ะฒะธะดะถะตัะฐ = ะณะปัะฑะธะฝะฐ ะธะฝัะพัะผะฐัะธะธ (S/M/L)                |

### 9.2 ะัะฐะฒะธะปะพ ะฟะพ ัะฐัะธัะฐะผ

| ะขะฐัะธั    | ะะพัััะฟ                                |
| -------- | ------------------------------------- |
| Base     | ะะพะปะฝะพะต ะฟัะธะปะพะถะตะฝะธะต + Widgets Dashboard |
| Pro/Pro+ | ะขะพ ะถะต + ะบััะฐัะพััะบะพะต ัะพะฟัะพะฒะพะถะดะตะฝะธะต     |

---

## 10. ะะปะฐะฒะฝัะน ัะบัะฐะฝ

### 10.1 ะฆะตะปั

> ะะฐ 3โ5 ัะตะบัะฝะด ะพัะฒะตัะธัั: **ยซะณะดะต ั ัะตะนัะฐัยป** ะธ **ยซััะพ ะดะตะปะฐัั ะดะฐะปััะตยป**

### 10.2 ะะพะผะฟะพะฝะตะฝัั

| ะะพะผะฟะพะฝะตะฝั            | ะกะพะดะตัะถะฐะฝะธะต                                  |
| -------------------- | ------------------------------------------- |
| **ะกัะฐััั 0โ100**     | ะะฑัะธะน ะฟะพะบะฐะทะฐัะตะปั + ัะพะฟ-2 ะฟัะธัะธะฝั + 1โ2 ัะฐะณะฐ |
| **ะะบะฝะพ ะฟัะธัะผะฐ ะฟะธัะธ** | ะะพะณะดะฐ ะปัััะต ะตััั ะดะฐะปััะต                     |
| **ะััะฐัะพะบ ะฝะฐ ะดะตะฝั**  | ะะฐะปะพัะธะธ + ะะะฃ (ะฑะตะท ะฟะตัะตะณััะทะฐ)               |
| **ะะธัะบ ัััะฒะฐ**       | ะกะฒะตัะพัะพั + 1 ะฟะพะดัะบะฐะทะบะฐ                      |
| **ะะฝะตะฒะฝะธะบ ัะตะณะพะดะฝั**  | ะะพะป-ะฒะพ ะฟัะธัะผะพะฒ + ะปะตะฝัะฐ                      |

### 10.3 CTA

| ะะฝะพะฟะบะฐ        | ะะพะฝัะตะบัั                                                   |
| ------------- | ---------------------------------------------------------- |
| **Primary**   | ยซะะพะฑะฐะฒะธัั/ะพัะฟัะฐะฒะธัั ะตะดัยป                                   |
| **Secondary** | ยซะะปะฐะฝ ะฝะฐ ะพััะฐัะพะบ ะดะฝัยป / ยซะะปะฐะฝ ัะถะธะฝะฐยป / ยซะกะฟัะพัะธัั ะบััะฐัะพัะฐยป |

### 10.4 ะะพะดะตะปั ยซะกัะฐััั 0โ100ยป

| ะคะฐะบัะพั     | ะะตั |
| ---------- | --- |
| ะะธัะฐะฝะธะต    | 40% |
| ะขะฐะนะผะธะฝะณ    | 20% |
| ะกะพะฝ        | 15% |
| ะะบัะธะฒะฝะพััั | 15% |
| ะกััะตัั     | 10% |

**ะัะฐะฒะธะปะฐ:**

- ะขะพะฟ-2 ะฟัะธัะธะฝั: ัะฐะบัะพัั ั ะฝะฐะธะฑะพะปััะธะผ ะพัะบะปะพะฝะตะฝะธะตะผ
- ะกะณะปะฐะถะธะฒะฐะฝะธะต: EMA ะทะฐ 3 ะดะฝั
- ะขะพะฝ: ยซััะพ ัะปัััะธััยป, ะฐ ะฝะต ยซััะพ ะฟะปะพัะพยป

---

## 11. Widgets Dashboard

### 11.1 ะะพะฝัะตะฟัะธั

| ะัะธะฝัะธะฟ              | ะะตะฐะปะธะทะฐัะธั                                             |
| -------------------- | ------------------------------------------------------ |
| ะะฐะฝะตะปั-ะบะพะฝััััะบัะพั   | ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ะฒะธะดะถะตัั ะธ ะธั ัะฐะทะผะตั              |
| ะะฐะทะผะตั = ะดะตัะฐะปะธะทะฐัะธั | S: ะบะปััะตะฒะฐั ัะธััะฐ, M: ะผะธะฝะธ-ะณัะฐัะธะบ, L: ะฟะพะปะฝัะน breakdown |
| Popup ะฟะพ ะบะปะธะบั       | ะะตัะฐะปะธ ะปัะฑะพะณะพ ะฒะธะดะถะตัะฐ                                  |

### 11.2 ะะธะดะถะตัั (ัะตะฐะปะธะทะพะฒะฐะฝะฝัะต)

| ะะธะดะถะตั            | ะะฐะทะผะตัั | ะกัะฐััั |
| ----------------- | ------- | ------ |
| ะััะฐัะพะบ ะบะบะฐะป      | S/M/L   | โ     |
| ะะฐะบัะพัั (ะะะฃ)     | S/M/L   | โ     |
| ะะพะดะฐ              | S/M     | โ     |
| ะจะฐะณะธ              | S/M     | โ     |
| ะกะพะฝ               | S/M     | โ     |
| ะะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐ | M/L     | โ     |
| ะกัะฐััั 0โ100      | M/L     | โ     |

---

## 12. ะะฝะฑะพัะดะธะฝะณ (7 ะดะฝะตะน Pro-ััะธะฐะปะฐ)

### 12.1 ะฆะตะปะธ

| ะกัะพะบ    | ะฆะตะปั                                        |
| ------- | ------------------------------------------- |
| 24 ัะฐัะฐ | ะะฟัั ยซะทะฐ ะผะตะฝั ะฒะตะดัั ะดะฝะตะฒะฝะธะบยป                |
| 7 ะดะฝะตะน  | ะะพะฝััะพะปั ะฑะตะท ะฝะฐะฟััะถะตะฝะธั + ะฟะพะฝะธะผะฐะฝะธะต ัะฐัะธัะพะฒ |

### 12.2 ยซะะฐั-ะผะพะผะตะฝััยป

| ะะพะณะดะฐ           | ะงัะพ                        |
| --------------- | -------------------------- |
| 1โ2 ะฟัะธัะผะฐ ะฟะธัะธ | ะคะพัะพ โ ะดะฝะตะฒะฝะธะบ ะทะฐะฟะพะปะฝะตะฝ    |
| ะะตัะฒัะน ะฒะตัะตั    | ะัะพััะพะต ัะตัะตะฝะธะต ยซััะพ ะตัััยป |
| ะะพะฝะตั ะฝะตะดะตะปะธ    | ะะพะฝััะฝัะน ะฟัะพะณัะตัั          |

### 12.3 Day 0 (ะฟะตัะฒัะต 30 ะผะธะฝัั)

**ะ ะฟัะธะปะพะถะตะฝะธะธ:**

- ะะธะฝะธะผะฐะปัะฝะฐั ะฐะฝะบะตัะฐ (5โ8 ะฒะพะฟัะพัะพะฒ)
- ะัะฑะพั ะผะตััะตะฝะดะถะตัะฐ
- ะัะฐะฒะธะปะฐ ะพะฑัะตะฝะธั, SLA

**ะั ะบััะฐัะพัะฐ (1 ัะพะพะฑัะตะฝะธะต):**

1. ะคะพัะพ ะตะดั **ะฝะฐ ะฒะตัะฐั**
2. ะะพ ะฒะพะทะผะพะถะฝะพััะธ ััะธะบะตัะบะฐ/ัะพััะฐะฒ
3. ะะพะฝัะตะบัั (ะบะฐัะต/ัััะตัั/ะฟัะฐะทะดะฝะธะบ)
4. ะะตะท ะฒะตัะพะฒ โ ะฟัะตะดะผะตั-ััะฐะปะพะฝ (ะปะพะถะบะฐ/ะปะฐะดะพะฝั)

### 12.4 ะกัะตะฝะฐัะธะน 7 ะดะฝะตะน

| ะะตะฝั | ะคะพะบัั                                             |
| ---- | ------------------------------------------------- |
| 1    | ะะฐะทะพะฒัะน ะดะตะฝั ะฑะตะท ะปะพะผะบะธ (ัะพะฑะธัะฐะตะผ ยซัะตะฐะปัะฝัั ะฑะฐะทัยป) |
| 2    | 1 ะผัะณะบะฐั ะบะพััะตะบัะธัะพะฒะบะฐ (ะฝะฐะฟัะธะผะตั, ะทะฐะฒััะฐะบ)        |
| 3    | ะะฐัะธัะฐ ะฒะตัะตัะฐ (ะฟะปะฐะฝ ััะพ/ะบะพะณะดะฐ)                    |
| 4    | ะะฐัะต/ัะพัะธะฐะปะบะฐ (ะฟัะพัะพะบะพะป ะฒัะฑะพัะฐ)                   |
| 5    | ะะบัะธะฒะฝะพััั ะฑะตะท ะฟะตัะตะณััะทะฐ (ะผะธะบัะพ-ะฟะปะฐะฝ)             |
| 6    | ะะตะฟะตัะธัะธั ะฒััะพะดะฝะพะณะพ (ัะฐะผะบะธ ะฑะตะท ะฟะตัะตะตะดะฐะฝะธั)        |
| 7    | ะัะพะณ + ะฒัะฑะพั ัะฐัะธัะฐ + ะพะฟะปะฐัะฐ                      |

### 12.5 ะะตััะธะบะธ ะฐะบัะธะฒะฐัะธะธ

| ะกัะพะบ   | ะัะธัะตัะธะน                           |
| ------ | ---------------------------------- |
| 24ั    | ะะตััะตะฝะดะถะตั + โฅ2 ะฟัะธัะผะฐ ะฒะฝะตัะตะฝั     |
| 72ั    | โฅ2 ะดะฝั ั โฅ3 ะฟัะธัะผะฐะผะธ               |
| 7 ะดะฝะตะน | โฅ4 ะฐะบัะธะฒะฝัั ะดะฝั + ะฝะตะดะตะปัะฝัะน ัะฐะทะฑะพั |

---

## 13. ะะฒัะพัะธะทะฐัะธั ะธ ะดะพัััะฟ

### 13.1 ะะพะดะตะปั ะฐะฒัะพัะธะทะฐัะธะธ

| ะะพะปั        | ะะตัะพะด ะฒัะพะดะฐ                          |
| ----------- | ------------------------------------ |
| **ะะปะธะตะฝั**  | ะขะตะปะตัะพะฝ + 4-ะทะฝะฐัะฝัะน PIN              |
| **ะััะฐัะพั** | Email + ะฟะฐัะพะปั (heys-api-auth + JWT) |

### 13.2 Desktop Gate

| ะัะฐะฒะธะปะพ          | ะะตะฐะปะธะทะฐัะธั                                          |
| ---------------- | --------------------------------------------------- |
| ะะพ ัะผะพะปัะฐะฝะธั     | ะะปะธะตะฝัั ัะพะปัะบะพ ั ัะตะปะตัะพะฝะฐ (`desktopAllowed: false`) |
| ะะตัะบัะพะฟ          | ะญะบัะฐะฝ ั QR-ะบะพะดะพะผ ะดะปั ะฟะตัะตัะพะดะฐ ะฝะฐ ัะตะปะตัะพะฝ            |
| ะััะฐัะพั          | ะะตะท ะพะณัะฐะฝะธัะตะฝะธะน                                     |
| ะะบะปััะธัั ะดะตัะบัะพะฟ | ะัะพัะธะปั โ ะกะธััะตะผะฐ โ ยซะะพัััะฟ ั ะบะพะผะฟัััะตัะฐยป           |

### 13.3 ะะตะนัะธะฝะณ ะฟะพัะปะต ััะธะฐะปะฐ/ะฝะตะพะฟะปะฐัั

| ะะตะถะธะผ         | ะะพัััะฟะฝะพ                    | ะะตะดะพัััะฟะฝะพ                  |
| ------------- | --------------------------- | --------------------------- |
| **Read-only** | ะัะพัะธะปั, ะธััะพัะธั, ะฐะฝะฐะปะธัะธะบะฐ | ะะฝะตัะตะฝะธะต ะตะดั, ัะพะฟัะพะฒะพะถะดะตะฝะธะต |

**UI:** ะะฐะฝะฝะตั ยซะะพะดะฟะธัะบะฐ ะฝะต ะฐะบัะธะฒะฝะฐยป + CTA ยซะะฟะปะฐัะธััยป

---

# ะงะะกะขะฌ IV: ะฎะะะะะะ ะ ะะะะะะะกะะะกะขะฌ

## 14. ะัะฐะฝะธัั ะพัะฒะตัััะฒะตะฝะฝะพััะธ

### 14.1 ะััะฐัะพั ะดะตะปะฐะตั

- ะะตะดัั ะดะฝะตะฒะฝะธะบ ะฟะธัะฐะฝะธั (ัะฐััะธััะพะฒะบะฐ ัะพัะพ, ะฒะฝะตัะตะฝะธะต ะฒ ะฑะฐะทั)
- ะะฐัั ะฟัะธะบะปะฐะดะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฟะธัะฐะฝะธั/ัะตะถะธะผั
- ะฃะดะตัะถะธะฒะฐะตั ัะพะบัั ะธ ะดะธััะธะฟะปะธะฝั
- ะะฑััะถะดะฐะตั ะบะฐััะธะฝั ะฟะพ ะดะฐะฝะฝัะผ ะฟัะธะปะพะถะตะฝะธั

### 14.2 ะััะฐัะพั ะะ ะดะตะปะฐะตั

- โ ะะต ััะฐะฒะธั ะดะธะฐะณะฝะพะทั ะธ ะฝะต ยซะปะตัะธัยป
- โ ะะต ะฝะฐะทะฝะฐัะฐะตั ะปะตะบะฐัััะฒะฐ/ะณะพัะผะพะฝั
- โ ะะต ะธะฝัะตัะฟัะตัะธััะตั ะฐะฝะฐะปะธะทั ะบะฐะบ ะดะธะฐะณะฝะพะท
- โ ะะต ะพะบะฐะทัะฒะฐะตั ะฟัะธัะพัะตัะฐะฟะธั

### 14.3 ะกัะพะฟ-ัะธััะฐัะธะธ

| ะกะธััะฐัะธั                                   | ะะตะนััะฒะธะต                                                   |
| ------------------------------------------ | ---------------------------------------------------------- |
| **ะัะฐัะฝัะต ัะปะฐะณะธ** (ะฑะพะปั ะฒ ะณััะดะธ, ะพะฑะผะพัะพะบะธ) | ยซะะฑัะฐัะธัะตัั ะบ ะฒัะฐัั/ัะบะพัะพะนยป + ะฟะฐัะทะฐ ัะพะฟัะพะฒะพะถะดะตะฝะธั          |
| **ะะตัะตะผะตะฝะฝะพััั/ะะ**                        | ะะตั ะดะตัะธัะธัะฐ, ะผัะณะบะธะน ัะตะถะธะผ + ะบะพะฝััะปััะฐัะธั ะฒัะฐัะฐ            |
| **ะะพะดะพะทัะตะฝะธะต ะฝะฐ ะะะ**                      | ะะตัะตะถะฝะพ ัะตะบะพะผะตะฝะดะพะฒะฐัั ัะฟะตัะธะฐะปะธััะฐ; ะฟัะธ ะพัะบะฐะทะต โ ะฟัะตะบัะฐัะฐะตะผ |
| **ะะฐะฟัะพั ะฝะฐ ะปะตะบะฐัััะฒะฐ**                    | ยซะญัะพ ะพะฑััะถะดะฐะตััั ั ะฒัะฐัะพะผยป                                 |

---

## 15. ะฎัะธะดะธัะตัะบะธะต ะดะพะบัะผะตะฝัั (v1)

### 15.1 ะะตะพะฑัะพะดะธะผัะต ะดะพะบัะผะตะฝัั

| ะะพะบัะผะตะฝั                             | ะกัะฐััั |
| ------------------------------------ | ------ |
| ะัะตััะฐ/ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะต ัะพะณะปะฐัะตะฝะธะต   | โ     |
| ะะพะปะธัะธะบะฐ ะะะฝ                         | โ     |
| ะกะพะณะปะฐัะธะต ะะะฝ                         | โ     |
| ะกะพะณะปะฐัะธะต ะฝะฐ ัะฟะตัะบะฐัะตะณะพัะธะธ (ะทะดะพัะพะฒัะต) | โ     |
| ะะธัะบะปะตะนะผะตั ยซะฝะต ะผะตะดะธัะธะฝะฐยป             | โ     |
| ะัะฐะฒะธะปะฐ ัะฐัะฐ                         | โ     |

### 15.2 ะะญะ ะธ ะปะพะณะธัะพะฒะฐะฝะธะต

| ะขัะตะฑะพะฒะฐะฝะธะต     | ะะตะฐะปะธะทะฐัะธั                                                                   |
| -------------- | ---------------------------------------------------------------------------- |
| ะะพะดะฟะธัะฐะฝะธะต     | ะะญะ ัะตัะตะท ะฐััะตะฝัะธัะธะบะฐัะธั (ัะตะปะตัะพะฝ+PIN) + ะดะตะนััะฒะธะต ะฒ ะธะฝัะตััะตะนัะต               |
| ะะพะณ            | user_id, timestamp, ะฒะตััะธั ะดะพะบัะผะตะฝัะฐ, ัะฟะพัะพะฑ ะฟะพะดะฟะธัะธ (`checkbox_after_auth`) |
| ะะพะบะฐะปะธะทะฐัะธั ะะค | ะะตัะฒะธัะฝะพะต ััะฐะฝะตะฝะธะต ะะะฝ ะฒ ะะค                                                  |
| SMS (ะฟะพะทะถะต)    | ะฃัะธะปะตะฝะธะต ะะญะ ะฟัะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะธ (>50 ะบะปะธะตะฝัะพะฒ)                              |

### 15.3 UX ัะพะณะปะฐัะธะน (layered)

- ะะพัะพัะบะพะต ัะตะทัะผะต ะฒ 5โ7 ัััะพะบ
- 2โ3 ัะตะบะฑะพะบัะฐ (ะฝะต 6โ8)
- ะะฝะพะฟะบะธ ยซะะพะดัะพะฑะฝะตะตยป ะดะปั ะฟะพะปะฝัั ัะตะบััะพะฒ

---

## 16. ะะตะทะพะฟะฐัะฝะพััั ะธ ะดะพัััะฟั

### 16.1 ะะพะปะธ ะธ ัะฐะทะณัะฐะฝะธัะตะฝะธะต

| ะะพะปั    | ะะพัััะฟ                     |
| ------- | -------------------------- |
| ะะปะธะตะฝั  | ะกะฒะพะธ ะดะฐะฝะฝัะต                |
| ะััะฐัะพั | ะขะพะปัะบะพ ะฝะฐะทะฝะฐัะตะฝะฝัะต ะบะปะธะตะฝัั |
| ะะดะผะธะฝ   | ะะธะฝะธะผะฐะปัะฝะพ ะฝะตะพะฑัะพะดะธะผัะน     |

### 16.2 ะัะธะฝัะธะฟั

| ะัะธะฝัะธะฟ          | ะะตะฐะปะธะทะฐัะธั                          |
| ---------------- | ----------------------------------- |
| Least privilege  | ะััะฐัะพั ะฒะธะดะธั ัะพะปัะบะพ ัะฒะพะธั ะบะปะธะตะฝัะพะฒ |
| ะะพะณะธัะพะฒะฐะฝะธะต      | ะัะพัะผะพัั/ะธะทะผะตะฝะตะฝะธะต ะบะปััะตะฒัั ะดะฐะฝะฝัั  |
| ะะทะฐะธะผะพะฟะพะดะผะตะฝะฐ    | ะัะตะผะตะฝะฝัะน ะดะพัััะฟ, ะปะพะณะธััะตััั        |
| ะญะบัะฟะพัั/ัะดะฐะปะตะฝะธะต | ะััะฝะพะน ะฟัะพัะตัั ะฟะพ ะทะฐะฟัะพัั           |

---

# ะงะะกะขะฌ V: ะกะขะะขะฃะก ะะะขะะะะะกะขะ

## 17. ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะฑะปะพะบะธ

**ะัะธัะธัะตัะบะธะน ะฟััั ะทะฐะฒะตัััะฝ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ 1. ะะะะขะะะ + ะกะขะะขะฃะกะซ                                    โ
โ     SQL-ััะตะผะฐ, JS-ะผะพะดัะปั, ััะธะฐะป-ะผะฐัะธะฝะฐ                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ 2. ะฎะะะะะะ + ะะญะ                                        โ
โ     ะกะพะณะปะฐัะธั, SMS ะฒะตัะธัะธะบะฐัะธั, ะปะพะณะธัะพะฒะฐะฝะธะต                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ 3. CORE ะะะะะะะ + ะะะะะะซะ ะญะะะะ                         โ
โ     ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ะดะฝะตะฒะฝะธะบ ะฟะธัะฐะฝะธั                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ 4. PRO-ะขะะะะ ะ ะะะะะะฆะะะะะ                              โ
โ     7-ะดะฝะตะฒะฝัะน ััะธะฐะป, ะฟัะพัะพะบะพะปั ะบััะฐัะพัะฐ                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ 5. ะะะะะะขะะะ                                            โ
โ     ะะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐ, ัะพะฒะตัั, ััะฐััั ะดะฝั                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 17.1 ๐ ะะฝะฐะปะธะท ะณะพัะพะฒะฝะพััะธ ะบ ะทะฐะฟััะบั (2025-12-24)

**ะะฑัะธะน ััะฐััั: 79% ะณะพัะพะฒะพ (55/70 ะทะฐะดะฐั)**

### ๐ด ะัะธัะธัะตัะบะธะต ะฑะปะพะบะตัั ะทะฐะฟััะบะฐ (3 ัั)

| ะะปะพะบะตั                   | ะะฟะธัะฐะฝะธะต                              | ะะตัะตะฝะธะต                        | ะัะตะผั     |
| ------------------------ | ------------------------------------- | ------------------------------ | --------- |
| **ะฎKassa ะธะฝัะตะณัะฐัะธั**    | ะะพะด ะณะพัะพะฒ, ะฝัะถะฝั shopId + secretKey   | ะะตะณะธัััะฐัะธั ะฒ ะฎKassa           | ~1-2 ะดะฝั  |
| **Webhook ะพะฟะปะฐัั**       | ะะฒัะพะฐะบัะธะฒะฐัะธั ะฟะพะดะฟะธัะบะธ ะฟะพัะปะต ะฟะปะฐัะตะถะฐ  | ะะฐัััะพะนะบะฐ webhook ะฟะพัะปะต ะฎKassa | ~2-4 ัะฐัะฐ |
| **ะคะธัะบะฐะปะธะทะฐัะธั (54-ะคะ)** | ะงะตะบะธ ัะตัะตะท ะะคะ ะพะฑัะทะฐัะตะปัะฝั ะดะปั ะะ/ะะะ | ะะฝัะตะณัะฐัะธั ั ะะคะ               | ~1-2 ะดะฝั  |

**ะัะพะณะพ ะดะปั ะทะฐะฟััะบะฐ: 2-5 ะดะฝะตะน ะฟะพัะปะต ะฟะพะปััะตะฝะธั ะฎKassa credentials**

### ๐ก ะะต ะบัะธัะธัะฝะพ, ะฝะพ ัะปัััะธั UX (4 ัั)

| ะะฐะดะฐัะฐ                         | ะัะธะพัะธัะตั | ะะพะถะตั ะฟะพะดะพะถะดะฐัั ะดะพ  |
| ------------------------------ | --------- | ------------------- |
| ะะฐััะพัะบะฐ ยซะะธัะบ ัััะฒะฐยป (ะฒะธะทัะฐะป) | Medium    | v2                  |
| ะฃะฒะตะดะพะผะปะตะฝะธะต ะทะฐ 1 ะดะตะฝั ะดะพ ะบะพะฝัะฐ | Medium    | v2                  |
| ะะฐะผะพัะพะทะบะฐ ััะธะฐะปะฐ ะฟัะธ ะฝะตะฐะบัะธะฒะฝ. | Low       | v2                  |
| ะะพัััะฐะฝะพะฒะปะตะฝะธะต PIN ัะตัะตะท SMS   | Low       | v2 (ัััะฝะพะน ะฟัะพัะตัั) |

### โ ะงัะพ ะฟะพะปะฝะพัััั ะณะพัะพะฒะพ

- **ะะฝััะฐััััะบัััะฐ**: 100% ะฒ ะะค (Yandex Cloud), 152-ะคะ compliant
- **ะฎัะธะดะธะบะฐ**: ะัะต 6 ะดะพะบัะผะตะฝัะพะฒ, ะะญะ ัะตัะตะท SMS
- **ะะฝะตะฒะฝะธะบ ะฟะธัะฐะฝะธั**: ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน
- **ะะฝะฐะปะธัะธะบะฐ**: ะะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐ, 182 ัะพะฒะตัะฐ, ััะฐััั ะดะฝั
- **ะขัะธะฐะป**: 7 ะดะฝะตะน Pro, ะฐะฒัะพััะฐัั ะฟัะธ ัะตะบ-ะธะฝะต
- **Read-only ะณะตะนัะธะฝะณ**: Paywall ะฟัะธ ะฝะตะพะฟะปะฐัะต
- **Landing**: heyslab.ru ัะฐะฑะพัะฐะตั, ัะพัะผะฐ ะทะฐัะฒะพะบ, Telegram ัะฒะตะดะพะผะปะตะฝะธั

---

## 18. ะงะตะบะปะธัั ะณะพัะพะฒะฝะพััะธ

### ๐ ะกัะฐััั ะพะฑะพะทะฝะฐัะตะฝะธั

| ะกะธะผะฒะพะป | ะะฝะฐัะตะฝะธะต          |
| ------ | ----------------- |
| โ     | ะกะดะตะปะฐะฝะพ ะธ ะฒ ะฟัะพะดะต |
| ๐     | ะ ัะฐะฑะพัะต          |
| โ      | ะะต ะฝะฐัะฐัะพ         |

---

### 18.A ะะฒัะพัะธะทะฐัะธั ะธ ะฟัะพัะธะปั `[TECH]`

| ะะฐะดะฐัะฐ                                                            | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ                    |
| ----------------------------------------------------------------- | ------ | ------------------------------------- |
| ะะดะธะฝัะน ัะบัะฐะฝ ะฒัะพะดะฐ: ะบะปะธะตะฝั (ัะตะปะตัะพะฝ+PIN) / ะบััะฐัะพั (email+ะฟะฐัะพะปั) | โ     | `heys_auth_v1.js`, YandexAPI RPC      |
| Curator: ัะพะทะดะฐะฝะธะต ะบะปะธะตะฝัะฐ (ะธะผั + ัะตะปะตัะพะฝ + PIN)                   | โ     | `create_client_with_pin` RPC          |
| Curator: ัะฟะธัะพะบ ะบะปะธะตะฝัะพะฒ + ะฟะตัะตะบะปััะตะฝะธะต                           | โ     | `clients` ัะฐะฑะปะธัะฐ + RLS               |
| Profile: ัะตะบัะธั ยซะะตะทะพะฟะฐัะฝะพัััยป โ ัะผะตะฝะฐ PIN                        | โ     | `heys_user_v12.js`                    |
| Desktop Gate                                                      | โ     | `DesktopGateScreen`, `desktopAllowed` |
| ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะดะพัััะฟะฐ: ัะฑัะพั PIN ัะตัะตะท ะบััะฐัะพัะฐ                  | โ      | ะััะฝะพะน ะฟัะพัะตัั v1                     |

**DoD:** ะััะฐัะพั ัะพะทะดะฐัั ะบะปะธะตะฝัะฐ; ะบะปะธะตะฝั ะฒัะพะดะธั ะฟะพ ัะตะปะตัะพะฝั+PIN; PIN ะผะพะถะฝะพ
ัะผะตะฝะธัั/ัะฑัะพัะธัั.

---

### 18.B ะะปะฐัะตะถะธ ะธ ะฟะพะดะฟะธัะบะธ `[READY]` `[TECH]`

| ะะฐะดะฐัะฐ                                         | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ                      |
| ---------------------------------------------- | ------ | --------------------------------------- |
| ะญะบัะฐะฝ ะฒัะฑะพัะฐ ัะฐัะธัะฐ (Base/Pro/Pro+)            | โ     | `heys_subscriptions_v1.js` โ `PlanCard` |
| SQL-ััะตะผะฐ ะฟะพะดะฟะธัะพะบ (clients + payments)        | โ     | `database/2025-12-20_subscriptions.sql` |
| ะกัะฐัััั: trial โ active โ read_only โ canceled | โ     | `subscription_status` + RPC             |
| UI ัะตะบัะธั ะฒ ะฟัะพัะธะปะต                            | โ     | `SubscriptionSection` ะบะพะผะฟะพะฝะตะฝั         |
| ะะฝัะตะณัะฐัะธั ะฟะปะฐัะตะถะฝะพะณะพ ะฟัะพะฒะฐะนะดะตัะฐ               | โ      | ะฎKassa (ะฟะพัะปะต ะผะธะณัะฐัะธะธ ะฒ ะะค)            |
| Webhook ยซะพะฟะปะฐัะฐ ััะฟะตัะฝะฐยป โ ะฐะบัะธะฒะฐัะธั           | โ      | Yandex Cloud Function                   |
| ะคะธัะบะฐะปะธะทะฐัะธั ัะตะบะพะฒ (54-ะคะ)                     | โ      | ะะคะ ะธะฝัะตะณัะฐัะธั                          |

**DoD:** โ ะะฐะทะพะฒะฐั ัะธััะตะผะฐ ะณะพัะพะฒะฐ. ะะถะธะดะฐะตั: ะฟัะพะฒะฐะนะดะตั ะฟะปะฐัะตะถะตะน + webhook +
ัะตะบะธ.

---

### 18.C ะขัะธะฐะป-ะผะฐัะธะฝะฐ `[READY]` `[BIZ]`

| ะะฐะดะฐัะฐ                                  | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ                        |
| --------------------------------------- | ------ | ----------------------------------------- |
| ะขัะธะณะณะตั ััะฐััะฐ: ัะตะณะธัััะฐัะธะพะฝะฝัะน ัะตะบ-ะธะฝ  | โ     | `heys_morning_checkin_v1.js` โ startTrial |
| ะกะพััะพัะฝะธั: trial โ active โ read_only   | โ     | `subscription_status` + `trial_ends_at`   |
| ะขะฐะนะผะตั 7 ะดะฝะตะน ะพั ะฟะตัะฒะพะณะพ ัะตะบ-ะธะฝะฐ        | โ     | `trial_ends_at` + `getTrialDaysLeft()`    |
| UI ะฑะตะนะดะถ ััะฐัััะฐ (ััะธะฐะป/ะฐะบัะธะฒะฝัะน/ะธัััะบ) | โ     | `SubscriptionBadge` ะบะพะผะฟะพะฝะตะฝั             |
| ะะฐะผะพัะพะทะบะฐ ะฟัะธ ะฝะตะฐะบัะธะฒะฝะพััะธ              | โ      | ะะพะณะธะบะฐ ัะพััะพัะฝะธะน (v2)                     |
| ะฃะฒะตะดะพะผะปะตะฝะธะต ะทะฐ 1 ะดะตะฝั ะดะพ ะบะพะฝัะฐ ััะธะฐะปะฐ   | โ      | Push/SMS + cron                           |

**DoD:** โ ะขัะธะฐะป ััะฐัััะตั ะฟัะธ ะฟะตัะฒะพะผ ัััะตะฝะฝะตะผ ัะตะบ-ะธะฝะต ะฟะพัะปะต ัะตะณะธัััะฐัะธะธ.

---

### 18.D ะะปะฐะฒะฝัะน ัะบัะฐะฝ ะธ ะฐะฝะฐะปะธัะธะบะฐ `[TECH]`

| ะะฐะดะฐัะฐ                                  | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ        |
| --------------------------------------- | ------ | ------------------------- |
| ะะฐััะพัะบะฐ ยซะกัะฐััั 0โ100ยป + ัะพะฟ-2 ะฟัะธัะธะฝั | โ     | `heys_status_v1.js`       |
| Widgets Dashboard (ะฟะฐะฝะตะปั-ะบะพะฝััััะบัะพั)  | โ     | `heys_widgets_v1.js`      |
| ะะฐััะพัะบะฐ ยซะะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐยป            | โ     | `heys_insulin_wave_v1.js` |
| ะะฐััะพัะบะฐ ยซะะธัะบ ัััะฒะฐยป (ัะฒะตัะพัะพั)        | ๐     | ะ ัะฐะทัะฐะฑะพัะบะต              |
| ะะฐััะพัะบะฐ ยซะะฝะตะฒะฝะธะบ ัะตะณะพะดะฝัยป              | โ     | `heys_day_v12.js`         |
| CTA ยซะะพะฑะฐะฒะธัั ะตะดัยป                      | โ     | ะกััะตััะฒัััะธะน ัะปะพั         |

**DoD:** ะะปะฐะฒะฝัะน ัะบัะฐะฝ ะดะฐัั ยซััะฐััั + ััะพ ะดะตะปะฐััยป ะทะฐ 3โ5 ัะตะบัะฝะด.

---

### 18.E ะะฝะตะฒะฝะธะบ ะฟะธัะฐะฝะธั (ัะดัะพ) `[TECH]`

| ะะฐะดะฐัะฐ                                 | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ         |
| -------------------------------------- | ------ | -------------------------- |
| ะกะพะทะดะฐะฝะธะต ะฟัะธัะผะฐ ะฟะธัะธ: ะฟัะพะดัะบั โ ะณัะฐะผะผั | โ     | `heys_day_v12.js`          |
| ะะตะฝัะฐ ะดะฝั ั ัะตะดะฐะบัะธัะพะฒะฐะฝะธะตะผ/ัะดะฐะปะตะฝะธะตะผ  | โ     | `DayTab` ะบะพะผะฟะพะฝะตะฝั         |
| ะะฐะทะฐ ะฟัะพะดัะบัะพะฒ (ะบะบะฐะป/ะะะฃ ะฝะฐ 100ะณ)      | โ     | `heys_products`, YandexAPI |
| ะะพะธัะบ + ะะตะดะฐะฒะฝะธะต/ะะทะฑัะฐะฝะฝะพะต             | โ     | `heys_core_v12.js`         |
| ะะพะฑะฐะฒะปะตะฝะธะต ะฟัะพะดัะบัะฐ ะฟะพ ััะธะบะตัะบะต        | โ     | `CreateProductStep`        |
| ยซะะตะท ะฒะตัะพะฒยป (approx)                   | โ      | ะคะปะฐะณ + ะฟะพะปะต ะพะฟะธัะฐะฝะธั       |

**DoD:** ะะพะฑะฐะฒะปะตะฝะธะต ะตะดั ะทะฐะฝะธะผะฐะตั <30 ัะตะบัะฝะด.

---

### 18.F Read-only ัะตะถะธะผ `[READY]`

| ะะฐะดะฐัะฐ                              | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ                       |
| ----------------------------------- | ------ | ---------------------------------------- |
| ะะฟัะตะดะตะปะตะฝะธะต ะดะพัััะฟะฝะพะณะพ/ะฝะตะดะพัััะฟะฝะพะณะพ | โ     | `canEdit()` ะฒ `heys_subscriptions_v1.js` |
| Paywall ะผะพะดะฐะป ะฟัะธ ะฑะปะพะบะธัะพะฒะบะต        | โ     | `showPaymentRequired()` โ StepModal      |
| ะะตะนั ะฝะฐ ะดะพะฑะฐะฒะปะตะฝะธะต ะตะดั              | โ     | `addMeal()` ะฟัะพะฒะตััะตั `canEdit()`        |
| ะะฐะฝะฝะตั ยซะะพะดะฟะธัะบะฐ ะฝะต ะฐะบัะธะฒะฝะฐยป + CTA  | โ     | `PaywallBanner` ะบะพะผะฟะพะฝะตะฝั                |
| RLS ะฑะปะพะบะธัะพะฒะบะฐ ะทะฐะฟะธัะธ               | โ      | ะกะตัะฒะตัะฝะฐั ะฒะฐะปะธะดะฐัะธั (v2)                 |

**DoD:** โ UI ะฑะปะพะบะธััะตั ะดะพะฑะฐะฒะปะตะฝะธะต ะตะดั; ะฟะพะบะฐะทัะฒะฐะตั paywall ั ะฒัะฑะพัะพะผ ัะฐัะธัะฐ.

> โ๏ธ **ะะทะฒะตััะฝะพะต ะพะณัะฐะฝะธัะตะฝะธะต:** ะะตะนัะธะฝะณ ัะพะปัะบะพ ะฝะฐ UI. ะกะตัะฒะตัะฝะฐั ะฒะฐะปะธะดะฐัะธั (RLS)
> ะทะฐะฟะปะฐะฝะธัะพะฒะฐะฝะฐ ะฝะฐ v2. ะะฐ ัะตะบััะตะผ ััะฐะฟะต ัะธัะบ ะผะธะฝะธะผะฐะปะตะฝ โ ะบะปะธะตะฝัั ะธัะฟะพะปัะทััั
> ะฟัะธะปะพะถะตะฝะธะต, ะฐ ะฝะต ะฟััะผัะต API-ะทะฐะฟัะพัั.

---

### 18.G ะฎัะธะดะธะบะฐ `[LEGAL]` `[READY]`

| ะะฐะดะฐัะฐ                       | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ                                    |
| ---------------------------- | ------ | ----------------------------------------------------- |
| ะัะตััะฐ/ัะพะณะปะฐัะตะฝะธะต            | โ     | `docs/legal/user-agreement.md`                        |
| ะะพะปะธัะธะบะฐ ะะะฝ                 | โ     | `docs/legal/privacy-policy.md`                        |
| ะกะพะณะปะฐัะธะต ะะะฝ + ัะฟะตัะบะฐัะตะณะพัะธะธ | โ     | `docs/legal/consent-forms.md`                         |
| ะญะบัะฐะฝ ะฟะพะดะฟะธัะฐะฝะธั + ะบะพะด       | โ     | `heys_consents_v1.js` โ `ConsentScreen`               |
| SMS ะฒะตัะธัะธะบะฐัะธั              | โ     | `heys_sms_v1.js` (SMS.ru, ะฑะตะท ะฑัะบะฒะตะฝะฝะพะณะพ ะพัะฟัะฐะฒะธัะตะปั) |
| ะะพะณ ัะพะณะปะฐัะธะน                 | โ     | `database/2025-12-20_consents.sql`                    |
| ะะธัะบะปะตะนะผะตั ยซะฝะต ะผะตะดะธัะธะฝะฐยป     | โ     | `heys_consents_v1.js` โ `DisclaimerBanner`            |
| ะัะฐะฒะธะปะฐ ัะฐัะฐ                 | โ     | `docs/legal/chat-rules.md`                            |

**DoD:** โ ะะพะปัะทะพะฒะฐัะตะปั ะฟะพะดะฟะธััะฒะฐะตั ะะญะ, ะปะพะณะธััะตััั.

---

### 18.H ะะฝะฐะปะธัะธะบะฐ `[BIZ]`

| ะะฐะดะฐัะฐ                        | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ |
| ----------------------------- | ------ | ------------------ |
| ะกะพะฑััะธั ะฒะพัะพะฝะบะธ               | โ      | Amplitude/custom   |
| ะะฐัะฑะพัะด ะผะตััะธะบ                | โ      | ะขะฐะฑะปะธัะฐ/Metabase   |
| ะะธะบัะพ-ะพะฟัะพัั (ะดะตะฝั 3, ะดะตะฝั 7) | โ      | UI + ััะฐะฝะตะฝะธะต      |

**ะกะพะฑััะธั:** `trial_start`, `first_done`, `active_day`, `payment_success`,
`cancel_reason`

**ะะตััะธะบะธ:** ะะพะฝะฒะตััะธั, ัะดะตัะถะฐะฝะธะต, time-to-first-โ, SLA breach

---

### 18.I Landing Page (ะทะฐัะฒะฐั ะปะธะดะพะฒ) `[READY]` `[BIZ]`

| ะะฐะดะฐัะฐ                                            | ะกัะฐััั | ะขะตัะฝะธัะตัะบะฐั ัะฒัะทะบะฐ                                                    |
| ------------------------------------------------- | ------ | --------------------------------------------------------------------- |
| ะะตะฝะดะธะฝะณ ะฝะฐ Next.js 14                             | โ     | `apps/landing/`                                                       |
| ะคะพัะผะฐ ะทะฐัะฒะบะธ: ะธะผั + ัะตะปะตัะพะฝ + ะผะตััะตะฝะดะถะตั          | โ     | `TrialForm.tsx`                                                       |
| ะัะฑะพั ะผะตััะตะฝะดะถะตัะฐ: Telegram / WhatsApp / MAX      | โ     | 3 ะบะฝะพะฟะบะธ ั ะธะบะพะฝะบะฐะผะธ                                                   |
| ะกะพััะฐะฝะตะฝะธะต ะปะธะดะพะฒ ะฒ PostgreSQL                     | โ     | `leads` ัะฐะฑะปะธัะฐ + YandexAPI REST                                      |
| Telegram ัะฒะตะดะพะผะปะตะฝะธั ะบััะฐัะพัั                     | โ     | Bot API + inline keyboard                                             |
| UTM-ััะตะบะธะฝะณ (source/medium/campaign/term/content) | โ     | Query params + localStorage                                           |
| Meta Pixel + GA4 ะธะฝัะตะณัะฐัะธั                       | โ      | **ะะขะะะฎะงะะะซ** (`null` ะฒ layout.tsx) ะดะพ ัะฒะตะดะพะผะปะตะฝะธั ะะะ (ัั.12 152-ะคะ) |
| A/B ัะตััะธัะพะฒะฐะฝะธะต                                  | โ     | `useABTest.ts` + `ab-test.ts`                                         |
| ะกะตะบัะธะธ: Hero, HowItWorks, Pricing, FAQ, Footer    | โ     | React ะบะพะผะฟะพะฝะตะฝัั                                                      |
| ะะดะฐะฟัะธะฒ (mobile-first)                            | โ     | Tailwind v4                                                           |
| **ะะตะดะธะทะฐะนะฝ: ััะตัะถะตะฝั ยซะงะตะปะพะฒะตะบ ััะดะพะผยป**            | โ     | HowItWorks, Problem, Trial, FAQ                                       |
| **ะฎัะธะดะธัะตัะบะธะต ัััะฐะฝะธัั**                          | โ     | `/legal/privacy-policy`, `/legal/user-agreement`                      |
| **ะะฒัะพะดะตะฟะปะพะน ะฝะฐ Yandex Cloud**                    | โ     | GitHub Actions โ S3 โ CDN                                             |
| **SEO: meta tags, OG image**                      | โ     | layout.tsx + og-image.png (1200ร630)                                  |
| **Favicon + PWA manifest**                        | โ     | favicon.ico + manifest.json + icons                                   |

**DoD:** ะะพัะตัะธัะตะปั ะพััะฐะฒะปัะตั ะทะฐัะฒะบั โ ะปะธะด ะฒ PostgreSQL โ push ะฒ Telegram
ะบััะฐัะพัั (ัะพะปัะบะพ `lead_id`, ะฑะตะท ะะะฝ).

> **ะัะธะผะตัะฐะฝะธะต:** GA4/Meta Pixel ะพัะบะปััะตะฝั. ะะปั ะฒะบะปััะตะฝะธั ะฟะพััะตะฑัะตััั: (1)
> ัะฒะตะดะพะผะปะตะฝะธะต ะะะ ะดะพ ะฝะฐัะฐะปะฐ ะฟะตัะตะดะฐัะธ (ัั.12 152-ะคะ), (2) ะพะฟะธัะฐะฝะธะต ะฒ ะะพะปะธัะธะบะต,
> (3) cookie-consent ะฑะฐะฝะฝะตั.

**ะกััะปะบะฐ:** http://localhost:3003 (dev) | https://heyslab.ru (prod via Yandex
CDN)

**ะกัะตัะถะตะฝั ะปะตะฝะดะธะฝะณะฐ:** ยซะะต ัะธะปะฐ ะฒะพะปะธ โ ะฐ ัะตะปะพะฒะตะบ ััะดะพะผยป

---

## 18.J ะะฐะปะพะณะธ, ะฎKassa ะธ ัะธัะบะฐะปะธะทะฐัะธั ัะตะบะพะฒ (54โะคะ) `[BIZ]` `[LEGAL]` `[BLOCKER]`

### 18.J.1 ะะพะฝัะตะบัั ะธ ัะตะปั

**ะะพะฝัะตะบัั:** ัะตะนัะฐั ั ะผะตะฝั ะตััั **ะะ ะฝะฐ ะะกะ** (ะฟะฐัะตะฝั) ะฟะพ ะดะตััะตะปัะฝะพััะธ โััะปัะณะธ
ัะพัะพะณัะฐัะฐโ. ะะปั HEYS ะฟะปะฐะฝะธััะตััั **ะฟัะธัะผ ะพะฟะปะฐั ะพั ัะธะทะปะธั ะพะฝะปะฐะนะฝ** (ะผะตัััะฝะฐั
ะพะฟะปะฐัะฐ/ะฟะพะดะฟะธัะบะฐ ะฝะฐ ััะปัะณะธ ัะพะฟัะพะฒะพะถะดะตะฝะธั + ะดะพัััะฟ ะบ ะฟัะธะปะพะถะตะฝะธั).

**ะฆะตะปั ะฑะปะพะบะฐ:** ะฒัะฑัะฐัั ะธ ะพัะพัะผะธัั **ะฟัะฐะฒะธะปัะฝัั ะฝะฐะปะพะณะพะฒัั ััะตะผั** + ะพะฑะตัะฟะตัะธัั
**ะพะฑัะทะฐัะตะปัะฝัะต ัะตะบะธ ะฟะพ 54โะคะ** (ัะธัะบะฐะปะธะทะฐัะธั ัะตัะตะท ะะคะ) ัะฐะบ, ััะพะฑั ะฎKassa ะผะพะณะปะฐ
ะฑััั ะฟะพะดะบะปััะตะฝะฐ ะฑะตะท ัะธัะบะพะฒ.

---

### 18.J.2 ะะะะญะ (ะฒัะฑะพั ะธ ะพะฑะพัะฝะพะฒะฐะฝะธะต)

**ะะตะบะพะผะตะฝะดัะตะผัะน ะพัะฝะพะฒะฝะพะน ะบะพะด:**

- **63.11** โ ะะตััะตะปัะฝะพััั ะฟะพ ะพะฑัะฐะฑะพัะบะต ะดะฐะฝะฝัั, ะฟัะตะดะพััะฐะฒะปะตะฝะธะต ััะปัะณ ะฟะพ
  ัะฐะทะผะตัะตะฝะธั ะธะฝัะพัะผะฐัะธะธ ะธ ัะฒัะทะฐะฝะฝะฐั ั ััะธะผ ะดะตััะตะปัะฝะพััั.
  - _ะะพัะตะผั:_ ะะพะดัะพะดะธั ะดะปั SaaS, ะพะฝะปะฐะนะฝ-ะฟะปะฐััะพัะผ, ะดะพัััะฟะฐ ะฟะพ ะฟะพะดะฟะธัะบะต. ะกะฐะผัะน
    ะฑะตะทะพะฟะฐัะฝัะน ะธ ัะฝะธะฒะตััะฐะปัะฝัะน ะดะปั IT-ัะตัะฒะธัะฐ.

**ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะบะพะดั (ะฟะพ ะฝะตะพะฑัะพะดะธะผะพััะธ):**

- **62.01** โ ะะฐะทัะฐะฑะพัะบะฐ ะบะพะผะฟัััะตัะฝะพะณะพ ะะ (ะตัะปะธ ะฝัะถะฝะพ ะฟะพะบัััั ัะฐะทัะฐะฑะพัะบั).
- **62.09** โ ะะตััะตะปัะฝะพััั, ัะฒัะทะฐะฝะฝะฐั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะฒััะธัะปะธัะตะปัะฝะพะน ัะตัะฝะธะบะธ ะธ
  ะะข, ะฟัะพัะฐั (ัะตัะฟะพะดะดะตัะถะบะฐ, ัะพะฟัะพะฒะพะถะดะตะฝะธะต).
- **63.99.1** โ ะะตััะตะปัะฝะพััั ะฟะพ ะพะบะฐะทะฐะฝะธั ะบะพะฝััะปััะฐัะธะพะฝะฝัั ะธ ะธะฝัะพัะผะฐัะธะพะฝะฝัั ััะปัะณ
  (ะฟะพะบััะฒะฐะตั ะฝะตะผะตะดะธัะธะฝัะบะพะต ะบััะฐัะพัััะฒะพ).

**ะงัะพ ะะ ะธัะฟะพะปัะทัะตะผ:**

- โ **86.\*** (ะะดัะฐะฒะพะพััะฐะฝะตะฝะธะต) โ ัะธัะบ ะฟัะธะทะฝะฐะฝะธั ะผะตะดะธัะธะฝัะบะพะน ะดะตััะตะปัะฝะพัััั.
- โ ะฃะทะบะธะต "ัะธัะฝะตั/ะพะทะดะพัะพะฒะปะตะฝะธะต" ะฑะตะท ะฝัะถะดั.

---

### 18.J.3 ะะปััะตะฒัะต ัะตัะตะฝะธั (ััะพ ััะฒะตัะดะธัั ั ะฑััะณะฐะปัะตัะพะผ)

| ะะตัะตะฝะธะต                             | ะะฐัะธะฐะฝัั                                                  | ะงัะพ ัะธะบัะธััะตะผ ะฒ ะฑัะธัะต / ะฟะพัะปะตะดััะฒะธั                                                                                                                                                                     |
| ----------------------------------- | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1) ะฎั.ะปะธัะพ ะดะปั HEYS                 | **(A)** ัะตะบััะตะต ะะ \| **(B)** ะพัะดะตะปัะฝะพะต ะะ \| **(C)** ะะะ | A โ ะฑััััะตะต ะธ ะดะตัะตะฒะปะต; B/C โ ะตัะปะธ ะฝัะถะฝะพ ัะฐะทะดะตะปะตะฝะธะต ัะธัะบะพะฒ/ะฑัะตะฝะด/ะฟะฐััะฝััั/ะธะฝะฒะตััะพัั                                                                                                                      |
| 2) ะะฐะปะพะณะพะฒัะน ัะตะถะธะผ ะดะปั ะดะพัะพะดะพะฒ HEYS | **ะฃะกะ** (ะดะพัะพะดั / ะดะพัะพะดัโัะฐััะพะดั) \| ะธะฝะพะต                 | ะัะปะธ ะะ ะพััะฐัััั ะฝะฐ ะะกะ ัะพะปัะบะพ ะฟะพะด ัะพัะพ โ **HEYS ะฟะพััะธ ะฝะฐะฒะตัะฝัะบะฐ ะฑัะดะตั ะพัะดะตะปัะฝัะผ ัะตะถะธะผะพะผ** (ัะฐััะพ ะฃะกะ). ะะฐะถะฝะพ ะฝะต โััะพะฝะธััโ ะดะพัะพะดั HEYS ะฒ ะฝะตะถะตะปะฐัะตะปัะฝัะน ัะตะถะธะผ ะฟะพ ัะผะพะปัะฐะฝะธั โ ะฟัะพะฒะตัะธัั ัะตะบััะธะน ััะฐััั ะะ |
| 3) ะััะฐะฒะปััั ะะกะ ะฝะฐ โัะพัะพะณัะฐัะฐโ     | ะะฐ / ะะตั                                                  | ะะกะ ะผะพะถะฝะพ ัะพะฒะผะตัะฐัั ั ะดััะณะธะผะธ ัะตะถะธะผะฐะผะธ (ะฒ ั.ั. ั ะฃะกะ) โ ะฒะพะฟัะพั ะฒ ะฒัะณะพะดะต ะธ ะฒ ัะฐะทะดะตะปัะฝะพะผ ััััะต ([Federal Tax Service][2])                                                                                 |
| 4) ะะะะญะ ะฟะพะด HEYS                   | ะดะพะฑะฐะฒะธัั / ะฝะต ััะพะณะฐัั                                     | ะะปั ะบะพะผะฟะปะฐะตะฝัะฐ ะฑะฐะฝะบะฐ/ัะบะฒะฐะนัะธะฝะณะฐ/ะฎKassa ะธ โัะธััะพััโ ะพะฑััะฝะพ ะดะพะฑะฐะฒะปััั ะะะะญะ ะฟะพะด ัะฐะบัะธัะตัะบัั ะดะตััะตะปัะฝะพััั (ััะฒะตัะถะดะฐะตั ะฑััะณะฐะปัะตั)                                                                           |
| 5) ะกัััะบัััะฐ ะฟัะพะดัะบัะฐ ะฒ ััััะต       | โััะปัะณะธโ / โะธะฝัะพัะผ. ััะปัะณะธโ / โะดะพัััะฟ ะบ ัะตัะฒะธััโ (ะธ ั.ะฟ.) | ะญัะพ ะฒะปะธัะตั ะฝะฐ ัะพัะผัะปะธัะพะฒะบั ะฟัะตะดะผะตัะฐ ะฒ ะพัะตััะต ะธ ะฝะฐะธะผะตะฝะพะฒะฐะฝะธะต ะฟะพะทะธัะธะธ ะฒ ัะตะบะต                                                                                                                              |

---

### 18.J.4 ะงัะพ ะดะตะปะฐัั ั ัะตะบััะธะผ ะฟะฐัะตะฝัะพะผ โัะพัะพะณัะฐัโ

**ะะฐะทะพะฒะฐั ะฟะพะทะธัะธั (ะดะปั ะพะฑััะถะดะตะฝะธั):**

1. **ะััะฐะฒะธัั ะะกะ ะบะฐะบ ะตััั**, ะตัะปะธ ัะพัะพะณัะฐัะธั ัะตะฐะปัะฝะพ ะฟัะพะดะพะปะถะฐะตััั ะธ ะฟะฐัะตะฝั
   ะฒัะณะพะดะตะฝ.
2. ะะพัะพะดั HEYS ะฒะตััะธ **ะพัะดะตะปัะฝะพ** (ะพะฑััะฝะพ ะฝะฐ ะดััะณะพะผ ัะตะถะธะผะต, ะฝะฐะฟัะธะผะตั ะฃะกะ).
3. ะัะปะธ ัะพัะพะณัะฐัะธั ะฑะพะปััะต ะฝะต ะฝัะถะฝะฐ โ **ะฝะต ะฟัะพะดะปะตะฒะฐัั** ะฟะฐัะตะฝั ะฝะฐ ัะปะตะดัััะธะน
   ะฟะตัะธะพะด.

**ะะฐะถะฝะพ:** ะะกะ ะผะพะถะฝะพ ัะพะฒะผะตัะฐัั ั ะดััะณะธะผะธ ัะตะถะธะผะฐะผะธ (ะคะะก ััะพ ะฟััะผะพ ะฟัะพะณะพะฒะฐัะธะฒะฐะตั).

---

### 18.J.5 ะะพะฟัะพัั ะบ ะฑััะณะฐะปัะตัั (ะะฐะปะพะณะธ ะธ ะะะะญะ)

1. **ะะพะถะฝะพ ะปะธ ะพััะฐะฒะธัั ะะกะ ะฝะฐ ัะพัะพ** ะธ ะฟะฐัะฐะปะปะตะปัะฝะพ ะฒะตััะธ HEYS ะฝะฐ ะดััะณะพะผ ัะตะถะธะผะต?
   (ะพะถะธะดะฐะตะผะพ โะดะฐโ, ะฒะพะฟัะพั โ ะบะฐะบ ะฟัะฐะฒะธะปัะฝะพ ััะตััั ะธ ะพัะพัะผะธัั).
2. **ะะฐะบะพะน ัะตะถะธะผ ะดะปั HEYS ะพะฟัะธะผะฐะปัะฝะตะต** ะฟะพ ัะธััะฐะผ: ะฃะกะ โะดะพัะพะดัโ vs
   โะดะพัะพะดัโัะฐััะพะดัโ (ั ััััะพะผ ะฒัะฟะปะฐั ะบััะฐัะพัะฐะผ/ะฟะพะดััะดัะธะบะฐะผ)?
3. **ะะพะฑะฐะฒะปัะตะผ ะปะธ ะะะะญะ 63.11** ะบะฐะบ ะพัะฝะพะฒะฝะพะน ะดะปั HEYS?
4. **ะะฐะบ ะฟัะฐะฒะธะปัะฝะพ ะพะฟะธัะฐัั ััะปัะณั** ะฒ ะพัะตััะต, ััะพะฑั ะฝะต ะฑัะปะพ ะฟัะธะทะฝะฐะบะพะฒ
   โะผะตะดะธัะธะฝัโ?

---

## 18.K ะคะธัะบะฐะปะธะทะฐัะธั, ัะตะบะธ ะธ ะะคะ (54-ะคะ) `[BIZ]` `[LEGAL]` `[BLOCKER]`

### 18.K.1 ะะพัะตะผั ััะพ ะพะฑัะทะฐัะตะปัะฝะพ

- ะัะธ ะฟัะธัะผะต ะพะฟะปะฐัั ะพั **ัะธะทะปะธั** ะทะฐ ัะพะฒะฐัั/ัะฐะฑะพัั/ััะปัะณะธ ะพัะณะฐะฝะธะทะฐัะธั/ะะ, ะบะฐะบ
  ะฟัะฐะฒะธะปะพ, ะพะฑัะทะฐะฝั ะฟัะธะผะตะฝััั **ะะะข** ะธ ัะพัะผะธัะพะฒะฐัั **ะบะฐััะพะฒัะน ัะตะบ** (ะฒ ั.ั. ะฟัะธ
  ะพะฝะปะฐะนะฝ-ะพะฟะปะฐัะต).
- โะะพะดัะฒะตัะถะดะตะฝะธะต ะพะฟะปะฐััโ ะพั ะฟะปะฐััะถะฝะพะณะพ ัะตัะฒะธัะฐ **ะฝะต ะทะฐะผะตะฝัะตั** ัะธัะบะฐะปัะฝัะน ัะตะบ:
  ัะตะบ ะดะพะปะถะตะฝ ะฑััั ัะธัะบะฐะปะธะทะธัะพะฒะฐะฝ ะธ ะฟะตัะตะดะฐะฝ ัะตัะตะท ะะคะ ะฒ ะคะะก.

### 18.K.2 ะงัะพ ัะฐะบะพะต ะะคะ ะธ ะบะฐะบ ััััะพะตะฝ ะฟะพัะพะบ

**ะคะธัะบะฐะปะธะทะฐัะธั** = ัะตะณะธัััะฐัะธั ะพะฟะตัะฐัะธะธ ะพะฟะปะฐัั ัะตัะตะท ะะะข: ะะะข ัะพัะผะธััะตั ัะตะบ โ
ะดะฐะฝะฝัะต ััะพะดัั **ะพะฟะตัะฐัะพัั ัะธัะบะฐะปัะฝัั ะดะฐะฝะฝัั (ะะคะ)** โ ะทะฐัะตะผ ะฒ ะคะะก.

### 18.K.3 ะงัะพ ะธะผะตะฝะฝะพ ะฝัะถะฝะพ ะพะฑะตัะฟะตัะธัั ะฒ HEYS (Definition of Done)

- ะะพัะปะต ััะฟะตัะฝะพะน ะพะฟะปะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ:
  1. ัะพัะผะธััะตััั ัะตะบ (ะฟัะธัะพะด) ั ะบะพััะตะบัะฝัะผะธ ะฟัะธะทะฝะฐะบะฐะผะธ,
  2. ัะตะบ ััะพะดะธั ัะตัะตะท ะะคะ ะฒ ะคะะก,
  3. ัะปะตะบััะพะฝะฝัะน ัะตะบ ััะพะดะธั ะบะปะธะตะฝัั ะฝะฐ **email/ัะตะปะตัะพะฝ**,
  4. ะฒะพะทะฒัะฐั/ัะฐััะธัะฝัะน ะฒะพะทะฒัะฐั ัะพัะผะธััะตั ัะตะบ ะฒะพะทะฒัะฐัะฐ.

---

### 18.K.4 ะะฐัะธะฐะฝัั ัะตะฐะปะธะทะฐัะธะธ (ะฒัะฑัะฐัั ะพะดะธะฝ)

#### ะะฐัะธะฐะฝั A โ ะกะฒะพั/ะพะฑะปะฐัะฝะฐั ะพะฝะปะฐะนะฝ-ะบะฐััะฐ + ะะคะ (ัะตัะตะท ะฎKassa)

ะกัะตะผะฐ:

- ัั ะฟะพะดะบะปััะฐะตัั ะพะฝะปะฐะนะฝ-ะบะฐััั (ัะฐััะพ โะพะฑะปะฐัะฝััโ) ะธ ะะคะ,
- ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต ะฎKassa ะฒะบะปััะฐะตัั ะพัะฟัะฐะฒะบั ัะตะบะพะฒ ะธ ะฟะพะดะบะปััะฐะตัั
  ะบะฐััั/ะฟัะพะฒะฐะนะดะตัะฐ, ะฎKassa ะฟะตัะตะดะฐัั ะดะฐะฝะฝัะต ะดะปั ัะธัะบะฐะปะธะทะฐัะธะธ.

ะะปััั:

- ะผะฐะบัะธะผะฐะปัะฝะฐั ะณะธะฑะบะพััั (ะฝะพะผะตะฝะบะปะฐัััะฐ, ะฒะพะทะฒัะฐัั, ััะตะฝะฐัะธะธ).

ะะธะฝััั:

- ะฑะพะปััะต ะดะพะณะพะฒะพัะพะฒ/ะฝะฐัััะพะตะบ (ะบะฐััะฐ, ะะคะ, ะธะฝะพะณะดะฐ ัะธัะบะฐะปัะฝัะน ะฝะฐะบะพะฟะธัะตะปั ั
  ะฟัะพะฒะฐะนะดะตัะฐ).

#### ะะฐัะธะฐะฝั B โ ยซะงะตะบะธ ะพั ะฎKassaยป

ะฎKassa ะฟัะตะดะปะฐะณะฐะตั ัะตะถะธะผ, ะบะพะณะดะฐ **ะฝะต ะฝัะถะฝะพ** ะพัะดะตะปัะฝะพ ะฟะพะดะบะปััะฐัั
ะพะฝะปะฐะนะฝ-ะบะฐััั/ัะธัะบะฐะปัะฝัะน ะฝะฐะบะพะฟะธัะตะปั: โะงะตะบะธ ะพั ะฎKassaโ ะฒะบะปััะฐัััั ะฒ ะะ ะธ ะทะฐะบััะฒะฐัั
54-ะคะ ะบะฐะบ ัะตัะฒะธั.

ะะปััั:

- ะฟัะพัะต ะธ ะฑััััะตะต ััะฐัั (ะผะธะฝะธะผัะผ ะธะฝััะฐััััะบัััั).

ะะธะฝััั/ะฟัะพะฒะตัะบะธ:

- ะฟะพะดัะพะดะธั ะฝะต ะดะปั ะฒัะตั ััะตะฝะฐัะธะตะฒ (ะฝัะถะฝะพ ัะฒะตัะธัั ะพะณัะฐะฝะธัะตะฝะธั โะพะฑััะฝัั ะฟะปะฐัะตะถะตะนโ ะธ
  ะฒะฐัั ะผะพะดะตะปั).

**ะะตะบะพะผะตะฝะดะฐัะธั ะดะปั HEYS (ะฑัััััะน ััะฐัั):** ะฝะฐัะฐัั ั **ะะฐัะธะฐะฝัะฐ B**, ะตัะปะธ ะพะฝ
ัะพะฒะผะตััะธะผ ั ะฒะฐัะธะผ ััะตะฝะฐัะธะตะผ (ะฟะพะดะฟะธัะบะฐ ะฑะตะท ะฐะฒัะพัะฟะธัะฐะฝะธะน, ััะปัะณะธ, ะฒะพะทะฒัะฐัั). ะัะปะธ
ะพะณัะฐะฝะธัะตะฝะธั ะผะตัะฐัั โ ะะฐัะธะฐะฝั A.

---

### 18.K.5 ะงัะพ ะดะพะปะถะฝะพ ะฑััั ะฒ ัะตะบะต (ััะพ ัะพะณะปะฐัะพะฒะฐัั ั ะฑััะณะฐะปัะตัะพะผ)

#### 1) ะะพะผะตะฝะบะปะฐัััะฐ (ะฝะฐะทะฒะฐะฝะธะต ะฟะพะทะธัะธะธ)

ะัะธะผะตั (ะบะฐะบ โััะปัะณะฐโ):

- `HEYS Base โ ะดะพัััะฟ ะบ ัะตัะฒะธัั ะธ ัะพะฟัะพะฒะพะถะดะตะฝะธะต (1 ะผะตััั)` ะะปั Pro/Pro+
  ะฐะฝะฐะปะพะณะธัะฝะพ.

#### 2) โะัะตะดะผะตั ัะฐััััะฐโ ะธ โัะฟะพัะพะฑ ัะฐััััะฐโ

ะะปััะตะฒะพะน ะฒัะฑะพั, ะบะพัะพััะน ะฒะปะธัะตั ะฝะฐ ะธะฝัะตะณัะฐัะธั:

- **ะัะพัะต ะฒัะตะณะพ**: ัะตะบ ะบะฐะบ **ะฟะพะปะฝัะน ัะฐัััั** ะฒ ะผะพะผะตะฝั ะพะฟะปะฐัั ะทะฐ ะผะตััั (ะฟะพะดัะพะดะธั,
  ะตัะปะธ ะฒั ัะตะฐะปัะฝะพ ะพะบะฐะทัะฒะฐะตัะต ััะปัะณั/ะฟัะตะดะพััะฐะฒะปัะตัะต ะดะพัััะฟ ะฝะฐ ะพะฟะปะฐัะตะฝะฝัะน ะฟะตัะธะพะด).
- ะกะปะพะถะฝะตะต: โะฟัะตะดะพะฟะปะฐัะฐ/ะฐะฒะฐะฝัโ + โะทะฐััั ะฟัะตะดะพะฟะปะฐััโ (ะพะฑััะฝะพ ะฝัะถะฝะพ, ะตัะปะธ ะฑััะณะฐะปัะตั
  ัะฐะบ ััะตะฑัะตั ะฟะพะด ะฒะฐัั ะผะพะดะตะปั).

#### 3) ะะะก ะฒ ัะตะบะต

ะะฐ ัะฟะตััะตะถะธะผะฐั ัะฐััะพ โะฑะตะท ะะะกโ, ะฝะพ ััะพ ะฟะพะดัะฒะตัะถะดะฐะตั ะฑััะณะฐะปัะตั (ะทะฐะฒะธัะธั ะพั ัะตะถะธะผะฐ
ะะ/ะฃะกะ/ะดั.).

---

### 18.K.6 ะัะฟัะฐะฒะบะฐ ัะปะตะบััะพะฝะฝะพะณะพ ัะตะบะฐ ะบะปะธะตะฝัั

- ะญะปะตะบััะพะฝะฝัะน ัะตะบ ะพัะฟัะฐะฒะปัะตััั ะฟัะธ ะฝะฐะปะธัะธะธ email/ัะตะปะตัะพะฝะฐ (ะพะฑััะฝะพ ัะตัะตะท ะะคะ).
- ะกัะพะบะธ ะพัะฟัะฐะฒะบะธ ัะปะตะบััะพะฝะฝะพะณะพ ัะตะบะฐ ะฟัะธ ะธะฝัะตัะฝะตั-ะฟัะพะดะฐะถะฐั: ะฝะต ะฟะพะทะดะฝะตะต ัะปะตะดัััะตะณะพ
  ัะฐะฑะพัะตะณะพ ะดะฝั / ะฝะต ะฟะพะทะดะฝะตะต ะผะพะผะตะฝัะฐ ะฟะตัะตะดะฐัะธ ัะพะฒะฐัะฐ/ะพะบะฐะทะฐะฝะธั (ะทะฐะฒะธัะธั ะพั
  ัะธััะฐัะธะธ), ะฝะพ ะดะปั ะพะฝะปะฐะนะฝ-ััะปัะณ ะพะฑััะฝะพ ะดะตะปะฐัั **ััะฐะทั** ะฟะพัะปะต ะพะฟะปะฐัั.

**ะัะฐะบัะธะบะฐ ะดะปั HEYS:** ะฝะฐ ัะบัะฐะฝะต ะพะฟะปะฐัั ัะพะฑัะฐัั email ะธะปะธ ัะตะปะตัะพะฝ ะดะปั ัะตะบะฐ ะธ
ััะฐะฝะธัั ะฒ ะฟัะพัะธะปะต.

---

### 18.K.7 ะะพะทะฒัะฐัั ะธ ัะฐััะธัะฝัะต ะฒะพะทะฒัะฐัั

ะัะถะฝะพ ัะพะณะปะฐัะพะฒะฐัั ะธ ัะตะฐะปะธะทะพะฒะฐัั:

- ะบะฐะบะฐั ัะพัะฝะฐั ัะพัะผัะปะฐ โะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพ ะฝะตะพะบะฐะทะฐะฝะฝัะผ ะดะฝัะผโ,
- ะบัะพ ะธะฝะธัะธะธััะตั (ะฟะพะดะดะตัะถะบะฐ/ะฐะฒัะพ),
- ะบะฐะบะพะน ัะธะฟ ะพะฟะตัะฐัะธะธ ะฒ ะบะฐััะต (ะฒะพะทะฒัะฐั ะฟัะธัะพะดะฐ) ะธ ะบะฐะบะธะต ะดะฐะฝะฝัะต ะฟะตัะตะดะฐัััั ะฒ
  ัะธัะบะฐะปะธะทะฐัะธั.

---

### 18.K.8 ะงัะพ ัะฟัะพัะธัั ะฑััะณะฐะปัะตัะฐ (ะคะธัะบะฐะปะธะทะฐัะธั)

1. ะัะถะฝะฐ ะปะธ ะะะข/ัะธัะบะฐะปะธะทะฐัะธั ะฒ ะฝะฐัะตะน ะผะพะดะตะปะธ (ะพะฝะปะฐะนะฝ-ะพะฟะปะฐัะฐ ัะธะทะปะธัะฐะผะธ ะทะฐ ััะปัะณะธ)
   โ ะพะถะธะดะฐะตะผะพ **ะดะฐ**.
2. ะงัะพ ะฒัะฑัะฐัั: **ยซะงะตะบะธ ะพั ะฎKassaยป** ะธะปะธ **ะพะฑะปะฐัะฝะฐั ะบะฐััะฐ+ะะคะ** (ะธ ะบะฐะบะพะน
   ะฟัะพะฒะฐะนะดะตั).
3. ะะฐะบะพะน โัะฟะพัะพะฑ ัะฐััััะฐโ ััะฐะฒะธะผ ะฒ ัะตะบะต: ะฟะพะปะฝัะน ัะฐัััั ะธะปะธ ะฟัะตะดะพะฟะปะฐัะฐ/ะทะฐััั.
4. ะะฐะบ ะพัะพัะผะปัะตะผ ะฒะพะทะฒัะฐัั (ะธ ัะตะบ ะฒะพะทะฒัะฐัะฐ) ะฟะพะด ะฝะฐัั ะฟะพะปะธัะธะบั.
5. ะะฐะบัั ัััะพะบั ะฝะพะผะตะฝะบะปะฐัััั ะธ ะฟัะธะทะฝะฐะบ ะฟัะตะดะผะตัะฐ ัะฐััััะฐ ะธัะฟะพะปัะทะพะฒะฐัั
   (ััะปัะณะฐ/ะดะพัััะฟ).
6. ะะดะต ะธ ะบะฐะบ ััะฐะฝะธะผ email/ัะตะปะตัะพะฝ ะดะปั ะพัะฟัะฐะฒะบะธ ัะตะบะฐ; ะฝัะถะตะฝ ะปะธ ะพัะดะตะปัะฝัะน
   ัะตะบะฑะพะบั-ัะพะณะปะฐัะธะต ะฝะฐ ัะปะตะบััะพะฝะฝัะน ัะตะบ.

---

### 18.K.9 ะะปะฐะฝ ะฒะฝะตะดัะตะฝะธั (ัะตะบะปะธัั)

#### ะัะปะธ ะฒัะฑะธัะฐะตะผ ะะฐัะธะฐะฝั B (ะงะตะบะธ ะพั ะฎKassa)

1. ะะพะดะบะปััะธัั ะฎKassa โ ะฒะบะปััะธัั ยซะงะตะบะธ ะพั ะฎKassaยป ะฒ ะะ.
2. ะะฐัััะพะธัั ะฟะฐัะฐะผะตััั ัะตะบะพะฒ (ะฝะพะผะตะฝะบะปะฐัััะฐ, ะฝะฐะปะพะณะธ/ััะฐะฒะบะธ, ะบะพะฝัะฐะบัั ะฟะพะบัะฟะฐัะตะปั).
3. ะะตะฐะปะธะทะพะฒะฐัั webhook ะพะฟะปะฐัั โ ะฐะบัะธะฒะธัะพะฒะฐัั ะฟะพะดะฟะธัะบั ะฒ ะะ.
4. ะัะพัะตััะธัะพะฒะฐัั: ะพะฟะปะฐัะฐ โ ัะตะบ โ ะฒะพะทะฒัะฐั โ ัะตะบ ะฒะพะทะฒัะฐัะฐ.

#### ะัะปะธ ะฒัะฑะธัะฐะตะผ ะะฐัะธะฐะฝั A (ะะฑะปะฐัะฝะฐั ะบะฐััะฐ + ะะคะ)

1. ะัะฑัะฐัั ะบะฐััั/ะฟัะพะฒะฐะนะดะตัะฐ + ะะคะ (ะผะพะถะฝะพ ะธะท ัะตะตัััะฐ ะคะะก/ะฟะฐััะฝััะพะฒ ะบะฐััั).
2. ะะฐัะตะณะธัััะธัะพะฒะฐัั/ะฐะบัะธะฒะธัะพะฒะฐัั ะบะฐััั ั ะฟัะพะฒะฐะนะดะตัะฐ.
3. ะ ะฎKassa: โะะฐัััะพะนะบะธ โ ะะฝะปะฐะนะฝ-ะบะฐััะฐโ โ ะฒัะฑัะฐัั ะฟัะพะฒะฐะนะดะตัะฐ โ ะฟะพะดะบะปััะธัั.
4. ะัะพัะตััะธัะพะฒะฐัั: ะพะฟะปะฐัะฐ โ ัะตะบ โ ะฒะพะทะฒัะฐั โ ัะตะบ ะฒะพะทะฒัะฐัะฐ.

---

### ะะฐะถะฝะพ (ััะพะฑั ะฑัะธั ะฝะต ะฒัะฐะป ัะฐะผ ัะตะฑะต)

ะัะปะธ **SMS-ะฒะตัะธัะธะบะฐัะธั** ั ะฒะฐั โะฟะพะทะถะตโ, ัะพ ะดะปั ัะตะบะพะฒ ััะพ ะฝะต ะฒะฐะถะฝะพ. ะะปั ัะตะบะพะฒ
ะฒะฐะถะฝั:

- ะบะพััะตะบัะฝัะน ััะฐััั ะพะฟะปะฐัั,
- ะบะพััะตะบัะฝะฐั ัะธัะบะฐะปะธะทะฐัะธั,
- ะบะพะฝัะฐะบัั ะดะปั ะพัะฟัะฐะฒะบะธ ัะตะบะฐ,
- ะบะพััะตะบัะฝัะต ะฒะพะทะฒัะฐัั.

5. **ะะฐะบะฐั ััะตะผะฐ ัะตะบะพะฒ ะฟะพ ะฟะพะดะฟะธัะบะต ะบะพััะตะบัะฝะฐ** ะธะผะตะฝะฝะพ ะดะปั ะฝะฐัะตะณะพ ะบะตะนัะฐ: โะฟะพะปะฝัะน
   ัะฐัััั ััะฐะทัโ ะธะปะธ โะฟัะตะดะพะฟะปะฐัะฐ/ะฐะฒะฐะฝัโ + ะทะฐััั?
6. ะงัะพ ะฝัะถะฝะพ ะดะปั **ะฒะพะทะฒัะฐัะพะฒ** (ะดะพะบัะผะตะฝัั/ะพัะฝะพะฒะฐะฝะธั/ัะตะบะธ) ะธ ะบะฐะบ ััะพ ะฑััััั ั
   โะฒะพะทะฒัะฐั ะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพ ะฝะตะพะบะฐะทะฐะฝะฝัะผ ะดะฝัะผโ?
7. **ะัะพ ะฑัะดะตั ะพะฟะตัะฐัะพัะพะผ ัะธัะบะฐะปัะฝัั ะดะฐะฝะฝัั (ะะคะ)** ะธ ะบะฐะบะฐั ะบะฐััะฐ/ะพะฑะปะฐัะฝะฐั ะบะฐััะฐ
   ะพะฟัะธะผะฐะปัะฝะฐ (ะตัะปะธ ะธะดัะผ ะฟะพ ะฒะฐัะธะฐะฝัั A)?
8. ะัะปะธ ะธะดัะผ ะฟะพ โะงะตะบะธ ะพั ะฎKassaโ โ **ะฟะพะดัะพะดะธั ะปะธ ะพะฝะพ** ะฟะพะด ะฝะฐัั ะกะะ/ะผะพะดะตะปั
   ะฟะพะดะฟะธัะบะธ/ะฒะพะทะฒัะฐัั/ะฝะพะผะตะฝะบะปะฐัััั? ([Yookassa][1])
9. ะะฐะบ ะฟัะฐะฒะธะปัะฝะพ ะพัะพัะผะปััั ะฒัะฟะปะฐัั ะบััะฐัะพัะฐะผ (ะตัะปะธ ะพะฝะธ ะะะ/ัะฐะผะพะทะฐะฝัััะต):
   ะดะพะณะพะฒะพัั, ะฐะบัั (ะตัะปะธ ะฝัะถะฝั), ัะตะบะธ ะธะท โะะพะน ะฝะฐะปะพะณโ, ัะธัะบะธ ะฟะตัะตะบะฒะฐะปะธัะธะบะฐัะธะธ.

---

### 18.J.9 ะะปะฐะฝ ัะฐะฑะพั (ัะตะบะปะธัั ะฟะพะด ะทะฐะฟััะบ ะฟะปะฐัะตะถะตะน)

| ะจะฐะณ | ะะฐะดะฐัะฐ                                                                           | ะกัะฐััั |
| --- | -------------------------------------------------------------------------------- | ------ |
| 1   | ะะฐัะธะบัะธัะพะฒะฐัั ัั. ะบะพะฝััั (ะะ/ะะะ) ะธ ัะตะถะธะผ ะฝะฐะปะพะณะพะพะฑะปะพะถะตะฝะธั ะดะปั HEYS               | โ      |
| 2   | ะะตัะธัั ััะดัะฑั ะะกะ โัะพัะพะณัะฐัโ (ะพััะฐะฒะปัะตะผ/ะฝะต ะฟัะพะดะปะตะฒะฐะตะผ)                           | โ      |
| 3   | ะะพะฑะฐะฒะธัั/ะฐะบััะฐะปะธะทะธัะพะฒะฐัั ะะะะญะ ะฟะพะด HEYS (ะตัะปะธ ะฝัะถะฝะพ)                             | โ      |
| 4   | ะัะฑัะฐัั ััะตะผั ัะตะบะพะฒ (ะฟะพะปะฝัะน ัะฐัััั vs ะฟัะตะดะพะฟะปะฐัะฐ/ะทะฐััั)                          | โ      |
| 5   | ะัะฑัะฐัั ะฒะฐัะธะฐะฝั ัะธัะบะฐะปะธะทะฐัะธะธ: (A) ะบะฐััะฐ+ะะคะ ะธะปะธ (B) โะงะตะบะธ ะพั ะฎKassaโ             | โ      |
| 6   | ะะฐัะตะณะธัััะธัะพะฒะฐัััั ะฒ ะฎKassa, ะฟะพะปััะธัั `shopId/secretKey`                         | โ      |
| 7   | ะะตะฐะปะธะทะพะฒะฐัั `payments/create` + webhook `payment_succeeded` โ ะฐะบัะธะฒะฐัะธั ะฟะพะดะฟะธัะบะธ | โ      |
| 8   | ะะฐัััะพะธัั ะธ ะฟัะพัะตััะธัะพะฒะฐัั ัะตะบะธ (ััะฟะตัะฝัะน ะฟะปะฐััะถ + ะฒะพะทะฒัะฐั)                      | โ      |
| 9   | ะะฑะฝะพะฒะธัั ะพัะตััั/ะฟะพะปะธัะธะบั (ะฟะปะฐัะตะถะธ, ัะตะบะธ, ะฒะพะทะฒัะฐัั)                               | โ      |
| 10  | Smokeโัะตัั endโtoโend: ะพะฟะปะฐัะธะป โ ะฟะพะดะฟะธัะบะฐ active โ ัะตะบ ะฒ ะคะะก/ะบะปะธะตะฝัั             | โ      |

**DoD ะฑะปะพะบะฐ:** ะฎKassa ะฟัะธะฝะธะผะฐะตั ะพะฟะปะฐัั; ะฟะพะดะฟะธัะบะฐ ะฐะบัะธะฒะธััะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ; ัะตะบ
ัะพัะผะธััะตััั ะธ ััะพะดะธั ะบะพััะตะบัะฝะพ; ะฒะพะทะฒัะฐั ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ.

---

### ะััะพัะฝะธะบะธ (ะดะปั ะฑััะณะฐะปัะตัะฐ/ััะธััะฐ, ััะพะฑั ัะฒะตัะธัั ะฑะฐะทะพะฒัะต ััะฒะตัะถะดะตะฝะธั)

- ะคะะก: ะะกะ ะผะพะถะตั ัะพะฒะผะตัะฐัััั ั ะฃะกะ/ะะกะ/ะะกะฅะ (ะพัะธัะธะฐะปัะฝะฐั ะฟัะฑะปะธะบะฐัะธั). ([Federal
  Tax Service][2])
- ะะตัะพะดะธัะบะฐ/ัะฐะทัััะฝะตะฝะธะต ะฟะพ ะะะข: ะฟัะธ ะฟัะพะดะฐะถะต ัะธะทะปะธัะฐะผ ะะะข ะฟัะธะผะตะฝัะตััั ะฝะตะทะฐะฒะธัะธะผะพ
  ะพั ัะฟะพัะพะฑะฐ ะพะฟะปะฐัั (ะฒะบะปััะฐั ะพะฟะปะฐัั ัะตัะตะท ะฑะฐะฝะบโะพะฝะปะฐะนะฝ/ะกะะ ะธ ั.ะฟ.). ([Federal Tax
  Service][3])
- ะฎKassa: ะฟัะพ ะพะฑัะทะฐัะตะปัะฝะพััั ัะตะบะพะฒ, ะฒะฐัะธะฐะฝัั ัะธัะบะฐะปะธะทะฐัะธะธ (ะฟะฐััะฝัััะบะธะต ะบะฐััั /
  โะงะตะบะธ ะพั ะฎKassaโ), ะธ ััะพ ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะพะฟะปะฐัั โ ัะตะบ. ([Yookassa][1])

[1]:
  https://yookassa.ru/54fz/
  'ะะฝะปะฐะนะฝ-ะบะฐััั ะฟะพะด 54-ะคะ: ะณะพัะพะฒัะต ัะตัะตะฝะธั ะดะปั ะฑะธะทะฝะตัะฐ. ะฎKassa'
[2]:
  https://www.nalog.gov.ru/rn32/news/seminar/16578444/
  'ะะฐ ะฒะตะฑะธะฝะฐัะต ัะฐััะบะฐะทะฐะปะธ ะพ ะฟะฐัะตะฝัะฝะพะน ัะธััะตะผะต ะฝะฐะปะพะณะพะพะฑะปะพะถะตะฝะธั  |  ะคะะก ะะพััะธะธ  | 32 ะััะฝัะบะฐั ะพะฑะปะฐััั'
[3]:
  https://www.nalog.gov.ru/html/sites/www.rn77.nalog.ru/%D0%9C%D0%A4%D0%9E%20%281%29.pdf
  'ะะะกะะะะะะ ะะะะะะะะ  ะฃะคะะก ะะะกะกะะ ะะ ะ. ะะะกะะะ'

---

### 18.L ะฎKassa โ ัะตัะฝะธัะตัะบะฐั ะธะฝัะตะณัะฐัะธั `[TECH]`

#### 18.L.1 Webhook-ะบะพะฝััะฐะบั ะฎKassa

**ะัะถะฝัะต ัะพะฑััะธั ะดะปั HEYS:**

| ะกะพะฑััะธะต                       | ะะพะณะดะฐ ััะฐะฑะฐััะฒะฐะตั            | ะะตะนััะฒะธะต HEYS                    |
| ----------------------------- | ---------------------------- | -------------------------------- |
| `payment.succeeded`           | ะะฟะปะฐัะฐ ะฟัะพัะปะฐ ััะฟะตัะฝะพ        | โ ะะบัะธะฒะธัะพะฒะฐัั ะฟะพะดะฟะธัะบั         |
| `payment.canceled`            | ะะปะฐััะถ ะพัะผะตะฝัะฝ               | โ ะะ ะฐะบัะธะฒะธัะพะฒะฐัั               |
| `payment.waiting_for_capture` | ะะฒััััะฐะดะธะนะฝัะน (ะตัะปะธ ะฒะบะปัััะฝ) | โณ ะะดะฐัั capture                 |
| `refund.succeeded`            | ะะพะทะฒัะฐั ะทะฐะฒะตัััะฝ             | ๐ ะัะบะฐัะธัั ะดะพัััะฟ (ะฟะพ ะฟัะฐะฒะธะปะฐะผ) |

**ะคะพัะผะฐั ัะฒะตะดะพะผะปะตะฝะธั:**

```json
{
  "type": "notification",
  "event": "payment.succeeded",
  "object": { "id": "...", "status": "succeeded", "amount": {...}, ... }
}
```

**ะัะธัะธัะฝัะต ะฟัะฐะฒะธะปะฐ:**

1. **HTTP 200 ะพะฑัะทะฐัะตะปะตะฝ** โ ะธะฝะฐัะต ะฎKassa ัะตััะฐะธั ะดะพ 24ั
   ([docs](https://yookassa.ru/developers/using-api/webhooks))
2. **ะัะพะฒะตัะบะฐ ะฟะพะดะปะธะฝะฝะพััะธ:**
   - Allowlist IP-ะฐะดัะตัะพะฒ ะฎKassa
   - GET ััะฐัััะฐ ะพะฑัะตะบัะฐ ัะตัะตะท API ะฟะตัะตะด ะฐะบัะธะฒะฐัะธะตะน
3. **ะะดะตะผะฟะพัะตะฝัะฝะพััั:** ะดะตะดัะฟ ะฟะพ `(event, object.id)` โ webhook ะผะพะถะตั ะฟัะธะนัะธ
   ะฟะพะฒัะพัะฝะพ

#### 18.L.2 ะะดะตะผะฟะพัะตะฝัะฝะพััั

| ะะดะต                    | ะะฐะบ                                                                                                                    |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| **ะกะพะทะดะฐะฝะธะต ะฟะปะฐัะตะถะฐ**   | ะะฐะณะพะปะพะฒะพะบ `Idempotence-Key` (UUID), ะฐะบััะฐะปะตะฝ 24ั ([docs](https://yookassa.ru/developers/using-api/interaction-format)) |
| **ะะฑัะฐะฑะพัะบะฐ webhook**  | ะะตะดัะฟ ะฟะพ `dedupe_key = event + ":" + object.id`                                                                        |
| **ะะบัะธะฒะฐัะธั ะฟะพะดะฟะธัะบะธ** | ะัะพะฒะตัะบะฐ: ัะถะต `active`? โ skip                                                                                         |

#### 18.L.3 ะกัะตะผะฐ ัะฐะฑะปะธั PostgreSQL

**`payments`** โ ะฝะฐัะธ ะฟะปะฐัะตะถะธ:

| ะะพะปะต                  | ะขะธะฟ         | ะะฟะธัะฐะฝะธะต                                    |
| --------------------- | ----------- | ------------------------------------------- |
| `id`                  | UUID        | ะะฝัััะตะฝะฝะธะน ID                               |
| `yookassa_payment_id` | TEXT        | ID ะฟะปะฐัะตะถะฐ ะฒ ะฎKassa                         |
| `client_id`           | UUID        | FK โ clients                                |
| `plan_code`           | TEXT        | `Base` / `Pro` / `Pro+`                     |
| `amount_value`        | NUMERIC     | ะกัะผะผะฐ                                       |
| `amount_currency`     | TEXT        | `RUB`                                       |
| `status`              | TEXT        | `created`/`succeeded`/`canceled`/`refunded` |
| `idempotence_key`     | TEXT        | ะะปั ะทะฐัะธัั ะพั ะดัะฑะปะตะน                        |
| `confirmation_url`    | TEXT        | URL ะพะฟะปะฐัั (redirect)                       |
| `is_test`             | BOOLEAN     | ะขะตััะพะฒัะน ะฟะปะฐััะถ?                            |
| `created_at`          | TIMESTAMPTZ | โ                                           |

**`yookassa_webhook_events`** โ ะปะพะณ webhook (ะพะฑัะทะฐัะตะปัะฝะพ ะดะปั ะดะตะฑะฐะณะฐ):

| ะะพะปะต                | ะขะธะฟ         | ะะฟะธัะฐะฝะธะต                   |
| ------------------- | ----------- | -------------------------- |
| `id`                | SERIAL      | โ                          |
| `event`             | TEXT        | `payment.succeeded` ะธ ะดั.  |
| `object_id`         | TEXT        | ID ะพะฑัะตะบัะฐ ะฒ ะฎKassa        |
| `dedupe_key`        | TEXT        | `event:object_id` (UNIQUE) |
| `received_at`       | TIMESTAMPTZ | ะะพะณะดะฐ ะฟะพะปััะธะปะธ             |
| `processed_at`      | TIMESTAMPTZ | ะะพะณะดะฐ ะพะฑัะฐะฑะพัะฐะปะธ           |
| `processing_result` | TEXT        | `ok` / `error:reason`      |
| `raw_body`          | JSONB       | ะะพะปะฝัะน payload             |

#### 18.L.4 ะกัะฐัััั ะธ ะฟะตัะตัะพะดั

**ะกัะฐัััั ะฟะปะฐัะตะถะฐ (ะฒะฝัััะตะฝะฝะธะต):**

```
created โ succeeded โ (refunded)
       โ canceled
```

**ะะตัะตัะพะดั ะฟะพะดะฟะธัะบะธ:**

```
trial โ read_only (ะธัััะบ ััะธะฐะป, ะฝะตั ะพะฟะปะฐัั)
read_only โ active (ัะพะปัะบะพ ะฟะพัะปะต payment.succeeded!)
active โ read_only (refund / ะธัััะบ ะฟะตัะธะพะด)
```

#### 18.L.5 ะะธัะบะธ ะธะฝัะตะณัะฐัะธะธ

| ะะธัะบ                          | ะะพัะปะตะดััะฒะธะต                        | ะะธัะธะณะฐัะธั                            |
| ----------------------------- | ---------------------------------- | ------------------------------------ |
| Webhook ะฝะต ะพัะดะฐะป 200          | ะะตััะฐะธ 24ั, ะดัะฑะปะธ ะฐะบัะธะฒะฐัะธะน        | Idempotency + ะปะพะณะธัะพะฒะฐะฝะธะต            |
| ะะตั ะฟัะพะฒะตัะบะธ ะฟะพะดะปะธะฝะฝะพััะธ      | ะคะตะนะบะพะฒัะต webhook ะพั ะทะปะพัะผััะปะตะฝะฝะธะบะฐ | IP allowlist + GET ััะฐัััะฐ ะฟะพ API    |
| ะะตั ะดะตะดัะฟะฐ webhook            | ะะฒะพะนะฝะฐั ะฐะบัะธะฒะฐัะธั/ะฒะพะทะฒัะฐั          | UNIQUE constraint ะฝะฐ dedupe_key      |
| ะกะะ ะฒ ัะตะบะต โ ัะตะถะธะผ ะฒััััะบะธ    | ะะฐะปะพะณะพะฒัะต ะฟัะพะฑะปะตะผั                 | ะะฐัััะพะธัั ะบะฐััั ะฟะพะด ะฟัะฐะฒะธะปัะฝัะน ัะตะถะธะผ |
| ะะตั email/ัะตะปะตัะพะฝะฐ ะฟะพะบัะฟะฐัะตะปั | ะัะพะฑะปะตะผั ั ัะปะตะบััะพะฝะฝัะผ ัะตะบะพะผ       | ะกะพะฑะธัะฐัั ะฒ ัะพัะผะต ะพะฟะปะฐัั/ะฟัะพัะธะปะต      |

#### 18.L.6 ะะปะฐะฝ ะทะฐะฟััะบะฐ ะพะฟะปะฐัั

1. โธ๏ธ **ะััะณะฐะปัะตั:** ะฃะกะ/ะะกะะ, ะะะะญะ, ะผะพะดะตะปั ะฟัะพะดะฐะถะธ, ะฟะฐัะฐะผะตััั ัะตะบะฐ
2. โธ๏ธ **ะฎKassa:** ัะตะณะธัััะฐัะธั โ `shopId`
3. โธ๏ธ **54-ะคะ:** ะฒัะฑะพั ะฒะฐัะธะฐะฝัะฐ (A/B), ะบะฐััะฐ + ะะคะ, ัะตััะพะฒัะน ัะตะบ
4. ๐ง **Webhook** `payment_succeeded` โ ะฐะบัะธะฒะฐัะธั ะฟะพะดะฟะธัะบะธ (~2-4 ัะฐัะฐ)
5. ๐ง **UI:** ะบะฝะพะฟะบะฐ "ะะฟะปะฐัะธัั" + ัะตะดะธัะตะบั ะฝะฐ ะฎKassa (~2 ัะฐัะฐ)

---

## 19. ะะฟะตัะฐัะธะพะฝะฝัะต ะทะฐะดะฐัะธ (ะดะปั ะบััะฐัะพัะฐ) `[OPS]`

**ะะพะบัะผะตะฝั:**
[docs/operations/CURATOR_PROTOCOLS.md](./operations/CURATOR_PROTOCOLS.md)

| ะะฐะดะฐัะฐ                                      | ะกัะฐััั               |
| ------------------------------------------- | -------------------- |
| ะัะพัะพะบะพะป ะพัะผะตัะพะบ (๐โโโ)                 | โ ะะฐะทะพะฒัะน           |
| ะจะฐะฑะปะพะฝั ะบะฐัะฐะฝะธะน (ัััะพ/ะพะฑะตะด/ะฒะตัะตั/ะฐะฝัะธ-ัััะฒ) | โ ะะฐะทะพะฒัะน           |
| Day 0 ัะพะพะฑัะตะฝะธะต (ะณะพัะพะฒัะน ัะตะบัั)             | โ ะะฐะทะพะฒัะน           |
| Day 7 ััะตะฝะฐัะธะน (ัะฐะผะผะฐัะธ + CTA)              | โ ะะฐะทะพะฒัะน           |
| ะัะพัะพะบะพะป ััะพะฟ-ัะธััะฐัะธะน                      | โ ะะฐะทะพะฒัะน           |
| ะะธะผะธั ัะปะพัะพะฒ ััะธะฐะปะฐ                         | โ 3 ััะธะฐะปะฐ + 14 Pro |

---

# ะงะะกะขะฌ VI: ะขะะฅะะะงะะกะะะฏ ะกะะฏะะะ

## 20. ะะฐััะฐ ยซะะธะทะฝะตั โ ะะพะดยป

### 20.1 ะะฒัะพัะธะทะฐัะธั

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต       | ะคะฐะนะป/ะผะพะดัะปั                              | ะกัะฐััั |
| ----------------------- | ---------------------------------------- | ------ |
| ะะปะธะตะฝั: ัะตะปะตัะพะฝ + PIN   | `heys_auth_v1.js`                        | โ     |
| ะััะฐัะพั: email + ะฟะฐัะพะปั | YandexAPI + PostgreSQL                   | โ     |
| Desktop Gate            | `DesktopGateScreen`                      | โ     |
| PIN ัะตัะธัะพะฒะฐะฝะธะต         | `database/2025-12-12_phone_pin_auth.sql` | โ     |

### 20.2 ะะฝะตะฒะฝะธะบ ะฟะธัะฐะฝะธั

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต | ะคะฐะนะป/ะผะพะดัะปั                               | ะกัะฐััั |
| ----------------- | ----------------------------------------- | ------ |
| ะัะธัะผั ะฟะธัะธ       | `heys_day_v12.js`                         | โ     |
| ะัะพะดัะบัั ะธ ะฟะพะธัะบ  | `heys_core_v12.js`                        | โ     |
| Shared products   | `database/2025-12-16_shared_products.sql` | โ     |
| ะคะพัะพ ะตะดั          | ะฅัะฐะฝัััั ะฒ ะผะตััะตะฝะดะถะตัะต ะบะปะธะตะฝัะฐ            | โ     |

> **ะัะธะผะตัะฐะฝะธะต:** ะคะพัะพะณัะฐัะธะธ ะตะดั ะพััะฐัััั ะฒ ัะฐัะต ั ะบััะฐัะพัะพะผ
> (Telegram/WhatsApp). HEYS ะฝะต ััะฐะฝะธั ะธะทะพะฑัะฐะถะตะฝะธั โ ัะพะปัะบะพ ัะตะบััะพะฒัะต ะดะฐะฝะฝัะต
> ะดะฝะตะฒะฝะธะบะฐ (ะฟัะพะดัะบัั, ะณัะฐะผะผั, ะะะะฃ). ะัะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะธ ะฒะพะทะผะพะถะฝะฐ ะธะฝัะตะณัะฐัะธั ั
> Object Storage.

### 20.3 ะะฝะฐะปะธัะธะบะฐ

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต | ะคะฐะนะป/ะผะพะดัะปั                       | ะกัะฐััั |
| ----------------- | --------------------------------- | ------ |
| ะกัะฐััั 0โ100      | `heys_status_v1.js` (ะฟะปะฐะฝะธััะตััั) | ๐     |
| ะะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐ | `heys_insulin_wave_v1.js`         | โ     |
| ะฃะผะฝัะต ัะพะฒะตัั      | `heys_advice_v1.js`               | โ     |
| Widgets Dashboard | `InsightsTab`, ะฒะธะดะถะตัั            | โ     |

#### 20.3.1 ะะปััะตะฒัะต ะฐะฝะฐะปะธัะธัะตัะบะธะต ะผะพะดัะปะธ (ัะฐััะธัะตะฝะฝะพ)

**๐ฌ ะะปััะตะฒะฐั ะฐะฝะฐะปะธัะธะบะฐ (ะฒัะดะตัะถะบะฐ):**

- **TEF / TDEE** โ ััะฐะฝะดะฐัั Atwater 4/4/9; TEF ััะธัะฐะตััั ะบะฐะบ ัะฐััะพะด (25% ะฑะตะปะพะบ /
  7.5% ัะณะปะตะฒะพะดั / 1.5% ะถะธัั), TDEE = BMR (Mifflin-St Jeor) + ะฐะบัะธะฒะฝะพััั + NDTE +
  ัะธะบะป, ะฝะพัะผะฐ (optimum) ะพั baseExpenditure ะฑะตะท TEF.
- **ะะพะฟะพะปะฝะตะฝะธั** โ ะบะฐัะฐะปะพะณ ะดะพะฑะฐะฒะพะบ ั ัะฐะนะผะธะฝะณะพะผ/ัะธะฝะตัะณะธัะผะธ; ะฝะฐัะบะพัะผะบะธะต ะฟะพะดัะบะฐะทะบะธ
  (ัััะพ/ะฒะตัะตั), insulinBonus ะดะพ โ20%.
- **ะะพะบ-ะธััะพัะฝะธะบ** โ `DATA_MODEL_REFERENCE.md` (TEF/TDEE/Supplements) +
  `heys_supplements_v1.js`, `heys_supplements_science_v1.js`.

**๐ ะะฐััะธัะตะฝะฝัะน ะฑะปะพะบ (ะดะปั ะปะตะฝะดะธะฝะณะฐ):**

**ะงัะพ ัะพะฑะธัะฐะตะผ (ะพัะฝะพะฒะฝัะต ัััะฝะพััะธ ะธ ะผะตััะธะบะธ):**

- ะะตะฝั (`DayRecord`): ะดะฐัะฐ, ัะพะฝ (ะฝะฐัะฐะปะพ/ะบะพะฝะตั/ะบะฐัะตััะฒะพ/ัะฐัั), ะฒะตั, ัะฐะณะธ, ะฒะพะดะฐ
  (ะพะฑััะผ+ะฒัะตะผั), ะฑััะพะฒะฐั ะฐะบัะธะฒะฝะพััั (ะผะธะฝััั/ะฒัะตะผั), ะบะพะผะผะตะฝัะฐัะธะน ะดะฝั, ััะตะดะฝะธะต
  ะฝะฐัััะพะตะฝะธะต/ัะฐะผะพััะฒััะฒะธะต/ัััะตัั, ัะธะบะป (ะดะตะฝั ัะฐะทั), ะดะพ 3 ััะตะฝะธัะพะฒะพะบ (ะฒัะตะผั, ัะธะฟ,
  ะผะธะฝััั ะฟะพ 4 HR-ะทะพะฝะฐะผ), ะทะฐะผะตัั ัะตะปะฐ, `updatedAt`.
- ะะธัะฐะฝะธะต (`Meal โ MealItem`): ะฒัะตะผั, ะฝะฐัััะพะตะฝะธะต/ัััะตัั/ัะฐะผะพััะฒััะฒะธะต ะฝะฐ ะฟัะธัะผะต;
  ะฟัะพะดัะบัั ะธ ะณัะฐะผะผั.
- ะัะพะดัะบั: ะะะฃ ะฝะฐ 100 ะณ, ะฟัะพัััะต/ัะปะพะถะฝัะต ัะณะปะธ, trans/bad/good fat, ะบะปะตััะฐัะบะฐ,
  GI, harm, ะบะฐัะตะณะพัะธั, ะฟะพััะธะธ (ัััะฝัะต/ะฐะฒัะพ ~25 ะฟะฐััะตัะฝะพะฒ).
- ะัะพะธะทะฒะพะดะฝัะต (`dayTot`, `normAbs`): 12 ััะผะผ/ะฝะพัะผ (kcal, carbs, simple, complex,
  prot, fat, bad, good, trans, fiber, gi, harm) + ะฝะพัะผั ะฒ ะณัะฐะผะผะฐั/ะบะบะฐะป.
- ะะพะฟะบะพะฝัะตะบัั: ัะตะปั (ะดะตัะธัะธั/ะฟัะพัะธัะธั), ััะฐััั ะฟะพะดะฟะธัะบะธ
  (trial/active/read-only), namespace localStorage ะฟะพ clientId.

**"ะฃะผะฝัะต" ะผะพะดัะปะธ:**

- ะกะพะฒะตัั (~182): ัะตะปั, ะฒัะตะผั, ััะตะฝะธัะพะฒะบะธ, ัััะตัั, ัะธะบะป.
- ะะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐ (37 ัะฐะบัะพัะพะฒ): GL/GI, ะผะฐะบัะพัั, ัะพัะผะฐ/ะถะธะดะบะพััั, ะฟะพััะธะธ,
  ะฐะบัะธะฒะฝะพััั ะดะพ/ะฟะพัะปะต, NDTE, ัะธัะบะฐะดะฝัะต, ะฒะพะทัะฐัั/BMI/ะฟะพะป, ัะธะบะป, ะดะพะฑะฐะฒะบะธ.
- Status Score 0โ100: 9 ัะฐะบัะพัะพะฒ, 4 ะบะฐัะตะณะพัะธะธ (nutrition, activity, recovery,
  hydration).
- Gamification: 25 ััะพะฒะฝะตะน, 30+ ะดะพััะธะถะตะฝะธะน, XP-ะธะฒะตะฝัั.
- Caloric analytics: Caloric Debt (3 ะดะฝั), Caloric Excess (ะผัะณะบะฐั ะบะพััะตะบัะธั,
  ะฐะบัะตะฝั ะฝะฐ ะฐะบัะธะฒะฝะพััั), Refeed Day (+35% ะฝะพัะผะฐ).
- TDEE: BMR (Mifflin-St Jeor) + MET-ััะตะฝะธัะพะฒะบะธ + ัะฐะณะธ + NEAT + NDTE + TEF.
- TEF: Atwater 4/4/9, ะบะพัััะธัะธะตะฝัั 25%/7.5%/1.5%.
- Phenotype & Predictive Insights: 6 ัะตะฝะพัะธะฟะพะฒ, 5 traits,
  ะฟัะธะพัะธัะตัั/ัะธัะบะธ/ะธะฝัะฐะนัั.
- Cycle: 4 ัะฐะทั, ะผะฝะพะถะธัะตะปะธ ะดะปั ะบะฐะปะพัะธะน/ะฒะพะดั/ะฒะพะปะฝั, ะทะฐะดะตัะถะบะฐ ะฒะพะดั.
- Supplements: ัะฐะนะผะธะฝะณ/ะบะฐัะตะณะพัะธะธ/ะฒะทะฐะธะผะพะดะตะนััะฒะธั/ะบัััั; science-ัะปะพะน
  (ะฑะธะพะดะพัััะฟะฝะพััั, ัะพัะผั, ัะธะฝะตัะณะธะธ).

**ะะปะฐะฒะฝัะต ะฒะธััะธะฝั ะดะปั ะปะตะฝะดะธะฝะณะฐ:**

- ะกัะฐััั ะดะฝั 0โ100 + ะฟัะธัะธะฝั ะธ ัะฐะณะธ.
- ะะฐะปะพัะธะนะฝัะน ะฟัะพะณัะตัั ะธ ratio-ะทะพะฝั (crash/low/good/perfect/over/binge) ั
  ัะฒะตัะฐะผะธ.
- ะขะฐะนะผะตั ะธะฝััะปะธะฝะพะฒะพะน ะฒะพะปะฝั (ะบะพะณะดะฐ ัะฝะพะฒะฐ ยซัะถะธะณะฐะตะผ ะถะธัยป), ัััั ะฐะบัะธะฒะฝะพััะธ ะดะพ/ะฟะพัะปะต
  ะตะดั.
- ะะฐััะพัะบะธ ะดะพะปะณ/ะฟัะพัะธัะธั: ะผัะณะบะฐั ะบะพััะตะบัะธั, ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฐะบัะธะฒะฝะพััะธ.
- ะะพะดะฐ/ัะพะฝ/ัะฐะณะธ/ััะตะฝะธัะพะฒะบะธ: ัะตะปะธ, ะฟัะพะณัะตัั, ะฑะตะนะดะถะธ.
- ะกะพะฒะตัั ะธ ะฝะฐัะบะฐ: ะฟะพะดัะบะฐะทะบะธ ั PMID, ะฟะตััะพะฝะฐะปะธะทะฐัะธั ะฟะพ
  ัะตะปะธ/ัััะตััั/ัะธะบะปั/ััะตะฝะธัะพะฒะบะฐะผ.
- Gamification: streak, ััะพะฒะฝะธ, ะดะพััะธะถะตะฝะธั.
- ะะตะทะพะฟะฐัะฝะพััั ะธ ะพััะปะฐะนะฝ: localStorage ั clientId namespace, ะธััะพัะธั ะดะพัััะฟะฝะฐ ะฒ
  read-only.

**ะะปััะตะฒัะต ัะธัะปะฐ ะดะปั ะบะพะฟะธัะฐ:**

- 182+ ะฟะตััะพะฝะฐะปัะฝัั ัะพะฒะตัะพะฒ.
- 37 ัะฐะบัะพัะพะฒ ะผะตัะฐะฑะพะปะธัะตัะบะพะน ะผะพะดะตะปะธ (ะธะฝััะปะธะฝะพะฒะฐั ะฒะพะปะฝะฐ).
- 9 ัะฐะบัะพัะพะฒ Status Score, 4 ะบะฐัะตะณะพัะธะธ.
- 25 ััะพะฒะฝะตะน ะณะตะนะผะธัะธะบะฐัะธะธ, 30+ ะดะพััะธะถะตะฝะธะน.
- TEF/TDEE ััะธััะฒะฐัั ะฟะตัะตะฒะฐัะธะฒะฐะฝะธะต ะธ ะฒัะตัะฐัะฝะธะต ััะตะฝะธัะพะฒะบะธ (NDTE).
- ะฆะธะบะป: 4 ัะฐะทั, ะบะพััะตะบัะธัะพะฒะบะธ ะฝะพัะผ ะธ ะทะฐะดะตัะถะบะฐ ะฒะพะดั.

### 20.4 ะะพะดะฟะธัะบะธ ะธ ะฟะปะฐัะตะถะธ

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต       | ะคะฐะนะป/ะผะพะดัะปั                             | ะกัะฐััั |
| ----------------------- | --------------------------------------- | ------ |
| SQL-ััะตะผะฐ ะฟะพะดะฟะธัะพะบ      | `database/2025-12-20_subscriptions.sql` | โ     |
| JS-ะผะพะดัะปั ะฟะพะดะฟะธัะพะบ      | `heys_subscriptions_v1.js`              | โ     |
| ะัะฑะพั ัะฐัะธัะฐ (PlanCard) | `heys_subscriptions_v1.js`              | โ     |
| ะกัะฐัััั ะฟะพะดะฟะธัะบะธ        | `subscription_status` + RPC             | โ     |
| ะขัะธะฐะป-ะฐะฒัะพััะฐัั         | `heys_morning_checkin_v1.js`            | โ     |
| Read-only ะณะตะนัะธะฝะณ       | `canEdit()` + `showPaymentRequired()`   | โ     |
| Webhook ะพะฟะปะฐัั          | Edge Function                           | โ      |
| ะคะธัะบะฐะปะธะทะฐัะธั            | ะะคะ ะธะฝัะตะณัะฐัะธั                          | โ      |

### 20.5 ะะฝััะฐััััะบัััะฐ (Yandex.Cloud)

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต   | ะคะฐะนะป/ะผะพะดัะปั                                                     | ะกัะฐััั |
| ------------------- | --------------------------------------------------------------- | ------ |
| PostgreSQL ะฒ ะะค     | Yandex.Cloud Managed PostgreSQL 16.10                           | โ     |
| SSL ะฟะพะดะบะปััะตะฝะธะต     | `sslmode=verify-full`                                           | โ     |
| **Cloud Functions** | `yandex-cloud-functions/heys-api-*` (5 ััะฝะบัะธะน)                 | โ ๐  |
| **API Gateway**     | `d5d7939njvjp27ofsok0.apigw.yandexcloud.net`                    | โ ๐  |
| RPC Proxy           | `heys-api-rpc` โ 12 PostgreSQL ะพะฟะตัะฐัะธะน                         | โ ๐  |
| REST CRUD           | `heys-api-rest` โ GET/POST/PATCH/DELETE                         | โ ๐  |
| SMS ะธะฝัะตะณัะฐัะธั      | `heys-api-sms` โ SMS.ru API                                     | โ ๐  |
| Leads API           | `heys-api-leads` โ PostgreSQL + Telegram                        | โ ๐  |
| Healthcheck         | `heys-api-health` โ ะฟัะพััะพะน OK                                  | โ ๐  |
| SQL ะผะธะณัะฐัะธั        | `yandex-cloud-functions/migrations/yandex_postgresql_setup.sql` | โ ๐  |
| ะะตะฟะปะพะน ะณะฐะนะด         | `yandex-cloud-functions/DEPLOY_GUIDE.md`                        | โ ๐  |
| ะกัะตะผะฐ ะะ            | 8 ัะฐะฑะปะธั + ััะฝะบัะธะธ + ััะธะณะณะตัั + ะฒัั                             | โ     |
| ะะธะณัะฐัะธั ะดะฐะฝะฝัั     | 513 ะทะฐะฟะธัะตะน (clients, consents, products, kv)                   | โ     |
| RLS ะฟะพะปะธัะธะบะธ        | Row Level Security ะฝะฐ ะฒัะตั ัะฐะฑะปะธัะฐั                             | โ     |

**ะะพะดะบะปััะตะฝะธะต:**

```
Host: rc1b-obkgs83tnrd6a2m3.mdb.yandexcloud.net
Port: 6432
Database: heys_production
SSL: verify-full
```

### 20.6 ะฎัะธะดะธะบะฐ ะธ ัะพะณะปะฐัะธั

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต  | ะคะฐะนะป/ะผะพะดัะปั                        | ะกัะฐััั |
| ------------------ | ---------------------------------- | ------ |
| ะญะบัะฐะฝ ัะพะณะปะฐัะธะน     | `heys_consents_v1.js`              | โ     |
| SMS ะฒะตัะธัะธะบะฐัะธั    | `heys_sms_v1.js`                   | โ     |
| ะะพะณ ัะพะณะปะฐัะธะน (SQL) | `database/2025-12-20_consents.sql` | โ     |
| ะฎัะธะดะธัะตัะบะธะต ัะตะบััั | `docs/legal/*.md`                  | โ     |

### 20.7 Landing Page

| ะะธะทะฝะตั-ััะตะฑะพะฒะฐะฝะธะต    | ะคะฐะนะป/ะผะพะดัะปั                          | ะกัะฐััั |
| -------------------- | ------------------------------------ | ------ |
| Landing app          | `apps/landing/` (Next.js 14)         | โ     |
| ะคะพัะผะฐ ััะธะฐะปะฐ         | `src/components/TrialForm.tsx`       | โ     |
| API ะปะธะดะพะฒ            | `src/app/api/trial-signup/route.ts`  | โ     |
| Telegram ัะฒะตะดะพะผะปะตะฝะธั | Bot API + inline_keyboard            | โ     |
| A/B ัะตััะธัะพะฒะฐะฝะธะต     | `src/lib/ab-test.ts`, `useABTest.ts` | โ     |
| ะะพะณะณะตั               | `src/lib/logger.ts`                  | โ     |
| UTM ััะตะบะธะฝะณ          | Query params โ PostgreSQL            | โ     |

---

## 21. ะะปััะตะฒัะต ัะฐะนะปั ะฟัะพะตะบัะฐ

| ะะฐัะตะณะพัะธั              | ะคะฐะนะปั                                                              |
| ---------------------- | ------------------------------------------------------------------ |
| **Core**               | `heys_app_v12.js`, `heys_core_v12.js`, `heys_day_v12.js`           |
| **Auth**               | `heys_auth_v1.js`, `heys_storage_supabase_v1.js`                   |
| **Subscriptions**      | `heys_subscriptions_v1.js`, `heys_morning_checkin_v1.js`           |
| **Analytics**          | `heys_advice_v1.js`, `heys_insulin_wave_v1.js`, `heys_cycle_v1.js` |
| **Legal**              | `heys_consents_v1.js`, `heys_sms_v1.js`, `docs/legal/`             |
| **Landing**            | `apps/landing/` (Next.js 14, YandexAPI, Telegram)                  |
| **Models**             | `heys_models_v1.js`                                                |
| **Storage**            | `heys_storage_layer_v1.js`                                         |
| **UI**                 | `heys_user_v12.js`, `heys_reports_v12.js`                          |
| **Cloud Functions** ๐ | `yandex-cloud-functions/heys-api-*` (7 ััะฝะบัะธะน)                    |
| **Infrastructure** ๐  | `infra/README.md` (VM, CDN, S3, DNS)                               |

**ะะพะบัะผะตะฝัะฐัะธั:**

- [DATA_MODEL_REFERENCE.md](./DATA_MODEL_REFERENCE.md) โ ะผะพะดะตะปั ะดะฐะฝะฝัั
- [YANDEX_API.md](./YANDEX_API.md) โ API ะธะฝัะตะณัะฐัะธั ั Yandex Cloud
- [ARCHITECTURE.md](./ARCHITECTURE.md) โ ะฐััะธัะตะบัััะฐ
- [infra/README.md](../infra/README.md) โ ะธะฝััะฐััััะบัััะฐ (VM, CDN, S3)
- [docs/legal/](./legal/) โ ััะธะดะธัะตัะบะธะต ะดะพะบัะผะตะฝัั

---

## 22. ะะปะพััะฐัะธะน

| ะขะตัะผะธะฝ                | ะะฝะฐัะตะฝะธะต                                          |
| --------------------- | ------------------------------------------------- |
| **ะััะฐัะพั**           | ะกะฟะตัะธะฐะปะธัั, ะฒะตะดััะธะน ะบะปะธะตะฝัะฐ (ัะตะนัะฐั = ะพัะฝะพะฒะฐัะตะปั) |
| **ะขัะธะฐะป**             | 7-ะดะฝะตะฒะฝัะน ะฑะตัะฟะปะฐัะฝัะน ะฟะตัะธะพะด Pro                   |
| **ะะบัะธะฒะฝัะน ะดะตะฝั**     | ะะตะฝั ั โฅ3 ะฟัะธัะผะฐะผะธ ะฟะธัะธ                           |
| **ะะบัะธะฒะฝัะน ััะธะฐะป**    | โฅ4 ะฐะบัะธะฒะฝัั ะดะฝะตะน + โฅ12 ะฟัะธัะผะพะฒ ะทะฐ ะฝะตะดะตะปั          |
| **ะกัะฐััั 0โ100**      | ะะฝัะตะณัะฐะปัะฝัะน ะฟะพะบะฐะทะฐัะตะปั ยซะบะฐะบ ะดะตะปะฐ ัะตะณะพะดะฝัยป        |
| **Widgets Dashboard** | ะะตััะพะฝะฐะปัะฝะฐั ะฟะฐะฝะตะปั-ะบะพะฝััััะบัะพั ั ะฒะธะดะถะตัะฐะผะธ       |
| **Read-only**         | ะะตะถะธะผ ะฟัะพัะผะพััะฐ ะฟะพัะปะต ะฝะตะพะฟะปะฐัั                    |
| **ะะญะ**               | ะัะพััะฐั ัะปะตะบััะพะฝะฝะฐั ะฟะพะดะฟะธัั                       |
| **SLA**               | Service Level Agreement (ะฒัะตะผั ัะตะฐะบัะธะธ)           |
| **DoD**               | Definition of Done (ะบัะธัะตัะธะน ะณะพัะพะฒะฝะพััะธ)          |

---

## 23. ะะพะฝัะฐะบัั ะธ ัะตััััั

| ะะตัััั                | ะกััะปะบะฐ                                                                      |
| --------------------- | --------------------------------------------------------------------------- |
| ะะตะฟะพะทะธัะพัะธะน           | github.com/kinderlystv-png/HEYS-v2                                          |
| **Landing (ะะค)**      | https://heyslab.ru โ **LIVE!** (via Yandex CDN)                            |
| **PWA (ะะค)**          | https://app.heyslab.ru โ **LIVE!** (via Nginx VM)                          |
| **API (ะะค)**          | https://api.heyslab.ru โ **LIVE!** (via API Gateway)                       |
| **Database (ะะค)**     | `rc1b-obkgs83tnrd6a2m3.mdb.yandexcloud.net` (Yandex.Cloud PostgreSQL)       |
| **Object Storage**    | `heys-app` (PWA) + `heys-static` (Landing) โ                               |
| **PWA VM Proxy**      | `app-heyslab-proxy` @ `158.160.53.194` (Nginx 1.18.0, ru-central1-a) ๐     |
| **CDN (Landing)**     | Yandex CDN `bc8rk3pnqppsfime3nth` โ                                        |
| **Cloud Functions**   | `d5d7939njvjp27ofsok0.apigw.yandexcloud.net` (rpc/rest/sms/leads/health)    |
| ~~CDN (PWA)~~         | ~~bc8rvrvenqslkmti5yts~~ **(ะะขะะะฎะงะะ 2025-12-24, ะฟะตัะตะตัะฐะป ะฝะฐ Nginx VM)** โ |
| ~~Supabase (legacy)~~ | ~~ukqolcziqcuplqfgrmsh.supabase.co~~ **(ะะขะะะฎะงะะ 2025-12-22)**              |
| ~~Vercel (legacy)~~   | ~~heys-v2-web.vercel.app~~ **(ะะะะะะะะะะะ 2025-12-23)**                     |

---

## 24. Changelog

| ะะตััะธั | ะะฐัะฐ       | ะะทะผะตะฝะตะฝะธั                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------ | ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| v4.2   | 2025-01-03 | **๐ Documentation Consolidation**: ะะฑัะตะดะธะฝะตะฝั `HEYS_BRIEF.md` ะธ `HEYS_BRIEF_FULL.md` ะฒ ะตะดะธะฝัะน ะดะพะบัะผะตะฝั. ะฃะดะฐะปะตะฝะฐ ัะตะบัะธั ะฒะตััะธะพะฝะธัะพะฒะฐะฝะธั ะดะฒัั ัะฐะนะปะพะฒ. ะะพะฑะฐะฒะปะตะฝะฐ ัะตะบัะธั 18.L ยซะฎKassa โ ัะตัะฝะธัะตัะบะฐั ะธะฝัะตะณัะฐัะธัยป (webhook-ะบะพะฝััะฐะบั, ะธะดะตะผะฟะพัะตะฝัะฝะพััั, DB ััะตะผะฐ, ัะธัะบะธ, ะฟะปะฐะฝ ะทะฐะฟััะบะฐ). ะขะตะฟะตัั ััะพ **ะตะดะธะฝััะฒะตะฝะฝัะน ะธััะพัะฝะธะบ ะธััะธะฝั** ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ ะฟัะพะตะบัะฐ                                                                                                                                                                                                                                                                                  |
| v4.1   | 2025-01-02 | **๐ง client_kv_store PK FIX**: ะัะฟัะฐะฒะปะตะฝ PRIMARY KEY ั `(user_id, client_id, k)` ะฝะฐ `(client_id, k)` โ ะบะปะธะตะฝั ะฟัะธะฝะฐะดะปะตะถะธั ะพะดะฝะพะผั ะบััะฐัะพัั, user_id ะฒ PK ะธะทะฑััะพัะตะฝ. ะฃัััะฐะฝะตะฝั 500 ะพัะธะฑะบะธ ะฟัะธ sync (PostgreSQL ััะตะฑะพะฒะฐะป ON CONFLICT ะฟะพ PK). ะะธะณัะฐัะธั: `database/fixes/2025-01-02_fix_client_kv_store_pk_v2.sql`. ะะฑะฝะพะฒะปะตะฝั SECURITY_RUNBOOK.md v1.6.0 ะธ ARCHITECTURE.md                                                                                                                                                                                                                                                                  |
| v4.0   | 2025-12-25 | **โ๏ธ Legal Audit #5**: (1) ะัะตััะฐ 1.2-1.3 โ ะธัะฟัะฐะฒะปะตะฝะพ ัะพัะผะฐัะธัะพะฒะฐะฝะธะต (ัะฑัะฐะฝั ะพััััะฟั); (2) ะัะตััะฐ ั. 10 โ ะธัะฟัะฐะฒะปะตะฝะฐ ะฝัะผะตัะฐัะธั 9.1/9.2 โ 10.1/10.2; (3) Health-consent 10.1 โ ะดะพะฑะฐะฒะปะตะฝะฐ ัะฒะฝะฐั ะฟัะธะฒัะทะบะฐ ะบ ะะญะ (ั. 8 ะพัะตััั, ะฐััะตะฝัะธัะธะบะฐัะธั ัะตะปะตัะพะฝ+PIN, `checkbox_after_auth`); (4) Health-consent ั. 1 โ ะดะพะฑะฐะฒะปะตะฝะพ ยซะพัะพัะผะปัะตััั ะพัะดะตะปัะฝะพ ะพั ะธะฝัั ะดะพะบัะผะตะฝัะพะฒยป; (5) Privacy ัะฐะฑะป. 2.1 โ ัะฑัะฐะฝั ยซะคะพัะพะณัะฐัะธะธ ะตะดัยป (HEYS ะฝะต ััะฐะฝะธั ะธะทะพะฑัะฐะถะตะฝะธั), ะดะพะฑะฐะฒะปะตะฝะพ ะฟัะธะผะตัะฐะฝะธะต ะฟัะพ ะผะตััะตะฝะดะถะตั; (6) Privacy ัััะตั โ ะดะฐัะฐ 22โ24; (7) HEYS_BRIEF ะฟ. 3 ะะญะ โ ััะพัะฝะตะฝะพ ััะพ SMS ะฟะปะฐะฝะธััะตััั, ะฝะต ะฒะบะปััะตะฝะพ. **ะัะต ััะธะดะธัะตัะบะธะต ะดะพะบัะผะตะฝัั ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝั!** |
| v3.9   | 2025-12-24 | **โ๏ธ Legal Audit #4**: (1) ะัะตััะฐ ั. 8 ะฟะตัะตะฟะธัะฐะฝ โ ะะญะ ัะตัะตะท ัะตะปะตัะพะฝ+PIN (ัั. 6 63-ะคะ), ะฝะต ะฟัะพััะพ checkbox; (2) ะัะตััะฐ ั. 9.2 โ ะทะดะพัะพะฒัะต ัััะปะฐะตััั ะฝะฐ ะพัะดะตะปัะฝัะน ะดะพะบัะผะตะฝั; (3) ะัะฟัะฐะฒะปะตะฝะฐ ะดะฒะพะนะฝะฐั ะฝัะผะตัะฐัะธั (ะดะฒะต ัะตะบัะธะธ 9 โ 9/10/11/12/13); (4) Health-consent ั. 10 โ SMS ะบะฐะบ ะพะฟัะธั, ะะญะ ัะตัะตะท ะฐััะตะฝัะธัะธะบะฐัะธั ะฟะพ ัะผะพะปัะฐะฝะธั, ยซะพัะดะตะปัะฝะพ ะพั ะธะฝัั ะดะพะบัะผะตะฝัะพะฒยป (ัั. 9 152-ะคะ); (5) Privacy ั. 5.2-5.3 ัััะปะฐะตััั ะฝะฐ ะพัะดะตะปัะฝัะน health-consent.md; (6) ะะพะฑะฐะฒะปะตะฝะฐ ัั. 10 152-ะคะ ะฒ ัะฐะฑะปะธัั ะฟัะฐะฒะพะฒัั ะพัะฝะพะฒะฐะฝะธะน. **ะัะต ััะธะดะธัะตัะบะธะต ะดะพะบัะผะตะฝัั ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝั!**                                                                                   |
| v3.8   | 2025-12-24 | **๐ Legal Audit #3**: (1) ะะฝัะธ-ะฐะฑััะท ยซะทะฐะผะพัะพะทะบะฐ ะฟัะธ ะฝะตะฐะบัะธะฒะฝะพััะธยป ะฟะพะผะตัะตะฝะฐ ะบะฐะบ v2; (2) ะะพะฑะฐะฒะปะตะฝ ัะฐะทะดะตะป 8 ยซะญะปะตะบััะพะฝะฝะฐั ะฟะพะดะฟะธััยป ะฒ ะพัะตััั (ัั.6 63-ะคะ, SMS-ะะญะ = ะฟะปะฐะฝะธััะตััั >50 ะบะปะธะตะฝัะพะฒ); (3) Telegram-ะดะธัะบะปะตะนะผะตั ะฒ ะฟะพะปะธัะธะบะต ะะะฝ (ัะพะปัะบะพ lead_id ะฑะตะท ะะะฝ); (4) ะคะพัะพ ะตะดั โ ััะพัะฝะตะฝะพ ััะพ ััะฐะฝัััั ะฒ ะผะตััะตะฝะดะถะตัะต, ะฝะต ะฒ ัะธััะตะผะต; (5) health-data-consent.md ะพะฑะฝะพะฒะปัะฝ (ัะตะบััะธะน = checkbox, SMS = ะฟะปะฐะฝะธััะตััั)                                                                                                                                                                                                                              |
| v3.7   | 2025-12-24 | **โ๏ธ 152-ะคะ Compliance Audit**: (1) **Supabase JS CDN ัะดะฐะปัะฝ** ะธะท `index.html` โ SDK ะฑะพะปััะต ะะ ะทะฐะณััะถะฐะตััั; (2) **GA4/Meta Pixel ะพัะบะปััะตะฝั** (`null`) โ ััะฐะฝัะณัะฐะฝะธัะบะฐ ะฑะตะท ัะฒะตะดะพะผะปะตะฝะธั ะะะ; (3) **Telegram ะะะฝ ะผะธะฝะธะผะธะทะธัะพะฒะฐะฝั** โ ัะพะปัะบะพ `lead_id`, ะฑะตะท ะธะผะตะฝะธ/ัะตะปะตัะพะฝะฐ; (4) ะกะตะบัะธั 4 ะพะฑะฝะพะฒะปะตะฝะฐ; (5) ะกัะฐััั ะธะทะผะตะฝัะฝ ะฝะฐ SOFT LAUNCH; (6) ะัะฟัะฐะฒะปะตะฝ ััะธะณะณะตั ััะธะฐะปะฐ (ัะตะบ-ะธะฝ, ะฝะต ะตะดะฐ)                                                                                                                                                                                                                                                        |
| v3.6   | 2025-12-24 | **๐ Launch Readiness Audit**: ะัะพะฒะตะดัะฝ ะฟะพะปะฝัะน ะฐะฝะฐะปะธะท ะณะพัะพะฒะฝะพััะธ ะบ ะทะฐะฟััะบั โ **79% ะณะพัะพะฒะพ** (55/70 ะทะฐะดะฐั). ะะพะฑะฐะฒะปะตะฝะฐ ัะตะบัะธั 17.1 ั ะบัะธัะธัะตัะบะธะผะธ ะฑะปะพะบะตัะฐะผะธ (ะฎKassa/webhook/ัะธัะบะฐะปะธะทะฐัะธั). Dead code ะฐะฝะฐะปะธะท ะทะฐะฒะตัััะฝ โ **ะฝะตั ะผัััะฒะพะณะพ ะบะพะดะฐ**. ะขะตัะฝะธัะตัะบะธะน ะดะพะปะณ ะพะฑะฝะพะฒะปัะฝ: 2/3 ะทะฐะดะฐั ะฒัะฟะพะปะฝะตะฝะพ. ะะพ ะทะฐะฟััะบะฐ: 2-5 ะดะฝะตะน ะฟะพัะปะต ะฟะพะปััะตะฝะธั ะฎKassa credentials                                                                                                                                                                                                                                                                                    |
| v3.5   | 2025-12-24 | **๐ง PWA โ Nginx VM Migration**: ะะพะปะฝัะน ะฟะตัะตะตะทะด PWA ั Yandex CDN ะฝะฐ Nginx VM (`app-heyslab-proxy`, IP `158.160.53.194`). ะัะธัะธะฝะฐ: CDN ะธะณะฝะพัะธัะพะฒะฐะป Cache-Control ะทะฐะณะพะปะพะฒะบะธ S3, SW ะฝะต ะพะฑะฝะพะฒะปัะปัั. Nginx: Ubuntu 20.04, Let's Encrypt SSL (auto-renew). ะะตะทะพะฟะฐัะฝะพััั: UFW firewall, fail2ban, SSH key-only ั IP restriction. Landing ะพััะฐะปัั ะฝะฐ CDN. **ะะธะณัะฐัะธั Yandex Cloud 100% ะทะฐะฒะตััะตะฝะฐ!**                                                                                                                                                                                                                                            |
| v3.4   | 2025-12-23 | **๐ FULL PRODUCTION DEPLOYMENT**: ะัะต 3 endpoint'ะฐ ัะฐะฑะพัะฐัั: heyslab.ru (ะปะตะฝะดะธะฝะณ), app.heyslab.ru (PWA), api.heyslab.ru (API). Object Storage (heys-app, heys-static), CDN ะฝะฐัััะพะตะฝ, SSL ัะฐะฑะพัะฐะตั. **ะฎKassa ัะฐะทะฑะปะพะบะธัะพะฒะฐะฝะฐ** โ ัะฐะนั ะณะพัะพะฒ ะดะปั ัะตะณะธัััะฐัะธะธ! GitHub Actions ะฐะฒัะพะดะตะฟะปะพะน ััะฝะบัะธะพะฝะธััะตั. Vercel ะฟะพะปะฝะพัััั ะทะฐะผะตะฝัะฝ Yandex Cloud                                                                                                                                                                                                                                                                                             |
| v3.3   | 2025-12-22 | **๐ง RPC Audit Complete**: ะกะพะทะดะฐะฝั 6 ะฝะตะดะพััะฐััะธั SQL-ััะฝะบัะธะน (`client_pin_auth`, `create_client_with_pin`, `reset_client_pin`, `get_client_data`, `get_curator_clients`, `create_pending_product`). ะัะฟัะฐะฒะปะตะฝ ะฑะฐะณ `created_at` โ `updated_at` ะฒ 2 ััะฝะบัะธัั. ะกะพะทะดะฐะฝะฐ ัะฐะฑะปะธัะฐ `pending_products`. ะัะต API ัะฝะดะฟะพะธะฝัั ะฟัะพัะตััะธัะพะฒะฐะฝั ะธ ัะฐะฑะพัะฐัั ัะตัะตะท `api.heyslab.ru`                                                                                                                                                                                                                                                                     |
| v3.2   | 2025-12-22 | **๐ง Cloud Functions FIX**: ะัะฟัะฐะฒะปะตะฝั ะบัะธัะธัะตัะบะธะต ะพัะธะฑะบะธ ะฒ `heys-api-rest`: (1) ะฃะดะฐะปัะฝ ะดัะฑะปะธััััะธะน UNIQUE constraint ะฝะฐ `client_kv_store` (ะบะพะฝัะปะธะบัะพะฒะฐะป ั PRIMARY KEY), (2) ะัะฟัะฐะฒะปะตะฝั env vars โ ะบะพะด ะธัะฟะพะปัะทัะตั `PG_*` (PG*HOST, PG_PORT...), ะฐ ะฝะต `DB*\*`. Upsert ะพะฟะตัะฐัะธะธ ัะตะฟะตัั ัะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ                                                                                                                                                                                                                                                                                                                                |
| v3.1   | 2025-12-22 | **๐ Supabase SDK ะพัะบะปัััะฝ**: ะัะต ะพะฟะตัะฐัะธะธ ั ะดะฐะฝะฝัะผะธ ะฟะตัะตะฒะตะดะตะฝั ะฝะฐ `YandexAPI` (`heys_yandex_api_v1.js`). ะฃะดะฐะปะตะฝั legacy ัะฐะนะปั `apps/web/api/supabase/`. `cloud.client.from()`/`rpc()` ะฑะพะปััะต ะฝะต ะธัะฟะพะปัะทััััั. ะััะฐะฒัะธะตัั ัะฟะพะผะธะฝะฐะฝะธั Supabase โ ัะพะปัะบะพ ะฒ ะบะพะผะผะตะฝัะฐัะธัั ะธ `.env.example`. ะะฐะทะฐ ะดะฐะฝะฝัั: Yandex.Cloud PostgreSQL                                                                                                                                                                                                                                                                                                           |
| v3.0   | 2025-12-22 | **๐ PRODUCTION LAUNCH**: ะะฑะฝะพะฒะปัะฝ ััะฐััั ะฑัะธัะฐ โ ััะพ ะฑะพะปััะต ะฝะต MVP, ะฐ ะฟะพะปะฝะพัะตะฝะฝัะน ะทะฐะฟััะบ ะฟัะพะดัะบัะฐ. ะัะต ะบัะธัะธัะตัะบะธะต ะฑะปะพะบะธ ะทะฐะฒะตััะตะฝั: ะฟะปะฐัะตะถะธ, ััะธะดะธะบะฐ, ะดะฝะตะฒะฝะธะบ, ััะธะฐะป, ะฐะฝะฐะปะธัะธะบะฐ. ะะฑะฝะพะฒะปะตะฝั ะผะฐัะบะตัั `[MVP]` โ `[READY]`                                                                                                                                                                                                                                                                                                                                                                                                                |
| v2.1   | 2025-12-21 | **โ Yandex Cloud Functions ะทะฐะดะตะฟะปะพะตะฝั**: 5 serverless ััะฝะบัะธะน (heys-api-rpc/rest/sms/leads/health), API Gateway `d5d7939njvjp27ofsok0.apigw.yandexcloud.net`, PostgreSQL RPC (12 ะพะฟะตัะฐัะธะน), REST CRUD, SMS.ru ะธะฝัะตะณัะฐัะธั, Telegram ัะฒะตะดะพะผะปะตะฝะธั. SQL ะผะธะณัะฐัะธั `yandex_postgresql_setup.sql`. ะะตะฟะปะพะน ะณะฐะนะด `DEPLOY_GUIDE.md`                                                                                                                                                                                                                                                                                                             |
| v2.0   | 2025-12-21 | **๐ ะะปะฐะฝ ะผะธะณัะฐัะธะธ Vercel โ Yandex Cloud**: ะะพะฑะฐะฒะปะตะฝ ะบัะธัะธัะตัะบะธะน ะฑะปะพะบะตั #5 โ API ััะฝะบัะธะธ ะฝะฐ Vercel ะพะฑัะฐะฑะฐััะฒะฐัั ะะะฝ ะฒะฝะต ะะค (ะฝะฐัััะตะฝะธะต 152-ะคะ). ะะตัะฐะปัะฝัะน ะฟะปะฐะฝ: 6 ััะฐะฟะพะฒ (Object Storage, CDN, Cloud Functions, Landing, DNS, Vercel shutdown). ะัะตะฝะบะฐ: 2-3 ะดะฝั, ~4100โฝ/ะผะตั. ะงะตะบะปะธัั ั env variables                                                                                                                                                                                                                                                                                                                                    |
| v1.9   | 2025-12-20 | **๐ท๐บ ะะธะณัะฐัะธั ะฝะฐ Yandex.Cloud**: ะะพะปะฝัะน ะฟะตัะตะตะทะด ะฑะฐะทั ะดะฐะฝะฝัั ะธะท Supabase (ะะตัะผะฐะฝะธั) ะฝะฐ Yandex.Cloud PostgreSQL 16.10 (ะะพััะธั). ะะธะณัะธัะพะฒะฐะฝะพ 513 ะทะฐะฟะธัะตะน (clients, consents, shared_products, client_kv_store). ะกะพะพัะฒะตัััะฒะธะต 152-ะคะ ั.5 ัั.18 โ ะฟะตัะฒะธัะฝะพะต ััะฐะฝะตะฝะธะต ะะะฝ ะฒ ะะค. ะัะธัะธัะตัะบะธะน ะฑะปะพะบะตั ะทะฐะฟััะบะฐ **ะะะะะซะข**                                                                                                                                                                                                                                                                                                                        |
| v1.8   | 2025-12-20 | **ะะฟะตัะฐัะธะพะฝะฝัะต ะฟัะพัะพะบะพะปั**: ะกะพะทะดะฐะฝ `docs/operations/CURATOR_PROTOCOLS.md` โ ะพัะผะตัะบะธ (๐โโโ), ัะฐะฑะปะพะฝั ะบะฐัะฐะฝะธะน (ัััะพ/ะพะฑะตะด/ะฒะตัะตั), Day 0/7 ััะตะฝะฐัะธะธ, ะปะธะผะธั ัะปะพัะพะฒ (3 ััะธะฐะปะฐ + 14 Pro), ะฐะฝัะธ-ัััะฒ ะฟัะพัะพะบะพะป, ััะพะฟ-ัะธััะฐัะธะธ                                                                                                                                                                                                                                                                                                                                                                                                               |
| v1.7   | 2025-12-20 | **SEO ะปะตะฝะดะธะฝะณะฐ**: ะะพะปะฝะฐั ะฝะฐัััะพะนะบะฐ meta tags (title, description, keywords), Open Graph (VK, Facebook, Telegram), Twitter Card, robots, JSON-LD, PWA manifest, ะณะตะฝะตัะฐัะธั ะธะบะพะฝะพะบ ัะตัะตะท sharp (favicon.ico, icon-192/512, apple-touch-icon, og-image.png 1200ร630)                                                                                                                                                                                                                                                                                                                                                                       |
| v1.6   | 2025-12-20 | **Landing Page v2**: ะะตะดะธะทะฐะนะฝ ัะพ ััะตัะถะฝะตะผ ยซะงะตะปะพะฒะตะบ ััะดะพะผยป, ะฟะตัะตัะพะฑัะฐะฝั HowItWorks/Problem/Trial/FAQ, ััะธะดะธัะตัะบะธะต ัััะฐะฝะธัั `/legal/privacy-policy` ะธ `/legal/user-agreement` ั ะฟะพะปะฝัะผ ะบะพะฝัะตะฝัะพะผ                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| v1.5   | 2025-12-20 | **ะกะธััะตะผะฐ ะฟะพะดะฟะธัะพะบ**: SQL-ััะตะผะฐ `subscriptions.sql`, JS-ะผะพะดัะปั `heys_subscriptions_v1.js` (API + React), ััะธะฐะป-ะฐะฒัะพััะฐัั ะฟัะธ ัะตะณะธัััะฐัะธะพะฝะฝะพะผ ัะตะบ-ะธะฝะต, read-only ะณะตะนัะธะฝะณ `canEdit()` + paywall ะผะพะดะฐะป, UI ัะตะบัะธั ะฒ ะฟัะพัะธะปะต, 3 ัะฐัะธัะฐ (Base/Pro/Pro+)                                                                                                                                                                                                                                                                                                                                                                                     |
| v1.4   | 2025-12-20 | **Landing Page**: ะะดะฐะฟัะธะฒะฝะฐั ัััะฐะฝะธัะฐ `apps/landing/` (Next.js 14), ัะพัะผะฐ ััะธะฐะปะฐ ั 3 ะผะตััะตะฝะดะถะตัะฐะผะธ (TG/WA/MAX), Supabase leads + Telegram ัะฒะตะดะพะผะปะตะฝะธั ั inline_keyboard, UTM ััะตะบะธะฝะณ, Meta Pixel + GA4, A/B ัะตััะธัะพะฒะฐะฝะธะต, ัะตะบัะธะธ Hero/HowItWorks/Pricing/FAQ/Footer                                                                                                                                                                                                                                                                                                                                                                    |
| v1.3   | 2025-12-20 | **SMS ะฒะตัะธัะธะบะฐัะธั ะะญะ**: ะะพะดัะปั `heys_sms_v1.js` (SMS.ru API), ะฑะตะท ะฑัะบะฒะตะฝะฝะพะณะพ ะพัะฟัะฐะฒะธัะตะปั (ัะบะพะฝะพะผะธั ~8-10ะบ/ะผะตั), dev mode ะดะปั localhost                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| v1.2   | 2025-12-20 | **ะฎัะธะดะธัะตัะบะธะน ะฐัะดะธั**: ะัะธัะธัะตัะบะฐั ัะตะบัะธั ะฒ ะฝะฐัะฐะปะต ะดะพะบัะผะตะฝัะฐ (ะธะฝััะฐััััะบัััะฐ ะะค, ััะฐะฝัะณัะฐะฝะธัะบะฐ, ะะญะ ะดะปั health_data), ะธัะฟัะฐะฒะปะตะฝะธะต ััะพะบะพะฒ ะพัะฒะตัะฐ (10 ัะฐะฑะพัะธั ะดะฝะตะน), ัะฐะทะดะตะปะตะฝะธะต ัะพะณะปะฐัะธะน ะะะฝ ะธ health_data                                                                                                                                                                                                                                                                                                                                                                                                                               |
| v1.1   | 2025-12-20 | **ะฎัะธะดะธะบะฐ ะทะฐะฒะตััะตะฝะฐ**: 4 ะดะพะบัะผะตะฝัะฐ ะฒ `docs/legal/`, SQL ะผะธะณัะฐัะธั `consents`, UI ะผะพะดัะปั `heys_consents_v1.js`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| v1.0   | 2025-12-20 | ะะพะปะฝะฐั ัะตััััะบัััะธะทะฐัะธั: ัะฐะทะดะตะปะตะฝะธะต ะฝะฐ 6 ัะฐััะตะน, ะดะพะฑะฐะฒะปะตะฝะธะต ัะตัะฝะธัะตัะบะพะน ัะฒัะทะบะธ, ะบะฐััั ะฑะธะทะฝะตัโะบะพะด, ัะตะบะปะธััั ั DoD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| v0.2   | 2025-12-19 | ะะดะธะฝะพะต ะฟัะธะปะพะถะตะฝะธะต + Widgets Dashboard (ัะฑัะฐะฝั Light/META)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| v0.1   | 2025-12    | ะะตัะฒะพะฝะฐัะฐะปัะฝะฐั ะฒะตััะธั                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

---

## 25. ะัะฐะฒะธะปะฐ ัะฐะฑะพัั ั ะฑัะธัะพะผ

| ะะพะผะฐะฝะดะฐ             | ะะตะนััะฒะธะต                 |
| ------------------- | ------------------------ |
| ยซะดะพะฑะฐะฒั ะฒ ะฑัะธั: โฆยป  | ะะพะฑะฐะฒะปัั ะฒ ะฝัะถะฝัะน ัะฐะทะดะตะป |
| ยซัะดะฐะปะธ ะธะท ะฑัะธัะฐ: โฆยป | ะฃะดะฐะปัั                   |
| ยซะฟะตัะตัะพัะผัะปะธััะน: โฆยป | ะะตะดะฐะบัะธััั               |
| ยซััะฐััั ะทะฐะดะฐัะธ Xยป   | ะะฑะฝะพะฒะปัั ัะตะบะปะธัั         |

**ะัะธะฝัะธะฟ:** ะัั, ััะพ ะฝะต ะฟะพะผะพะณะฐะตั ะฟัะพะดะฐะฒะฐัั/ัััะพะธัั ะฟัะพะดัะบั โ ัะดะฐะปัะตะผ.
