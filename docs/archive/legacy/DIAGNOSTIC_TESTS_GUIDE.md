# HEYS Diagnostic Tests Documentation

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ HEYS –≤–∫–ª—é—á–∞–µ—Ç 23+ —Ç–µ—Å—Ç–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

#### üîß Core Tests (5 —Ç–µ—Å—Ç–æ–≤)

- **Config Parser** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- **Cache Invalidation** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞
- **Web Worker Fallback** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Web Workers
- **Graceful Shutdown** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- **Version Mismatch Detector** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–µ—Ç–µ–∫—Ç–æ—Ä –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π

#### üîí Security Tests (4 —Ç–µ—Å—Ç–∞)

- **Role Permission Matrix** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∞—Ç—Ä–∏—Ü—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
- **Supabase RLS Security** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Row Level Security –≤ Supabase
- **Data Encryption** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **XSS Protection** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç XSS –∞—Ç–∞–∫

#### ‚ö° Performance Tests (4 —Ç–µ—Å—Ç–∞)

- **Memory Leak Guard** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö
  –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- **Large Dataset Rendering** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –±–æ–ª—å—à–∏—Ö
  —Å–ø–∏—Å–∫–æ–≤
- **Database Query Performance** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ
  –¥–∞–Ω–Ω—ã—Ö
- **Bundle Size Check** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

#### üé® UX Tests (5 —Ç–µ—Å—Ç–æ–≤)

- **Real-Time Error Dashboard** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ –æ—à–∏–±–æ–∫ –≤
  —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Responsive Layout** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
- **I18n Pluralization** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- **Dark Mode Contrast** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ
- **Keyboard Navigation** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É

#### üì± PWA Tests (5 —Ç–µ—Å—Ç–æ–≤)

- **Service Worker Update Flow** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Service Worker
- **PWA Installability** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–∫ PWA
- **Offline Functionality** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –≤ offline —Ä–µ–∂–∏–º–µ
- **Push Notifications** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **WASM Fallback** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ WebAssembly

#### üèõÔ∏è Legacy Tests (7 —Ç–µ—Å—Ç–æ–≤)

- –°—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## –ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ø—É—Å–∫–∞

### ‚ö° –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (KEEP)

–¢–µ—Å—Ç—ã —Å —Ç–µ–≥–æ–º `keep` - —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (~10 —Ç–µ—Å—Ç–æ–≤, ~30 —Å–µ–∫—É–Ω–¥)

### üèÉ‚Äç‚ôÇÔ∏è –ë—ã—Å—Ç—Ä—ã–µ (KEEP + SIMPLIFY)

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ + —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (~17 —Ç–µ—Å—Ç–æ–≤, ~1 –º–∏–Ω—É—Ç–∞)

### üöÄ –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–í—Å–µ —Ç–µ—Å—Ç—ã –∫—Ä–æ–º–µ –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö –∫–∞–∫ `drop` (~20+ —Ç–µ—Å—Ç–æ–≤, ~2 –º–∏–Ω—É—Ç—ã)

### –ö–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏

- **Core Tests** - —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **Security Tests** - —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Performance Tests** - —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **UX Tests** - —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **PWA Tests** - —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã Progressive Web App

## –¢–µ–≥–∏ —Ç–µ—Å—Ç–æ–≤

- `keep` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `simplify` - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ/–±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
- `drop` - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç—ã (–∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)

## –¢–∞–π–º-–∞—É—Ç—ã

- **–ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã**: 1000-2000ms
- **–°—Ä–µ–¥–Ω–∏–µ —Ç–µ—Å—Ç—ã**: 3000-5000ms
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: 8000-10000ms

## –§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–æ—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```javascript
return true; // –∏–ª–∏ false
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```javascript
return {
  success: true,
  details: '–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ',
  error: '–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ success: false)',
};
```

### JSON Summary

```javascript
{
    "timestamp": "2025-08-27T...",
    "passed": 18,
    "failed": 2,
    "results": [
        {
            "name": "Config Parser",
            "category": "core",
            "tags": ["keep", "core"],
            "ok": true,
            "reason": "",
            "description": "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"
        }
    ]
}
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

```javascript
window.addTest({
  name: 'My Test',
  category: 'core', // core, security, performance, ux, pwa
  tags: ['keep'], // keep, simplify, drop
  timeout: 3000,
  description: '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞',
  fn: async function () {
    // –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∞
    return {
      success: true,
      details: 'Test passed',
    };
  },
});
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Memory Leak Guard

- –í—ã–ø–æ–ª–Ω—è–µ—Ç 100 –æ–ø–µ—Ä–∞—Ü–∏–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
- –°—á–∏—Ç–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–º –ø—Ä–∏—Ä–æ—Å—Ç –ø–∞–º—è—Ç–∏ < 2MB
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `performance.memory.usedJSHeapSize`

### Large Dataset Rendering

- –†–µ–Ω–¥–µ—Ä–∏—Ç 1000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –°—á–∏—Ç–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–º –≤—Ä–µ–º—è < 100ms
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏

### Database Query Performance

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç IndexedDB, Supabase, LocalStorage
- –¢–∞–π–º-–∞—É—Ç—ã: IndexedDB < 1s, Supabase < 2s, LocalStorage < 10ms

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–¢–µ—Å—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ console –Ω–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
2. **–¢–∞–π–º-–∞—É—Ç—ã** - —É–≤–µ–ª–∏—á—å—Ç–µ timeout –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
3. **–õ–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–ª—ã** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
4. **Memory leaks** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `performance.memory` –∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É
   –º—É—Å–æ—Ä–∞

### Debug —Ä–µ–∂–∏–º

1. –û—Ç–∫—Ä–æ–π—Ç–µ Console (F12)
2. –ù–∞–π–¥–∏—Ç–µ "HEYS-Diag-Summary" –¥–ª—è JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `console.table(diagResults)` –¥–ª—è —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ –≤–∏–¥–∞

## CI/CD Integration

```yaml
# .github/workflows/tests.yml
- name: Critical Tests
  run: curl -s http://localhost:8000/TESTS/api/run?profile=keep

- name: Full Tests
  run: curl -s http://localhost:8000/TESTS/api/run?profile=all
```

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: ~95% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ HEYS
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∑–∞ 30 —Å–µ–∫—É–Ω–¥
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ú–µ–Ω–µ–µ 5% –ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–ª–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
