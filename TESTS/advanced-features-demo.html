<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEYS - –î–µ–º–æ: –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ —É–º–Ω—ã–π –ø–æ–∏—Å–∫</title>
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .demo-section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .search-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .search-input:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .search-results {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .result-item {
            background: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .result-item.typo {
            border-left-color: #f39c12;
        }
        
        .result-item.synonym {
            border-left-color: #27ae60;
        }
        
        .result-item.phonetic {
            border-left-color: #9b59b6;
        }
        
        .match-info {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .suggestions {
            background: #e8f4fd;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }
        
        .suggestion-item {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 4px 8px;
            margin: 2px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .error-demo {
            margin-top: 20px;
        }
        
        .demo-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        .demo-button:hover {
            background: #2980b9;
        }
        
        .demo-button.danger {
            background: #e74c3c;
        }
        
        .demo-button.danger:hover {
            background: #c0392b;
        }
        
        .error-stats {
            background: #fff5f5;
            border: 1px solid #fed7d7;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .console-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .search-stats {
            background: #f0fff4;
            border: 1px solid #c6f6d5;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat-item {
            text-align: center;
            background: white;
            padding: 10px;
            border-radius: 6px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #27ae60;
        }
        
        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>üöÄ HEYS - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–∏–π</h1>
        <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π: –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ —É–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ–ø–µ—á–∞—Ç–æ–∫</p>
        
        <!-- –î–ï–ú–û –£–ú–ù–û–ì–û –ü–û–ò–°–ö–ê -->
        <div class="demo-section">
            <h3>üß† –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ–ø–µ—á–∞—Ç–æ–∫</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç –æ–ø–µ—á–∞—Ç–∫–∏, –Ω–∞–π–¥–µ—Ç —Å–∏–Ω–æ–Ω–∏–º—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã.</p>
            
            <div class="search-demo">
                <div>
                    <input type="text" class="search-input" id="smart-search-input" 
                           placeholder="–ü–æ–ø—Ä–æ–±—É–π—Ç–µ: '—Ö–ª–µ–ø', '–º–∞–ª–∞–∫–æ', '–∫—É—Ä—è—Ç–∏–Ω–∞'...">
                    <div class="search-results" id="search-results">
                        <div style="text-align: center; color: #7f8c8d; padding: 50px;">
                            –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞...
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="search-stats" id="search-stats">
                        <h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–∞</h4>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="search-time">0</div>
                                <div class="stat-label">–º—Å</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="results-count">0</div>
                                <div class="stat-label">—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="corrections-count">0</div>
                                <div class="stat-label">–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="suggestions-count">0</div>
                                <div class="stat-label">–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <h5>–¢–∏–ø—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π:</h5>
                            <div style="font-size: 12px;">
                                <span style="color: #3498db;">‚ñ†</span> –¢–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è: <span id="exact-matches">0</span><br>
                                <span style="color: #f39c12;">‚ñ†</span> –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—á–∞—Ç–∫–∏: <span id="typo-matches">0</span><br>
                                <span style="color: #27ae60;">‚ñ†</span> –°–∏–Ω–æ–Ω–∏–º—ã: <span id="synonym-matches">0</span><br>
                                <span style="color: #9b59b6;">‚ñ†</span> –§–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–µ: <span id="phonetic-matches">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –î–ï–ú–û –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø –û–®–ò–ë–û–ö -->
        <div class="demo-section">
            <h3>üõ°Ô∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫</h3>
            <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π</p>
            
            <div class="error-demo">
                <h4>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫:</h4>
                <button class="demo-button" onclick="triggerJSError()">–í—ã–∑–≤–∞—Ç—å JS –æ—à–∏–±–∫—É</button>
                <button class="demo-button" onclick="triggerNetworkError()">–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞</button>
                <button class="demo-button" onclick="triggerPromiseRejection()">Promise rejection</button>
                <button class="demo-button" onclick="triggerPerformanceIssue()">–ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
                <button class="demo-button danger" onclick="triggerCriticalError()">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞</button>
                
                <h4 style="margin-top: 20px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏:</h4>
                <button class="demo-button" onclick="showErrorStats()">–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
                <button class="demo-button" onclick="exportErrors()">–≠–∫—Å–ø–æ—Ä—Ç –æ—à–∏–±–æ–∫</button>
                <button class="demo-button" onclick="clearErrors()">–û—á–∏—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏</button>
                
                <div class="error-stats" id="error-stats" style="display: none;">
                    <h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫</h4>
                    <div id="error-stats-content"></div>
                </div>
                
                <div class="console-output" id="console-output">
                    <div style="color: #68d391;">üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ –∞–∫—Ç–∏–≤–Ω–∞</div>
                    <div style="color: #9ca3af;">–û—à–∏–±–∫–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å...</div>
                </div>
            </div>
        </div>
        
        <!-- –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ò –ù–ê–°–¢–†–û–ô–ö–ò -->
        <div class="demo-section">
            <h3>‚öôÔ∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            <p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4>üîç –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞</h4>
                    <label>
                        <input type="checkbox" id="enable-typos" checked> –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫
                    </label><br>
                    <label>
                        <input type="checkbox" id="enable-synonyms" checked> –ü–æ–∏—Å–∫ —Å–∏–Ω–æ–Ω–∏–º–æ–≤
                    </label><br>
                    <label>
                        <input type="checkbox" id="enable-phonetic" checked> –§–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
                    </label><br>
                    <label>
                        <input type="checkbox" id="enable-cache" checked> –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                    </label><br>
                    <label>
                        –ú–∞–∫—Å. —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫: 
                        <select id="max-typo-distance">
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                        </select>
                    </label>
                </div>
                
                <div>
                    <h4>üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫</h4>
                    <label>
                        <input type="checkbox" id="auto-report" checked> –ê–≤—Ç–æ–æ—Ç—á–µ—Ç—ã –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
                    </label><br>
                    <label>
                        <input type="checkbox" id="enable-stack-trace" checked> –°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤
                    </label><br>
                    <label>
                        <input type="checkbox" id="enable-user-context" checked> –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </label><br>
                    <label>
                        <input type="checkbox" id="enable-performance" checked> –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                    </label><br>
                    <label>
                        –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: 
                        <select id="log-level">
                            <option value="debug">Debug</option>
                            <option value="info" selected>Info</option>
                            <option value="warn">Warning</option>
                            <option value="error">Error</option>
                        </select>
                    </label>
                </div>
            </div>
            
            <div style="margin-top: 20px;">
                <button class="demo-button" onclick="applySettings()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button class="demo-button" onclick="resetSettings()">–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π -->
    <script src="../heys_advanced_error_tracker_v1.js?v=3"></script>
    <script src="../heys_smart_search_with_typos_v1.js?v=3"></script>
    
    <!-- Fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥–ª—É—à–∫–∞ –µ—Å–ª–∏ –º–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
        window.HEYS = window.HEYS || {};
        
        // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
        if (!window.HEYS.SmartSearchWithTypos) {
            console.warn('‚ö†Ô∏è –°–æ–∑–¥–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –¥–ª—è SmartSearchWithTypos');
            window.HEYS.SmartSearchWithTypos = {
                search: function(query, data, options = {}) {
                    console.log('üîç Fallback –ø–æ–∏—Å–∫:', query);
                    
                    // –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –∫–∞–∫ fallback
                    const results = data.filter(item => 
                        item.name.toLowerCase().includes(query.toLowerCase())
                    ).slice(0, options.limit || 10);
                    
                    return {
                        results: results.map(item => ({ ...item, matchType: 'exact', relevance: 100 })),
                        suggestions: [],
                        corrections: [],
                        searchTime: 5,
                        query: query,
                        totalFound: results.length,
                        hasTypoCorrections: false,
                        hasSynonyms: false,
                        searchStats: {
                            exactMatches: results.length,
                            typoMatches: 0,
                            synonymMatches: 0,
                            phoneticMatches: 0
                        }
                    };
                },
                addCommonWords: function() { console.log('Fallback addCommonWords'); },
                addSynonyms: function() { console.log('Fallback addSynonyms'); },
                configure: function() { console.log('Fallback configure'); }
            };
        }
        
        // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
        if (!window.HEYS.AdvancedErrorTracker) {
            console.warn('‚ö†Ô∏è –°–æ–∑–¥–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –¥–ª—è AdvancedErrorTracker');
            window.HEYS.AdvancedErrorTracker = {
                logError: function(error, context) { 
                    console.error('Fallback logError:', error, context); 
                },
                getErrorStats: function() { 
                    return { total: 0, bySeverity: {}, byType: {}, recentCount: 0 }; 
                },
                exportErrors: function() { 
                    return { session: {}, errors: {}, config: {} }; 
                },
                clearErrors: function() { 
                    console.log('Fallback clearErrors'); 
                },
                configure: function() { 
                    console.log('Fallback configure'); 
                }
            };
        }
        
        // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è logError
        if (!window.HEYS.logError) {
            window.HEYS.logError = function(error, context) {
                console.error('Fallback HEYS.logError:', error, context);
            };
        }
    </script>
    
    <script>
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞
        const testProducts = [
            { id: 1, name: '–•–ª–µ–± –±–µ–ª—ã–π', category: '–•–ª–µ–±–æ–±—É–ª–æ—á–Ω—ã–µ', popularity: 95 },
            { id: 2, name: '–ú–æ–ª–æ–∫–æ 3.2%', category: '–ú–æ–ª–æ—á–Ω—ã–µ', popularity: 90 },
            { id: 3, name: '–ú—è—Å–æ –≥–æ–≤—è–¥–∏–Ω–∞', category: '–ú—è—Å–Ω—ã–µ', popularity: 85 },
            { id: 4, name: '–ö—É—Ä–∏—Ü–∞ —Ñ–∏–ª–µ', category: '–ú—è—Å–Ω—ã–µ', popularity: 88 },
            { id: 5, name: '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –º–æ–ª–æ–¥–æ–π', category: '–û–≤–æ—â–∏', popularity: 80 },
            { id: 6, name: '–ü–æ–º–∏–¥–æ—Ä—ã –∫—Ä–∞—Å–Ω—ã–µ', category: '–û–≤–æ—â–∏', popularity: 75 },
            { id: 7, name: '–û–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ', category: '–û–≤–æ—â–∏', popularity: 78 },
            { id: 8, name: '–Ø–±–ª–æ–∫–∏ –∑–µ–ª–µ–Ω—ã–µ', category: '–§—Ä—É–∫—Ç—ã', popularity: 82 },
            { id: 9, name: '–ë–∞–Ω–∞–Ω—ã —Å–ø–µ–ª—ã–µ', category: '–§—Ä—É–∫—Ç—ã', popularity: 85 },
            { id: 10, name: '–°—ã—Ä —Ä–æ—Å—Å–∏–π—Å–∫–∏–π', category: '–ú–æ–ª–æ—á–Ω—ã–µ', popularity: 70 },
            { id: 11, name: '–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ', category: '–ú–æ–ª–æ—á–Ω—ã–µ', popularity: 75 },
            { id: 12, name: '–Ø–π—Ü–∞ –∫—É—Ä–∏–Ω—ã–µ', category: '–ú–æ–ª–æ—á–Ω—ã–µ', popularity: 92 },
            { id: 13, name: '–ú–∞–∫–∞—Ä–æ–Ω—ã —Å–ø–∞–≥–µ—Ç—Ç–∏', category: '–ö—Ä—É–ø—ã', popularity: 65 },
            { id: 14, name: '–†–∏—Å –±–µ–ª—ã–π', category: '–ö—Ä—É–ø—ã', popularity: 68 },
            { id: 15, name: '–ì—Ä–µ—á–∫–∞ —è–¥—Ä–∏—Ü–∞', category: '–ö—Ä—É–ø—ã', popularity: 72 },
            { id: 16, name: '–ë–∞—Ç–æ–Ω –Ω–∞—Ä–µ–∑–Ω–æ–π', category: '–•–ª–µ–±–æ–±—É–ª–æ—á–Ω—ã–µ', popularity: 60 },
            { id: 17, name: '–ë—É–ª–æ—á–∫–∏ —Å–¥–æ–±–Ω—ã–µ', category: '–•–ª–µ–±–æ–±—É–ª–æ—á–Ω—ã–µ', popularity: 55 },
            { id: 18, name: '–°–≤–∏–Ω–∏–Ω–∞ –∫–æ—Ä–µ–π–∫–∞', category: '–ú—è—Å–Ω—ã–µ', popularity: 70 },
            { id: 19, name: '–¢–µ–ª—è—Ç–∏–Ω–∞ –≤—ã—Ä–µ–∑–∫–∞', category: '–ú—è—Å–Ω—ã–µ', popularity: 60 },
            { id: 20, name: '–¶—ã–ø–ª–µ–Ω–æ–∫ —Ç–∞–±–∞–∫–∞', category: '–ú—è—Å–Ω—ã–µ', popularity: 65 }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
        let searchTimeout;
        const searchInput = document.getElementById('smart-search-input');
        const searchResults = document.getElementById('search-results');

        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                performSmartSearch(e.target.value);
            }, 300);
        });

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
        function performSmartSearch(query) {
            console.log('üîç –ü–æ–∏—Å–∫ –∑–∞–ø—Ä–æ—Å–∞:', query);
            console.log('üîç HEYS –¥–æ—Å—Ç—É–ø–µ–Ω:', typeof HEYS);
            console.log('üîç SmartSearchWithTypos –¥–æ—Å—Ç—É–ø–µ–Ω:', typeof HEYS?.SmartSearchWithTypos);
            
            if (!query.trim()) {
                searchResults.innerHTML = '<div style="text-align: center; color: #7f8c8d; padding: 50px;">–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞...</div>';
                updateSearchStats({});
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥—É–ª—è
            if (!HEYS || !HEYS.SmartSearchWithTypos) {
                searchResults.innerHTML = '<div style="text-align: center; color: #e74c3c; padding: 30px;">‚ùå –ú–æ–¥—É–ª—å —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω</div>';
                console.error('‚ùå HEYS.SmartSearchWithTypos –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }

            try {
                const result = HEYS.SmartSearchWithTypos.search(query, testProducts, {
                    limit: 10,
                    debugMode: true
                });

                console.log('üîç –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞:', result);
                displaySearchResults(result);
                updateSearchStats(result);
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ:', error);
                searchResults.innerHTML = `<div style="text-align: center; color: #e74c3c; padding: 30px;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞: ${error.message}</div>`;
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
        function displaySearchResults(result) {
            let html = '';

            if (result.results.length === 0) {
                html = '<div style="text-align: center; color: #e74c3c; padding: 30px;">‚ùå –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            } else {
                result.results.forEach(item => {
                    const matchTypeColors = {
                        exact: '#3498db',
                        typo: '#f39c12',
                        synonym: '#27ae60',
                        phonetic: '#9b59b6'
                    };

                    const matchTypeLabels = {
                        exact: '–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ',
                        typo: '–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–ø–µ—á–∞—Ç–∫–∞',
                        synonym: '–ù–∞–π–¥–µ–Ω —Å–∏–Ω–æ–Ω–∏–º',
                        phonetic: '–§–æ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ'
                    };

                    html += `
                        <div class="result-item ${item.matchType}">
                            <div style="font-weight: bold;">${item.name}</div>
                            <div style="font-size: 12px; color: #7f8c8d;">${item.category} ‚Ä¢ –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å: ${item.popularity}%</div>
                            <div class="match-info">
                                <span style="color: ${matchTypeColors[item.matchType]};">
                                    ${matchTypeLabels[item.matchType]}
                                </span>
                                ‚Ä¢ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: ${Math.round(item.relevance)}
                                ${item.correctedQuery ? ` ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: "${item.originalQuery}" ‚Üí "${item.correctedQuery}"` : ''}
                                ${item.matchedSynonym ? ` ‚Ä¢ –°–∏–Ω–æ–Ω–∏–º: "${item.matchedSynonym}"` : ''}
                            </div>
                        </div>
                    `;
                });
            }

            // –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
            if (result.suggestions.length > 0) {
                html += '<div class="suggestions"><strong>üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</strong><br>';
                result.suggestions.forEach(suggestion => {
                    html += `<span class="suggestion-item" onclick="searchInput.value='${suggestion}'; performSmartSearch('${suggestion}')">${suggestion}</span>`;
                });
                html += '</div>';
            }

            // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            if (result.corrections.length > 0) {
                html += '<div class="suggestions" style="background: #fef5e7;"><strong>üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</strong><br>';
                result.corrections.forEach(correction => {
                    html += `<span class="suggestion-item" style="background: #f39c12;" onclick="searchInput.value='${correction.corrected}'; performSmartSearch('${correction.corrected}')">${correction.corrected}</span>`;
                });
                html += '</div>';
            }

            searchResults.innerHTML = html;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–∏—Å–∫–∞
        function updateSearchStats(result) {
            document.getElementById('search-time').textContent = result.searchTime || 0;
            document.getElementById('results-count').textContent = result.totalFound || 0;
            document.getElementById('corrections-count').textContent = result.corrections?.length || 0;
            document.getElementById('suggestions-count').textContent = result.suggestions?.length || 0;

            if (result.searchStats) {
                document.getElementById('exact-matches').textContent = result.searchStats.exactMatches;
                document.getElementById('typo-matches').textContent = result.searchStats.typoMatches;
                document.getElementById('synonym-matches').textContent = result.searchStats.synonymMatches;
                document.getElementById('phonetic-matches').textContent = result.searchStats.phoneticMatches;
            }
        }

        // –î–µ–º–æ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
        function triggerJSError() {
            // –ù–∞–º–µ—Ä–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
            setTimeout(() => {
                throw new Error('–î–µ–º–æ JavaScript –æ—à–∏–±–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è');
            }, 100);
        }

        function triggerNetworkError() {
            fetch('/nonexistent-api-endpoint')
                .catch(error => {
                    HEYS.AdvancedErrorTracker.logError(error, {
                        type: 'network',
                        additionalData: { demo: true }
                    });
                });
        }

        function triggerPromiseRejection() {
            Promise.reject(new Error('–î–µ–º–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ Promise'));
        }

        function triggerPerformanceIssue() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
            const start = performance.now();
            const bigArray = new Array(1000000).fill(0).map((_, i) => i * Math.random());
            bigArray.sort();
            const duration = performance.now() - start;
            
            HEYS.AdvancedErrorTracker.logError(new Error('–ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞'), {
                type: 'performance',
                additionalData: { 
                    duration: duration,
                    operation: 'array_sort',
                    demo: true 
                }
            });
        }

        function triggerCriticalError() {
            HEYS.AdvancedErrorTracker.logError(new Error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã'), {
                type: 'javascript',
                additionalData: { 
                    severity: 'critical',
                    demo: true 
                }
            });
        }

        function showErrorStats() {
            const stats = HEYS.AdvancedErrorTracker.getErrorStats();
            const errorStatsDiv = document.getElementById('error-stats');
            const contentDiv = document.getElementById('error-stats-content');
            
            let html = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                    <div class="stat-item">
                        <div class="stat-value">${stats.total}</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –æ—à–∏–±–æ–∫</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${stats.recentCount}</div>
                        <div class="stat-label">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <h5>–ü–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏:</h5>
                    ${Object.entries(stats.bySeverity).map(([severity, count]) => 
                        `<span style="margin-right: 15px;">${severity}: <strong>${count}</strong></span>`
                    ).join('')}
                </div>
                
                <div style="margin-top: 10px;">
                    <h5>–ü–æ —Ç–∏–ø–∞–º:</h5>
                    ${Object.entries(stats.byType).map(([type, count]) => 
                        `<span style="margin-right: 15px;">${type}: <strong>${count}</strong></span>`
                    ).join('')}
                </div>
            `;
            
            contentDiv.innerHTML = html;
            errorStatsDiv.style.display = 'block';
        }

        function exportErrors() {
            const exportData = HEYS.AdvancedErrorTracker.exportErrors();
            console.log('üì§ –≠–∫—Å–ø–æ—Ä—Ç –æ—à–∏–±–æ–∫:', exportData);
            
            // –°–æ–∑–¥–∞–µ–º downloadable JSON
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `heys-errors-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            alert('üì§ –û—à–∏–±–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ñ–∞–π–ª');
        }

        function clearErrors() {
            HEYS.AdvancedErrorTracker.clearErrors();
            document.getElementById('error-stats').style.display = 'none';
            alert('üßπ –í—Å–µ –æ—à–∏–±–∫–∏ –æ—á–∏—â–µ–Ω—ã');
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function applySettings() {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞
            HEYS.SmartSearchWithTypos.configure({
                maxTypoDistance: parseInt(document.getElementById('max-typo-distance').value),
                enablePhonetic: document.getElementById('enable-phonetic').checked,
                enableSynonyms: document.getElementById('enable-synonyms').checked,
                cacheEnabled: document.getElementById('enable-cache').checked
            });

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
            HEYS.AdvancedErrorTracker.configure({
                autoReport: document.getElementById('auto-report').checked,
                enableStackTrace: document.getElementById('enable-stack-trace').checked,
                enableUserContext: document.getElementById('enable-user-context').checked,
                enablePerformanceMetrics: document.getElementById('enable-performance').checked,
                logLevel: document.getElementById('log-level').value
            });

            alert('‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã');
        }

        function resetSettings() {
            // –°–±—Ä–æ—Å —á–µ–∫–±–æ–∫—Å–æ–≤ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            document.getElementById('enable-typos').checked = true;
            document.getElementById('enable-synonyms').checked = true;
            document.getElementById('enable-phonetic').checked = true;
            document.getElementById('enable-cache').checked = true;
            document.getElementById('max-typo-distance').value = '2';
            
            document.getElementById('auto-report').checked = true;
            document.getElementById('enable-stack-trace').checked = true;
            document.getElementById('enable-user-context').checked = true;
            document.getElementById('enable-performance').checked = true;
            document.getElementById('log-level').value = 'info';
            
            applySettings();
        }

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç console –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ demo
        const originalConsoleError = console.error;
        const consoleOutput = document.getElementById('console-output');
        
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            
            const timestamp = new Date().toLocaleTimeString();
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const div = document.createElement('div');
            div.style.color = '#fed7d7';
            div.style.marginBottom = '5px';
            div.innerHTML = `<span style="color: #9ca3af;">[${timestamp}]</span> ${message}`;
            
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
            while (consoleOutput.children.length > 50) {
                consoleOutput.removeChild(consoleOutput.firstChild);
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–º–æ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª–µ–π:');
            console.log('  - HEYS:', typeof HEYS);
            console.log('  - AdvancedErrorTracker:', typeof HEYS?.AdvancedErrorTracker);
            console.log('  - SmartSearchWithTypos:', typeof HEYS?.SmartSearchWithTypos);
            
            // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
            setTimeout(() => {
                console.log('‚è∞ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª–µ–π —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É:');
                console.log('  - HEYS:', typeof HEYS);
                console.log('  - AdvancedErrorTracker:', typeof HEYS?.AdvancedErrorTracker);
                console.log('  - SmartSearchWithTypos:', typeof HEYS?.SmartSearchWithTypos);
                
                if (HEYS && HEYS.SmartSearchWithTypos) {
                    console.log('‚úÖ –ú–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ');
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ª–æ–≤–∞
                    HEYS.SmartSearchWithTypos.addCommonWords([
                        '—Ç–≤–æ—Ä–æ–≥', '–∫–µ—Ñ–∏—Ä', '—Ä—è–∂–µ–Ω–∫–∞', '—Å–º–µ—Ç–∞–Ω–∞', '–π–æ–≥—É—Ä—Ç',
                        '–∫–æ–ª–±–∞—Å–∞', '—Å–æ—Å–∏—Å–∫–∏', '–≤–µ—Ç—á–∏–Ω–∞', '–æ–∫–æ—Ä–æ–∫',
                        '–ø–µ—á–µ–Ω—å–µ', '–∫–æ–Ω—Ñ–µ—Ç—ã', '—à–æ–∫–æ–ª–∞–¥', '–≤–∞—Ä–µ–Ω—å–µ'
                    ]);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–Ω–æ–Ω–∏–º—ã
                    HEYS.SmartSearchWithTypos.addSynonyms('—Ç–≤–æ—Ä–æ–≥', ['—Ç–≤–æ—Ä–æ–∂–æ–∫', '—Ç–≤–æ—Ä–æ–∂–Ω—ã–π']);
                    HEYS.SmartSearchWithTypos.addSynonyms('–∫–æ–ª–±–∞—Å–∞', ['–∫–æ–ª–±–∞—Å–Ω—ã–π', '–∫–æ–ª–±–∞—Å–∫–∏']);
                    HEYS.SmartSearchWithTypos.addSynonyms('–ø–µ—á–µ–Ω—å–µ', ['–ø–µ—á–µ–Ω—å–∫–∏', '–±–∏—Å–∫–≤–∏—Ç']);
                    
                    console.log('‚úÖ –°–ª–æ–≤–∞—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
                } else {
                    console.error('‚ùå –ú–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                    const searchResults = document.getElementById('search-results');
                    if (searchResults) {
                        searchResults.innerHTML = `
                            <div style="text-align: center; color: #e74c3c; padding: 30px;">
                                ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π<br>
                                <small>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π</small>
                            </div>
                        `;
                    }
                }
            }, 1000);
        });
    </script>
</body>
</html>
