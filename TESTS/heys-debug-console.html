<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>HEYS Debug Console</title>
    <style>
        body { font-family: monospace; background: #000; color: #0f0; padding: 20px; }
        .log { margin: 5px 0; }
        .error { color: #f00; }
        .success { color: #0f0; }
        .warning { color: #ff0; }
        .info { color: #0ff; }
    </style>
</head>
<body>
    <h1>HEYS Debug Console</h1>
    <div id="output"></div>

    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª–∏ –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä -->
    <script src="../heys_core_v12.js"></script>
    <script src="../heys_models_v1.js"></script>
    <script src="../heys_storage_supabase_v1.js"></script>
    <script src="../heys_reports_v12.js"></script>
    <script src="../heys_smart_search.js"></script>
    <script src="../heys_integration_layer.js"></script>
    <script src="../heys_security_validation.js"></script>

    <script>
        function debugLog(message, type = 'info') {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            output.appendChild(div);
            console.log(message);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—ä–µ–∫—Ç–∞
        function deepInspect(obj, path = '', maxDepth = 3, currentDepth = 0) {
            if (currentDepth >= maxDepth) return;
            
            if (obj && typeof obj === 'object') {
                for (const key in obj) {
                    if (obj.hasOwnProperty(key)) {
                        const fullPath = path ? `${path}.${key}` : key;
                        const value = obj[key];
                        const type = typeof value;
                        
                        if (type === 'function') {
                            debugLog(`  üì¶ ${fullPath}() - function`, 'success');
                        } else if (type === 'object' && value !== null) {
                            debugLog(`  üìÅ ${fullPath} - object`, 'info');
                            if (currentDepth < maxDepth - 1) {
                                deepInspect(value, fullPath, maxDepth, currentDepth + 1);
                            }
                        } else {
                            debugLog(`  üìã ${fullPath} = ${value} (${type})`, 'info');
                        }
                    }
                }
            }
        }

        window.addEventListener('load', () => {
            setTimeout(() => {
                debugLog('üöÄ Starting HEYS debug inspection...', 'info');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º window.HEYS
                if (typeof window.HEYS === 'undefined') {
                    debugLog('‚ùå window.HEYS –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!', 'error');
                    return;
                }
                
                debugLog('‚úÖ window.HEYS —Å—É—â–µ—Å—Ç–≤—É–µ—Ç', 'success');
                debugLog(`üìã –°–≤–æ–π—Å—Ç–≤–∞ HEYS: ${Object.keys(window.HEYS).join(', ')}`, 'info');
                
                // –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ HEYS
                debugLog('üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ HEYS namespace:', 'warning');
                deepInspect(window.HEYS, 'HEYS');
                
                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω—É–∂–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
                const requiredModules = ['ReportsManager', 'SmartSearchEngine', 'IntegrationLayer', 'SecurityValidationManager'];
                
                debugLog('üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±—É–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π:', 'warning');
                requiredModules.forEach(moduleName => {
                    if (window.HEYS[moduleName]) {
                        debugLog(`‚úÖ ${moduleName} –ù–ê–ô–î–ï–ù`, 'success');
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–µ–π/–∫–ª–∞—Å—Å–æ–º
                        if (typeof window.HEYS[moduleName] === 'function') {
                            debugLog(`  üì¶ ${moduleName} - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è/–∫–ª–∞—Å—Å`, 'success');
                            
                            // –ü—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä
                            try {
                                const instance = new window.HEYS[moduleName]();
                                debugLog(`  ‚úÖ –≠–∫–∑–µ–º–ø–ª—è—Ä ${moduleName} —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ`, 'success');
                                
                                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
                                const methods = Object.getOwnPropertyNames(Object.getPrototypeOf(instance))
                                    .filter(name => name !== 'constructor' && typeof instance[name] === 'function');
                                
                                if (methods.length > 0) {
                                    debugLog(`  üì¶ –ú–µ—Ç–æ–¥—ã ${moduleName}: ${methods.join(', ')}`, 'info');
                                }
                            } catch (error) {
                                debugLog(`  ‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä ${moduleName}: ${error.message}`, 'warning');
                            }
                        } else {
                            debugLog(`  üìã ${moduleName} - —ç—Ç–æ ${typeof window.HEYS[moduleName]}`, 'info');
                        }
                    } else {
                        debugLog(`‚ùå ${moduleName} –ù–ï –ù–ê–ô–î–ï–ù`, 'error');
                    }
                });

                debugLog('üèÅ Debug inspection completed', 'success');
                
            }, 2000); // –î–∞–µ–º –≤—Ä–µ–º—è –º–æ–¥—É–ª—è–º –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è
        });
    </script>
</body>
</html>
