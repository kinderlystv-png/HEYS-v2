# üîê Quick Reference: Secrets Management

## –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ ‚úÖ

**–ë—ã–ª–æ**: –ü–∞—Ä–æ–ª–∏ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã, –¥–µ–ø–ª–æ–π –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é, —Ä–∏—Å–∫ –æ–ø–µ—á–∞—Ç–æ–∫  
**–°—Ç–∞–ª–æ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `.env` + –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## üöÄ Quick Start

```bash
cd yandex-cloud-functions

# –ï—Å–ª–∏ .env –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env && nano .env

# –î–µ–ø–ª–æ–π –í–°–ï–• —Ñ—É–Ω–∫—Ü–∏–π
./deploy-all.sh

# –î–µ–ø–ª–æ–π –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
./deploy-all.sh heys-api-leads
```

---

## üìù –ö–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞—Ä–æ–ª—å –ë–î

```bash
# 1. –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ .env
nano .env  # PG_PASSWORD=–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å

# 2. –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –ë–î
./deploy-all.sh heys-api-rpc
./deploy-all.sh heys-api-rest
./deploy-all.sh heys-api-auth
./deploy-all.sh heys-api-leads

# –ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
./deploy-all.sh
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ø–∞—Ä–æ–ª–µ–π

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–æ–π –ø–∞—Ä–æ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
for func in heys-api-rpc heys-api-rest heys-api-auth heys-api-leads; do
  echo "=== $func ==="
  version_id=$(yc serverless function version list --function-name $func --limit 1 --format json | jq -r '.[0].id')
  yc serverless function version get $version_id --format json | jq -r '.environment.PG_PASSWORD'
done
```

---

## üìÑ –§–∞–π–ª—ã

| –§–∞–π–ª                           | –û–ø–∏—Å–∞–Ω–∏–µ                              |
| ------------------------------ | ------------------------------------- |
| `.env`                         | ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (**–ù–ï –≤ git!**) |
| `.env.example`                 | üìù –®–∞–±–ª–æ–Ω —Å–µ–∫—Ä–µ—Ç–æ–≤                    |
| `deploy-all.sh`                | üöÄ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π deployment        |
| `SECRETS_MANAGEMENT_README.md` | üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                |

---

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ `.env` –£–ñ–ï –í `.gitignore`
- ‚ùå **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å** `.env` –≤ git
- ‚ùå **–ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å** –ø–∞—Ä–æ–ª–∏ —á–µ—Ä–µ–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã
- ‚úÖ –ü–∞—Ä–æ–ª—å –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è –≤ –≤—ã–≤–æ–¥–µ: `heys...7670`

---

## üéØ –°—Ç–∞—Ç—É—Å —Ä–µ—à–µ–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                        | –°—Ç–∞—Ç—É—Å       |
| -------------------------------- | ------------ |
| –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π .env            | ‚úÖ –°–æ–∑–¥–∞–Ω    |
| Deployment —Å–∫—Ä–∏–ø—Ç                | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                     | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ |
| –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º | ‚úÖ –î–∞        |
| –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Yandex Lockbox       | üîÆ –ë—É–¥—É—â–µ–µ   |

---

## üîê –í–∞–∂–Ω–æ: JWT_SECRET

–§—É–Ω–∫—Ü–∏–∏ `heys-api-rpc` –∏ `heys-api-auth` —Ç—Ä–µ–±—É—é—Ç `JWT_SECRET` (–∏
`SESSION_SECRET` –¥–ª—è auth).

–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π–∏—Ç—å –±–µ–∑ –Ω–∏—Ö, –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞:
`Server configuration error: JWT_SECRET missing`

‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –µ—Å—Ç—å:

```bash
JWT_SECRET=your_jwt_secret_here
SESSION_SECRET=your_session_secret_here
```

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 10 —Ñ–µ–≤—Ä–∞–ª—è 2026
