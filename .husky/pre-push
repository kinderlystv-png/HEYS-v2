#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üß™ –ó–∞–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ sync/auth/storage/products/models..."

# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, storage layer, –∑–∞—â–∏—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
pnpm --filter @heys/web test -- \
  __tests__/sync-race-condition.test.js \
  __tests__/merge-day-data.test.js \
  __tests__/auth-session.test.js \
  __tests__/storage-layer.test.js \
  __tests__/products-protection.test.js \
  __tests__/data-models.test.js \
  __tests__/storage-quota.test.js \
  __tests__/storage-compress.test.js \
  __tests__/events-sync.test.js \
  __tests__/pwa-update-logic.test.js

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥ –≤—ã—Ö–æ–¥–∞
if [ $? -ne 0 ]; then
  echo "‚ùå –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏! Push –æ—Ç–º–µ–Ω—ë–Ω."
  exit 1
fi

echo "‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ (208 tests)!"
