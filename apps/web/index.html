<!doctype html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <!-- üîç PWA Debug: Boot timing logger (saved to localStorage for mobile diagnosis) -->
    <script>
        (function () {
            window.__heysBootLog = [];
            window.__heysBootStart = Date.now();
            window.__heysLog = function (msg) {
                var entry = { t: Date.now() - window.__heysBootStart, m: msg };
                window.__heysBootLog.push(entry);
                try {
                    localStorage.setItem('heys_boot_log', JSON.stringify(window.__heysBootLog.slice(-50)));
                } catch (e) { }
                // üîá v4.7.0: BOOT –ª–æ–≥–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã (—Å–º. localStorage.heys_boot_log)
            };
            window.__heysLog('HTML parsing started');

            // Check if PWA standalone mode
            var isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
            window.__heysLog('PWA standalone: ' + isStandalone);
        })();
    </script>

    <!-- üÜï PWA Recovery: Global pre-React error handler -->
    <script>
        (function () {
            var errorCount = 0;
            var MAX_ERRORS = 3;
            var recoveryShown = false;
            window.__heysRecoveryBusy = false;

            function notifySwBootFailure() {
                if (navigator.serviceWorker && navigator.serviceWorker.controller) {
                    navigator.serviceWorker.controller.postMessage({ type: 'BOOT_FAILURE' });
                }
            }

            function setRecoveryStatus(text) {
                var statusEl = document.getElementById('heys-recovery-status');
                if (statusEl) statusEl.textContent = text || '';
            }

            function setRecoveryButtonsDisabled(disabled) {
                var reloadBtn = document.getElementById('heys-recovery-reload');
                var clearBtn = document.getElementById('heys-recovery-clear');
                if (reloadBtn) reloadBtn.disabled = !!disabled;
                if (clearBtn) clearBtn.disabled = !!disabled;
            }

            function showRecoveryUI(errorMsg) {
                if (recoveryShown) return;
                recoveryShown = true;
                notifySwBootFailure();
                window.__heysLog && window.__heysLog('[CRITICAL] Recovery UI: ' + errorMsg);

                document.body.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:system-ui;padding:20px;background:#f3f4f6">' +
                    '<div style="background:white;padding:32px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.1);max-width:400px;text-align:center">' +
                    '<div style="font-size:48px;margin-bottom:16px">‚ö†Ô∏è</div>' +
                    '<h2 style="margin:0 0 8px;font-size:20px">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>' +
                    '<p style="margin:0 0 24px;color:#6b7280;font-size:14px">' + (errorMsg || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞') + '</p>' +
                    '<div id="heys-recovery-status" style="margin:0 0 16px;color:#6b7280;font-size:12px"></div>' +
                    '<div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">' +
                    '<button id="heys-recovery-reload" onclick="window.__heysReloadApp && window.__heysReloadApp()" style="padding:12px 24px;border-radius:8px;border:none;background:#10b981;color:white;font-weight:500;cursor:pointer">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>' +
                    '<button id="heys-recovery-clear" onclick="clearCacheAndReload()" style="padding:12px 24px;border-radius:8px;border:1px solid #d1d5db;background:white;color:#374151;font-weight:500;cursor:pointer">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –∫—ç—à</button>' +
                    '</div></div></div>';
            }

            window.__heysShowRecoveryUI = showRecoveryUI;

            window.__heysReloadApp = function () {
                if (window.__heysRecoveryBusy) return;
                window.__heysRecoveryBusy = true;
                setRecoveryStatus('–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è‚Ä¶');
                setRecoveryButtonsDisabled(true);
                setTimeout(function () {
                    location.reload();
                }, 250);
            };

            window.clearCacheAndReload = async function () {
                if (window.__heysRecoveryBusy) return;
                window.__heysRecoveryBusy = true;
                setRecoveryStatus('–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫‚Ä¶');
                setRecoveryButtonsDisabled(true);
                try {
                    if ('caches' in window) {
                        var names = await caches.keys();
                        await Promise.all(names.map(function (n) { return caches.delete(n); }));
                    }
                    if ('serviceWorker' in navigator) {
                        var regs = await navigator.serviceWorker.getRegistrations();
                        await Promise.all(regs.map(function (r) { return r.unregister(); }));
                    }
                    sessionStorage.clear();
                } catch (e) {
                    window.__heysLog && window.__heysLog('[RECOVERY] cache clear failed: ' + (e && e.message ? e.message : String(e)));
                }
                setTimeout(function () {
                    location.reload();
                }, 350);
            };

            // Global error handler
            window.onerror = function (msg, url, line, col, error) {
                errorCount++;
                window.__heysLog && window.__heysLog('[ERROR] ' + msg + ' at ' + url + ':' + line);

                // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ recovery
                var isCritical = /React|ReactDOM|HEYS|createRoot|createElement/.test(msg + (error ? error.stack : ''));

                if (isCritical || errorCount >= MAX_ERRORS) {
                    showRecoveryUI(msg);
                    return true; // Suppress error
                }
                return false;
            };

            // Unhandled promise rejections
            window.onunhandledrejection = function (event) {
                errorCount++;
                var reason = event.reason ? (event.reason.message || String(event.reason)) : 'Unknown error';
                window.__heysLog && window.__heysLog('[REJECT] ' + reason);

                if (errorCount >= MAX_ERRORS) {
                    showRecoveryUI(reason);
                }
            };

            // Watchdog: –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª–æ –∑–∞ 15 —Å–µ–∫—É–Ω–¥ ‚Äî recovery
            setTimeout(function () {
                if (!window.__heysAppReady) {
                    window.__heysLog && window.__heysLog('[WATCHDOG] App not ready after 15s');
                    if (window.__heysShowRecoveryUI) {
                        window.__heysShowRecoveryUI('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å –∑–∞ 15 —Å–µ–∫—É–Ω–¥');
                    }
                }
            }, 15000);
        })();
    </script>
    <!-- Global deps loader (used to wait for React safely) -->
    <script>
        (function () {
            window.HEYS = window.HEYS || {};
            window.HEYS.waitForDeps = function (deps, onReady, options) {
                var opts = options || {};
                var timeoutMs = typeof opts.timeoutMs === 'number' ? opts.timeoutMs : 5000;
                var intervalMs = typeof opts.intervalMs === 'number' ? opts.intervalMs : 20;
                var startedAt = Date.now();

                function check() {
                    var missing = (deps || []).filter(function (d) {
                        try {
                            return !(d && typeof d.check === 'function' && d.check());
                        } catch (e) {
                            return true;
                        }
                    });

                    if (missing.length === 0) {
                        if (typeof onReady === 'function') onReady();
                        return;
                    }

                    if (Date.now() - startedAt >= timeoutMs) {
                        var names = missing.map(function (d) { return d && d.name ? d.name : 'unknown'; }).join(', ');
                        window.__heysLog && window.__heysLog('[DEPS] Timeout waiting for: ' + names);
                        if (typeof opts.onTimeout === 'function') {
                            opts.onTimeout(missing);
                        }
                        return;
                    }

                    setTimeout(check, intervalMs);
                }

                check();
            };
        })();
    </script>
    <!-- Prevent FOUC: Apply theme before CSS loads -->
    <script>
        (function () {
            var t = localStorage.getItem('heys_theme');
            var isDark = t === 'dark' || (t === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches);
            if (isDark) document.documentElement.setAttribute('data-theme', 'dark');
            window.__heysLog && window.__heysLog('Theme applied: ' + (isDark ? 'dark' : 'light'));
        })();
    </script>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>HEYS Nutrition Tracker - Production</title>

    <!-- Tailwind CSS (production-friendly —á–µ—Ä–µ–∑ Vite/PostCSS) -->
    <link rel="stylesheet" href="/styles/tailwind.css" />

    <!-- Critical CSS for instant rendering -->
    <link rel="stylesheet" href="styles/critical.css" />

    <!-- HTTP/2 + Resource hints for optimal performance -->
    <!-- cdn.jsdelivr.net –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è Twemoji (emoji SVG) -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />

    <!-- React —Ç–µ–ø–µ—Ä—å –±–∞–Ω–¥–ª–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Vite (–º–∏–≥—Ä–∞—Ü–∏—è —Å CDN 2026-01-21) -->

    <!-- Resource hints for better caching (prefetch, not preload to avoid warnings) -->
    <link rel="prefetch" href="heys_core_v12.js" />
    <link rel="prefetch" href="heys_simple_analytics.js" />
    <!-- heys_storage_supabase_v1.js ‚Äî prefetch —É–¥–∞–ª—ë–Ω, —Ñ–∞–π–ª –ª–æ–∫–∞–ª—å–Ω—ã–π, SDK —É–¥–∞–ª—ë–Ω -->
    <link rel="prefetch" href="heys_models_v1.js" />

    <!-- Load non-critical CSS asynchronously -->
    <link rel="preload" href="styles/main.css?v=21" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <noscript>
        <link rel="stylesheet" href="styles/main.css?v=21" />
    </noscript>

    <!-- PWA Manifest and Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#2563eb" />

    <!-- PWA Support (iOS + Android) -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="HEYS" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png" />

    <!-- IW config: autogenerated by scripts/sync-iw-inline-config.cjs (do not edit manually) -->
    <!-- inline-–±–ª–æ–∫ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º, –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é -->
    <script id="heys-iw-config" type="application/json">
    {
        "version": "hash:af203be2cce1",
        "GI_CATEGORIES": {
            "low": {
                "min": 0,
                "max": 35,
                "multiplier": 0.85,
                "color": "#22c55e",
                "text": "–ù–∏–∑–∫–∏–π –ì–ò",
                "desc": "–∫–æ—Ä–æ—Ç–∫–∞—è –≤–æ–ª–Ω–∞"
            },
            "medium": {
                "min": 36,
                "max": 55,
                "multiplier": 1,
                "color": "#eab308",
                "text": "–°—Ä–µ–¥–Ω–∏–π –ì–ò",
                "desc": "–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è"
            },
            "high": {
                "min": 56,
                "max": 70,
                "multiplier": 1.1,
                "color": "#f97316",
                "text": "–í—ã—Å–æ–∫–∏–π –ì–ò",
                "desc": "–¥–ª–∏–Ω–Ω–µ–µ"
            },
            "veryHigh": {
                "min": 71,
                "max": 999,
                "multiplier": 1.2,
                "color": "#ef4444",
                "text": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π",
                "desc": "–¥–æ–ª–≥–∞—è –≤–æ–ª–Ω–∞"
            }
        },
        "STATUS_CONFIG": {
            "lipolysis": {
                "emoji": "üî•",
                "color": "#22c55e",
                "label": "–õ–∏–ø–æ–ª–∏–∑!"
            },
            "almost": {
                "emoji": "‚è≥",
                "color": "#f97316",
                "label": null
            },
            "soon": {
                "emoji": "üåä",
                "color": "#eab308",
                "label": null
            },
            "active": {
                "emoji": "üìà",
                "color": "#3b82f6",
                "label": null
            }
        },
        "PROTEIN_BONUS": {
            "veryHigh": {
                "threshold": 50,
                "bonus": 0.12
            },
            "high": {
                "threshold": 35,
                "bonus": 0.08
            },
            "medium": {
                "threshold": 20,
                "bonus": 0.05
            }
        },
        "PROTEIN_BONUS_V2": {
            "animal": {
                "multiplier": 1.8,
                "label": "ü•© –ñ–∏–≤–æ—Ç–Ω—ã–π –±–µ–ª–æ–∫",
                "desc": "–í—ã—Å–æ–∫–∏–π BCAA ‚Üí —Å–∏–ª—å–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç"
            },
            "plant": {
                "multiplier": 1.3,
                "label": "üå± –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–ª–æ–∫",
                "desc": "–ù–∏–∑–∫–∏–π leucine ‚Üí —É–º–µ—Ä–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç"
            },
            "whey": {
                "multiplier": 2,
                "label": "ü•õ –°—ã–≤–æ—Ä–æ—Ç–æ—á–Ω—ã–π –±–µ–ª–æ–∫",
                "desc": "–ë—ã—Å—Ç—Ä–æ–µ —É—Å–≤–æ–µ–Ω–∏–µ ‚Üí –ø–∏–∫–æ–≤—ã–π –∏–Ω—Å—É–ª–∏–Ω"
            },
            "mixed": {
                "multiplier": 1.5,
                "label": "üçΩÔ∏è –°–º–µ—à–∞–Ω–Ω—ã–π –±–µ–ª–æ–∫",
                "desc": "–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤"
            },
            "thresholds": {
                "veryHigh": 50,
                "high": 35,
                "medium": 20
            },
            "baseBonuses": {
                "veryHigh": 0.07,
                "high": 0.05,
                "medium": 0.03
            },
            "categories": {
                "animal": [
                    "–ú—è—Å–æ",
                    "–†—ã–±–∞",
                    "–ü—Ç–∏—Ü–∞",
                    "–ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã",
                    "–Ø–π—Ü–∞",
                    "Meat",
                    "Fish",
                    "Poultry",
                    "Seafood",
                    "Eggs"
                ],
                "plant": [
                    "–ë–æ–±–æ–≤—ã–µ",
                    "–û—Ä–µ—Ö–∏",
                    "–°–µ–º–µ–Ω–∞",
                    "Legumes",
                    "Nuts",
                    "Seeds"
                ],
                "dairy": [
                    "–ú–æ–ª–æ—á–Ω—ã–µ",
                    "Dairy"
                ]
            }
        },
        "WAVE_SHAPE_V2": {
            "components": {
                "fast": {
                    "peakOffset": 0.15,
                    "sigma": 0.12,
                    "baseAmplitude": 0.6,
                    "giMultiplier": 1.3,
                    "liquidBoost": 1.5,
                    "fiberDamping": 0.7
                },
                "slow": {
                    "peakOffset": 0.45,
                    "sigma": 0.25,
                    "baseAmplitude": 0.35,
                    "proteinBoost": 1.4,
                    "fatBoost": 1.3,
                    "complexCarbBoost": 1.2
                },
                "hepatic": {
                    "peakOffset": 0.7,
                    "sigma": 0.35,
                    "baseAmplitude": 0.05,
                    "insulinResistanceBoost": 1.5,
                    "alcoholBoost": 1.3
                }
            },
            "composition": {
                "baselineLevel": 0.05,
                "normalizeToOne": true,
                "samplePoints": 100
            },
            "shapeCategories": {
                "spike": {
                    "fastRatio": 0.7,
                    "desc": "–†–µ–∑–∫–∏–π –ø–∏–∫ (–±—ã—Å—Ç—Ä—ã–µ —É–≥–ª–µ–≤–æ–¥—ã)"
                },
                "balanced": {
                    "fastRatio": 0.5,
                    "desc": "–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–ª–Ω–∞"
                },
                "prolonged": {
                    "fastRatio": 0.3,
                    "desc": "–†–∞—Å—Ç—è–Ω—É—Ç–∞—è –≤–æ–ª–Ω–∞ (–º–Ω–æ–≥–æ –±–µ–ª–∫–∞/–∂–∏—Ä–æ–≤)"
                }
            }
        },
        "AUC_CONFIG": {
            "methods": {
                "trapezoidal": true,
                "simpson": false,
                "incremental": true
            },
            "segments": {
                "early": {
                    "start": 0,
                    "end": 0.25,
                    "label": "–†–∞–Ω–Ω–∏–π (0-25%)"
                },
                "peak": {
                    "start": 0.15,
                    "end": 0.5,
                    "label": "–ü–∏–∫–æ–≤—ã–π (15-50%)"
                },
                "late": {
                    "start": 0.5,
                    "end": 1,
                    "label": "–ü–æ–∑–¥–Ω–∏–π (50-100%)"
                }
            },
            "reference": {
                "glucose50g": 1,
                "whiteRice200g": 0.85,
                "oatmeal100g": 0.45
            }
        },
        "INSULIN_PREDICTOR_CONFIG": {
            "timePoints": [
                15,
                30,
                60,
                90,
                120
            ],
            "levels": {
                "peak": {
                    "min": 0.9,
                    "max": 1,
                    "label": "–ü–∏–∫–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å"
                },
                "high": {
                    "min": 0.6,
                    "max": 0.9,
                    "label": "–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å"
                },
                "moderate": {
                    "min": 0.3,
                    "max": 0.6,
                    "label": "–£–º–µ—Ä–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å"
                },
                "low": {
                    "min": 0.1,
                    "max": 0.3,
                    "label": "–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å"
                },
                "baseline": {
                    "min": 0,
                    "max": 0.1,
                    "label": "–ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å"
                }
            },
            "thresholds": {
                "safeToEat": 0.3,
                "fatBurning": 0.15,
                "optimalWindow": 0.25
            }
        },
        "WAVE_SCORING_V2": {
            "weights": {
                "peakHeight": 0.25,
                "duration": 0.2,
                "shape": 0.2,
                "auc": 0.2,
                "context": 0.15
            },
            "thresholds": {
                "peakHeight": {
                    "excellent": 0.6,
                    "good": 0.75,
                    "fair": 0.9,
                    "poor": 1
                },
                "duration": {
                    "target": 180,
                    "tolerance": 30,
                    "maxPenalty": 60
                },
                "auc": {
                    "excellent": 0.5,
                    "good": 0.75,
                    "fair": 1,
                    "poor": 1.5
                }
            },
            "levels": {
                "excellent": {
                    "min": 85,
                    "label": "–û—Ç–ª–∏—á–Ω–æ",
                    "icon": "üåü",
                    "color": "#22c55e"
                },
                "good": {
                    "min": 70,
                    "label": "–•–æ—Ä–æ—à–æ",
                    "icon": "‚úÖ",
                    "color": "#84cc16"
                },
                "fair": {
                    "min": 50,
                    "label": "–ù–æ—Ä–º–∞–ª—å–Ω–æ",
                    "icon": "‚ûñ",
                    "color": "#eab308"
                },
                "poor": {
                    "min": 0,
                    "label": "–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è",
                    "icon": "‚ö†Ô∏è",
                    "color": "#ef4444"
                }
            }
        },
        "FIBER_BONUS": {
            "veryHigh": {
                "threshold": 15,
                "bonus": -0.2
            },
            "high": {
                "threshold": 10,
                "bonus": -0.15
            },
            "medium": {
                "threshold": 5,
                "bonus": -0.08
            }
        },
        "FAT_BONUS": {
            "high": {
                "threshold": 25,
                "bonus": 0.15
            },
            "medium": {
                "threshold": 15,
                "bonus": 0.1
            },
            "low": {
                "threshold": 8,
                "bonus": 0.05
            }
        },
        "LIQUID_FOOD": {
            "waveMultiplier": 0.75,
            "peakMultiplier": 1.35,
            "categories": [
                "–ù–∞–ø–∏—Ç–∫–∏",
                "–°–æ–∫–∏",
                "–ú–æ–ª–æ—á–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏"
            ]
        },
        "INSULINOGENIC_BONUS": {
            "liquidDairy": {
                "bonus": 0.15,
                "categories": [
                    "–ú–æ–ª–æ—á–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏"
                ]
            },
            "softDairy": {
                "bonus": 0.1,
                "categories": []
            },
            "hardDairy": {
                "bonus": 0.05,
                "categories": []
            },
            "protein": {
                "bonus": 0.08,
                "categories": [
                    "–ú—è—Å–æ",
                    "–†—ã–±–∞",
                    "–ü—Ç–∏—Ü–∞",
                    "–ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã",
                    "Meat",
                    "Fish"
                ]
            }
        },
        "GL_CATEGORIES": {
            "micro": {
                "max": 2,
                "multiplier": 0.25,
                "desc": "–º–∏–∫—Ä–æ-–∏–Ω—Å—É–ª–∏–Ω"
            },
            "veryLow": {
                "max": 5,
                "multiplier": 0.4,
                "desc": "–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω"
            },
            "low": {
                "max": 10,
                "multiplier": 0.55,
                "desc": "—Å–ª–∞–±—ã–π –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç"
            },
            "medium": {
                "max": 20,
                "multiplier": 1,
                "desc": "–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω"
            },
            "high": {
                "max": 30,
                "multiplier": 1.15,
                "desc": "—Å–∏–ª—å–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç"
            },
            "veryHigh": {
                "max": "Infinity",
                "multiplier": 1.25,
                "desc": "–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Å—É–ª–∏–Ω"
            }
        },
        "GL_CONTINUOUS": {
            "minGL": 0,
            "maxGL": 40,
            "minMultiplier": 0.15,
            "maxMultiplier": 1.3,
            "exponent": 0.6
        },
        "PERSONAL_BASELINE": {
            "defaultWaveHours": 3,
            "minWaveHours": 1.5,
            "maxWaveHours": 4.5,
            "ageEffect": {
                "startAge": 30,
                "bonusPerYear": 0.004
            },
            "bmiEffect": {
                "startBMI": 25,
                "bonusPerUnit": 0.015
            },
            "genderEffect": {
                "female": -0.05,
                "male": 0.03,
                "other": 0
            }
        },
        "MEAL_STACKING": {
            "enabled": true,
            "maxStackBonus": -0.15,
            "decayRate": 0.5
        },
        "WAVE_PHASES": {
            "rise": {
                "baseMinutes": 20,
                "fiberBonus": 3,
                "liquidPenalty": 0.6
            },
            "plateau": {
                "basePct": 0.35,
                "proteinBonus": 0.05,
                "fatBonus": 0.08
            },
            "decline": {
                "basePct": 0.45,
                "activityBonus": -0.15
            },
            "colors": {
                "rise": "#f97316",
                "plateau": "#ef4444",
                "decline": "#eab308",
                "lipolysis": "#22c55e"
            }
        },
        "INSULIN_INDEX_FACTORS": {
            "liquidDairy": {
                "glBoost": 1.5,
                "peakMultiplier": 1.35,
                "waveMultiplier": 0.85,
                "desc": "–ú–æ–ª–æ–∫–æ, –∫–µ—Ñ–∏—Ä ‚Äî –±—ã—Å—Ç—Ä—ã–π –ø–∏–∫, –∫–æ—Ä–æ—Ç–∫–∞—è –≤–æ–ª–Ω–∞"
            },
            "softDairy": {
                "glBoost": 1.3,
                "peakMultiplier": 1.25,
                "waveMultiplier": 0.9,
                "desc": "–ô–æ–≥—É—Ä—Ç, —Ç–≤–æ—Ä–æ–≥"
            },
            "hardDairy": {
                "glBoost": 1.1,
                "peakMultiplier": 1.1,
                "waveMultiplier": 0.95,
                "desc": "–°—ã—Ä ‚Äî –º–µ–¥–ª–µ–Ω–Ω–µ–µ —É—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è"
            },
            "pureProtein": {
                "glBoost": 1.2,
                "peakMultiplier": 1.15,
                "waveMultiplier": 0.92,
                "desc": "–ú—è—Å–æ, —Ä—ã–±–∞ ‚Äî —É–º–µ—Ä–µ–Ω–Ω—ã–π II"
            },
            "highFiber": {
                "glBoost": 0.8,
                "peakMultiplier": 0.85,
                "waveMultiplier": 1.1,
                "desc": "–í—ã—Å–æ–∫–∞—è –∫–ª–µ—Ç—á–∞—Ç–∫–∞ —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç"
            },
            "maxGLBoost": 2
        },
        "WORKOUT_BONUS": {
            "high": {
                "threshold": 45,
                "bonus": -0.15
            },
            "medium": {
                "threshold": 20,
                "bonus": -0.08
            },
            "intensityMultiplier": 1.5
        },
        "POSTPRANDIAL_EXERCISE": {
            "maxWindow": 120,
            "highIntensity": {
                "threshold": 30,
                "bonus": -0.5
            },
            "moderate": {
                "threshold": 20,
                "bonus": -0.35
            },
            "light": {
                "threshold": 15,
                "bonus": -0.2
            },
            "typeMultipliers": {
                "cardio": 1.3,
                "strength": 1,
                "hobby": 0.8
            },
            "proximityBoost": {
                "immediate": {
                    "maxGap": 15,
                    "boost": 1.5
                },
                "soon": {
                    "maxGap": 30,
                    "boost": 1.3
                },
                "medium": {
                    "maxGap": 60,
                    "boost": 1
                },
                "late": {
                    "maxGap": 120,
                    "boost": 0.7
                }
            }
        },
        "NEAT_BONUS": {
            "high": {
                "threshold": 60,
                "bonus": -0.1
            },
            "medium": {
                "threshold": 30,
                "bonus": -0.05
            },
            "low": {
                "threshold": 15,
                "bonus": -0.02
            }
        },
        "STEPS_BONUS": {
            "high": {
                "threshold": 8000,
                "bonus": -0.08
            },
            "medium": {
                "threshold": 5000,
                "bonus": -0.04
            },
            "low": {
                "threshold": 2000,
                "bonus": -0.02
            }
        },
        "CIRCADIAN_CONFIG": {
            "peakHour": 8,
            "nadirHour": 24,
            "minMultiplier": 0.85,
            "maxMultiplier": 1.2,
            "descriptions": {
                "earlyMorning": {
                    "from": 5,
                    "to": 7,
                    "desc": "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ üåÖ"
                },
                "peakMorning": {
                    "from": 7,
                    "to": 10,
                    "desc": "–ü–∏–∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ üåû"
                },
                "midday": {
                    "from": 10,
                    "to": 14,
                    "desc": "–û–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ ‚òÄÔ∏è"
                },
                "afternoon": {
                    "from": 14,
                    "to": 18,
                    "desc": "–î–Ω–µ–≤–Ω–æ–π –±–∞–ª–∞–Ω—Å üå§Ô∏è"
                },
                "evening": {
                    "from": 18,
                    "to": 21,
                    "desc": "–í–µ—á–µ—Ä–Ω–∏–π —Å–ø–∞–¥ üåÜ"
                },
                "lateEvening": {
                    "from": 21,
                    "to": 24,
                    "desc": "–ü–æ–∑–¥–Ω–∏–π –≤–µ—á–µ—Ä üåô"
                },
                "night": {
                    "from": 0,
                    "to": 5,
                    "desc": "–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º üåë"
                }
            }
        },
        "CIRCADIAN_MULTIPLIERS": {
            "morning": {
                "from": 6,
                "to": 10,
                "multiplier": 0.9,
                "desc": "–£—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º üåÖ"
            },
            "midday": {
                "from": 10,
                "to": 14,
                "multiplier": 0.95,
                "desc": "–û–±–µ–¥–µ–Ω–Ω—ã–π –ø–∏–∫ üåû"
            },
            "afternoon": {
                "from": 14,
                "to": 18,
                "multiplier": 1,
                "desc": "–î–Ω–µ–≤–Ω–æ–π –±–∞–ª–∞–Ω—Å ‚òÄÔ∏è"
            },
            "evening": {
                "from": 18,
                "to": 22,
                "multiplier": 1.1,
                "desc": "–í–µ—á–µ—Ä–Ω–∏–π —Å–ø–∞–¥ üåÜ"
            },
            "night": {
                "from": 22,
                "to": 6,
                "multiplier": 1.2,
                "desc": "–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º üåô"
            }
        },
        "FASTING_BONUS": {
            "long": {
                "threshold": 16,
                "bonus": -0.15
            },
            "medium": {
                "threshold": 12,
                "bonus": -0.1
            },
            "short": {
                "threshold": 8,
                "bonus": -0.05
            }
        },
        "SPICY_FOOD": {
            "multiplier": 0.96
        },
        "ALCOHOL_BONUS": {
            "high": {
                "bonus": 0.25
            },
            "medium": {
                "bonus": 0.18
            },
            "low": {
                "bonus": 0.1
            }
        },
        "ALCOHOL_MATCH": {
            "strongExact": [
                "–≤–æ–¥–∫–∞",
                "–≤–∏—Å–∫–∏",
                "whisky",
                "whiskey",
                "–∫–æ–Ω—å—è–∫",
                "cognac",
                "—Ç–µ–∫–∏–ª–∞",
                "tequila",
                "–¥–∂–∏–Ω",
                "gin",
                "—Ä–æ–º",
                "rum"
            ],
            "mediumExact": [
                "–≤–∏–Ω–æ",
                "wine",
                "—à–∞–º–ø–∞–Ω—Å–∫–æ–µ",
                "champagne",
                "–ø—Ä–æ—Å–µ–∫–∫–æ",
                "–º–∞—Ä—Ç–∏–Ω–∏",
                "martini",
                "–≤–µ—Ä–º—É—Ç",
                "vermouth"
            ],
            "weakExact": [
                "–ø–∏–≤–æ",
                "beer",
                "—Å–∏–¥—Ä",
                "cider",
                "—ç–ª—å",
                "ale",
                "–ª–∞–≥–µ—Ä",
                "lager",
                "–ª–∏–∫–µ—Ä",
                "liqueur"
            ],
            "strongPrefix": [
                "–∞–ª–∫–æ–≥–æ–ª",
                "alcohol"
            ],
            "mediumPrefix": [],
            "weakPrefix": [
                "–ª–∞–≥–µ—Ä"
            ],
            "comboAll": [
                "–∫–æ–∫—Ç–µ–π–ª",
                "cocktail"
            ]
        },
        "CAFFEINE_BONUS": {
            "bonus": 0.06
        },
        "STRESS_BONUS": {
            "high": {
                "threshold": 7,
                "bonus": 0.15
            },
            "medium": {
                "threshold": 5,
                "bonus": 0.08
            },
            "low": {
                "threshold": 3,
                "bonus": 0
            }
        },
        "SLEEP_BONUS": {
            "severe": {
                "maxHours": 4,
                "bonus": 0.2
            },
            "moderate": {
                "maxHours": 5,
                "bonus": 0.15
            },
            "mild": {
                "maxHours": 6,
                "bonus": 0.08
            },
            "normal": {
                "maxHours": 24,
                "bonus": 0
            }
        },
        "SLEEP_QUALITY_BONUS": {
            "poor": {
                "maxQuality": 4,
                "bonus": 0.08
            },
            "mediocre": {
                "maxQuality": 6,
                "bonus": 0.04
            },
            "good": {
                "maxQuality": 10,
                "bonus": 0
            }
        },
        "HYDRATION_BONUS": {
            "severe": {
                "maxPct": 30,
                "bonus": 0.08
            },
            "moderate": {
                "maxPct": 50,
                "bonus": 0.05
            },
            "mild": {
                "maxPct": 70,
                "bonus": 0.03
            },
            "normal": {
                "maxPct": 100,
                "bonus": 0
            }
        },
        "AGE_BONUS": {
            "senior": {
                "minAge": 70,
                "bonus": 0.4
            },
            "elderly": {
                "minAge": 60,
                "bonus": 0.25
            },
            "middle": {
                "minAge": 45,
                "bonus": 0.12
            },
            "adult": {
                "minAge": 30,
                "bonus": 0.06
            },
            "young": {
                "minAge": 0,
                "bonus": 0
            }
        },
        "BMI_BONUS": {
            "obese": {
                "minBMI": 30,
                "bonus": 0.2
            },
            "overweight": {
                "minBMI": 25,
                "bonus": 0.1
            },
            "normal": {
                "minBMI": 0,
                "bonus": 0
            }
        },
        "GENDER_BONUS": {
            "male": 0.05,
            "female": -0.05,
            "other": 0
        },
        "TRANS_FAT_BONUS": {
            "high": {
                "threshold": 2,
                "bonus": 0.15
            },
            "medium": {
                "threshold": 1,
                "bonus": 0.08
            },
            "low": {
                "threshold": 0.5,
                "bonus": 0.04
            },
            "none": {
                "threshold": 0,
                "bonus": 0
            }
        },
        "MEAL_ORDER_BONUS": {
            "carbsLast": -0.25,
            "carbsFirst": 0.1,
            "mixed": 0
        },
        "FOOD_FORM_BONUS": {
            "liquid": {
                "multiplier": 1.3,
                "desc": "–ñ–∏–¥–∫–æ–µ ‚Üí +30% –ø–∏–∫"
            },
            "processed": {
                "multiplier": 1.15,
                "desc": "–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ ‚Üí +15%"
            },
            "whole": {
                "multiplier": 0.85,
                "desc": "–¶–µ–ª—å–Ω–æ–µ ‚Üí -15%"
            },
            "mixed": {
                "multiplier": 1,
                "desc": "–°–º–µ—à–∞–Ω–Ω–æ–µ ‚Üí –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
            }
        },
        "RESISTANT_STARCH_BONUS": {
            "cooled": -0.15
        },
        "FOOD_TEMPERATURE_BONUS": {
            "hot": {
                "bonus": 0.08,
                "peakBoost": 1.15,
                "desc": "üî• –ì–æ—Ä—è—á–µ–µ ‚Üí –±—ã—Å—Ç—Ä–µ–µ –ø–∏–∫"
            },
            "cold": {
                "bonus": -0.05,
                "peakBoost": 0.9,
                "desc": "‚ùÑÔ∏è –•–æ–ª–æ–¥–Ω–æ–µ ‚Üí –ø–ª–∞–≤–Ω–µ–µ –≤–æ–ª–Ω–∞"
            },
            "room": {
                "bonus": 0,
                "peakBoost": 1,
                "desc": "–ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞"
            }
        },
        "LARGE_PORTION_BONUS": {
            "thresholds": [
                {
                    "minKcal": 1200,
                    "bonus": 0.25,
                    "peakReduction": 0.8,
                    "desc": ">1200 –∫–∫–∞–ª ‚Üí +25% –≤–æ–ª–Ω–∞, -20% –ø–∏–∫"
                },
                {
                    "minKcal": 1000,
                    "bonus": 0.18,
                    "peakReduction": 0.85,
                    "desc": ">1000 –∫–∫–∞–ª ‚Üí +18% –≤–æ–ª–Ω–∞"
                },
                {
                    "minKcal": 800,
                    "bonus": 0.1,
                    "peakReduction": 0.9,
                    "desc": ">800 –∫–∫–∞–ª ‚Üí +10% –≤–æ–ª–Ω–∞"
                },
                {
                    "minKcal": 600,
                    "bonus": 0.05,
                    "peakReduction": 0.95,
                    "desc": ">600 –∫–∫–∞–ª ‚Üí +5% –≤–æ–ª–Ω–∞"
                }
            ],
            "maxBonus": 0.3
        },
        "LIPOLYSIS_THRESHOLDS": {
            "full": {
                "insulinUIml": 5,
                "lipolysisPct": 100,
                "desc": "–ü–æ–ª–Ω—ã–π –ª–∏–ø–æ–ª–∏–∑"
            },
            "partial": {
                "insulinUIml": 15,
                "lipolysisPct": 50,
                "desc": "~50% –ª–∏–ø–æ–ª–∏–∑–∞"
            },
            "suppressed": {
                "insulinUIml": 50,
                "lipolysisPct": 10,
                "desc": "–õ–∏–ø–æ–ª–∏–∑ –ø–æ–¥–∞–≤–ª–µ–Ω"
            },
            "blocked": {
                "insulinUIml": 100,
                "lipolysisPct": 0,
                "desc": "–õ–∏–ø–æ–ª–∏–∑ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
            }
        },
        "REACTIVE_HYPOGLYCEMIA": {
            "riskWindow": {
                "start": 120,
                "end": 240
            },
            "riskFactors": {
                "highGI": {
                    "threshold": 70,
                    "weight": 0.4
                },
                "lowProtein": {
                    "threshold": 10,
                    "weight": 0.3
                },
                "lowFat": {
                    "threshold": 5,
                    "weight": 0.2
                },
                "fasted": {
                    "weight": 0.1
                }
            },
            "warningThreshold": 0.6,
            "ui": {
                "warningEmoji": "‚ö°",
                "warningColor": "#f97316",
                "warningTitle": "–†–∏—Å–∫ –≥–æ–ª–æ–¥–∞ —á–µ—Ä–µ–∑ 2-4 —á–∞—Å–∞",
                "warningDesc": "–í—ã—Å–æ–∫–∏–π –ì–ò –±–µ–∑ –±–µ–ª–∫–∞/–∂–∏—Ä–∞ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ä–µ–∑–∫–∏–π –≥–æ–ª–æ–¥",
                "advice": [
                    "–î–æ–±–∞–≤—å –±–µ–ª–æ–∫ (—è–π—Ü–æ, —Ç–≤–æ—Ä–æ–≥, –æ—Ä–µ—Ö–∏) ‚Äî –∑–∞–º–µ–¥–ª–∏—Ç —É—Å–≤–æ–µ–Ω–∏–µ",
                    "–î–æ–±–∞–≤—å –∂–∏—Ä—ã (–∞–≤–æ–∫–∞–¥–æ, –º–∞—Å–ª–æ) ‚Äî —Å–≥–ª–∞–¥–∏—Ç –ø–∏–∫ –∏–Ω—Å—É–ª–∏–Ω–∞",
                    "–ü–ª–∞–Ω–∏—Ä—É–π –ø–µ—Ä–µ–∫—É—Å —á–µ—Ä–µ–∑ 2-3 —á–∞—Å–∞"
                ],
                "symptoms": [
                    "–†–µ–∑–∫–∏–π –≥–æ–ª–æ–¥",
                    "–°–ª–∞–±–æ—Å—Ç—å",
                    "–†–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
                    "–ü–æ—Ç–ª–∏–≤–æ—Å—Ç—å",
                    "–¢—Ä–µ–º–æ—Ä"
                ]
            }
        },
        "NDTE": {
            "maxWindowHours": 48,
            "kcalTiers": [
                {
                    "minKcal": 900,
                    "tdeeBoost": 0.1,
                    "waveReduction": 0.25,
                    "peakReduction": 0.3,
                    "label": "üî• –ú–æ—â–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞"
                },
                {
                    "minKcal": 500,
                    "tdeeBoost": 0.07,
                    "waveReduction": 0.15,
                    "peakReduction": 0.2,
                    "label": "üí™ –•–æ—Ä–æ—à–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞"
                },
                {
                    "minKcal": 300,
                    "tdeeBoost": 0.04,
                    "waveReduction": 0.08,
                    "peakReduction": 0.1,
                    "label": "‚ö° –õ—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
                }
            ],
            "bmiMultiplier": {
                "obese": {
                    "minBMI": 30,
                    "multiplier": 1.8
                },
                "overweight": {
                    "minBMI": 25,
                    "multiplier": 1.4
                },
                "normal": {
                    "minBMI": 18.5,
                    "multiplier": 1
                },
                "underweight": {
                    "minBMI": 0,
                    "multiplier": 0.8
                }
            },
            "decay": {
                "halfLifeHours": 16.6,
                "tiers": [
                    {
                        "maxHours": 12,
                        "multiplier": 1
                    },
                    {
                        "maxHours": 24,
                        "multiplier": 0.8
                    },
                    {
                        "maxHours": 36,
                        "multiplier": 0.5
                    },
                    {
                        "maxHours": 48,
                        "multiplier": 0.25
                    }
                ]
            },
            "typeMultiplier": {
                "strength": {
                    "tdee": 1.2,
                    "wave": 0.9
                },
                "cardio": {
                    "tdee": 1,
                    "wave": 1.1
                },
                "hobby": {
                    "tdee": 0.8,
                    "wave": 0.8
                }
            },
            "cumulative": {
                "enabled": true,
                "maxMultiplier": 1.5
            },
            "badge": "üî• –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
            "badgeColor": "#10b981"
        },
        "TRAINING_CONTEXT": {
            "periWorkout": {
                "maxBonus": -0.6,
                "harmMultiplier": 0.5,
                "badge": "üèãÔ∏è –¢–æ–ø–ª–∏–≤–æ",
                "desc": "–ï–¥–∞ –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Üí —ç–Ω–µ—Ä–≥–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ –º—ã—à—Ü—ã",
                "intensityScaling": {
                    "HIIT": 1,
                    "MODERATE": 0.75,
                    "LISS": 0.5
                }
            },
            "postWorkout": {
                "baseGap": 120,
                "kcalScaling": 60,
                "maxGap": 360,
                "tiers": [
                    {
                        "maxMin": 30,
                        "waveBonus": -0.4,
                        "label": "üî• –ê–Ω–∞–±–æ–ª–∏—á–µ—Å–∫–æ–µ –æ–∫–Ω–æ"
                    },
                    {
                        "maxMin": 60,
                        "waveBonus": -0.35,
                        "label": "üîÑ Recovery"
                    },
                    {
                        "maxMin": 120,
                        "waveBonus": -0.25,
                        "label": "‚è≥ –ì–ª–∏–∫–æ–≥–µ–Ω–æ–≤–æ–µ –æ–∫–Ω–æ"
                    },
                    {
                        "maxMin": 240,
                        "waveBonus": -0.15,
                        "label": "üìâ –ü–æ–∑–¥–Ω–µ–µ –æ–∫–Ω–æ"
                    },
                    {
                        "maxMin": 360,
                        "waveBonus": -0.08,
                        "label": "üí® –û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç"
                    }
                ],
                "nightPenaltyOverride": true,
                "typeMultipliers": {
                    "cardio": 1.15,
                    "strength": 1,
                    "hobby": 0.8
                },
                "badge": "üîÑ Recovery",
                "desc": "–ì–ª–∏–∫–æ–≥–µ–Ω–æ–≤–æ–µ –æ–∫–Ω–æ ‚Äî –µ–¥–∞ –∏–¥—ë—Ç –≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
            },
            "preWorkout": [
                {
                    "maxGap": 45,
                    "waveBonus": -0.2,
                    "harmMultiplier": 0.6,
                    "label": "‚ö° –¢–æ–ø–ª–∏–≤–æ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
                },
                {
                    "maxGap": 90,
                    "waveBonus": -0.1,
                    "harmMultiplier": 0.8,
                    "label": "üîã Pre-workout"
                }
            ],
            "stepsBonus": {
                "tiers": [
                    {
                        "threshold": 12000,
                        "waveBonus": -0.12,
                        "harmMultiplier": 0.92,
                        "badge": "üö∂ 12k —à–∞–≥–æ–≤"
                    },
                    {
                        "threshold": 10000,
                        "waveBonus": -0.1,
                        "harmMultiplier": 0.95,
                        "badge": "üö∂ –ê–∫—Ç–∏–≤–Ω—ã–π"
                    },
                    {
                        "threshold": 7500,
                        "waveBonus": -0.06,
                        "harmMultiplier": 0.97,
                        "badge": "üö∂ 7.5k —à–∞–≥–æ–≤"
                    },
                    {
                        "threshold": 5000,
                        "waveBonus": -0.04,
                        "harmMultiplier": 0.98,
                        "badge": "üö∂ 5k —à–∞–≥–æ–≤"
                    }
                ],
                "eveningBoost": {
                    "afterHour": 18,
                    "multiplier": 1.3
                }
            },
            "householdBonus": {
                "tiers": [
                    {
                        "threshold": 90,
                        "waveBonus": -0.12,
                        "harmMultiplier": 0.9,
                        "badge": "üè† –û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π"
                    },
                    {
                        "threshold": 60,
                        "waveBonus": -0.1,
                        "harmMultiplier": 0.93,
                        "badge": "üè† –ê–∫—Ç–∏–≤–Ω—ã–π –±—ã—Ç"
                    },
                    {
                        "threshold": 30,
                        "waveBonus": -0.05,
                        "harmMultiplier": 0.96,
                        "badge": "üè† –£–º–µ—Ä–µ–Ω–Ω—ã–π –±—ã—Ç"
                    }
                ]
            },
            "morningTraining": {
                "beforeHour": 12,
                "dayWaveBonus": -0.05,
                "badge": "üåÖ Morning boost",
                "desc": "–£—Ç—Ä–µ–Ω–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Üí –º–µ—Ç–∞–±–æ–ª–∏–∑–º —É—Å–∫–æ—Ä–µ–Ω –≤–µ—Å—å –¥–µ–Ω—å"
            },
            "doubleTraining": {
                "minTrainings": 2,
                "dayWaveBonus": -0.1,
                "badge": "üí™ Double Day",
                "desc": "2+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –∏–Ω—Å—É–ª–∏–Ω—É"
            },
            "fastedTraining": {
                "minFastHours": 8,
                "postWorkoutMultiplier": 1.3,
                "badge": "‚ö° Fasted boost",
                "desc": "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞—Ç–æ—â–∞–∫ ‚Üí —É—Å–∏–ª–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
            },
            "strengthProtein": {
                "minProtein": 30,
                "harmMultiplier": 0.8,
                "badge": "üí™ Muscle fuel",
                "desc": "–ë–µ–ª–æ–∫ –ø–æ—Å–ª–µ —Å–∏–ª–æ–≤–æ–π ‚Üí –∞–Ω–∞–±–æ–ª–∏–∑–º"
            },
            "cardioSimple": {
                "harmMultiplier": 0.5,
                "glMultiplier": 0.7,
                "badge": "üèÉ Glycogen refuel",
                "desc": "–ü—Ä–æ—Å—Ç—ã–µ —É–≥–ª–µ–≤–æ–¥—ã –ø–æ—Å–ª–µ –∫–∞—Ä–¥–∏–æ ‚Üí –≥–ª–∏–∫–æ–≥–µ–Ω"
            },
            "nightOverride": {
                "enabled": true,
                "maxHoursAfterTraining": 4
            },
            "priority": {
                "peri": 100,
                "post": 80,
                "pre": 60,
                "steps": 20,
                "household": 15,
                "morning": 10,
                "double": 10
            },
            "intensityMultiplier": {
                "HIIT": 2,
                "MODERATE": 1.5,
                "LISS": 1
            }
        },
        "IR_SCORE_CONFIG": {
            "bmi": {
                "thresholds": [
                    25,
                    30,
                    35
                ],
                "factors": [
                    1,
                    1.1,
                    1.25,
                    1.4
                ],
                "labels": [
                    "Normal",
                    "Overweight",
                    "Obese I",
                    "Obese II+"
                ]
            },
            "sleep": {
                "thresholds": [
                    7,
                    6
                ],
                "factors": [
                    1,
                    1.05,
                    1.15
                ],
                "labels": [
                    "Optimal",
                    "Moderate deficit",
                    "Severe deficit"
                ]
            },
            "stress": {
                "thresholds": [
                    3,
                    6
                ],
                "factors": [
                    1,
                    1.08,
                    1.15
                ],
                "labels": [
                    "Low",
                    "Medium",
                    "High"
                ]
            },
            "age": {
                "thresholds": [
                    30,
                    45,
                    60
                ],
                "factors": [
                    1,
                    1.06,
                    1.12,
                    1.25
                ],
                "labels": [
                    "Young",
                    "Adult",
                    "Middle-age",
                    "Senior"
                ]
            },
            "colorRanges": [
                {
                    "max": 1.1,
                    "color": "#22c55e",
                    "label": "üü¢ Optimal"
                },
                {
                    "max": 1.25,
                    "color": "#eab308",
                    "label": "üü° Moderate"
                },
                {
                    "max": 1.5,
                    "color": "#f97316",
                    "label": "üü† Elevated"
                },
                {
                    "max": "Infinity",
                    "color": "#ef4444",
                    "label": "üî¥ High"
                }
            ]
        },
        "SUPPLEMENTS_BONUS": {
            "vinegar": {
                "bonus": -0.2,
                "desc": "–£–∫—Å—É—Å ‚Üí -20% –≤–æ–ª–Ω–∞"
            },
            "cinnamon": {
                "bonus": -0.1,
                "desc": "–ö–æ—Ä–∏—Ü–∞ ‚Üí -10% –≤–æ–ª–Ω–∞"
            },
            "berberine": {
                "bonus": -0.15,
                "desc": "–ë–µ—Ä–±–µ—Ä–∏–Ω ‚Üí -15% –≤–æ–ª–Ω–∞"
            }
        },
        "COLD_EXPOSURE_BONUS": {
            "coldShower": {
                "bonus": -0.05,
                "minutes": 3,
                "desc": "üßä –•–æ–ª–æ–¥–Ω—ã–π –¥—É—à ‚Üí -5%"
            },
            "coldBath": {
                "bonus": -0.1,
                "minutes": 10,
                "desc": "üßä –õ–µ–¥—è–Ω–∞—è –≤–∞–Ω–Ω–∞ ‚Üí -10%"
            },
            "coldSwim": {
                "bonus": -0.12,
                "minutes": 5,
                "desc": "üßä –ú–æ—Ä–∂–µ–≤–∞–Ω–∏–µ ‚Üí -12%"
            },
            "effectDurationHours": 5
        },
        "AUTOPHAGY_TIMER": {
            "phases": {
                "none": {
                    "minHours": 0,
                    "maxHours": 12,
                    "label": "–ü–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ",
                    "color": "#94a3b8",
                    "icon": "üçΩÔ∏è"
                },
                "early": {
                    "minHours": 12,
                    "maxHours": 16,
                    "label": "–ü–µ—Ä–µ—Ö–æ–¥ –∫ –≥–æ–ª–æ–¥–∞–Ω–∏—é",
                    "color": "#eab308",
                    "icon": "‚è≥"
                },
                "active": {
                    "minHours": 16,
                    "maxHours": 24,
                    "label": "–ê—É—Ç–æ—Ñ–∞–≥–∏—è –∞–∫—Ç–∏–≤–Ω–∞",
                    "color": "#22c55e",
                    "icon": "üîÑ"
                },
                "deep": {
                    "minHours": 24,
                    "maxHours": 48,
                    "label": "–ì–ª—É–±–æ–∫–∞—è –∞—É—Ç–æ—Ñ–∞–≥–∏—è",
                    "color": "#10b981",
                    "icon": "‚ú®"
                },
                "extended": {
                    "minHours": 48,
                    "maxHours": "Infinity",
                    "label": "–ü—Ä–æ–¥–ª—ë–Ω–Ω—ã–π –ø–æ—Å—Ç",
                    "color": "#3b82f6",
                    "icon": "üåü"
                }
            },
            "minHoursToShow": 12,
            "sensitivityBonus": {
                "early": 0.05,
                "active": 0.1,
                "deep": 0.15,
                "extended": 0.18
            }
        },
        "GAP_HISTORY_KEY": "heys_meal_gaps_history",
        "GAP_HISTORY_DAYS": 14,
        "LIPOLYSIS_RECORD_KEY": "heys_lipolysis_record",
        "LIPOLYSIS_STREAK_KEY": "heys_lipolysis_streak",
        "LIPOLYSIS_HISTORY_KEY": "heys_lipolysis_history",
        "MIN_LIPOLYSIS_FOR_STREAK": 240,
        "KCAL_PER_MIN_BASE": 1
    }
  </script>
</head>

<body class="emoji-system">
    <!-- üîç vConsole –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ (–≤–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ?debug=1 –∏–ª–∏ localStorage heys_debug=1) -->
    <script>
        (function () {
            window.__heysLog && window.__heysLog('Body parsing started');
            var debug = new URLSearchParams(window.location.search).get('debug') === '1' || localStorage.getItem('heys_debug') === '1';
            if (debug) {
                var s = document.createElement('script');
                s.src = 'https://cdn.jsdelivr.net/npm/vconsole@latest/dist/vconsole.min.js';
                s.onload = function () {
                    new window.VConsole({ theme: 'dark' });
                    window.__heysLog && window.__heysLog('vConsole loaded');
                };
                document.head.appendChild(s);
            }
        })();
    </script>
    <div id="root"></div>

    <!-- Emoji style initialization - runs BEFORE twemoji loads -->
    <script>
        (function () {
            // Detect platform - Twemoji only needed on Windows/Linux
            var ua = navigator.userAgent || '';
            var isWindows = /Windows/i.test(ua);
            var isLinux = /Linux/i.test(ua) && !/Android/i.test(ua);
            var needsTwemoji = isWindows || isLinux;

            window.heysPlatformNeedsTwemoji = needsTwemoji;

            // Get stored preference or auto-detect
            var stored = localStorage.getItem('heys_emoji_style');
            if (stored) {
                stored = stored.replace(/"/g, '');
            }

            // Auto mode: use twemoji on Windows/Linux, system on Mac/iOS/Android
            if (!stored || stored === 'auto' || stored === 'android' || stored === 'apple' || stored === 'null') {
                stored = needsTwemoji ? 'twemoji' : 'system';
                localStorage.setItem('heys_emoji_style', stored);
            }

            // Apply class
            document.body.classList.remove('emoji-system', 'emoji-twemoji');
            document.body.classList.add('emoji-' + stored);

            // Global state
            window.twemojiReady = false;
            window.heysEmojiStyle = stored;
            window.applyTwemoji = function () { };
            window.scheduleTwemojiParse = function () { };
        })();
    </script>

    <!-- Twemoji library - load only if needed (async to avoid parser-blocking) -->
    <script>
        if (window.heysPlatformNeedsTwemoji || window.heysEmojiStyle === 'twemoji') {
            (function () {
                var s = document.createElement('script');
                s.src = 'https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js';
                s.async = false; // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
                s.onload = function () { window.twemojiLoaded = true; };
                document.head.appendChild(s);
            })();
        }
    </script>

    <!-- Twemoji initialization - runs AFTER twemoji loads (only if loaded) -->
    <script>
        (function () {
            // Setup function to initialize Twemoji
            function initTwemoji() {
                if (!window.twemoji) return;

                window.twemojiReady = true;

                // Apply Twemoji parsing
                window.applyTwemoji = function (el) {
                    if (window.heysEmojiStyle !== 'twemoji') return;
                    if (!window.twemoji) return;
                    // –ù–µ –ø–∞—Ä—Å–∏—Ç—å —ç–º–æ–¥–∑–∏ –∫–æ–≥–¥–∞ –Ω–µ—Ç —Å–µ—Ç–∏ ‚Äî –∏–Ω–∞—á–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ SVG
                    if (!navigator.onLine) return;

                    // Ensure class is set
                    if (!document.body.classList.contains('emoji-twemoji')) {
                        document.body.classList.add('emoji-twemoji');
                    }

                    var target = el || document.body;
                    twemoji.parse(target, {
                        folder: 'svg',
                        ext: '.svg',
                        base: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/'
                    });
                };

                // Debounced parse
                var parseTimeout = null;
                window.scheduleTwemojiParse = function () {
                    // –ù–µ —Å—Ç–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –µ—Å–ª–∏ –Ω–µ—Ç —Å–µ—Ç–∏
                    if (!navigator.onLine) return;
                    if (parseTimeout) clearTimeout(parseTimeout);
                    parseTimeout = setTimeout(window.applyTwemoji, 30);
                };

                // Parse immediately
                window.applyTwemoji();

                // MutationObserver for dynamic content
                var observer = new MutationObserver(function () {
                    window.scheduleTwemojiParse();
                });

                // Wait for root to exist
                var startObserver = function () {
                    var root = document.getElementById('root');
                    if (root) {
                        observer.observe(root, { childList: true, subtree: true });
                    } else {
                        setTimeout(startObserver, 10);
                    }
                };
                startObserver();

                // Reparse when back online
                window.addEventListener('online', function () {
                    window.applyTwemoji();
                });

                // Aggressive reparsing during page load
                setTimeout(window.applyTwemoji, 100);
                setTimeout(window.applyTwemoji, 300);
                setTimeout(window.applyTwemoji, 600);
                setTimeout(window.applyTwemoji, 1000);
                setTimeout(window.applyTwemoji, 2000);
                setTimeout(window.applyTwemoji, 4000);
            }

            // If Twemoji already loaded, init now. Otherwise wait for it.
            if (window.twemoji) {
                initTwemoji();
            } else if (window.heysPlatformNeedsTwemoji || window.heysEmojiStyle === 'twemoji') {
                // Wait for async script to load
                var checkInterval = setInterval(function () {
                    if (window.twemoji) {
                        clearInterval(checkInterval);
                        initTwemoji();
                    }
                }, 20);
                // Timeout after 5s
                setTimeout(function () { clearInterval(checkInterval); }, 5000);
            }
            // Else: not needed, stubs already set
        })();
    </script>

    <!-- libs with defer and priority for optimal loading -->
    <!-- React (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π –±–∞–Ω–¥–ª) - 152-–§–ó compliant, –±–µ–∑ CDN -->
    <!-- –í–ê–ñ–ù–û: –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –°–ò–ù–•–†–û–ù–ù–û –ø–µ—Ä–µ–¥ defer-—Å–∫—Ä–∏–ø—Ç–∞–º–∏ (blocking script) -->
    <!-- –°–æ–±–∏—Ä–∞–µ—Ç—Å—è: npx esbuild src/react-globals-sync.ts --bundle --format=iife --minify -->
    <script src="react-bundle.js"></script>
    <!-- Supabase CDN ‚Äî –£–î–ê–õ–Å–ù 2025-12-24 (152-–§–ó compliance)
         –ü—Ä–∏—á–∏–Ω–∞: SDK –¥–µ–ª–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä–∞–º Supabase (–ì–µ—Ä–º–∞–Ω–∏—è), 
         –Ω–∞—Ä—É—à–∞—è —Å—Ç.18 —á.5 152-–§–ó –æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ü–î–Ω.
         –ó–∞–º–µ–Ω–∞: YandexAPI (heys_yandex_api_v1.js) ‚Üí api.heyslab.ru
    -->

    <!-- app modules with defer and optimized priority -->
    <script defer src="heys_dev_utils.js" fetchpriority="high"></script>
    <!-- Refactoring Infrastructure (v1.0) -->
    <script defer src="heys_feature_flags_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_module_perf_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_module_loader_v1.js?v=1" fetchpriority="high"></script>
    <!-- Modular App Components (Phase 2) -->
    <script defer src="heys_bootstrap_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_platform_apis_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_pwa_module_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_simple_analytics.js" fetchpriority="high"></script>
    <!-- Smart search with typo correction, synonyms, phonetic (—ë‚Üí–µ) -->
    <script defer src="heys_smart_search_v2.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_shared_products_export_fields_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_export_utils_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_core_v12.js" fetchpriority="high"></script>
    <!-- Yandex Cloud API adapter (152-–§–ó compliant) - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û supabase –¥–ª—è auth -->
    <script defer src="heys_yandex_api_v1.js?v=5" fetchpriority="high"></script>
    <!-- Cloud sync modularization (Phase refactor) -->
    <script defer src="heys_cloud_merge_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_cloud_storage_utils_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_cloud_shared_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_cloud_queue_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_storage_photos_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_storage_supabase_v1.js?v=61" fetchpriority="low"></script>
    <script defer src="heys_models_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_storage_layer_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_wheel_picker.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_swipeable.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_pull_refresh.js?v=20" fetchpriority="low"></script>
    <!-- Toast Notification System (universal replacement for browser alerts) -->
    <script defer src="heys_toast_v1.js?v=1" fetchpriority="low"></script>
    <!-- Centralized ratio zones logic -->
    <script defer src="heys_ratio_zones_v1.js?v=20" fetchpriority="low"></script>
    <!-- TEF (Thermic Effect of Food) calculation module -->
    <script defer src="heys_tef_v1.js?v=1" fetchpriority="low"></script>
    <!-- TDEE calculation module -->
    <script defer src="heys_tdee_v1.js?v=6" fetchpriority="low"></script>
    <!-- Harm Score v2.0: Scientific Food Harm Assessment System -->
    <script defer src="heys_harm_v1.js?v=1" fetchpriority="low"></script>
    <!-- Sparkline utilities (curves, regression, caching) -->
    <script defer src="heys_sparkline_utils_v1.js?v=20" fetchpriority="low"></script>
    <!-- Shared mini-sparklines -->
    <script defer src="heys_sparklines_shared_v1.js?v=1" fetchpriority="low"></script>
    <!-- Gamification system (XP, levels, achievements) -->
    <script defer src="heys_gamification_v1.js?v=20" fetchpriority="low"></script>
    <!-- Day module split (Phase 2-5) -->
    <script defer src="heys_day_core_bundle_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_pickers.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_day_popups.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_gallery.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_bundle_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_add_product.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_storage_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_sound_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_guards_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_init_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_sleep_effects_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_global_exports_v1.js?v=1" fetchpriority="low"></script>
    <!-- Day module handlers (Phase 10) -->

    <!-- End Day module handlers -->
    <!-- Day helper functions (Phase 11) -->
    <!-- Day effects (Phase 12) -->
    <!-- End Day helper functions -->
    <!-- Day render components (Phase 13A) -->
    <!-- End Day render components -->
    <!-- Day Stats/Water/Activity modules (PR #29 extractions) -->
    <script defer src="heys_day_stats_bundle_loader_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_edit_grams_modal_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_time_mood_picker_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_sparklines_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_sparkline_data_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_caloric_balance_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_insights_data_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_insulin_wave_data_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_goal_progress_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_daily_summary_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_pull_refresh_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_offline_sync_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_insulin_wave_ui_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_measurements_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_popups_state_v1.js?v=1" fetchpriority="low"></script>

    <script defer src="heys_day_main_block_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_side_block_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_cycle_card_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_weight_trends_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_picker_modals.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_animations.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_hero_metrics.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_water_state.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_daily_table.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_steps_ui.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_sparkline_state.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_edit_grams_state.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_caloric_display_state.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_page_shell.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_engagement_effects.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_calendar_metrics.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_calendar_block_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_mood_sparkline_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_stats_block_v1.js?v=1" fetchpriority="low"></script>

    <script defer src="heys_day_orphan_state_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_nutrition_state_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_runtime_ui_state_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_water_card_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_activity_card_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_energy_context_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_bottom_sheet_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_hero_display_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_rating_averages_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_advice_integration_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_products_context_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_tab_render_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_day_cycle_state.js" fetchpriority="low"></script>
    <!-- End PR #29 extractions -->
    <script defer src="heys_advice_rules_v1.js?v=1" fetchpriority="low"></script>
    <!-- Advice engine (modular) -->
    <script defer src="heys_advice_bundle_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_meal_optimizer_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_sounds_v1.js?v=20" fetchpriority="low"></script>
    <!-- Modular components -->
    <script defer src="heys_expandable_card_v1.js?v=20" fetchpriority="low"></script>
    <!-- Insulin Wave Modules (v4.2.2 refactored) -->
    <script defer src="heys_iw_shim.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_patterns.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_config_loader.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_constants.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_utils.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_lipolysis.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_v30.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_v41.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_calc.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_orchestrator.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_graph.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_ndte.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_ui.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_insulin_wave_v1.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_iw_version_info.js?v=25" fetchpriority="low"></script>
    <script defer src="heys_cycle_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_refeed_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_yesterday_verify_v1.js?v=4" fetchpriority="low"></script>
    <script defer src="heys_sms_v1.js?v=2" fetchpriority="low"></script>
    <script defer src="heys_consents_v1.js?v=5" fetchpriority="low"></script>
    <script defer src="heys_subscriptions_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_status_v1.js?v=1" fetchpriority="low"></script>
    <!-- Predictive Insights (split modules) v6 -->
    <script defer src="insights/pi_constants.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_math.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_stats.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_science_info.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_patterns.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_advanced.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_analytics_api.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_calculations.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_ui_rings.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_ui_cards.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_ui_whatif.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_ui_dashboard.js?v=6" fetchpriority="low"></script>
    <script defer src="insights/pi_data.js?v=6" fetchpriority="low"></script>
    <!-- Bridge: creates HEYS.PredictiveInsights.components getter from InsightsPI submodules -->
    <script defer src="heys_predictive_insights_v1.js?v=6" fetchpriority="low"></script>
    <script defer src="heys_phenotype_v1.js?v=2" fetchpriority="low"></script>
    <script defer src="heys_metabolic_intelligence_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_supplements_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_supplements_science_v1.js?v=1" fetchpriority="low"></script>
    <!-- Modal Management System -->
    <script defer src="heys_modal_manager_v1.js?v=2" fetchpriority="low"></script>
    <!-- StepModal system (modular step-based modals) -->
    <script defer src="heys_step_modal_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_steps_v1.js?v=21" fetchpriority="low"></script>
    <script defer src="heys_profile_step_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_meal_step_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_add_product_step_v1.js?v=22" fetchpriority="low"></script>
    <script defer src="heys_training_step_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_morning_checkin_v1.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_confirm_modal_v1.js?v=20" fetchpriority="low"></script>
    <!-- Day module: consolidated meals (card/list/display/chart/state/handlers) -->
    <script defer src="day/_meals.js?v=4" fetchpriority="low"></script>
    <!-- End Day module split -->
    <script defer src="heys_day_tab_impl_v1.js?v=4" fetchpriority="low"></script>
    <script defer src="heys_day_v12.js?v=54" fetchpriority="low"></script>
    <script defer src="heys_user_tab_impl_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_user_v12.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_reports_tab_impl_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_reports_v12.js?v=20" fetchpriority="low"></script>
    <script defer src="heys_weekly_reports_v2.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_data_overview_v1.js?v=20" fetchpriority="low"></script>
    <!-- Widgets Dashboard system -->
    <script defer src="heys_widgets_events_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_widgets_registry_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="heys_widgets_core_v1.js?v=1" fetchpriority="low"></script>
    <script defer src="widgets/widget_data.js?v=5" fetchpriority="low"></script>
    <script defer src="heys_widgets_ui_v1.js?v=3" fetchpriority="low"></script>
    <!-- Auth + Login (client phone+PIN, curator email+password) -->
    <script defer src="heys_auth_v1.js?v=3" fetchpriority="high"></script>
    <script defer src="heys_subscription_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_trial_queue_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_paywall_v1.js?v=2" fetchpriority="high"></script>
    <script defer src="heys_login_screen_v1.js?v=2" fetchpriority="high"></script>
    <script src="heys_ui_onboarding_v1.js"></script>
    <script defer src="heys_app_hooks_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_tabs_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_gamification_bar_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_gates_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_shell_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_overlays_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_gate_flow_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_backup_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_shortcuts_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_onboarding_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_auth_init_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_client_helpers_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_desktop_gate_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_morning_checkin_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_swipe_nav_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_runtime_effects_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_sync_effects_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_tab_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_client_management_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_backup_actions_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_backup_export_v1.js?v=2" fetchpriority="high"></script>
    <script defer src="heys_app_update_checks_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_update_notifications_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_cloud_init_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_client_state_manager_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_date_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_derived_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_shell_props_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_overlays_props_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_gate_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_global_bindings_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_backup_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_banner_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_client_init_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_twemoji_effect_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_runtime_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_core_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_root_impl_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_root_component_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_root_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_dependency_loader_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_ui_state_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_initialize_v1.js?v=1" fetchpriority="high"></script>
    <script defer src="heys_app_entry_v1.js?v=1" fetchpriority="high"
        onerror="window.__heysShowRecoveryUI && window.__heysShowRecoveryUI('CRITICAL_SCRIPT_LOAD: heys_app_entry_v1.js')"></script>
    <script defer src="heys_app_v12.js?v=2026.01.25.2313.5890eba" fetchpriority="high"
        onerror="window.__heysShowRecoveryUI && window.__heysShowRecoveryUI('CRITICAL_SCRIPT_LOAD: heys_app_v12.js')"></script>

    <!-- Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ heys_platform_apis_v1.js ‚Üí registerServiceWorker() -->
</body>

</html>