/* Table of Contents
 * 01. Meal Step (Time + Mood)
 * 02. MEAL STEP MICRO-INTERACTIONS
 * 03. MOOD HISTORY MINI-CHART
 * 04. STEP MODAL PROGRESS BAR
 * 05. STEP MODAL PROGRESS DOTS (кружочки)
 * 06. SWIPE HINT
 * 07. ADD PRODUCT STEP
 * 08. APS (Add Product Step) Modal Override
 * 09. GRAMS STEP
 * 10. APS OPEN BUTTON (Кнопка вызова модалки)
 * 11. Категории-чипы
 * 12. Умные рекомендации
 * 13. Подсказка про последние граммы
 * 14. Slide-анимация между шагами
 * 15. Переключатель граммы/ккал
 * 16. Ввод ккал
 * 17. Итог дня
 * 18. CREATE PRODUCT STEP (Создание нового продукта)
 */

/* === 01. Meal Step (Time + Mood) === */

/* Step 1: Время и тип */
.meal-time-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 8px 0;
}

.meal-time-display {
  text-align: center;
}

.meal-time-value {
  font-size: 48px;
  font-weight: 800;
  color: var(--color-blue-500);
  letter-spacing: -2px;
}

.meal-time-pickers {
  display: flex;
  align-items: center;
  gap: 8px;
}

.meal-time-separator {
  font-size: 32px;
  font-weight: 600;
  color: var(--color-slate-400);
}

/* Night hour hint */
.meal-night-hint {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: rgba(139, 92, 246, 0.1);
  border-radius: 10px;
  font-size: 13px;
  color: #7c3aed;
}

.meal-night-hint b {
  font-weight: 700;
}

[data-theme="dark"] .meal-night-hint {
  background: rgba(139, 92, 246, 0.15);
  color: #60a5fa;
}

/* Meal type selection */
.meal-type-section {
  width: 100%;
  padding: 0 8px;
}

.meal-type-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-slate-500);
  margin-bottom: 10px;
  text-align: center;
}

.meal-type-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
}

.meal-type-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 8px 4px;
  background: var(--color-slate-100);
  border: 2px solid transparent;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.meal-type-btn:active {
  transform: scale(0.95);
}

.meal-type-btn.active {
  background: #dbeafe;
  border-color: var(--color-blue-500);
}

.meal-type-btn-icon {
  font-size: 20px;
}

.meal-type-btn-name {
  font-size: 10px;
  font-weight: 600;
  color: var(--color-slate-500);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.meal-type-btn.active .meal-type-btn-name {
  color: #2563eb;
}

[data-theme="dark"] .meal-type-btn {
  background: var(--color-slate-700);
}

[data-theme="dark"] .meal-type-btn-name {
  color: var(--color-slate-400);
}

[data-theme="dark"] .meal-type-btn.active {
  background: #1e3a8a;
  border-color: var(--color-blue-500);
}

[data-theme="dark"] .meal-type-btn.active .meal-type-btn-name {
  color: #93c5fd;
}

/* Step 2: Оценки — в стиле оценки дня */
.meal-mood-step {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 0;
  position: relative;
}

/* Grid из трёх карточек — компактный */
/* Общий индикатор состояния */
.meal-overall-status {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 12px;
  margin-bottom: 12px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(16, 185, 129, 0.08));
  border-radius: 10px;
}

.meal-overall-emoji {
  font-size: 24px;
}

.meal-overall-text {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

[data-theme="dark"] .meal-overall-text {
  color: #d1d5db;
}

/* Grid из трёх карточек */
.meal-ratings-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Карточка оценки — новый layout с градиентом */
.meal-rating-card {
  border: 1px solid var(--color-slate-200);
  border-radius: 12px;
  padding: 10px 12px 8px;
  transition: background 0.3s ease;
}

[data-theme="dark"] .meal-rating-card {
  border-color: var(--color-slate-700);
}

/* Главная строка: emoji | info | presets */
.meal-rating-row-main {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

/* Большой emoji слева */
.meal-rating-emoji-lg {
  font-size: 28px;
  width: 34px;
  height: 34px;
  min-width: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.meal-rating-emoji-lg.bounce {
  animation: meal-emoji-bounce 0.4s ease;
}

.meal-rating-emoji-lg.shake {
  animation: meal-emoji-shake 0.4s ease;
}

/* Инфо блок: название + значение */
.meal-rating-info {
  flex: 1;
  min-width: 0;
}

.meal-rating-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--color-gray-400);
  margin-bottom: 2px;
}

.meal-rating-value-row {
  display: flex;
  align-items: baseline;
  gap: 3px;
}

.meal-rating-num {
  font-size: 22px;
  font-weight: 700;
  line-height: 1;
  transition: color 0.2s ease, transform 0.2s ease;
}

.meal-rating-num.num-bounce {
  animation: num-bounce 0.2s ease;
}

@keyframes num-bounce {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.15);
  }
}

.meal-rating-max {
  font-size: 12px;
  color: var(--color-gray-400);
}

.meal-rating-text {
  font-size: 12px;
  color: var(--color-gray-500);
  margin-left: 6px;
}

[data-theme="dark"] .meal-rating-text {
  color: var(--color-gray-400);
}

/* Пресеты справа */
.meal-rating-presets {
  display: flex;
  gap: 4px;
}

.meal-preset-btn {
  width: 32px;
  height: 32px;
  border: 1px solid var(--color-slate-200);
  border-radius: 8px;
  background: white;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.meal-preset-btn:active {
  transform: scale(0.92);
}

.meal-preset-btn.active {
  background: #dbeafe;
  border-color: var(--color-blue-500);
}

[data-theme="dark"] .meal-preset-btn {
  background: #374151;
  border-color: #4b5563;
}

[data-theme="dark"] .meal-preset-btn.active {
  background: #1e40af;
  border-color: var(--color-blue-500);
}

/* Слайдер внизу карточки */
.meal-rating-card>.mood-slider {
  width: 100%;
  margin: 0;
}

/* Анимации */
@keyframes meal-emoji-bounce {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.2);
  }
}

@keyframes meal-emoji-shake {

  0%,
  100% {
    transform: translateX(0);
  }

  25% {
    transform: translateX(-3px);
  }

  75% {
    transform: translateX(3px);
  }
}

/* Старые стили для совместимости — можно удалить позже */
.meal-rating-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0 8px;
}

.meal-rating-label {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 110px;
}

.meal-rating-emoji {
  font-size: 24px;
  transition: transform 0.3s ease, filter 0.3s ease;
}

.meal-rating-name {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
}

[data-theme="dark"] .meal-rating-name {
  color: #d1d5db;
}

/* Comment section */
.meal-comment-section {
  margin-top: 8px;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  background: #fafafa;
  transition: all 0.2s ease;
}

.meal-comment-negative {
  background: #fef2f2;
  border-color: #fecaca;
}

.meal-comment-positive {
  background: #f0fdf4;
  border-color: #bbf7d0;
}

.meal-comment-neutral {
  background: #f8fafc;
  border-color: var(--color-slate-200);
}

[data-theme="dark"] .meal-comment-section {
  background: #1e293b;
  border-color: var(--color-slate-700);
}

[data-theme="dark"] .meal-comment-negative {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.3);
}

[data-theme="dark"] .meal-comment-positive {
  background: rgba(34, 197, 94, 0.1);
  border-color: rgba(34, 197, 94, 0.3);
}

.meal-comment-header {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 10px;
  min-height: 36px;
}

.meal-comment-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.meal-comment-title {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  line-height: 1.4;
  min-height: 36px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.meal-comment-negative .meal-comment-title {
  color: #991b1b;
}

.meal-comment-positive .meal-comment-title {
  color: #166534;
}

[data-theme="dark"] .meal-comment-title {
  color: #d1d5db;
}

[data-theme="dark"] .meal-comment-negative .meal-comment-title {
  color: #fca5a5;
}

[data-theme="dark"] .meal-comment-positive .meal-comment-title {
  color: #86efac;
}

/* Quick chips — одна строка, скролл, фиксированная высота */
.meal-comment-chips {
  display: flex;
  flex-wrap: nowrap;
  gap: 6px;
  margin-bottom: 8px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  min-height: 28px;
}

.meal-comment-chips::-webkit-scrollbar {
  display: none;
}

/* Пустые chips — резервируем место */
.meal-comment-chips:empty {
  min-height: 28px;
}

.meal-comment-chip {
  padding: 5px 10px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-slate-500);
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.meal-comment-chip:active {
  transform: scale(0.95);
}

.meal-comment-negative .meal-comment-chip {
  color: #991b1b;
  border-color: #fca5a5;
  background: #fff1f2;
}

.meal-comment-positive .meal-comment-chip {
  color: #166534;
  border-color: #86efac;
  background: #f0fdf4;
}

[data-theme="dark"] .meal-comment-chip {
  background: #374151;
  border-color: #4b5563;
  color: #d1d5db;
}

/* Comment input */
.meal-comment-input {
  width: 100%;
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: white;
  color: #374151;
  resize: none;
  transition: border-color 0.2s ease;
}

.meal-comment-input:focus {
  outline: none;
  border-color: var(--color-blue-500);
}

.meal-comment-input::placeholder {
  color: var(--color-gray-400);
}

[data-theme="dark"] .meal-comment-input {
  background: #1e293b;
  border-color: #475569;
  color: var(--color-slate-100);
}

[data-theme="dark"] .meal-comment-input::placeholder {
  color: var(--color-slate-500);
}

/* Confetti (Meal mood step only) */
.meal-mood-step .confetti-container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 100;
}

.meal-mood-step .confetti-piece {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  animation: confetti-fall-aps 2s ease-out forwards;
}

@keyframes confetti-fall-aps {
  0% {
    transform: translateY(-20px) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: translateY(300px) rotate(720deg);
    opacity: 0;
  }
}

/* === 02. MEAL STEP MICRO-INTERACTIONS === */

/* Emoji tap animation */
.meal-rating-emoji-lg {
  cursor: pointer;
  user-select: none;
}

.meal-rating-emoji-lg.emoji-tap {
  animation: emoji-tap-pulse 0.3s ease;
}

@keyframes emoji-tap-pulse {
  0% {
    transform: scale(1);
  }

  30% {
    transform: scale(1.3);
  }

  60% {
    transform: scale(0.9);
  }

  100% {
    transform: scale(1);
  }
}

/* Presets pulse animation on mount */
.meal-rating-presets.presets-pulse .meal-preset-btn {
  animation: preset-pulse 0.4s ease;
  animation-fill-mode: both;
}

.meal-rating-presets.presets-pulse .meal-preset-btn:nth-child(1) {
  animation-delay: 0ms;
}

.meal-rating-presets.presets-pulse .meal-preset-btn:nth-child(2) {
  animation-delay: 50ms;
}

.meal-rating-presets.presets-pulse .meal-preset-btn:nth-child(3) {
  animation-delay: 100ms;
}

.meal-rating-presets.presets-pulse .meal-preset-btn:nth-child(4) {
  animation-delay: 150ms;
}

.meal-rating-presets.presets-pulse .meal-preset-btn:nth-child(5) {
  animation-delay: 200ms;
}

@keyframes preset-pulse {
  0% {
    transform: scale(0.8);
    opacity: 0.5;
  }

  50% {
    transform: scale(1.1);
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Border transition for gradient cards */
.meal-rating-card {
  transition: background 0.3s ease, border-color 0.3s ease;
}

/* === 03. MOOD HISTORY MINI-CHART === */
.meal-mood-history {
  margin-top: 12px;
  padding: 10px 12px;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 10px;
}

[data-theme="dark"] .meal-mood-history {
  background: rgba(255, 255, 255, 0.03);
}

.meal-mood-history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.meal-mood-history-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--color-gray-400);
}

.meal-mood-sparkline {
  width: 100px;
  height: 24px;
}

.meal-mood-history-items {
  display: flex;
  gap: 6px;
}

.meal-mood-history-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 6px 4px;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.02);
  transition: background 0.2s ease;
  min-width: 0;
}

[data-theme="dark"] .meal-mood-history-item {
  background: rgba(255, 255, 255, 0.02);
}

.meal-mood-history-current {
  background: rgba(59, 130, 246, 0.08);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.meal-mood-history-name {
  font-size: 10px;
  color: var(--color-gray-500);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

[data-theme="dark"] .meal-mood-history-name {
  color: var(--color-gray-400);
}

.meal-mood-history-avg {
  font-size: 13px;
  font-weight: 700;
}

/* === 04. STEP MODAL PROGRESS BAR === */
.mc-progress-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 16px 8px;
}

.mc-progress-fill-container {
  flex: 1;
  height: 4px;
  background: #e5e7eb;
  border-radius: 2px;
  overflow: hidden;
}

[data-theme="dark"] .mc-progress-fill-container {
  background: #374151;
}

.mc-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-blue-500), var(--color-emerald-500));
  border-radius: 2px;
  transition: width 0.3s ease;
}

.mc-progress-text {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-gray-400);
  white-space: nowrap;
}

/* === 05. STEP MODAL PROGRESS DOTS (кружочки) === */
.mc-progress-dots {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 16px;
}

.mc-progress-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #e5e7eb;
  transition: all 0.2s ease;
}

.mc-progress-dot.active {
  background: var(--color-blue-500);
  transform: scale(1.2);
}

.mc-progress-dot.completed {
  background: var(--color-emerald-500);
}

[data-theme="dark"] .mc-progress-dot {
  background: #4b5563;
}

[data-theme="dark"] .mc-progress-dot.active {
  background: #60a5fa;
}

[data-theme="dark"] .mc-progress-dot.completed {
  background: #34d399;
}

/* === 06. SWIPE HINT === */
.mc-swipe-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  margin: 0 auto 8px;
  width: fit-content;
  font-size: 11px;
  color: var(--color-gray-400);
  background: rgba(59, 130, 246, 0.05);
  border-radius: 16px;
  animation: swipe-hint-fade 3s ease forwards;
}

@keyframes swipe-hint-fade {

  0%,
  70% {
    opacity: 1;
  }

  100% {
    opacity: 0;
    pointer-events: none;
  }
}

.mc-swipe-hint-arrow {
  font-size: 14px;
  animation: swipe-arrow-move 1s ease-in-out infinite;
}

@keyframes swipe-arrow-move {

  0%,
  100% {
    transform: translateX(0);
  }

  50% {
    transform: translateX(4px);
  }
}

/* === 07. ADD PRODUCT STEP === */

/* === 08. APS (Add Product Step) Modal Override === */
/* Компактная модалка для добавления продукта */

/* Поднимаем модалку выше (ближе к верху экрана) */
.mc-backdrop:has(.aps-search-step),
.mc-backdrop:has(.aps-grams-step) {
  align-items: flex-start;
  padding-top: 3vh;
  padding-bottom: 3vh;
}

.mc-modal:has(.aps-search-step),
.mc-modal:has(.aps-grams-step) {
  max-width: 340px;
  max-height: calc(100vh - 6vh);
  /* 3vh сверху + 3vh снизу */
  display: flex;
  flex-direction: column;
}

.mc-modal:has(.aps-search-step) .mc-step-content,
.mc-modal:has(.aps-grams-step) .mc-step-content {
  padding: 0 12px 12px;
  min-height: 0;
  /* Критично для flex + overflow */
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.aps-search-step {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 0;
  flex: 1;
  min-height: 0;
  /* Важно для flex + overflow! */
  overflow: hidden;
  /* Скролл будет в .aps-products-scroll */
  position: relative;
  /* Для позиционирования счётчика */
}

/* === Фиксированная шапка: кнопка + поиск + категории === */
.aps-fixed-header {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-bottom: 10px;
  background: var(--card, #fff);
  border-bottom: 1px solid var(--border, #e5e7eb);
}

/* === Скроллируемый список продуктов === */
.aps-products-scroll {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-top: 10px;
}

/* Ряд кнопок действий (Добавить фото + Новый продукт) */
.aps-action-buttons {
  display: flex;
  gap: 8px;
}

.aps-action-buttons .aps-new-product-btn {
  flex: 1;
  min-width: 0;
}

/* Кнопка "Новый продукт" */
.aps-new-product-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: linear-gradient(135deg, #dbeafe 0%, #ede9fe 100%);
  border: 1.5px dashed #93c5fd;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 13px;
  font-weight: 600;
  color: #2563eb;
}

/* Кнопка "Добавить фото" — зелёная тема */
.aps-new-product-btn.aps-photo-btn {
  background: linear-gradient(135deg, #dcfce7 0%, #d1fae5 100%);
  border-color: #86efac;
  color: #16a34a;
}

.aps-new-product-btn.aps-photo-btn .aps-new-icon {
  background: #16a34a;
}

.aps-new-product-btn.aps-photo-btn:hover {
  background: linear-gradient(135deg, #bbf7d0 0%, #a7f3d0 100%);
  border-color: #4ade80;
}

.aps-new-product-btn:hover {
  background: linear-gradient(135deg, #bfdbfe 0%, #ddd6fe 100%);
  border-color: #60a5fa;
}

.aps-new-product-btn:active {
  transform: scale(0.98);
}

.aps-new-icon {
  width: 22px;
  height: 22px;
  background: #2563eb;
  color: var(--color-white);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 700;
}

.aps-new-hint {
  margin-left: auto;
  font-size: 12px;
  font-weight: 400;
  color: var(--color-gray-500);
}

[data-theme="dark"] .aps-new-product-btn {
  background: linear-gradient(135deg, #1e3a5f 0%, #312e81 100%);
  border-color: var(--color-blue-500);
  color: #93c5fd;
}

[data-theme="dark"] .aps-new-product-btn.aps-photo-btn {
  background: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
  border-color: #10b981;
  color: #6ee7b7;
}

[data-theme="dark"] .aps-new-product-btn.aps-photo-btn .aps-new-icon {
  background: #10b981;
}

[data-theme="dark"] .aps-new-icon {
  background: var(--color-blue-500);
}

[data-theme="dark"] .aps-new-hint {
  color: var(--color-gray-400);
}

/* Поле поиска */
.aps-search-container {
  position: relative;
  display: flex;
  align-items: center;
}

.aps-search-icon {
  position: absolute;
  left: 12px;
  font-size: 14px;
  pointer-events: none;
  opacity: 0.5;
  z-index: 1;
}

.aps-search-input {
  width: 100%;
  padding: 10px 36px 10px 12px;
  padding-left: 38px !important;
  font-size: 15px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--card);
  color: var(--text);
  transition: border-color 0.2s;
  box-sizing: border-box;
}

.aps-search-input:focus {
  outline: none;
  border-color: var(--acc);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.aps-search-clear {
  position: absolute;
  right: 12px;
  width: 24px;
  height: 24px;
  border: none;
  background: #e5e7eb;
  color: var(--color-gray-500);
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
}

[data-theme="dark"] .aps-search-clear {
  background: #4b5563;
  color: #d1d5db;
}

/* Секции */
.aps-section {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.aps-section-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding-left: 2px;
}

/* Список продуктов */
.aps-products-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Карточка продукта */
.aps-product-card {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.aps-product-card:hover {
  background: #f8fafc;
  border-color: var(--acc);
}

.aps-product-card:active {
  transform: scale(0.98);
  background: var(--color-slate-100);
}

[data-theme="dark"] .aps-product-card:hover {
  background: #1e293b;
}

[data-theme="dark"] .aps-product-card:active {
  background: #0f172a;
}

.aps-product-icon {
  font-size: 16px;
  min-width: 22px;
  text-align: center;
}

.aps-product-info {
  flex: 1;
  min-width: 0;
}

.aps-product-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
  /* Разрешаем перенос строки чтобы видеть полное название */
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.25;
}

/* Бейдж для продуктов из общей базы */
.aps-shared-badge {
  display: inline-block;
  font-size: 10px;
  background: #3b82f6;
  color: #fff;
  padding: 1px 4px;
  border-radius: 4px;
  margin-left: 4px;
  vertical-align: middle;
  line-height: 1;
}

/* Подсветка совпадений в поиске */
.aps-product-name mark,
.aps-product-name .search-highlight {
  background-color: rgba(255, 213, 0, 0.4);
  border-radius: 2px;
  padding: 0 2px;
  color: inherit;
}

/* "Возможно вы искали" */
.aps-did-you-mean {
  margin-top: 12px;
  padding: 12px;
  background-color: rgba(255, 213, 0, 0.08);
  border-radius: 8px;
  text-align: left;
}

.aps-did-you-mean button {
  transition: all 0.15s ease;
}

.aps-did-you-mean button:hover {
  background-color: rgba(255, 213, 0, 0.2) !important;
  border-color: rgba(255, 213, 0, 0.5) !important;
}

.aps-did-you-mean button:active {
  transform: scale(0.97);
}

.aps-product-meta {
  font-size: 10px;
  color: #9ca3af;
  display: flex;
  align-items: baseline;
  gap: 4px;
  margin-top: 1px;
}

.aps-meta-kcal {
  color: #6b7280;
}

.aps-meta-sep {
  color: #d1d5db;
}

.aps-meta-macros {
  color: #9ca3af;
  font-size: 10px;
}

[data-theme="dark"] .aps-meta-kcal {
  color: #9ca3af;
}

[data-theme="dark"] .aps-meta-sep {
  color: #4b5563;
}

[data-theme="dark"] .aps-meta-macros {
  color: #6b7280;
}

/* Контейнер кнопок действий */
.aps-product-actions {
  display: flex;
  align-items: center;
  gap: 2px;
  flex-shrink: 0;
}

/* Кнопка удаления — маленькая */
.aps-delete-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--color-gray-400);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
  border-radius: 6px;
  opacity: 0.4;
}

.aps-delete-btn:hover {
  background: #fee2e2;
  color: var(--color-red-500);
  opacity: 1;
}

.aps-delete-btn:active {
  transform: scale(0.9);
}

.aps-fav-btn {
  width: 36px;
  height: 36px;
  border: none;
  background: transparent;
  color: #d1d5db;
  font-size: 20px;
  cursor: pointer;
  transition: all 0.15s;
  border-radius: 8px;
}

.aps-fav-btn:hover {
  background: #fef3c7;
  color: #f59e0b;
}

.aps-fav-btn.active {
  color: #f59e0b;
}

/* Пустое состояние */
.aps-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 24px;
  color: var(--muted);
}

.aps-empty span:first-child {
  font-size: 32px;
}

.aps-add-new-btn {
  margin-top: 8px;
  padding: 10px 20px;
  background: var(--acc);
  color: var(--color-white);
  border: none;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.aps-add-new-btn:hover {
  opacity: 0.9;
}

/* === 09. GRAMS STEP === */

.aps-grams-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 0;
  height: 100%;
  max-height: none;
  overflow-y: auto;
}

.aps-product-header {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  background: var(--stats-bg);
  border: 1px solid var(--stats-border);
  border-radius: 10px;
}

.aps-product-icon-lg {
  font-size: 26px;
}

.aps-product-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
}

/* === HERO Input граммов (главный элемент) === */
.aps-grams-hero {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px 12px 8px;
  gap: 16px;
}

.aps-grams-hero-btn {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: 500;
  color: #6b7280;
  background: var(--card);
  border: 1px solid #d1d5db;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.15s ease;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}

.aps-grams-hero-btn:hover {
  background: var(--color-slate-100);
  border-color: #9ca3af;
}

.aps-grams-hero-btn:active {
  transform: scale(0.95);
  background: var(--color-slate-200);
}

.aps-grams-hero-field {
  display: flex;
  align-items: baseline;
  gap: 4px;
}

.aps-grams-hero-input {
  width: 140px;
  height: 70px;
  font-size: 56px !important;
  font-weight: 700;
  text-align: center;
  border: 1px solid #6b7280;
  border-radius: 12px;
  background: transparent;
  color: #374151;
  -moz-appearance: textfield;
  padding: 0;
}

.aps-grams-hero-input::-webkit-outer-spin-button,
.aps-grams-hero-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.aps-grams-hero-input:focus {
  outline: none;
  border-color: var(--acc);
}

.aps-grams-hero-unit {
  font-size: 40px;
  font-weight: 600;
  color: #374151;
  margin-left: 2px;
}

/* Подпись под hero-input */
.aps-grams-hero-label {
  text-align: center;
  font-size: 16px;
  font-weight: 500;
  color: #374151;
  margin: -14px 0 0 0;
  padding: 0;
}

/* Калории как вторичная информация */
.aps-kcal-secondary {
  text-align: center;
  padding: 4px 16px 8px;
}

.aps-kcal-secondary-value {
  font-size: 32px;
  font-weight: 700;
  color: #1f2937;
}

/* Дисплей калорий — компактный (legacy) */
.aps-kcal-display {
  display: flex;
  align-items: baseline;
  justify-content: center;
  padding: 8px 0;
}

.aps-kcal-value {
  font-size: 42px;
  font-weight: 700;
  color: var(--text);
  line-height: 1;
}

.aps-kcal-unit {
  font-size: 16px;
  font-weight: 500;
  color: var(--muted);
  margin-left: 3px;
}

/* БЖУ — компактный */
.aps-macros {
  display: flex;
  justify-content: center;
  gap: 16px;
}

.aps-macro {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.aps-macro-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.aps-macro-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

/* Поле ввода граммов — компактный */
.aps-grams-input-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-top: 4px;
}

.aps-grams-btn {
  width: 40px;
  height: 40px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  font-size: 16px;
  font-weight: 600;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
}

.aps-grams-btn:hover {
  background: var(--color-slate-100);
  border-color: var(--acc);
}

.aps-grams-btn:active {
  transform: scale(0.95);
}

.aps-grams-input {
  width: 80px;
  padding: 8px 6px;
  font-size: 22px;
  font-weight: 700;
  text-align: center;
  border: 2px solid var(--border);
  border-radius: 10px;
  background: var(--card);
  color: var(--text);
}

.aps-grams-input:focus {
  outline: none;
  border-color: var(--acc);
}

.aps-grams-unit {
  font-size: 15px;
  color: var(--muted);
}

/* Слайдер */
.aps-grams-slider {
  width: 100%;
  height: 8px;
  -webkit-appearance: none;
  appearance: none;
  background: linear-gradient(to right, #22c55e, #eab308, var(--color-red-500));
  border-radius: 4px;
  outline: none;
  margin: 8px 0;
}

.aps-grams-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 24px;
  height: 24px;
  background: var(--color-white);
  border: 2px solid var(--acc);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.aps-grams-slider::-moz-range-thumb {
  width: 24px;
  height: 24px;
  background: var(--color-white);
  border: 2px solid var(--acc);
  border-radius: 50%;
  cursor: pointer;
}

/* Быстрые кнопки */
.aps-quick-grams {
  display: flex;
  justify-content: center;
  gap: 4px;
  flex-wrap: nowrap;
  overflow: hidden;
}

.aps-quick-btn {
  padding: 6px 10px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
  flex-shrink: 1;
  min-width: 0;
}

.aps-quick-btn:hover {
  border-color: var(--acc);
}

.aps-quick-btn.active {
  background: var(--acc);
  color: var(--color-white);
  border-color: var(--acc);
}

/* Порции продукта */
.aps-portions {
  width: 100%;
  margin-top: 6px;
}

.aps-portions-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  margin-bottom: 4px;
  text-align: center;
}

.aps-portions-list {
  display: flex;
  flex-wrap: nowrap;
  justify-content: center;
  gap: 3px;
  overflow: hidden;
}

.aps-portion-btn {
  padding: 4px 6px;
  font-size: 11px;
  border: 1px solid #d1fae5;
  background: #ecfdf5;
  color: #059669;
  border-radius: 5px;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
  flex-shrink: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

.aps-portion-btn:hover {
  border-color: var(--color-emerald-500);
}

.aps-portion-btn.active {
  background: var(--color-emerald-500);
  color: var(--color-white);
  border-color: var(--color-emerald-500);
}

[data-theme="dark"] .aps-portion-btn {
  background: #064e3b;
  border-color: #065f46;
  color: #34d399;
}

[data-theme="dark"] .aps-portion-btn.active {
  background: var(--color-emerald-500);
  color: var(--color-white);
}

.aps-no-product {
  text-align: center;
  padding: 40px;
  color: var(--muted);
  font-size: 16px;
}

/* === 10. APS OPEN BUTTON (Кнопка вызова модалки) === */

.aps-open-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
  border: 1px solid #93c5fd;
  border-radius: 10px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: #2563eb;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.aps-open-btn:hover {
  background: linear-gradient(135deg, #bfdbfe 0%, #c7d2fe 100%);
  border-color: #60a5fa;
  transform: translateY(-1px);
}

.aps-open-btn:active {
  transform: scale(0.97);
}

/* Зелёная кнопка для актуального приёма пищи — стиль как у кнопки "Добавить" в шаге граммов */
.aps-open-btn--current {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  border: 1px solid #15803d;
  color: #fff;
  box-shadow: 0 4px 14px rgba(34, 197, 94, 0.4);
}

.aps-open-btn--current:hover {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
  border-color: #166534;
  box-shadow: 0 6px 18px rgba(34, 197, 94, 0.5);
}

[data-theme="dark"] .aps-open-btn--current {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  border: 1px solid #4ade80;
  color: #fff;
  box-shadow: 0 4px 14px rgba(34, 197, 94, 0.3);
}

[data-theme="dark"] .aps-open-btn--current:hover {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
  border-color: #86efac;
}

.aps-open-icon {
  font-size: 16px;
}

.aps-open-text {
  font-weight: 600;
}

[data-theme="dark"] .aps-open-btn {
  background: linear-gradient(135deg, #1e3a5f 0%, #312e81 100%);
  border-color: var(--color-blue-500);
  color: #93c5fd;
}

[data-theme="dark"] .aps-open-btn:hover {
  background: linear-gradient(135deg, #1e40af 0%, #4338ca 100%);
}

/* На мобильных — более компактная */
@media (max-width: 768px) {
  .aps-open-btn {
    padding: 12px 20px;
    font-size: 15px;
    border-radius: 12px;
    width: 100%;
    justify-content: center;
  }

  .aps-open-icon {
    font-size: 18px;
  }
}

/* === 11. Категории-чипы === */
.aps-categories {
  display: flex;
  gap: 5px;
  padding: 4px 0;
  overflow-x: auto;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
  flex-shrink: 0;
  /* Не сжимать при flex layout */
  min-width: 0;
  /* Разрешить overflow для flex-child */
}

.aps-categories::-webkit-scrollbar {
  display: none;
}

.aps-category-chip {
  flex-shrink: 0;
  padding: 4px 10px;
  font-size: 12px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  color: #374151;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.aps-category-chip:hover {
  background: #f3f4f6;
  border-color: #d1d5db;
}

.aps-category-chip.active {
  background: var(--acc);
  color: var(--color-white);
  border-color: var(--acc);
}

[data-theme="dark"] .aps-category-chip {
  background: #374151;
  border-color: #4b5563;
  color: #d1d5db;
}

[data-theme="dark"] .aps-category-chip.active {
  background: var(--acc);
  border-color: var(--acc);
  color: var(--color-white);
}

/* === 12. Умные рекомендации === */
.aps-smart-rec {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  border-radius: 10px;
  padding: 8px !important;
  margin-bottom: 8px;
}

[data-theme="dark"] .aps-smart-rec {
  background: linear-gradient(135deg, #78350f 0%, #92400e 100%);
}

.aps-rec-hint {
  font-size: 12px;
  color: #92400e;
  margin-left: 8px;
  font-weight: 400;
}

[data-theme="dark"] .aps-rec-hint {
  color: #fcd34d;
}

.aps-products-horizontal {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 4px;
  scrollbar-width: none;
}

.aps-products-horizontal::-webkit-scrollbar {
  display: none;
}

.aps-products-horizontal .aps-product-card {
  flex-shrink: 0;
  min-width: 140px;
  max-width: 160px;
}

/* === 13. Подсказка про последние граммы === */
.aps-last-grams-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: #dbeafe;
  border-radius: 8px;
  font-size: 13px;
  color: #1e40af;
  margin-bottom: 8px;
}

[data-theme="dark"] .aps-last-grams-hint {
  background: #1e3a5f;
  color: #93c5fd;
}

.aps-last-grams-btn {
  padding: 4px 10px;
  background: #2563eb;
  color: var(--color-white);
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}

.aps-last-grams-btn:hover {
  background: #1d4ed8;
}

.aps-last-grams-btn:active {
  transform: scale(0.95);
}

/* === 14. Slide-анимация между шагами === */
/* Анимации слайда между шагами — временно выключены */
/*
.mc-step-content {
  transition: transform 0.25s ease, opacity 0.2s ease;
}

.mc-slide-left {
  animation: slideFromRight 0.25s ease forwards;
}

.mc-slide-right {
  animation: slideFromLeft 0.25s ease forwards;
}
*/

@keyframes slideFromRight {
  from {
    transform: translateX(30px);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideFromLeft {
  from {
    transform: translateX(-30px);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* === 15. Переключатель граммы/ккал === */
.aps-input-mode-toggle {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

.aps-mode-btn {
  flex: 1;
  padding: 6px 10px;
  font-size: 12px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  color: var(--color-gray-500);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.aps-mode-btn.active {
  background: var(--acc);
  color: var(--color-white);
  border-color: var(--acc);
}

/* === 16. Ввод ккал === */
.aps-kcal-input-row {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  background: #fef3c7;
  border-radius: 10px;
  margin-bottom: 8px;
}

.aps-kcal-label {
  font-size: 13px;
  color: #92400e;
}

.aps-kcal-input {
  width: 70px;
  padding: 6px 10px;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  border: 2px solid #f59e0b;
  border-radius: 6px;
  background: var(--color-white);
}

.aps-kcal-input:focus {
  outline: none;
  border-color: #d97706;
}

.aps-calc-result {
  font-size: 16px;
  font-weight: 600;
  color: #059669;
}

[data-theme="dark"] .aps-kcal-input-row {
  background: #78350f;
}

[data-theme="dark"] .aps-kcal-label {
  color: #fcd34d;
}

[data-theme="dark"] .aps-kcal-input {
  background: #1f2937;
  border-color: #f59e0b;
  color: var(--color-white);
}

/* === 17. Итог дня === */
.aps-day-total {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 8px;
  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
  border-radius: 10px;
  font-size: 13px;
  margin-top: 10px;
}

.aps-day-plus {
  font-weight: 700;
  color: #059669;
}

.aps-day-arrow {
  color: var(--color-gray-500);
}

.aps-day-sum {
  font-weight: 600;
  color: #1e40af;
}

.aps-day-pct {
  color: var(--color-gray-500);
}

[data-theme="dark"] .aps-day-total {
  background: linear-gradient(135deg, #1e3a5f 0%, #312e81 100%);
}

/* === 18. CREATE PRODUCT STEP (Создание нового продукта) === */

.mc-modal:has(.aps-create-step) {
  max-width: 360px;
}

.mc-modal:has(.aps-create-step) .mc-step-content {
  padding: 0 12px 12px;
  min-height: auto;
}

.aps-create-step {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 0;
  min-height: 400px;
}

.aps-create-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
  border-radius: 12px;
}

.aps-create-icon {
  font-size: 28px;
}

.aps-create-title {
  font-size: 16px;
  font-weight: 700;
  color: #1e40af;
}

[data-theme="dark"] .aps-create-header {
  background: linear-gradient(135deg, #1e3a5f 0%, #312e81 100%);
}

[data-theme="dark"] .aps-create-title {
  color: #93c5fd;
}

.aps-create-hint {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.4;
}

.aps-create-format {
  font-size: 11px;
  color: var(--color-gray-500);
  font-family: monospace;
  background: #f3f4f6;
  padding: 4px 8px;
  border-radius: 4px;
  display: inline-block;
  margin-top: 4px;
}

.aps-create-prompt-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.aps-create-prompt-btn {
  border: 1px solid var(--border, #e5e7eb);
  background: var(--card, #fff);
  color: var(--text, #111827);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
}

.aps-create-prompt-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  border-color: var(--acc, #3b82f6);
}

.aps-create-prompt-btn:active {
  transform: scale(0.98);
}

.aps-create-prompt-note {
  font-size: 11px;
  color: var(--color-gray-500);
}

[data-theme="dark"] .aps-create-format {
  background: #374151;
  color: var(--color-gray-400);
}

[data-theme="dark"] .aps-create-prompt-btn {
  background: #1f2937;
  border-color: #374151;
  color: var(--color-gray-200);
}

[data-theme="dark"] .aps-create-prompt-btn:hover {
  border-color: var(--color-blue-400, #60a5fa);
}

[data-theme="dark"] .aps-create-prompt-note {
  color: var(--color-gray-400);
}

.aps-create-textarea {
  width: 100%;
  min-height: 80px;
  padding: 12px;
  font-size: 14px;
  font-family: inherit;
  border: 2px solid var(--border);
  border-radius: 10px;
  background: var(--card);
  color: var(--text);
  resize: vertical;
  transition: border-color 0.2s;
  box-sizing: border-box;
}

.aps-create-textarea:focus {
  outline: none;
  border-color: var(--acc);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.aps-create-textarea::placeholder {
  color: var(--color-gray-400);
  font-size: 12px;
}

.aps-create-example-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.aps-create-example-btn {
  border: 1px solid var(--border, #e5e7eb);
  background: var(--card, #fff);
  color: var(--text, #111827);
  border-radius: 10px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
}

.aps-create-example-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  border-color: var(--acc, #3b82f6);
}

.aps-create-example-btn:active {
  transform: scale(0.98);
}

.aps-create-example-note {
  font-size: 11px;
  color: var(--color-gray-500);
}

.aps-create-error {
  padding: 10px 12px;
  background: #fee2e2;
  border: 1px solid #fecaca;
  border-radius: 8px;
  color: #dc2626;
  font-size: 13px;
}

[data-theme="dark"] .aps-create-error {
  background: #7f1d1d;
  border-color: #991b1b;
  color: #fca5a5;
}

[data-theme="dark"] .aps-create-example-btn {
  background: #1f2937;
  border-color: #374151;
  color: var(--color-gray-200);
}

[data-theme="dark"] .aps-create-example-btn:hover {
  border-color: var(--color-blue-400, #60a5fa);
}

[data-theme="dark"] .aps-create-example-note {
  color: var(--color-gray-400);
}

.aps-create-preview {
  padding: 12px;
  background: #ecfdf5;
  border: 1px solid #a7f3d0;
  border-radius: 10px;
}

[data-theme="dark"] .aps-create-preview {
  background: #064e3b;
  border-color: #065f46;
}

.aps-preview-title {
  font-size: 12px;
  font-weight: 600;
  color: #059669;
  margin-bottom: 6px;
}

[data-theme="dark"] .aps-preview-title {
  color: #34d399;
}

.aps-preview-name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 4px;
}

.aps-preview-macros {
  display: flex;
  gap: 10px;
  font-size: 13px;
  color: var(--muted);
  margin-bottom: 4px;
}

.aps-preview-kcal {
  font-weight: 700;
  color: #059669;
}

[data-theme="dark"] .aps-preview-kcal {
  color: #34d399;
}

.aps-preview-extra {
  font-size: 12px;
  color: var(--color-gray-500);
}

[data-theme="dark"] .aps-preview-extra {
  color: var(--color-gray-400);
}

/* Детальная таблица параметров */
.aps-preview-details {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px 12px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid #d1fae5;
}

[data-theme="dark"] .aps-preview-details {
  border-top-color: #065f46;
}

.aps-preview-row {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
}

.aps-preview-label {
  color: var(--color-gray-500);
}

[data-theme="dark"] .aps-preview-label {
  color: var(--color-gray-400);
}

.aps-preview-value {
  font-weight: 600;
  color: var(--text);
}

.aps-create-btn {
  width: 100%;
  padding: 14px 20px;
  font-size: 15px;
  font-weight: 600;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  background: #e5e7eb;
  color: var(--color-gray-400);
}

.aps-create-btn.active {
  background: linear-gradient(135deg, #22c55e 0%, var(--color-emerald-500) 100%);
  color: var(--color-white);
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
}

.aps-create-btn.active:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
}

.aps-create-btn.active:active {
  transform: scale(0.98);
}

.aps-create-btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

[data-theme="dark"] .aps-create-btn {
  background: #374151;
  color: var(--color-gray-500);
}

[data-theme="dark"] .aps-create-btn.active {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
}

.aps-create-tip {
  font-size: 12px;
  color: var(--color-gray-500);
  text-align: center;
  padding: 8px;
  background: #f9fafb;
  border-radius: 8px;
}

[data-theme="dark"] .aps-create-tip {
  background: #1f2937;
  color: var(--color-gray-400);
}

/* === 18b. HARM SELECT STEP (Выбор вредности продукта) === */

.harm-select-step {
  display: flex;
  flex-direction: column;
  padding: 16px 12px;
  min-height: 320px;
}

.harm-select-step .harm-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  min-height: 100px;
  border: none;
  outline: none;
  font-family: inherit;
  transition: transform 0.18s ease, box-shadow 0.18s ease;
}

.harm-select-step .harm-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.harm-select-step .harm-card:active {
  transform: scale(0.98);
}

.harm-select-step .harm-card.selected {
  transform: scale(1.03);
  box-shadow:
    0 6px 18px rgba(0, 0, 0, 0.18),
    0 0 0 2px rgba(59, 130, 246, 0.12),
    0 0 18px rgba(59, 130, 246, 0.15);
}

[data-theme="dark"] .harm-select-step .harm-card {
  background: #1f2937;
}

[data-theme="dark"] .harm-select-step .harm-card.selected {
  background: rgba(255, 255, 255, 0.05);
  box-shadow:
    0 6px 20px rgba(0, 0, 0, 0.4),
    0 0 0 2px rgba(96, 165, 250, 0.2),
    0 0 20px rgba(96, 165, 250, 0.2);
}

/* Подсказка о поисковом запросе */
.aps-create-search-hint {
  padding: 8px 12px;
  background: #dbeafe;
  border: 1px solid #93c5fd;
  border-radius: 8px;
  font-size: 13px;
  color: #1e40af;
}

.aps-create-search-hint strong {
  color: #1d4ed8;
}

[data-theme="dark"] .aps-create-search-hint {
  background: #1e3a5f;
  border-color: var(--color-blue-500);
  color: #93c5fd;
}

[data-theme="dark"] .aps-create-search-hint strong {
  color: #60a5fa;
}

[data-theme="dark"] .aps-day-sum {
  color: #93c5fd;
}

/* Кнопка закрытия — используется базовый стиль из .mc-close-btn выше */

/* MODULE 07 — Steps & APS Flow
 * Scope: step modal UX, meal steps, APS/create product, grams inputs.
 */

/* Meal Quality Score (mini-chart) */
.meal-quality-badges-row {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: wrap;
}

/* Бейдж качества в meal-meta-row (кликабельный) */
button.meal-quality-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 12px;
  border: none;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

button.meal-quality-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

button.meal-quality-badge:active {
  transform: scale(0.95);
}

/* Маленькие бейджи проблем */
.meal-quality-badge {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 4px;
  background: #fee2e2;
  color: #991b1b;
  font-weight: 600;
}

/* Counter animation для score */
.meal-quality-score {
  font-size: 11px;
  font-weight: 600;
  min-width: 44px;
  text-align: right;
  animation: scorePopIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes scorePopIn {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }

  50% {
    transform: scale(1.15);
  }

  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Пульсация для худшей категории в попапе качества */
@keyframes pulse-worst {

  0%,
  100% {
    box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
  }

  50% {
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.4);
  }
}

/* Micro-interaction при клике */
.meal-bar-container {
  transition: transform 0.1s ease, box-shadow 0.2s ease;
  cursor: pointer;
}

.meal-bar-container:hover {
  transform: scale(1.02);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.meal-bar-container:active {
  transform: scale(0.98);
}

/* Лучший приём дня — золотая рамка + пульсация */
.meal-bar-best {
  animation: bestMealGlow 2s ease-in-out infinite alternate, bestMealPulse 1.5s ease-in-out infinite;
  position: relative;
}

.meal-bar-best::before {
  content: '⭐';
  position: absolute;
  left: -18px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 12px;
  animation: starBounce 1s ease-in-out infinite;
}

@keyframes starBounce {

  0%,
  100% {
    transform: translateY(-50%) scale(1);
  }

  50% {
    transform: translateY(-50%) scale(1.2);
  }
}

@keyframes bestMealPulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.85;
  }
}

/* Подсказка нажми для деталей */
.meal-chart-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  font-size: 11px;
  color: var(--text-tertiary, #9ca3af);
  padding: 4px 0;
  animation: hintFade 3s ease-in-out infinite;
}

.meal-chart-hint span {
  animation: hintBounce 1.5s ease-in-out infinite;
}

@keyframes hintFade {

  0%,
  100% {
    opacity: 0.6;
  }

  50% {
    opacity: 1;
  }
}

@keyframes hintBounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-2px);
  }
}

/* Попап качества приёма — анимация появления */
.meal-quality-popup {
  animation: mealPopupSlideIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  transform-origin: top center;
  max-height: calc(100vh - 32px);
  overflow-y: auto;
}

/* Стили для строк расчёта в попапе */
.meal-quality-popup .quality-calc-row {
  transition: background 0.2s ease;
}

.meal-quality-popup .quality-calc-row:hover {
  filter: brightness(0.97);
}

.meal-quality-popup .quality-calc-row.bonus {
  border-left: 3px solid #eab308;
}

/* Скроллбар в попапе */
.meal-quality-popup::-webkit-scrollbar {
  width: 4px;
}

.meal-quality-popup::-webkit-scrollbar-track {
  background: transparent;
}

.meal-quality-popup::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 2px;
}

@keyframes mealPopupSlideIn {
  0% {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Звёздочки-искры на идеальном приёме */
.meal-bar-excellent::after {
  content: '✨';
  position: absolute;
  right: -12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 10px;
  animation: sparkleRotate 2s linear infinite;
}

@keyframes sparkleRotate {
  0% {
    transform: translateY(-50%) rotate(0deg);
  }

  50% {
    transform: translateY(-50%) rotate(10deg);
  }

  100% {
    transform: translateY(-50%) rotate(0deg);
  }
}

@keyframes bestMealGlow {
  0% {
    box-shadow: 0 0 0 2px #fbbf24, 0 2px 8px rgba(251, 191, 36, 0.3);
  }

  100% {
    box-shadow: 0 0 0 2px #f59e0b, 0 2px 12px rgba(251, 191, 36, 0.5);
  }
}

/* Анимация нового приёма */
.meal-bar-row {
  animation: none;
}

.meal-bar-row.meal-bar-new {
  animation: mealSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes mealSlideIn {
  0% {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Мини-спарклайн за день (линейный) */
.meals-day-sparkline {
  border-bottom: 1px solid var(--border, #e5e7eb);
  background: var(--surface-secondary, #f9fafb);
  border-radius: 8px;
  margin: 0 -4px;
  padding: 8px 4px 16px 4px !important;
}

.meals-day-sparkline svg {
  overflow: visible;
}

.meals-day-sparkline circle {
  transition: r 0.15s ease, filter 0.15s ease;
  cursor: pointer;
}

.meals-day-sparkline circle:hover {
  r: 6;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.meals-day-sparkline path {
  transition: stroke-width 0.15s ease;
}

[data-theme="dark"] .meals-day-sparkline {
  background: var(--surface-secondary, #1f2937);
}

/* Прогресс-бар в модалке */
.meal-modal-progress {
  animation: progressSlide 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes progressSlide {
  0% {
    width: 0 !important;
  }
}

.meal-quality-streak-banner {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: linear-gradient(90deg, #fef3c7 0%, #fde68a 50%, #fef3c7 100%);
  background-size: 200% 100%;
  border-radius: 10px;
  animation: streakSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), streakShimmer 3s ease-in-out infinite;
  box-shadow: 0 2px 12px rgba(251, 191, 36, 0.3);
  font-size: 13px;
}

.meal-quality-streak-banner .streak-fire {
  font-size: 18px;
  animation: fireFlicker 0.5s ease-in-out infinite alternate;
}

@keyframes fireFlicker {
  0% {
    transform: scale(1) rotate(-5deg);
    filter: brightness(1);
  }

  100% {
    transform: scale(1.15) rotate(5deg);
    filter: brightness(1.2);
  }
}

@keyframes streakSlideIn {
  0% {
    opacity: 0;
    transform: translateY(-15px) scale(0.9);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes streakShimmer {
  0% {
    background-position: 100% 0;
  }

  50% {
    background-position: 0% 0;
  }

  100% {
    background-position: 100% 0;
  }
}

/* Ачивка первого идеального приёма */
.first-perfect-meal-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
  color: white;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  animation: achievementPop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), achievementGlow 2s ease-in-out infinite;
  box-shadow: 0 2px 12px rgba(168, 85, 247, 0.4);
}

.first-perfect-meal-badge .trophy {
  font-size: 16px;
  animation: trophyBounce 1s ease-in-out infinite;
}

@keyframes achievementPop {
  0% {
    opacity: 0;
    transform: scale(0.5) rotate(-10deg);
  }

  60% {
    transform: scale(1.1) rotate(5deg);
  }

  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes achievementGlow {

  0%,
  100% {
    box-shadow: 0 2px 12px rgba(168, 85, 247, 0.4);
  }

  50% {
    box-shadow: 0 4px 20px rgba(168, 85, 247, 0.6);
  }
}

@keyframes trophyBounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-3px);
  }
}

/* Dark theme для ачивки */
[data-theme="dark"] .first-perfect-meal-badge {
  background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
  box-shadow: 0 2px 12px rgba(124, 58, 237, 0.5);
}

[data-theme="dark"] .meal-quality-streak-banner {
  background: linear-gradient(90deg, #78350f 0%, #92400e 100%);
  color: #fef3c7;
}

[data-theme="dark"] .meal-quality-badge {
  background: #7f1d1d;
  color: #fecaca;
}

[data-theme="dark"] .meal-avg-score-badge {
  opacity: 0.9;
}

:root {
  --meal-bar-track: rgba(148, 163, 184, 0.24);
}

[data-theme="dark"] {
  --meal-bar-track: rgba(226, 232, 240, 0.16);
}

/* ============================================
 * 19. TRAINING STEP — Модалка тренировки
 * ============================================ */

.training-step {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px 0;
}

.ts-section {
  background: var(--color-slate-50, #f8fafc);
  border-radius: 12px;
  padding: 10px 12px;
}

/* === Тип тренировки === */
.ts-type-section {
  padding: 8px;
}

.ts-type-grid {
  display: flex;
  gap: 8px;
  justify-content: center;
}

.ts-type-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 8px;
  background: #fff;
  border: 2px solid var(--color-slate-200, #e2e8f0);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.ts-type-btn:active {
  transform: scale(0.97);
}

.ts-type-btn.active {
  border-color: var(--acc, #3b82f6);
  background: rgba(59, 130, 246, 0.08);
}

.ts-type-icon {
  font-size: 24px;
}

.ts-type-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-slate-600, #475569);
}

.ts-type-btn.active .ts-type-label {
  color: var(--acc, #3b82f6);
}

/* === Время тренировки (колесо) === */
.ts-time-wheel-section {
  padding: 12px 16px;
}

.ts-time-wheel-label {
  font-size: 14px;
  color: var(--color-slate-600);
  text-align: center;
  margin-bottom: 8px;
}

.ts-time-wheels {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.ts-time-wheels .mc-wheel-picker {
  flex: 0 0 80px;
}

.ts-time-wheel-sep {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-slate-400);
  line-height: 1;
  padding: 0 4px;
}

/* Legacy время (+-) — оставим на всякий случай */
.ts-time-section {
  padding: 8px 12px;
}

.ts-time-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.ts-time-label {
  font-size: 14px;
  color: var(--color-slate-600);
}

.ts-time-picker {
  display: flex;
  align-items: center;
  gap: 4px;
}

.ts-time-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 600;
  background: var(--color-slate-100);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  color: var(--color-slate-600);
  transition: all 0.15s ease;
}

.ts-time-btn:active {
  transform: scale(0.95);
  background: var(--color-slate-200);
}

.ts-time-value {
  font-size: 18px;
  font-weight: 600;
  min-width: 28px;
  text-align: center;
  color: var(--color-slate-800);
}

.ts-time-sep {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-slate-400);
}

/* === Зоны пульса === */
.ts-zones-section {
  padding: 10px 12px;
}

.ts-zones-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  font-size: 14px;
  font-weight: 500;
}

.ts-zones-total {
  font-size: 12px;
  color: var(--color-slate-500);
  background: var(--color-slate-100);
  padding: 3px 8px;
  border-radius: 6px;
}

/* Новая сетка с колёсами (2x2) */
.ts-zones-wheels-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.ts-zone-wheel-item {
  background: #fff;
  border-radius: 12px;
  padding: 8px;
  border: 1px solid var(--color-slate-200);
}

.ts-zone-wheel-header {
  text-align: center;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: 2px solid var(--zone-color, #ccc);
}

.ts-zone-wheel-name {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-slate-700);
}

.ts-zone-wheel-range {
  font-size: 10px;
  color: var(--color-slate-400);
}

.ts-zone-wheel-picker {
  display: flex;
  justify-content: center;
}

.ts-zone-wheel-picker .mc-wheel-picker {
  flex: 0 0 auto;
  min-width: 70px;
}

.ts-zone-wheel-picker .mc-wheel-label {
  display: none;
}

.ts-zone-wheel-picker .mc-wheel-value--current {
  font-size: 20px;
}

/* Legacy сетка (строки) */
.ts-zones-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.ts-zone-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px 6px 10px;
  background: #fff;
  border-radius: 8px;
  border-left: 3px solid;
}

.ts-zone-info {
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.ts-zone-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-slate-700);
}

.ts-zone-range {
  font-size: 10px;
  color: var(--color-slate-400);
}

.ts-zone-input {
  display: flex;
  align-items: center;
  gap: 4px;
}

.ts-zone-btn {
  width: 26px;
  height: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  background: var(--color-slate-100);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  color: var(--color-slate-600);
  transition: all 0.15s ease;
}

.ts-zone-btn:active {
  transform: scale(0.92);
  background: var(--color-slate-200);
}

.ts-zone-value {
  width: 36px;
  height: 28px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  border: 1px solid var(--color-slate-200);
  border-radius: 6px;
  background: #fff;
  color: var(--color-slate-800);
}

.ts-zone-value:focus {
  outline: none;
  border-color: var(--acc);
}

.ts-zone-unit {
  font-size: 11px;
  color: var(--color-slate-400);
  min-width: 24px;
}

/* Быстрые пресеты длительности */
.ts-quick-durations {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-top: 10px;
}

.ts-quick-btn {
  padding: 5px 12px;
  font-size: 12px;
  font-weight: 500;
  background: #fff;
  border: 1px solid var(--color-slate-200);
  border-radius: 16px;
  cursor: pointer;
  color: var(--color-slate-600);
  transition: all 0.15s ease;
}

.ts-quick-btn:active {
  transform: scale(0.97);
}

.ts-quick-btn.active {
  background: var(--acc);
  border-color: var(--acc);
  color: #fff;
}

/* === Оценки после тренировки === */
.ts-ratings-section {
  padding: 10px 12px;
}

.ts-ratings-title {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 10px;
}

.ts-rating-row {
  margin-bottom: 12px;
}

.ts-rating-row:last-child {
  margin-bottom: 0;
}

.ts-rating-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.ts-rating-emoji {
  font-size: 18px;
}

.ts-rating-label {
  flex: 1;
  font-size: 13px;
  color: var(--color-slate-600);
}

.ts-rating-value {
  font-size: 13px;
  font-weight: 600;
}

/* Слайдеры */
.ts-slider {
  width: 100%;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  border-radius: 3px;
  outline: none;
  background: linear-gradient(to right, #ef4444, #eab308, #22c55e);
}

.ts-slider-negative {
  background: linear-gradient(to right, #22c55e, #eab308, #ef4444);
}

.ts-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: #fff;
  border: 2px solid var(--acc, #3b82f6);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.ts-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: #fff;
  border: 2px solid var(--acc, #3b82f6);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* === Комментарий === */
.ts-comment-section {
  padding: 8px 12px;
}

.ts-comment-input {
  width: 100%;
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid var(--color-slate-200);
  border-radius: 10px;
  background: #fff;
  color: var(--color-slate-800);
}

.ts-comment-input::placeholder {
  color: var(--color-slate-400);
}

.ts-comment-input:focus {
  outline: none;
  border-color: var(--acc);
}

/* === Dark mode === */
[data-theme="dark"] .ts-section {
  background: var(--color-slate-800);
}

[data-theme="dark"] .ts-type-btn {
  background: var(--color-slate-700);
  border-color: var(--color-slate-600);
}

[data-theme="dark"] .ts-type-btn.active {
  background: rgba(59, 130, 246, 0.2);
  border-color: var(--acc);
}

[data-theme="dark"] .ts-type-label,
[data-theme="dark"] .ts-time-label,
[data-theme="dark"] .ts-zone-name,
[data-theme="dark"] .ts-rating-label {
  color: var(--color-slate-300);
}

[data-theme="dark"] .ts-time-value,
[data-theme="dark"] .ts-zone-value {
  color: var(--color-slate-100);
  background: var(--color-slate-700);
  border-color: var(--color-slate-600);
}

[data-theme="dark"] .ts-time-btn,
[data-theme="dark"] .ts-zone-btn {
  background: var(--color-slate-700);
  color: var(--color-slate-300);
}

[data-theme="dark"] .ts-zone-row {
  background: var(--color-slate-700);
}

[data-theme="dark"] .ts-quick-btn {
  background: var(--color-slate-700);
  border-color: var(--color-slate-600);
  color: var(--color-slate-300);
}

[data-theme="dark"] .ts-zones-total {
  background: var(--color-slate-700);
  color: var(--color-slate-400);
}

[data-theme="dark"] .ts-comment-input {
  background: var(--color-slate-700);
  border-color: var(--color-slate-600);
  color: var(--color-slate-100);
}


/* ==============================
   09. MEASUREMENTS STEP
   Замеры тела: талия, бёдра, бедро, бицепс
   ============================== */

.mc-measurements-step {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 0;
}

/* Информационный блок сверху */
.mc-measurements-info {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  background: linear-gradient(135deg, #dbeafe 0%, #ede9fe 100%);
  border-radius: 12px;
  font-size: 13px;
  line-height: 1.4;
  color: #1e40af;
}

.mc-measurements-info-icon {
  font-size: 24px;
  flex-shrink: 0;
}

/* Сетка полей замеров */
.mc-measurements-fields {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* Одно поле замера */
.mc-measurement-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px;
  background: var(--card, #fff);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 12px;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.mc-measurement-field:focus-within {
  border-color: var(--acc, #3b82f6);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Шапка поля: эмодзи + название + предыдущее значение */
.mc-measurement-header {
  display: flex;
  align-items: center;
  gap: 6px;
}

.mc-measurement-emoji {
  font-size: 16px;
}

.mc-measurement-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text, #1f2937);
}

.mc-measurement-prev {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted, #6b7280);
  white-space: nowrap;
}

/* Ряд ввода: инпут + единица измерения */
.mc-measurement-input-row {
  display: flex;
  align-items: center;
  gap: 4px;
}

.mc-measurement-input {
  flex: 1;
  min-width: 0;
  padding: 8px 10px;
  font-size: 18px;
  font-weight: 600;
  text-align: center;
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 8px;
  background: var(--bg, #f9fafb);
  color: var(--text, #1f2937);
  transition: border-color 0.2s;
}

.mc-measurement-input:focus {
  outline: none;
  border-color: var(--acc, #3b82f6);
}

.mc-measurement-input::placeholder {
  color: var(--text-muted, #9ca3af);
  font-weight: 400;
}

.mc-measurement-unit {
  font-size: 14px;
  color: var(--text-muted, #6b7280);
  flex-shrink: 0;
}

/* Delta рядом с единицей измерения */
.mc-measurement-delta {
  font-size: 12px;
  font-weight: 500;
  padding: 2px 6px;
  border-radius: 6px;
  margin-left: 8px;
}

.mc-measurement-delta.down {
  color: #16a34a;
  background: rgba(22, 163, 74, 0.1);
}

.mc-measurement-delta.up {
  color: #dc2626;
  background: rgba(220, 38, 38, 0.1);
}

/* Строка со sparkline и датами */
.mc-measurement-spark-row {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 4px;
  padding: 4px 0;
}

.mc-measurement-spark-date {
  font-size: 10px;
  color: var(--text-muted, #9ca3af);
  white-space: nowrap;
  min-width: 36px;
}

.mc-measurement-spark-date:last-child {
  text-align: right;
}

.mc-measurement-sparkline {
  flex: 1;
  height: 24px;
  min-width: 60px;
}

.mc-measurement-no-data {
  font-size: 11px;
  color: var(--text-muted, #9ca3af);
  background: var(--bg, #f3f4f6);
  border-radius: 8px;
  padding: 6px 8px;
  text-align: center;
  margin-top: 2px;
}

.mc-measurement-warning {
  font-size: 12px;
  color: #dc2626;
  background: rgba(220, 38, 38, 0.08);
  border-radius: 8px;
  padding: 6px 8px;
}

/* Подсказка под полем (напр. "одна сторона") */
.mc-measurement-hint {
  font-size: 11px;
  color: var(--text-muted, #9ca3af);
  text-align: center;
}

/* Совет внизу */
.mc-measurements-tip {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 10px 12px;
  background: var(--bg, #f9fafb);
  border-radius: 10px;
  font-size: 12px;
  line-height: 1.4;
  color: var(--text-muted, #6b7280);
}

.mc-measurements-tip-icon {
  font-size: 14px;
  flex-shrink: 0;
}

/* Переключатель стороны замера */
.mc-measurements-side-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  background: var(--bg, #f9fafb);
  border-radius: 10px;
  margin-bottom: 8px;
}

.mc-measurements-side-label {
  font-size: 12px;
  color: var(--text-muted, #6b7280);
}

.mc-measurements-side-buttons {
  display: flex;
  gap: 4px;
}

.mc-measurements-side-btn {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 8px;
  background: white;
  color: var(--text-secondary, #6b7280);
  cursor: pointer;
  transition: all 0.15s ease;
}

.mc-measurements-side-btn:hover {
  background: var(--bg-hover, #f3f4f6);
}

.mc-measurements-side-btn.active {
  background: #3b82f6;
  border-color: #3b82f6;
  color: white;
}

/* ====== Dark Mode ====== */

[data-theme="dark"] .mc-measurements-info {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
  color: #93c5fd;
}

[data-theme="dark"] .mc-measurement-field {
  background: var(--color-slate-800);
  border-color: var(--color-slate-600);
}

[data-theme="dark"] .mc-measurement-label {
  color: var(--color-slate-100);
}

[data-theme="dark"] .mc-measurement-prev {
  color: var(--color-slate-400);
}

[data-theme="dark"] .mc-measurement-input {
  background: var(--color-slate-700);
  border-color: var(--color-slate-600);
  color: var(--color-slate-100);
}

[data-theme="dark"] .mc-measurement-input::placeholder {
  color: var(--color-slate-500);
}

[data-theme="dark"] .mc-measurement-unit {
  color: var(--color-slate-400);
}

[data-theme="dark"] .mc-measurement-progress {
  color: var(--color-slate-400);
}

[data-theme="dark"] .mc-measurement-no-data {
  color: var(--color-slate-500);
  background: var(--color-slate-700);
}

[data-theme="dark"] .mc-measurement-warning {
  color: #fca5a5;
  background: rgba(248, 113, 113, 0.12);
}

[data-theme="dark"] .mc-measurement-hint {
  color: var(--color-slate-500);
}

[data-theme="dark"] .mc-measurements-tip {
  background: var(--color-slate-700);
  color: var(--color-slate-400);
}

[data-theme="dark"] .mc-measurements-side-toggle {
  background: var(--color-slate-700);
}

[data-theme="dark"] .mc-measurements-side-label {
  color: var(--color-slate-400);
}

[data-theme="dark"] .mc-measurements-side-btn {
  background: var(--color-slate-600);
  border-color: var(--color-slate-500);
  color: var(--color-slate-300);
}

[data-theme="dark"] .mc-measurements-side-btn:hover {
  background: var(--color-slate-500);
}

[data-theme="dark"] .mc-measurements-side-btn.active {
  background: #3b82f6;
  border-color: #3b82f6;
  color: white;
}

/* ============================================================
   CYCLE STEP — Особый период (менструальный цикл)
   ============================================================ */

.mc-cycle-step {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px 0;
}

.mc-cycle-question {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #1f2937);
  text-align: center;
  margin-bottom: 4px;
}

.mc-cycle-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
  border-radius: 12px;
}

.mc-cycle-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mc-cycle-icon {
  font-size: 24px;
}

.mc-cycle-title {
  font-size: 16px;
  font-weight: 600;
  color: #831843;
}

.mc-cycle-toggle {
  padding: 8px 20px;
  border-radius: 20px;
  border: 2px solid #f9a8d4;
  background: white;
  color: #9d174d;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  min-height: 44px;
}

.mc-cycle-toggle:hover {
  background: #fdf2f8;
}

.mc-cycle-toggle.active {
  background: #ec4899;
  border-color: #ec4899;
  color: white;
}

.mc-cycle-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  background: #fdf2f8;
  border-radius: 12px;
}

.mc-cycle-day-label {
  font-size: 14px;
  font-weight: 500;
  color: #9d174d;
}

.mc-cycle-quick-days {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.mc-cycle-day-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid #f9a8d4;
  background: white;
  color: #9d174d;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.mc-cycle-day-btn:hover {
  background: #fce7f3;
  transform: scale(1.05);
}

.mc-cycle-day-btn.active {
  background: #ec4899;
  border-color: #ec4899;
  color: white;
  box-shadow: 0 2px 8px rgba(236, 72, 153, 0.3);
}

.mc-cycle-custom-day {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

.mc-cycle-custom-label {
  font-size: 13px;
  color: #9d174d;
}

.mc-cycle-input {
  width: 60px;
  padding: 8px 12px;
  border: 2px solid #f9a8d4;
  border-radius: 8px;
  font-size: 16px;
  text-align: center;
  color: #831843;
  background: white;
}

.mc-cycle-input:focus {
  outline: none;
  border-color: #ec4899;
  box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.2);
}

.mc-cycle-hint {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 12px;
  background: rgba(236, 72, 153, 0.1);
  border-radius: 8px;
  margin-top: 4px;
}

.mc-cycle-hint-icon {
  font-size: 14px;
}

.mc-cycle-hint-text {
  font-size: 13px;
  color: #9d174d;
}

.mc-cycle-disabled-hint {
  font-size: 13px;
  color: #9ca3af;
  text-align: center;
  padding: 8px;
}

/* Dark theme */
[data-theme="dark"] .mc-cycle-header {
  background: linear-gradient(135deg, #500724 0%, #831843 100%);
}

[data-theme="dark"] .mc-cycle-title {
  color: #fce7f3;
}

[data-theme="dark"] .mc-cycle-toggle {
  background: #1f2937;
  border-color: #9d174d;
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-toggle:hover {
  background: #374151;
}

[data-theme="dark"] .mc-cycle-toggle.active {
  background: #ec4899;
  border-color: #ec4899;
  color: white;
}

[data-theme="dark"] .mc-cycle-content {
  background: #1f2937;
}

[data-theme="dark"] .mc-cycle-day-label {
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-day-btn {
  background: #374151;
  border-color: #9d174d;
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-day-btn:hover {
  background: #4b5563;
}

[data-theme="dark"] .mc-cycle-day-btn.active {
  background: #ec4899;
  border-color: #ec4899;
  color: white;
}

[data-theme="dark"] .mc-cycle-input {
  background: #374151;
  border-color: #9d174d;
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-input:focus {
  border-color: #ec4899;
  box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.3);
}

[data-theme="dark"] .mc-cycle-hint {
  background: rgba(236, 72, 153, 0.15);
}

[data-theme="dark"] .mc-cycle-hint-text {
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-disabled-hint {
  color: #6b7280;
}

/* ============================================================
   CYCLE STEP v2 — Улучшенный UI для выбора дня
   ============================================================ */

/* Статус выбранного дня */
.mc-cycle-status {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
  border-radius: 12px;
}

.mc-cycle-status-main {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mc-cycle-status-day {
  font-size: 20px;
  font-weight: 700;
  color: #9d174d;
}

.mc-cycle-status-info {
  font-size: 13px;
  color: #be185d;
}

.mc-cycle-change-btn {
  padding: 8px 16px;
  background: white;
  border: 2px solid #f9a8d4;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  color: #9d174d;
  cursor: pointer;
  transition: all 0.2s;
}

.mc-cycle-change-btn:hover {
  background: #fce7f3;
}

/* Выпадашка выбора дня */
.mc-cycle-picker {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: #fdf2f8;
  border-radius: 12px;
  border: 1px solid #f9a8d4;
}

.mc-cycle-picker-title {
  font-size: 15px;
  font-weight: 600;
  color: #831843;
  text-align: center;
}

/* Быстрые опции */
.mc-cycle-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.mc-cycle-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: white;
  border: 2px solid #f9a8d4;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.mc-cycle-option:hover {
  background: #fce7f3;
  border-color: #ec4899;
}

.mc-cycle-option.active {
  background: #ec4899;
  border-color: #ec4899;
}

.mc-cycle-option.active .mc-cycle-option-label,
.mc-cycle-option.active .mc-cycle-option-hint {
  color: white;
}

.mc-cycle-option-day {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f9a8d4;
  border-radius: 50%;
  font-size: 16px;
  font-weight: 700;
  color: #831843;
}

.mc-cycle-option.active .mc-cycle-option-day {
  background: rgba(255, 255, 255, 0.3);
  color: white;
}

.mc-cycle-option-label {
  font-size: 15px;
  font-weight: 500;
  color: #831843;
  flex: 1;
}

.mc-cycle-option-hint {
  font-size: 12px;
  color: #9d174d;
  opacity: 0.7;
}

/* Точный выбор дня */
.mc-cycle-exact {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-top: 12px;
  border-top: 1px solid rgba(249, 168, 212, 0.3);
}

.mc-cycle-exact-label {
  font-size: 13px;
  color: #9d174d;
}

.mc-cycle-exact-days {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.mc-cycle-exact-btn {
  width: 36px;
  height: 36px;
  border: 2px solid #f9a8d4;
  background: white;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  color: #9d174d;
  cursor: pointer;
  transition: all 0.15s;
}

.mc-cycle-exact-btn:hover {
  background: #fce7f3;
  transform: scale(1.05);
}

.mc-cycle-exact-btn.active {
  background: #ec4899;
  border-color: #ec4899;
  color: white;
}

/* Подсказка об автозаполнении */
.mc-cycle-auto-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px;
  background: rgba(236, 72, 153, 0.1);
  border-radius: 8px;
}

.mc-cycle-auto-hint .mc-cycle-hint-text {
  font-size: 12px;
  color: #be185d;
}

/* Dark theme v2 */
[data-theme="dark"] .mc-cycle-status {
  background: linear-gradient(135deg, #500724 0%, #831843 100%);
}

[data-theme="dark"] .mc-cycle-status-day {
  color: #fce7f3;
}

[data-theme="dark"] .mc-cycle-status-info {
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-change-btn {
  background: #374151;
  border-color: #9d174d;
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-picker {
  background: #1f2937;
  border-color: #9d174d;
}

[data-theme="dark"] .mc-cycle-picker-title {
  color: #fce7f3;
}

[data-theme="dark"] .mc-cycle-option {
  background: #374151;
  border-color: #9d174d;
}

[data-theme="dark"] .mc-cycle-option:hover {
  background: #4b5563;
}

[data-theme="dark"] .mc-cycle-option-day {
  background: #9d174d;
  color: white;
}

[data-theme="dark"] .mc-cycle-option-label {
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-option-hint {
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-exact {
  border-top-color: rgba(157, 23, 77, 0.3);
}

[data-theme="dark"] .mc-cycle-exact-label {
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-exact-btn {
  background: #374151;
  border-color: #9d174d;
  color: #f9a8d4;
}

[data-theme="dark"] .mc-cycle-exact-btn:hover {
  background: #4b5563;
}

[data-theme="dark"] .mc-cycle-auto-hint {
  background: rgba(236, 72, 153, 0.15);
}

[data-theme="dark"] .mc-cycle-auto-hint .mc-cycle-hint-text {
  color: #f9a8d4;
}

/* ============================================================
   CYCLE CARD — Карточка особого периода в статистике
   ============================================================ */

.cycle-card {
  margin: 12px 0;
  padding: 16px;
  background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
  border-radius: 16px;
  border: 1px solid #f9a8d4;
}

.cycle-card__header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.cycle-card__icon {
  font-size: 20px;
}

.cycle-card__title {
  font-size: 15px;
  font-weight: 600;
  color: #831843;
}

.cycle-card__day {
  margin-left: auto;
  font-size: 13px;
  font-weight: 500;
  color: #be185d;
  background: rgba(236, 72, 153, 0.15);
  padding: 4px 10px;
  border-radius: 12px;
}

.cycle-card__info {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}

.cycle-card__badge {
  font-size: 12px;
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 8px;
  color: #9d174d;
}

/* Dark theme */
[data-theme="dark"] .cycle-card {
  background: linear-gradient(135deg, #500724 0%, #831843 100%);
  border-color: #be185d;
}

[data-theme="dark"] .cycle-card__title {
  color: #fce7f3;
}

[data-theme="dark"] .cycle-card__day {
  background: rgba(236, 72, 153, 0.3);
  color: #fbcfe8;
}

[data-theme="dark"] .cycle-card__badge {
  background: rgba(0, 0, 0, 0.3);
  color: #f9a8d4;
}

/* Режим редактирования и пустое состояние */
.cycle-card__header {
  cursor: pointer;
  transition: opacity 0.15s;
}

.cycle-card__header:hover {
  opacity: 0.85;
}

.cycle-card__edit-hint {
  margin-left: 4px;
  opacity: 0.5;
  font-size: 12px;
}

.cycle-card__header--empty {
  justify-content: flex-start;
}

.cycle-card__empty-hint {
  margin-left: auto;
  font-size: 13px;
  color: #be185d;
  opacity: 0.7;
}

.cycle-card__edit {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(249, 168, 212, 0.3);
}

.cycle-card__days {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.cycle-card__day-btn {
  width: 40px;
  height: 40px;
  border: 2px solid #f9a8d4;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  color: #be185d;
  cursor: pointer;
  transition: all 0.15s;
}

.cycle-card__day-btn:hover {
  background: rgba(249, 168, 212, 0.3);
  transform: scale(1.05);
}

.cycle-card__day-btn--active {
  background: #ec4899;
  color: white;
  border-color: #ec4899;
}

.cycle-card__actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.cycle-card__clear-btn,
.cycle-card__cancel-btn {
  padding: 6px 12px;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  cursor: pointer;
  transition: opacity 0.15s;
}

.cycle-card__clear-btn {
  background: rgba(239, 68, 68, 0.15);
  color: #dc2626;
}

.cycle-card__cancel-btn {
  background: rgba(0, 0, 0, 0.05);
  color: #6b7280;
}

.cycle-card__clear-btn:hover,
.cycle-card__cancel-btn:hover {
  opacity: 0.8;
}

/* Dark theme editing */
[data-theme="dark"] .cycle-card__edit {
  border-top-color: rgba(249, 168, 212, 0.2);
}

[data-theme="dark"] .cycle-card__day-btn {
  background: rgba(0, 0, 0, 0.3);
  border-color: #be185d;
  color: #f9a8d4;
}

[data-theme="dark"] .cycle-card__day-btn:hover {
  background: rgba(190, 24, 93, 0.4);
}

[data-theme="dark"] .cycle-card__day-btn--active {
  background: #be185d;
  color: white;
}

[data-theme="dark"] .cycle-card__empty-hint {
  color: #f9a8d4;
}

[data-theme="dark"] .cycle-card__clear-btn {
  background: rgba(239, 68, 68, 0.25);
  color: #f87171;
}

[data-theme="dark"] .cycle-card__cancel-btn {
  background: rgba(255, 255, 255, 0.1);
  color: #9ca3af;
}