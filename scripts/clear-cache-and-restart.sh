#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ dev-—Å–µ—Ä–≤–µ—Ä–∞
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞ HMR –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ Vite..."

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É 3001
echo "‚èπÔ∏è  –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É 3001..."
lsof -ti:3001 | xargs kill -9 2>/dev/null || echo "‚úì –ü–æ—Ä—Ç 3001 —Å–≤–æ–±–æ–¥–µ–Ω"

# 2. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à Vite
echo "üóëÔ∏è  –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ Vite..."
rm -rf apps/web/.vite
rm -rf apps/web/node_modules/.vite
rm -rf node_modules/.vite

# 3. –û–±–Ω–æ–≤–∏—Ç—å timestamp —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ timestamp —Ñ–∞–π–ª–æ–≤..."
touch apps/web/heys_day_v12.js
touch apps/web/heys_storage_supabase_v1.js
touch apps/web/heys_core_v12.js

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
echo "üöÄ –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞..."
pnpm dev:web

echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001 –∏ –Ω–∞–∂–º–∏—Ç–µ Cmd+Shift+R –¥–ª—è –∂—ë—Å—Ç–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏"
