#!/usr/bin/env node

/**
 * Simple Service Worker Copy Script
 * –ö–æ–ø–∏—Ä—É–µ—Ç Service Worker —Ñ–∞–π–ª –≤ –Ω—É–∂–Ω—ã–µ –º–µ—Å—Ç–∞
 */

import { copyFile, mkdir } from 'fs/promises';
import { dirname } from 'path';
import { fileURLToPath } from 'url';

const __dirname = dirname(fileURLToPath(import.meta.url));
const ROOT_DIR = dirname(__dirname);

const SOURCE = `${ROOT_DIR}/heys-sw.js`;
const DESTINATIONS = [
  `${ROOT_DIR}/apps/web/public/heys-sw.js`,
];

async function copySW() {
  console.log('üì¶ Copying Service Worker...');
  
  for (const dest of DESTINATIONS) {
    try {
      await mkdir(dirname(dest), { recursive: true });
      await copyFile(SOURCE, dest);
      console.log(`‚úÖ Copied to: ${dest.replace(ROOT_DIR, '.')}`);
    } catch (error) {
      console.error(`‚ùå Failed to copy to ${dest}:`, error.message);
    }
  }
  
  console.log('‚úÖ Service Worker copy complete!');
}

copySW().catch(console.error);
