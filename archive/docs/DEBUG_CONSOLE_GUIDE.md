# üêõ Debug Console –¥–ª—è Telegram Mini App

## –ß—Ç–æ —ç—Ç–æ?

**–í–∏–∑—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø—Ä—è–º–æ –≤ Telegram mini-app,
—Ä–∞–±–æ—Ç–∞–µ—Ç **–±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö DevTools**.

–†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É: –≤ Telegram WebApp –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `console.log()`, –Ω–æ —Ç–µ–ø–µ—Ä—å –≤—Å–µ
–ª–æ–≥–∏ –≤–∏–¥–Ω—ã –ø—Ä—è–º–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ!

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π

```bash
./start-tg-mini-debug.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç API —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 4001
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç API –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç mini-app –Ω–∞ –ø–æ—Ä—Ç—É 3002
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç environment settings

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (2 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)

**–¢–µ—Ä–º–∏–Ω–∞–ª 1: API Server**

```bash
pnpm run dev:api
# –ñ–¥–µ–º: üöÄ HEYS API Server started successfully!
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2: Mini App**

```bash
pnpm run dev:tg-mini
# –û—Ç–∫—Ä—ã–≤–∞–µ–º: http://localhost:3002
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# API health check
curl http://localhost:4001/health

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
# {"status":"OK","timestamp":"...","port":4001}
```

---

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Telegram

### –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ mini-app –≤ Telegram ‚Üí @heys_curator_bot
2. –ù–∞–∂–º–∏—Ç–µ **–∏–∫–æ–Ω–∫—É üêõ** –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞
3. –ö–æ–Ω—Å–æ–ª—å —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç—Å—è —Å–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞

### –ó–∞–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å:

- –ù–∞–∂–º–∏—Ç–µ **√ó** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –ø–∞–Ω–µ–ª–∏

### –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏:

- –ù–∞–∂–º–∏—Ç–µ **Clear** –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## üìã –¢–∏–ø—ã –ª–æ–≥–æ–≤

| –ò–∫–æ–Ω–∫–∞ | –£—Ä–æ–≤–µ–Ω—å | –¶–≤–µ—Ç      | –ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è             |
| ------ | ------- | --------- | ---------------------------- |
| ‚ÑπÔ∏è     | INFO    | –°–∏–Ω–∏–π     | HTTP –∑–∞–ø—Ä–æ—Å—ã, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è  |
| ‚úÖ     | SUCCESS | –ó–µ–ª—ë–Ω—ã–π   | –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, 200 OK |
| ‚ö†Ô∏è     | WARN    | –û—Ä–∞–Ω–∂–µ–≤—ã–π | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è               |
| ‚ùå     | ERROR   | –ö—Ä–∞—Å–Ω—ã–π   | Network errors, 4xx/5xx      |

---

## üîç –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

### HTTP –∑–∞–ø—Ä–æ—Å—ã:

```json
{
  "url": "http://localhost:4001/api/telegram/auth/verify",
  "method": "POST",
  "hasAuth": true,
  "useMocks": false
}
```

### HTTP –æ—Ç–≤–µ—Ç—ã:

```json
{
  "url": "...",
  "status": 200,
  "statusText": "OK"
}
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:

```json
{
  "curatorId": "telegram-1393964759",
  "initDataLength": 487
}
```

### –û—à–∏–±–∫–∏:

```json
{
  "error": "Failed to fetch",
  "url": "http://localhost:4001/api/telegram/auth/verify"
}
```

---

## üõ†Ô∏è –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
src/utils/debugLogger.ts       # –õ–æ–≥–∏–∫–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤
src/components/DebugPanel.tsx  # UI –∫–æ–Ω—Å–æ–ª–∏
src/api/httpClient.ts          # HTTP –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
src/App.tsx                    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### API:

```typescript
import { debugLogger } from './utils/debugLogger';

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
debugLogger.info('–°–æ–æ–±—â–µ–Ω–∏–µ', { data: 'optional' });
debugLogger.success('–£—Å–ø–µ—Ö', { userId: 123 });
debugLogger.warn('–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ');
debugLogger.error('–û—à–∏–±–∫–∞', { error: 'details' });

// –û—á–∏—Å—Ç–∫–∞
debugLogger.clear();

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
const unsubscribe = debugLogger.subscribe((logs) => {
  console.log('–ù–æ–≤—ã–µ –ª–æ–≥–∏:', logs);
});
```

### –õ–∏–º–∏—Ç—ã:

- **–ú–∞–∫—Å–∏–º—É–º –ª–æ–≥–æ–≤:** 50 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ `React.useState`

---

## üêõ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
üîµ INFO | 16:06:12
–ù–∞—á–∏–Ω–∞–µ–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é Telegram
{ initDataLength: 487 }

üîµ INFO | 16:06:12
HTTP Request
{ url: "http://localhost:4001/api/...", method: "POST" }

‚úÖ SUCCESS | 16:06:13
HTTP 200
{ status: 200, statusText: "OK" }

‚úÖ SUCCESS | 16:06:13
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
{ curatorId: "telegram-1393964759" }
```

### –ü—Ä–∏–º–µ—Ä 2: –û—à–∏–±–∫–∞ "Failed to fetch"

```
üîµ INFO | 16:06:12
HTTP Request
{ url: "http://localhost:4001/api/...", method: "POST" }

‚ùå ERROR | 16:06:15
HTTP Error
{ error: "Failed to fetch" }
```

**–ü—Ä–∏—á–∏–Ω–∞:** API —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚Üí –∑–∞–ø—É—Å—Ç–∏ `pnpm run dev:api`

---

## üìö Troubleshooting

### –ö–æ–Ω—Å–æ–ª—å –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å:**

1. `<DebugPanel />` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `App.tsx` ‚úÖ
2. HMR –æ–±–Ω–æ–≤–∏–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
3. –ò–∫–æ–Ω–∫–∞ üêõ –≤–∏–¥–Ω–∞ –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞

### –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å:**

1. `debugLogger.info()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. `httpClient.ts` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `debugLogger`
3. –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ TypeScript

### –ö–æ–Ω—Å–æ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∞–º–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª–∏–∫ –≤–Ω–µ –ø–∞–Ω–µ–ª–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–Ω—Å–æ–ª—å.  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫—É **√ó** –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è.

---

## üéØ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –ª–æ–≥–∞:

```typescript
// debugLogger.ts
type LogLevel = 'info' | 'warn' | 'error' | 'success' | 'debug'; // + debug

// DebugPanel.tsx
const LEVEL_COLORS = {
  // ...
  debug: '#9C27B0',
};
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é:

```typescript
const [filter, setFilter] = useState<LogLevel | 'all'>('all');
const filteredLogs =
  filter === 'all' ? logs : logs.filter((log) => log.level === filter);
```

### –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤:

```typescript
function exportLogs() {
  const data = JSON.stringify(debugLogger.getLogs(), null, 2);
  const blob = new Blob([data], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  // Telegram.WebApp.openLink(url); –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ clipboard
}
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ë–µ–∑ DevTools** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º Telegram
- ‚úÖ **Real-time** ‚Äî –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** ‚Äî –∫–ª–∏–∫ –Ω–∞ –ª–æ–≥ ‚Üí full JSON
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ **–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π** ‚Äî ~200 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º—ã–π** ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [TELEGRAM_AUTHORIZATION_DEBUG.md](./TELEGRAM_AUTHORIZATION_DEBUG.md) ‚Äî –ø–æ–ª–Ω—ã–π
  –∞—É–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [TELEGRAM_MINI_APP_PRODUCTION.md](./TELEGRAM_MINI_APP_PRODUCTION.md) ‚Äî
  production deployment
- [apps/tg-mini/README.md](./apps/tg-mini/README.md) ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ mini-app

---

## üì¶ –§–∞–π–ª—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```
apps/tg-mini/src/
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ debugLogger.ts          # 120 —Å—Ç—Ä–æ–∫ - –ª–æ–≥–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ DebugPanel.tsx          # 180 —Å—Ç—Ä–æ–∫ - UI –∫–æ–Ω—Å–æ–ª–∏
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ httpClient.ts           # + debugLogger –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ App.tsx                     # + <DebugPanel />
```

**–ò—Ç–æ–≥–æ:** ~350 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π debug –∫–æ–Ω—Å–æ–ª–∏! üéâ
