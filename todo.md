# TODO ‚Äî HEYS v2

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-11-29 | üìä [DATA_MODEL_REFERENCE.md](./docs/DATA_MODEL_REFERENCE.md)

```bash
pnpm dev                                    # Dev ‚Üí localhost:3001
pnpm type-check && pnpm lint && pnpm build  # –ü—Ä–æ–≤–µ—Ä–∫–∞
```

---

## ‚úÖ –§–ê–ó–ê 0: –í—ã–ø–æ–ª–Ω–µ–Ω–æ

| # | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|---|--------|--------|
| 0.1 | threat-detection ‚Äî —É–¥–∞–ª–µ–Ω–æ 3000 —Å—Ç—Ä–æ–∫ + mock bridge | ‚úÖ |
| 0.2 | –°—Å—ã–ª–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã | ‚úÖ |
| 0.3 | Toast v2 –ø—Ä–æ–º–ø—Ç ‚Üí archive | ‚úÖ |

---

## ‚ö†Ô∏è –§–ê–ó–ê 0.x: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Advice Phase 2

| # | –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –°—Ç–∞—Ç—É—Å |
|---|--------|-------|--------|
| 0.7 | **Advice helpers** ‚Äî `getPersonalBestStreak()`, throttle, clientId fix | ‚Äî | ‚úÖ –£–∂–µ –≤ –∫–æ–¥–µ! |
| 0.8 | ~~**–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å base prompt**~~ | ‚Äî | ‚úÖ –ü–µ—Ä–µ–º–µ—â—ë–Ω |
| 0.9 | **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å script order** ‚Äî heys_day_utils/hooks/pickers –≤ index.html | ‚Äî | ‚úÖ –ü–æ—Ä—è–¥–æ–∫ –û–ö |

> ‚úÖ **Helpers P0.7-P0.9 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** –≤ `heys_advice_v1.js` (—Å—Ç—Ä–æ–∫–∏ 2027-2073). Phase 2 –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å!

---

## üü¢ –ë–´–°–¢–†–´–ï (~5-30 –º–∏–Ω)

| # | –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –§–∞–π–ª –ø—Ä–æ–º–ø—Ç–∞ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç |
|---|--------|-------|--------------|------------|
| 1 | **Weekly Insights** ‚Äî weekly_protein_avg, weekly_fiber_avg, best_day_of_week | 30 –º–∏–Ω | ‚Äî | Phase 2 |
| 2 | ~~Personalized Advice~~ | ‚Äî | ‚Äî | ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: `iron_reminder`, `age_protein`, `young_sleep` |

---

## üü° –°–†–ï–î–ù–ò–ï (~45-90 –º–∏–Ω)

| # | –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –§–∞–π–ª –ø—Ä–æ–º–ø—Ç–∞ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç |
|---|--------|-------|--------------|------------|
| 3 | **Advice Module Phase 2** ‚Äî +26 —Å–æ–≤–µ—Ç–æ–≤ ‚Üí 103 | 2-3 —á | [—Ñ–∞–π–ª](./docs/tasks/2025-11-29-advice-module-phase2.md) | –§–∞–∑–∞ 0.x |
| 4 | **Quick Presets** ‚Äî –∫–Ω–æ–ø–∫–∏ [50][100][150] –ø–æ–¥ input –≥—Ä–∞–º–º–æ–≤ | 30 –º–∏–Ω | [—Å–º. Phase 2 –≤ meal-ui](./docs/tasks/2025-11-26-meal-ui-mobile-v2.md) | ‚Äî |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: Mobile Meal Cards v2.7 ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ Quick Presets

---

## üü† –ë–û–õ–¨–®–ò–ï (~2-4 —á–∞—Å–∞)

| # | –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –§–∞–π–ª –ø—Ä–æ–º–ø—Ç–∞ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç |
|---|--------|-------|--------------|------------|
| 5 | ~~CSS Variables Migration~~ | ‚Äî | ‚Äî | üî¥ –û–≤–µ—Ä–∫–∏–ª–ª ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–æ |
| 6 | **Dark mode –ø–æ–ª–Ω—ã–π** ‚Äî 3 —Ä–µ–∂–∏–º–∞, toggle | 2-3 —á | [–≤ –∞—Ä—Ö–∏–≤–µ](./docs/tasks/archive/2025-11-28-dark-mode-implementation.md) | ‚Äî |
| 7 | **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ day_v12.js** ‚Äî Phases 5-9 | ‚ùå –û–¢–õ–û–ñ–ï–ù–û | [—Ñ–∞–π–ª](./docs/tasks/2025-11-28-day-v12-refactoring.md) | –°–∏–ª—å–Ω–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: Phases 2-4 refactoring ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (-383 —Å—Ç—Ä–æ–∫–∏), Phases 5-9 —Ç—Ä–µ–±—É—é—Ç Context API

---

## üî¥ –ë–û–õ–¨–®–ò–ï –§–ò–ß–ò (–±—É–¥—É—â–µ–µ)

### üéÆ Gamification (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫)
| # | –§–∏—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç | WOW |
|---|------|-----------|------------|-----|
| 1 | **Weekly Challenges** ("3 –¥–Ω—è –∫–ª–µ—Ç—á–∞—Ç–∫–∞ ‚â•100%") | M | Advice Phase 2 | ‚≠ê‚≠ê‚≠ê |
| 2 | **Streak Rewards** ‚Äî –±–æ–Ω—É—Å—ã –∑–∞ 7/14/30 –¥–Ω–µ–π | S | ‚Äî | ‚≠ê‚≠ê |
| 3 | **Badges/–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è** | M | Challenges | ‚≠ê‚≠ê‚≠ê |
| 4 | **XP/–£—Ä–æ–≤–Ω–∏** | M | Badges | ‚≠ê‚≠ê |
| 5 | **AI-—Å–æ–≤–µ—Ç—ã (GPT)** ‚Äî —Ä–µ—Ü–µ–ø—Ç—ã | L | Backend | ‚≠ê‚≠ê‚≠ê‚≠ê |

### üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
| Free | Premium $5/–º–µ—Å | B2B $15/–º–µ—Å |
|------|----------------|-------------|
| –ë–∞–∑–æ–≤—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ | Cloud sync | –ö–∞–±–∏–Ω–µ—Ç –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞ |
| 30 –¥–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–∏ | –ë–µ–∑–ª–∏–º–∏—Ç | –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| 10 —Å–æ–≤–µ—Ç–æ–≤/–¥–µ–Ω—å | –í—Å–µ 105 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–æ—Ä–º |
| ‚Äî | AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã |
| ‚Äî | –≠–∫—Å–ø–æ—Ä—Ç PDF | –ß–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–æ–º |

### üöÄ Quick Wins (–≤—ã—Å–æ–∫–∏–π ROI)
| –§–∏—á–∞ | –í—Ä–µ–º—è | WOW | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-------|-----|------------|
| **–°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤** | 2-3 —á | ‚≠ê‚≠ê‚≠ê‚≠ê | Open Food Facts API |
| **–®–∞–±–ª–æ–Ω—ã –ø—Ä–∏—ë–º–æ–≤** | 1-2 —á | ‚≠ê‚≠ê‚≠ê | "–ú–æ–π –∑–∞–≤—Ç—Ä–∞–∫" |
| **Quick presets** | 30 –º–∏–Ω | ‚≠ê‚≠ê | [50][100][150] –ø–æ–¥ input |
| **Voice input** | 2 —á | ‚≠ê‚≠ê‚≠ê | "–¥–æ–±–∞–≤—å 100–≥ —Ç–≤–æ—Ä–æ–≥–∞" |
| **Share achievement** | 30 –º–∏–Ω | ‚≠ê‚≠ê‚≠ê | –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è streak" ‚Äî viral |
| **Onboarding flow** | 1-2 —á | ‚≠ê‚≠ê‚≠ê‚≠ê | 3 —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ |
| **–§–æ—Ç–æ –µ–¥—ã** | 1-2 —á | ‚≠ê‚≠ê‚≠ê‚≠ê | –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –ø—Ä–∏—ë–º—É ‚Äî –¥–Ω–µ–≤–Ω–∏–∫ –∂–∏–≤–æ–π |

### üîß –¢–µ—Ö–¥–æ–ª–≥
| –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|-----------|------------|
| Service Worker + IndexedDB | M | Offline-first PWA |
| Playwright UI —Ç–µ—Å—Ç—ã | L | –ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ UI |
| ~~CSS :where() —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥~~ | ‚Äî | ‚ùå –û–≤–µ—Ä–∫–∏–ª–ª |
| ~~–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤~~ | ‚Äî | ‚ùå –¢–æ–ª—å–∫–æ –ø—Ä–∏ >1000 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ |
| ~~CSS Variables 176 hex~~ | ‚Äî | ‚ùå –û–≤–µ—Ä–∫–∏–ª–ª ‚Äî Dark mode —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —ç—Ç–æ–≥–æ |

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10)

- [x] **Advice FAB + Panel** ‚Äî üí° –∫–Ω–æ–ø–∫–∞, swipe-to-dismiss, 10 –≤–∞—É-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- [x] **Advice Module Expansion** ‚Äî +21 —Å–æ–≤–µ—Ç ‚Üí 77
- [x] **Toast v2** ‚Äî —Å–µ–∑–æ–Ω–Ω—ã–µ, correlations, emotional ‚úÖ
- [x] **Training Modal** ‚Äî 2-step, wheel picker
- [x] **–£–¥–∞–ª–µ–Ω—ã dead packages** ‚Äî ~2500 —Å—Ç—Ä–æ–∫
- [x] **Mobile Meal Cards** ‚Äî –±–∞–∑–æ–≤—ã–π UI
- [x] **CSS Refactoring** ‚Äî -173 —Å—Ç—Ä–æ–∫–∏
- [x] **–ö–∞—Ä—Ç–æ—á–∫–∏-–º–µ—Ç—Ä–∏–∫–∏** ‚Äî 5 hero
- [x] **Mobile UX Phase 3**
- [x] **Code Quality Cleanup**

<details>
<summary>üìú –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫</summary>

- Structural Refactoring, Mobile UX Foundation, PWA Setup
- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã —É–¥–∞–ª–µ–Ω—ã (~350 —Å—Ç—Ä–æ–∫)
- Root cleanup (77‚Üí5 MD), batch-—Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã
- levels.config.js, @heys/shared/ui/web fixes
- heys_day_utils.js, heys_day_hooks.js, heys_day_pickers.js

</details>

---

## üìä –°—Ç–∞—Ç—É—Å

| –ú–µ—Ç—Ä–∏–∫–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|-----------|
| pnpm type-check | ‚úÖ PASS |
| pnpm lint | ‚úÖ PASS |
| pnpm build | ‚úÖ PASS |
| –°–æ–≤–µ—Ç–æ–≤ –≤ –º–æ–¥—É–ª–µ | **77** |

---

## üîç –ê—É–¥–∏—Ç 2025-11-29

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–§–∞–∑–∞ 0)
| # | –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 1 | threat-detection 3000 —Å—Ç—Ä–æ–∫ | ‚úÖ –£–¥–∞–ª–µ–Ω–æ + mock bridge |
| 2 | –°—Å—ã–ª–∫–∏ –≤ todo.md | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 3 | Toast v2 –ø—Ä–æ–º–ø—Ç | ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ |

### ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–æ (–§–∞–∑–∞ 0.x)
| # | –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 4 | Advice helpers P0.7-P0.9 | ‚úÖ –£–∂–µ –≤ –∫–æ–¥–µ (lines 2027-2073) |
| 5 | –î—É–±–ª–∏–∫–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ advice-module.md | ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ |
| 6 | Personalized Advice —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | ‚úÖ –£–¥–∞–ª–µ–Ω–æ –∏–∑ —Å–ø–∏—Å–∫–∞ |
| 7 | Mobile Meal Cards v2.7 –≥–æ—Ç–æ–≤–æ | ‚úÖ –û—Å—Ç–∞–ª–∏—Å—å Quick Presets |
| 8 | Day v12 refactoring Phases 5-9 | ‚ùå –û–¢–õ–û–ñ–ï–ù–û (—Å–≤—è–∑–Ω–æ—Å—Ç—å) |
| 9 | CSS Variables 176 hex | ‚ùå –û–í–ï–†–ö–ò–õ–õ |

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **Advice Phase 2** = –≥–ª–∞–≤–Ω—ã–π WOW (77 ‚Üí 103 —Å–æ–≤–µ—Ç–æ–≤)
2. **Weekly Challenges** = —Å–ª–µ–¥—É—é—â–∏–π WOW –ø–æ—Å–ª–µ Phase 2
3. **–°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤** = killer UX feature
4. **Onboarding flow** = x2 retention –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **Share achievement** = viral growth (streak sharing)

---

üìÅ [docs/tasks/](./docs/tasks/) ‚Äî –ø—Ä–æ–º–ø—Ç—ã | [copilot-instructions.md](./.github/copilot-instructions.md) ‚Äî –ø—Ä–∞–≤–∏–ª–∞
