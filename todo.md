# TODO ‚Äî –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ HEYS v2

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-26  
**–°—Ç–∞—Ç—É—Å**: –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç codebase –∑–∞–≤–µ—Ä—à—ë–Ω

---

## ‚ö° QUICK ACTIONS

```bash
pnpm dev                                    # Dev —Å–µ—Ä–≤–µ—Ä ‚Üí localhost:3001
pnpm type-check && pnpm lint && pnpm build  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```

---

## üî¥ –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ heys_day_v12.js ‚Äî Phases 5-9 (modals, trainings, meals, stats)

**–§–∞–π–ª**:
[2025-11-28-day-v12-refactoring.md](./docs/tasks/2025-11-28-day-v12-refactoring.md)  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ heys_day_v12.js (—Å–µ–π—á–∞—Å 3057 —Å—Ç—Ä–æ–∫) ‚Äî –≤—ã–Ω–µ—Å—Ç–∏ modals, trainings, meals, stats  
**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**: Phases 1-4 (utils 267, hooks 188, pickers 160 —Å—Ç—Ä–æ–∫) ‚Äî PR #13 merged  
**–û—Å—Ç–∞–ª–æ—Å—å**: Phases 5-9 —Ç—Ä–µ–±—É—é—Ç Context API –∏–ª–∏ props-drilling  
**–í—Ä–µ–º—è**: ~3-4 —á–∞—Å–∞

### 2. –†–µ–¥–∏–∑–∞–π–Ω UI –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏

**–§–∞–π–ª**:
[2025-11-26-meal-ui-redesign.md](./docs/tasks/2025-11-26-meal-ui-redesign.md)  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (7 –∫–æ–ª–æ–Ω–æ–∫ –≤–º–µ—Å—Ç–æ 24), –∏—Å–ø—Ä–∞–≤–∏—Ç—å
layout –ø–æ–∏—Å–∫–∞, —É–ª—É—á—à–∏—Ç—å –º–æ–±–∏–ª—å–Ω—ã–π UX  
**–í—Ä–µ–º—è**: ~45 –º–∏–Ω—É—Ç

---

## üü† –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### 1. CSS Variables Migration

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å 176 hardcoded hex —Ü–≤–µ—Ç–æ–≤ ‚Üí CSS var(--name)  
**Why**: Prerequisite –¥–ª—è dark mode –∏ :where() —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞  
**–í—Ä–µ–º—è**: ~2-3 —á–∞—Å–∞

### 2. CSS :where() —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–Ω–∏–∑–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å ~200 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤, —É–±—Ä–∞—Ç—å ~150 !important  
**Why**: –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π ‚Äî —Ç—Ä–µ–±—É–µ—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
**Depends on**: CSS Variables Migration  
**–í—Ä–µ–º—è**: ~2-4 —á–∞—Å–∞

### 3. Dark mode ‚Äî –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª**: [2025-11-28-dark-mode-implementation.md](./docs/tasks/2025-11-28-dark-mode-implementation.md)  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –¢—Ä–∏ —Ä–µ–∂–∏–º–∞ (light/dark/auto), pill-style toggle, CSS transitions, –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ tone-–∫–∞—Ä—Ç–æ—á–µ–∫  
**Depends on**: ‚Äî  
**–í—Ä–µ–º—è**: ~45-60 –º–∏–Ω—É—Ç

---

## üü° –ò–î–ï–ò –ù–ê –ë–£–î–£–©–ï–ï

> –†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å

### üí∞ SaaS –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

| Free | Premium (~$5/–º–µ—Å) |
|------|------------------|
| –ë–∞–∑–æ–≤—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ | Cloud sync –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ |
| –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ | –°–µ–º–µ–π–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (–¥–æ 5 —á–µ–ª–æ–≤–µ–∫) |
| 30 –¥–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–∏ | –ë–µ–∑–ª–∏–º–∏—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è |
| ‚Äî | AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∏—Ç–∞–Ω–∏—é |
| ‚Äî | –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF/Excel |
| ‚Äî | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç–∞–º–∏ |

### üë©‚Äç‚öïÔ∏è B2B ‚Äî –ö–∞–±–∏–Ω–µ—Ç –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞ (~$15/–º–µ—Å)
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–Ω–µ–≤–Ω–∏–∫–æ–≤ –ø–∏—Ç–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–æ—Ä–º –ö–ë–ñ–£
- –ß–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### üì± Telegram Mini App
- –£–∂–µ –µ—Å—Ç—å `apps/tg-mini/` ‚Äî –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
- –ü–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Telegram Payments (–±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏ App Store)
- –í–∏—Ä–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Telegram –∫–∞–Ω–∞–ª—ã

### üöÄ Quick wins
- **–°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤** ‚Äî Open Food Facts API (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
- **–®–∞–±–ª–æ–Ω—ã –ø—Ä–∏—ë–º–æ–≤** ‚Äî "–ú–æ–π –∑–∞–≤—Ç—Ä–∞–∫" –æ–¥–Ω–∏–º —Ç–∞–ø–æ–º
- **iOS –≤–∏–¥–∂–µ—Ç** ‚Äî —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –ö–ë–ñ–£ (—á–µ—Ä–µ–∑ Capacitor)

### üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–†–∞–∑–±–∏—Ç—å heys_day_v12.js** ‚Äî 2250 —Å—Ç—Ä–æ–∫ ‚Üí MealCard.js, TimePicker.js, GramsPicker.js
- **Inline React ‚Üí Preact + htm** ‚Äî –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- **Offline-first** ‚Äî Service Worker + IndexedDB –≤–º–µ—Å—Ç–æ localStorage
- **UI —Ç–µ—Å—Ç—ã** ‚Äî Playwright –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### üìã –†–∞–Ω–µ–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
- **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤** ‚Äî –µ—Å–ª–∏ –ª–∞–≥–∏ –ø—Ä–∏ >50 –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
- **Swipe –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏** ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–ø—Ä–æ—Å—è—Ç
- **Pull-to-Refresh** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥–æ—Ç–æ–≤ (`heys_pull_refresh.js`), –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **File/Remote logging** ‚Äî –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç backend –¥–ª—è –ª–æ–≥–æ–≤

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

- [x] Phase 1: Structural Refactoring (–≤—ã–Ω–æ—Å –∫–æ–¥–∞ –∏–∑ HTML)
- [x] Phase 2: Mobile UX Foundation (CSS Touch Improvements)
- [x] Phase 5: PWA Setup
- [x] Mobile UX: –§–∞–∑—ã 1-2 ‚Äî –Ω–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π layout
- [x] Mobile UX: Steps 1-7 ‚Äî —Ç–∞–±–ª–∏—Ü—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –∫–Ω–æ–ø–∫–∏, –º–æ–¥–∞–ª–∫–∏
- [x] **–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã** ‚Äî —É–±—Ä–∞–Ω–æ ~350 —Å—Ç—Ä–æ–∫ ASCII-–∫–∞—Ä—Ç –∏–∑ 10
      —Ñ–∞–π–ª–æ–≤
- [x] **Mobile UX: Phase 3 ‚Äî Modern Polish** ‚Äî scroll-behavior, focus-visible,
      selection
- [x] **–ö–∞—Ä—Ç–æ—á–∫–∏-–º–µ—Ç—Ä–∏–∫–∏ + –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–≤–æ–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** ‚Äî 5 hero-–∫–∞—Ä—Ç–æ—á–µ–∫
      (–ó–∞—Ç—Ä–∞—Ç—ã, –¶–µ–ª—å, –°—ä–µ–¥–µ–Ω–æ, –û—Å—Ç–∞–ª–æ—Å—å, –î–µ—Ñ–∏—Ü–∏—Ç) + transitions + –∫–ª–∏–∫–∏ + —Ç—Ä–µ–Ω–¥
      –≤–µ—Å–∞
      ([2025-11-25-day-metrics-cards.md](./docs/tasks/archive/2025-11-25-day-metrics-cards.md))
- [x] **Code Quality Cleanup** ‚Äî 10 ESLint warnings fixed, critical type errors
      resolved.
      ([2025-11-25-code-quality-cleanup.md](./docs/tasks/2025-11-25-code-quality-cleanup.md))
      _Note: @heys/ui type-check issue remains (non-blocking)_
- [x] **Cleanup –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** ‚Äî –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ 77‚Üí5 MD —Ñ–∞–π–ª–æ–≤ (–æ—Ç—á—ë—Ç—ã –≤
      `docs/reports/`, –ø–ª–∞–Ω—ã –≤ `archive/docs/`)
- [x] **Batch-—Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã** ‚Äî —É–±—Ä–∞–Ω—ã –≤—Å–µ .bat –¥—É–±–ª–∏–∫–∞—Ç—ã (6 —Ñ–∞–π–ª–æ–≤)
- [x] **TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–±—Ä–∞–Ω—ã** ‚Äî 3 TODO –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ NOTE –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã
- [x] **levels.config.js ESM/CJS fix** ‚Äî —É–¥–∞–ª—ë–Ω CommonJS –±–ª–æ–∫, –æ—Å—Ç–∞–≤–ª–µ–Ω —á–∏—Å—Ç—ã–π
      ESM
- [x] **@heys/shared lint fix** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 4 import/order –æ—à–∏–±–∫–∏
- [x] **@heys/ui type-check fix** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã tsconfig paths –∏ type –æ—à–∏–±–∫–∏
- [x] **CSS Refactoring ‚Äî main.css –æ—á–∏—Å—Ç–∫–∞** ‚Äî —É–¥–∞–ª–µ–Ω–æ 173 —Å—Ç—Ä–æ–∫–∏ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞,
      256‚Üí242 !important
      ([archive/2025-11-26-css-refactoring.md](./docs/tasks/archive/2025-11-26-css-refactoring.md))
- [x] **@heys/web type-check fix** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 3 type –æ—à–∏–±–∫–∏ (browser-logger,
      dynamic-imports)

---

## üìä –ê–£–î–ò–¢ CODEBASE (2025-11-25)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –°—Ç–∞—Ç—É—Å      | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                       |
| ----------------- | ----------- | -------------------------------- |
| `apps/web/`       | ‚úÖ OK       | Legacy v12, production-ready     |
| `apps/mobile/`    | ‚ö†Ô∏è Disabled | –í pnpm-workspace –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω |
| `apps/tg-mini/`   | ‚ö†Ô∏è Disabled | Telegram Mini App –æ—Ç–∫–ª—é—á–µ–Ω       |
| `packages/*` (10) | ‚úÖ OK       | TypeScript, —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç   |
| `archive/`        | ‚úÖ OK       | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω        |

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

| –ú–µ—Ç—Ä–∏–∫–∞           | –†–µ–∑—É–ª—å—Ç–∞—Ç               |
| ----------------- | ----------------------- |
| `pnpm type-check` | ‚úÖ PASS                 |
| `pnpm lint`       | ‚úÖ PASS (1651 warnings) |
| `pnpm build`      | ‚úÖ PASS                 |
| `pnpm test:run`   | ‚úÖ PASS                 |

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è            | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| -------------------- | ---------- |
| MD —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–Ω–µ    | 5 ‚úÖ       |
| console.log –≤ legacy | ~20        |
| TODO –≤ packages      | 0 ‚úÖ       |
| Batch-–¥—É–±–ª–∏–∫–∞—Ç—ã      | 0 ‚úÖ       |

---

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- [copilot-instructions.md](./.github/copilot-instructions.md) ‚Äî –ø—Ä–∞–≤–∏–ª–∞
  —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [TASK_PROMPT_TEMPLATE.md](./docs/TASK_PROMPT_TEMPLATE.md) ‚Äî —à–∞–±–ª–æ–Ω –¥–ª—è
  –ø—Ä–æ–º–ø—Ç–æ–≤
- [docs/tasks/](./docs/tasks/) ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∑–∞–¥–∞—á
